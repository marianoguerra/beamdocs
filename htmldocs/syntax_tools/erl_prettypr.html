<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>erl_prettypr</h1><h1>erl_prettypr</h1><p>Pretty printing of abstract Erlang syntax trees.</p><p>Pretty printing of abstract Erlang syntax trees.This module is a front end to the pretty-printing library module
<strong>prettypr</strong>, for text formatting of abstract syntax trees defined by
the module <strong>erl_syntax</strong>.</p><h2>DATA TYPES</h2><a name="types"></a><dl><dt><a name="type-context"></a>context()</dt><dd> <p>A representation of the current context of the
pretty-printer. Can be accessed in hook functions.
</p> </dd><dt><a name="type-hook"></a>hook() = (<a href="#type-syntaxTree">syntaxTree()</a>, <a href="#type-context">context()</a>, Continuation) -&gt; <a href="./prettypr#type-document">prettypr:document()</a></dt><dd> <ul><li><p>Continuation = (<a href="#type-syntaxTree">syntaxTree()</a>, <a href="#type-context">context()</a>) -&gt; <a href="./prettypr#type-document">prettypr:document()</a></p></li></ul> <p>A call-back function for user-controlled formatting. See <a href="#format-2">format/2</a>.
</p> </dd><dt><a name="type-syntaxTree"></a>syntaxTree() = <a href="./erl_syntax#type-syntaxTree">erl_syntax:syntaxTree()</a></dt><dd> <p>An abstract syntax tree. See the <a href="erl_syntax">erl_syntax</a> module for
details.
</p> </dd></dl><h1>Functions</h1><h2>best(Tree::) -&gt; empty |</h2><p>Equivalent to best(Tree, []). </p><a name="best-1"></a><p>Equivalent to <a href="#best-2">best(Tree, [])</a>.</p><h2>best(Tree::, Options::[term()]) -&gt; empty |</h2><p>Creates a fixed "best" abstract layout for a syntax tree.</p><a name="best-2"></a><p>Creates a fixed "best" abstract layout for a syntax tree. This
is similar to the <strong>layout/2</strong> function, except that here, the final
layout has been selected with respect to the given options. The atom
<strong>empty</strong> is returned if no such layout could be produced. For
information on the options, see the <strong>format/2</strong> function.
</p><p><em>See also:</em> <a href="#best-1">best/1</a>, <a href="#format-2">format/2</a>, <a href="#layout-2">layout/2</a>, <a href="./prettypr#best-3">prettypr:best/3</a>.</p><h2>format(Tree::) -&gt; string()</h2><p>Equivalent to format(Tree, []). </p><a name="format-1"></a><p>Equivalent to <a href="#format-2">format(Tree, [])</a>.</p><h2>format(Tree::, Options::[term()]) -&gt; string()</h2><p>Prettyprint-formats an abstract Erlang syntax tree as text.</p><a name="format-2"></a><p>Prettyprint-formats an abstract Erlang syntax tree as text. For
example, if you have a <strong>.beam</strong> file that has been compiled with
<strong>debug_info</strong>, the following should print the source code for the
module (as it looks in the debug info representation):
</p><pre>     {ok,{_,[{abstract_code,{_,AC}}]}} =
             beam_lib:chunks("myfile.beam",[abstract_code]),
     io:put_chars(erl_prettypr:format(erl_syntax:form_list(AC)))</pre><p>
Available options:
</p><dl><dt>{hook, none | <a href="#type-hook">hook()</a>}</dt><dd><p>Unless the value is <strong>none</strong>, the given function is called
for each node whose list of annotations is not empty; see below
for details. The default value is <strong>none</strong>.</p></dd><dt>{paper, integer()}</dt><dd><p>Specifies the preferred maximum number of characters on any
line, including indentation. The default value is 80.</p></dd><dt>{ribbon, integer()}</dt><dd><p>Specifies the preferred maximum number of characters on any
line, not counting indentation. The default value is 65.</p></dd><dt>{user, term()}</dt><dd><p>User-specific data for use in hook functions. The default
value is <strong>undefined</strong>.</p></dd><dt>{encoding, epp:source_encoding()}</dt><dd><p>Specifies the encoding of the generated file.</p></dd></dl><p>
A hook function (cf. the <a href="#type-hook">hook()</a> type) is passed the current
syntax tree node, the context, and a continuation. The context can be
examined and manipulated by functions such as <strong>get_ctxt_user/1</strong> and
<strong>set_ctxt_user/2</strong>. The hook must return a "document" data structure
(see <a href="#layout-2">layout/2</a> and <a href="#best-2">best/2</a>); this may be constructed in
part or in whole by applying the continuation function. For example,
the following is a trivial hook:
</p><pre>      fun (Node, Ctxt, Cont) -&gt; Cont(Node, Ctxt) end</pre><p>
which yields the same result as if no hook was given.
The following, however:
</p><pre>      fun (Node, Ctxt, Cont) -&gt;
          Doc = Cont(Node, Ctxt),
          prettypr:beside(prettypr:text("&lt;b&gt;"),
                          prettypr:beside(Doc,
                                          prettypr:text("&lt;/b&gt;")))
      end</pre><p>
will place the text of any annotated node (regardless of the
annotation data) between HTML "boldface begin" and "boldface end"
tags.
</p><p><em>See also:</em> <a href="erl_syntax">erl_syntax</a>, <a href="#best-2">best/2</a>, <a href="#format-1">format/1</a>, <a href="#get_ctxt_user-1">get_ctxt_user/1</a>, <a href="#layout-2">layout/2</a>, <a href="#set_ctxt_user-2">set_ctxt_user/2</a>.</p><h2>get_ctxt_hook(Ctxt::) -&gt;</h2><p>Returns the hook function field of the prettyprinter context.</p><a name="get_ctxt_hook-1"></a><p>Returns the hook function field of the prettyprinter context.</p><p><em>See also:</em> <a href="#set_ctxt_hook-2">set_ctxt_hook/2</a>.</p><h2>get_ctxt_linewidth(Ctxt::) -&gt; integer()</h2><p>Returns the line widh field of the prettyprinter context.</p><a name="get_ctxt_linewidth-1"></a><p>Returns the line widh field of the prettyprinter context.</p><p><em>See also:</em> <a href="#set_ctxt_linewidth-2">set_ctxt_linewidth/2</a>.</p><h2>get_ctxt_paperwidth(Ctxt::) -&gt; integer()</h2><p>Returns the paper widh field of the prettyprinter context.</p><a name="get_ctxt_paperwidth-1"></a><p>Returns the paper widh field of the prettyprinter context.</p><p><em>See also:</em> <a href="#set_ctxt_paperwidth-2">set_ctxt_paperwidth/2</a>.</p><h2>get_ctxt_precedence(Ctxt::) -&gt; integer()</h2><p>Returns the operator precedence field of the prettyprinter context.</p><a name="get_ctxt_precedence-1"></a><p>Returns the operator precedence field of the prettyprinter
context.
</p><p><em>See also:</em> <a href="#set_ctxt_precedence-2">set_ctxt_precedence/2</a>.</p><h2>get_ctxt_user(Ctxt::) -&gt; term()</h2><p>Returns the user data field of the prettyprinter context.</p><a name="get_ctxt_user-1"></a><p>Returns the user data field of the prettyprinter context.</p><p><em>See also:</em> <a href="#set_ctxt_user-2">set_ctxt_user/2</a>.</p><h2>layout(Tree::) -&gt;</h2><p>Equivalent to layout(Tree, []). </p><a name="layout-1"></a><p>Equivalent to <a href="#layout-2">layout(Tree, [])</a>.</p><h2>layout(Tree::, Options::[term()]) -&gt;</h2><p>Creates an abstract document layout for a syntax tree.</p><a name="layout-2"></a><p>Creates an abstract document layout for a syntax tree. The
result represents a set of possible layouts (cf. module <strong>prettypr</strong>).
For information on the options, see <a href="#format-2">format/2</a>; note, however,
that the <strong>paper</strong> and <strong>ribbon</strong> options are ignored by this function.</p><p>This function provides a low-level interface to the pretty printer,
returning a flexible representation of possible layouts, independent
of the paper width eventually to be used for formatting. This can be
included as part of another document and/or further processed
directly by the functions in the <strong>prettypr</strong> module, or used in a hook
function (see <strong>format/2</strong> for details).
</p><p><em>See also:</em> <a href="prettypr">prettypr</a>, <a href="#format-2">format/2</a>, <a href="#layout-1">layout/1</a>.</p><h2>set_ctxt_hook(Ctxt::, Hook::) -&gt;</h2><p>Updates the hook function field of the prettyprinter context.</p><a name="set_ctxt_hook-2"></a><p>Updates the hook function field of the prettyprinter context.</p><p><em>See also:</em> <a href="#get_ctxt_hook-1">get_ctxt_hook/1</a>.</p><h2>set_ctxt_linewidth(Ctxt::, W::integer()) -&gt;</h2><p>Updates the line widh field of the prettyprinter context.</p><a name="set_ctxt_linewidth-2"></a><p>Updates the line widh field of the prettyprinter context.</p><p>Note: changing this value (and passing the resulting context to a
continuation function) does not affect the normal formatting, but may
affect user-defined behaviour in hook functions.
</p><p><em>See also:</em> <a href="#get_ctxt_linewidth-1">get_ctxt_linewidth/1</a>.</p><h2>set_ctxt_paperwidth(Ctxt::, W::integer()) -&gt;</h2><p>Updates the paper widh field of the prettyprinter context.</p><a name="set_ctxt_paperwidth-2"></a><p>Updates the paper widh field of the prettyprinter context.</p><p>Note: changing this value (and passing the resulting context to a
continuation function) does not affect the normal formatting, but may
affect user-defined behaviour in hook functions.
</p><p><em>See also:</em> <a href="#get_ctxt_paperwidth-1">get_ctxt_paperwidth/1</a>.</p><h2>set_ctxt_precedence(Ctxt::, Prec::integer()) -&gt;</h2><p>Updates the operator precedence field of the prettyprinter context.</p><a name="set_ctxt_precedence-2"></a><p>Updates the operator precedence field of the prettyprinter
context. See the <a href="./erl_parse">erl_parse(3)</a> module for operator precedences.
</p><p><em>See also:</em> <a href="./erl_parse">erl_parse(3)</a>, <a href="#get_ctxt_precedence-1">get_ctxt_precedence/1</a>.</p><h2>set_ctxt_user(Ctxt::, X::term()) -&gt;</h2><p>Updates the user data field of the prettyprinter context.</p><a name="set_ctxt_user-2"></a><p>Updates the user data field of the prettyprinter context.</p><p><em>See also:</em> <a href="#get_ctxt_user-1">get_ctxt_user/1</a>.</p><h1>Authors</h1><span class="aname">Richard Carlsson</span><span class="email">carlsson.richard@gmail.com</span></body></html>