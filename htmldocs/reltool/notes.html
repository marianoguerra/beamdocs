<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>Reltool Release Notes</h1><p>This document describes the changes made to the Reltool system
from version to version. The intention of this document is to
list all incompatibilities as well as all enhancements and
bugfixes for every release of Reltool. Each release of Reltool
thus constitutes one section in this document. The title of each
section is the version number of Reltool.</p><h2>Reltool 0.7.8</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Reltool would earlier erroneously split paths like
<strong>"c:\foo"</strong> into <strong>["c","\foo"]</strong> when reading the
<strong>$ERL_LIBS</strong> variable on windows. This is now
corrected.</p> <p>
Own Id: OTP-15454</p> </li></ul><h2>Reltool 0.7.7</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Improved documentation.</p> <p>
Own Id: OTP-15190</p> </li></ul><h2>Reltool 0.7.6</h2><h2>Improvements and New Features</h2><ul><li> <p> Calls to <strong>erlang:get_stacktrace()</strong> are removed.
</p> <p>
Own Id: OTP-14861</p> </li></ul><h2>Reltool 0.7.5</h2><h2>Improvements and New Features</h2><ul><li> <p>
Files generated by <strong>release_handler</strong> and
<strong>reltool</strong>, which might contain Unicode characters,
are now encoded as UTF-8 and written with format "~tp" or
"~ts". If the file is to be read by
<strong>file:consult/1</strong>, an encoding comment is added.</p> <p>
Own Id: OTP-14463</p> </li></ul><h2>Reltool 0.7.4</h2><h2>Improvements and New Features</h2><ul><li> <p> The User's Guide examples are updated after removal
of support for Dets files created with Erlang/OTP R7 and
earlier. </p> <p>
Own Id: OTP-14422 Aux Id: OTP-13830 </p> </li></ul><h2>Reltool 0.7.3</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed xml issues in old release notes</p> <p>
Own Id: OTP-14269</p> </li></ul><h2>Reltool 0.7.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Dependencies specified in .app files would earlier only
be followed for applications that are included in a 'rel'
spec in the reltool config. For other applications, only
xref would decide the dependencies.</p> <p>
Some dependency chains would even be missed for
applications that are included in a 'rel' spec in the
reltool config. E.g.</p> <ul><li>Application x has y as included application, and y in turn has z as included application. Then z is not included. </li><li>Application x has y in its 'applications' tag in the .app file, and y in turn has z as included application. Then z is not included.</li></ul> <p>
These bugs are now corrected.</p> <p>
Own Id: OTP-11993</p> </li></ul><h2>Reltool 0.7.1</h2><h2>Improvements and New Features</h2><ul><li> <p> Modify the code as motivated by a change of the
Erlang Parser (<strong>undefined</strong> is no longer
automatically inserted to the type of record fields
without an initializer). </p> <p>
Own Id: OTP-13033 Aux Id: OTP-12719 </p> </li></ul><h2>Reltool 0.7</h2><h2>Improvements and New Features</h2><ul><li> <p>
Change license text from Erlang Public License to Apache
Public License v2</p> <p>
Own Id: OTP-12845</p> </li></ul><h2>Reltool 0.6.6</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed a minor typo in an error message from
reltool_server.</p> <p>
Own Id: OTP-11977</p> </li></ul><h2>Reltool 0.6.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
When adding a regexp to a filter in reltool using
{add,Regexp}, and the existing regexp was undefined,
reltool would crash since it got an improper list. This
has been corrected. (Thanks to HÃ¥kan Mattsson)</p> <p>
Own Id: OTP-11591</p> </li><li> <p>
Adapted reltool test server to common test usage of
tc_status. (Note that this code is not used by OTP daily
test runs.) (Thanks to HÃ¥kan Mattsson)</p> <p>
Own Id: OTP-11592</p> </li><li> <p>
Application upgrade (appup) files are corrected for the
following applications: </p> <p>
<strong>asn1, common_test, compiler, crypto, debugger, dialyzer, edoc, eldap, erl_docgen, et, eunit, gs, hipe, inets, observer, odbc, os_mon, otp_mibs, parsetools, percept, public_key, reltool, runtime_tools, ssh, syntax_tools, test_server, tools, typer, webtool, wx, xmerl</strong></p> <p>
A new test utility for testing appup files is added to
test_server. This is now used by most applications in
OTP.</p> <p>
(Thanks to Tobias Schlager)</p> <p>
Own Id: OTP-11744</p> </li></ul><h2>Reltool 0.6.4.1</h2><h2>Improvements and New Features</h2><ul><li> <p>
The encoding of the <strong>notes.xml</strong> file has been
changed from latin1 to utf-8 to avoid future merge
problems.</p> <p>
Own Id: OTP-11310</p> </li></ul><h2>Reltool 0.6.4</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix receive support in erl_eval with a BEAM module.
Thanks to Anthony Ramine.</p> <p>
Own Id: OTP-11137</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Reltool used to fail if an application was mentioned in
the config file which was not found in the file system,
even if the application was explicitly excluded in the
config. This has been changed and will only produce a
warning. If the application is not explicitly excluded it
will still cause reltool to fail. Thanks to HÃ¥kan
Mattsson!</p> <p>
Own Id: OTP-10988</p> </li><li> <p>
Fix possibly "not owner" error while file copy with
reltool. Thanks to Alexey Saltanov.</p> <p>
Own Id: OTP-11099</p> </li></ul><h2>Reltool 0.6.3</h2><h2>Improvements and New Features</h2><ul><li> <p>
Some updates are made to reltool for handling unicode.</p> <p>
Own Id: OTP-10781</p> </li></ul><h2>Reltool 0.6.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <ul><li> If <strong>incl_cond</strong> was set to <strong>derived</strong> on module level, then reltool_server would crash with a <strong>case_clause</strong>. This has been corrected. <strong>incl_cond</strong> on module level now overwrites <strong>mod_cond</strong> on app or sys level as described in the documentation. </li><li> If a <strong>rel</strong> spec in the reltool config does not contain all applications that are listed as <strong>{applications,Applications}</strong> in a <strong>.app</strong> file, then these applications are autmatically added when creating the <strong>.rel</strong> file. For 'included_applications', the behaviour was not the same. I.e. if a <strong>rel</strong> spec in the reltool config did not contain all applications that are listed as <strong>{included_applications,InclApplications}</strong> in a <strong>.app</strong> file, then reltool would fail with reason "Undefined applications" when creating the <strong>.rel</strong> file. This has been corrected, so both <strong>applications</strong> and <strong>included_applications</strong> are now automatically added if not already in the <strong>rel</strong> spec. </li><li> The <strong>rel</strong> specification now dictates the order in which included and used applications (specified in the <strong>.app</strong> file as <strong>included_applications</strong> and <strong>applications</strong> respectively) are loaded/started by the boot file. If the applications are not specified in the <strong>rel</strong> spec, then the order from the <strong>.app</strong> file is used. This was a bug earlier reported on systools, and is now also implemented in reltool. </li><li> Instead of only looking at the directory name, reltool now first looks for a <strong>.app</strong> file in order to figure out the name of an application. </li></ul> <p>
Own Id: OTP-10012 Aux Id: kunagi-171 [82] </p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p> Some examples overflowing the width of PDF pages have
been corrected. </p> <p>
Own Id: OTP-10665</p> </li></ul><h2>Reltool 0.6.1</h2><h2>Improvements and New Features</h2><ul><li> <p>
A new sys level configuration parameter
<strong>{excl_lib,otp_root}</strong> is added. When this is set,
the target system will not contain anything from
<strong>$OTP_ROOT</strong>. It will only contain a releases
directory with rel, script and boot files, and a lib
directory with applications found outside of
<strong>$OTP_ROOT</strong> (i.e. "your own" applications).</p> <p>
Own Id: OTP-9743</p> </li></ul><h2>Reltool 0.6</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> Miscellaneous corrections: <ul><li> Start of reltool GUI would sometimes crash with a badmatch in reltool_sys_win:do_init. This has been corrected. </li><li> Minor corrections of documentation and type specifications of app() and mod() are done. </li><li> If a module name is duplicated in an app file reltool would return an error. This is now changed to a warning. </li><li> Reltool would earlier not necessarily keep the order of applications as listed in the rel specification in the configuration. This has been corrected. </li><li> Reltool would earlier set the default for included applications to an empty list if it was not set in the rel specification in the configuration. This was correct according to sasl/systools documentation, but not according to sasl/systools implementation. We decided to change the documentation and reltool to use the value of included_applications from the .app file as default instead of the empty list, since this seems more intuitive and since systools always has done the same. </li><li> The value of included applications in the rel specification in the configuration did not overwrite included_applications in the .app file if it was set to an empty list. This has been corrected. </li><li> Reltool would earlier add load instructions in the script/boot files for ALL modules in the ebin directory of an application even if mod_cond was set to app (include only modules listed in the .app file). This has been corrected. </li><li> Reltool would earlier add start instructions in the script/boot file for included applications. This has been corrected - included applications shall only be loaded since the including application is responsible for starting them. </li><li> Status bar now indicates that reltool is working (Processing libraries...) for all configuration changes, and when generating target system. </li><li> Title of dependecies column in app and mod window is changed from "Modules used by others" to "Modules using this". </li></ul> <p>
Own Id: OTP-9792</p> </li><li> <p>
Configuration changes via the GUI had a few bugs related
to error handling, rollback and undo. A major re-write of
the reltool_server has been done in order to align the
way reltool_server updates and uses its state and tables
for all different kinds of configuration change. </p> <p>
All configuration changes (except undo) now cause a
re-read of the file system, meaning that if something has
changed in the file system it will be reflected in the
result of the configuration change.</p> <p>
When loading a new configuration file via the GUI, the
old configuration is now completely scratched, and only
the new is valid.</p> <p>
*** POTENTIAL INCOMPATIBILITY ***</p> <p>
Own Id: OTP-9794</p> </li><li> <p>
Some bug fixes related to the handling of escripts:</p> <ul><li> Reltool could not handle escripts with inlined applications. This has been corrected. Inlined applications will be visible in the GUI, but not possible to include/exclude separately. </li><li> Loading a config which contains an escript via the GUI menu did not produce the same result as when using the same configuration at reltool start. Paths, version and label could differ. This has been corrected. </li><li> Loading config with same escript (source) twice caused reltool to add same module twice. This has been corrected. </li><li> Loading config with same escript (inlined beam) twice caused reltool to fail saying module is included by two different applications. This has been corrected. </li><li> Loading config which in addition to an existing escript also adds another escript, for which the name sorts before the existing one, would cause reltool to fail saying "Application name clash". This has been corrected. </li></ul> <p>
Own Id: OTP-9968</p> </li><li> <p>
Reltool would sometimes generate a .app file containing
<strong>{start_phases,undefined}</strong>, which would cause an
exception in systools at parse time. This has been
corrected so reltool now omits the <strong>start_phases</strong>
entry if the value is <strong>undefined</strong>. (Thanks to Juan
Jose Comellas)</p> <p>
In order to align with reltool, sasl will also omit
<strong>start_phases</strong> entries with value <strong>undefined</strong>
in .script files.</p> <p>
Own Id: OTP-10003</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
A warning list is added to the sys window of the reltool
GUI. This list will continuously show all warnings
produced by the current configuration.</p> <p>
Own Id: OTP-9967</p> </li><li> <p>
As a way of specifying one specific version of an
application, the following configuration parameter is
added on application level:</p> <p>
{lib_dir,Dir}, Dir = string()</p> <p>
This can be useful if the parent directory of the
application directory is not suitable to use as a lib dir
on system level.</p> <p>
Own Id: OTP-9977</p> </li></ul><h2>Reltool 0.5.7.1</h2><h2>Improvements and New Features</h2><ul><li> <p>
Added recommendation about <strong>RootDir</strong> parameter to
<strong>reltool:eval_target_spec/3</strong>.</p> <p>
Own Id: OTP-9742</p> </li></ul><h2>Reltool 0.5.7</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
If a module was duplicated in the library directories
visible to reltool, and the configuration did not point
out which file to use, then reltool:start would always
fail. A pop-up is added which asks if you want to
continue with a safe and minimal configuration.</p> <p>
Own Id: OTP-9383</p> </li><li> <p>
wx would sometimes crash due to an empty radiobox on the
'releases' tab of the system window. This radiobox is
removed, and replaced by a listbox which will always
contain at least kernel and stdlib applications.</p> <p>
Own Id: OTP-9384</p> </li></ul><h2>Reltool 0.5.6</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
The system level option <strong>app_files</strong> is documented to
allow the values <strong>keep | strip | all</strong>, but it only
allowed <strong>keep</strong>. This is corrected.</p> <p>
Own Id: OTP-9135</p> </li><li> <p>
Allow the same module name in multiple applications
visible to reltool, as long as all but one of the
applications/modules are explicitely excluded. (Thanks to
Andrew Gopienko and Jay Nelson)</p> <p>
Own Id: OTP-9229</p> </li></ul><h2>Reltool 0.5.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
The reltool module contained two seriously erroneous
specs which caused bogus warnings when dialyzing reltool
and some correct code of users. These were fixed (specs
for start_link/1 and eval_server/3)</p> <p>
- Code cleanups and simplifications - Fix a bug in the
calculation of circular dependencies - Eliminate two
dialyzer warnings - Put files alphabetically</p> <p>
Own Id: OTP-9120</p> </li></ul><h2>Reltool 0.5.4</h2><h2>Improvements and New Features</h2><ul><li> <p>
Added function <strong>zip:foldl/3</strong> to iterate over zip
archives.</p> <p>
Added functions to create and extract escripts. See
<strong>escript:create/2</strong> and <strong>escript:extract/2</strong>.</p> <p>
The undocumented function <strong>escript:foldl/3</strong> has been
removed. The same functionality can be achieved with the
more flexible functions <strong>escript:extract/2</strong> and
<strong>zip:foldl/3</strong>.</p> <p>
Record fields has been annotated with type info. Source
files as been adapted to fit within 80 chars and trailing
whitespace has been removed.</p> <p>
Own Id: OTP-8521</p> </li><li> <p>A new escript, called <strong>reltool</strong>, has been
introduced in order to simplify the usage of the reltool
application from makefiles.</p> <p>The handling of applications included in releases has
been improved. Applications that are required to be
started before other applications in a release are now
automatically included in the release. The Kernel
and STDLIB applications are always included as
they are mandatory.</p> <p>Applications that are (explicitly or implicitly)
included in a release are now automatically included as
if they were explicitly included with the incl_cond
flag.</p> <p>A new <strong>embedded_app_type</strong> option has been
introduced. It is intended to be used for embedded
systems where all included applications must be loaded
from the boot script, as these systems does not utilize
dynamic code loading. If <strong>embedded_app_type </strong> is set
to something else than <strong>undefined</strong>, all included
applications will be included in both the release as well
as in the boot script. If the <strong>profile</strong> is
<strong>embedded</strong> the <strong>embedded_app_type</strong> option
defaults to <strong>load</strong>.</p> <p>A new function called <strong>reltool:get_status/1</strong> has
been introduced. It returns status about the
configuration in the server.</p> <p>The API functions that may take <strong>PidOrOptions</strong> as
input and actually gets <strong>Options</strong> does now print out
warnings.</p> <p>The internal error handling has been improved. For
example <strong>{error,Reason}</strong> is always returned in case
of errors even when the server dies.</p> <p><strong>app</strong> and <strong>appup</strong> files has been added as
well as a corresponding test suite.</p> <p>Various cleanups has been made in the code and in the
documentation.</p> <p>
Own Id: OTP-8590</p> </li></ul><h2>Reltool 0.5.3</h2><h2>Improvements and New Features</h2><ul><li> <p>
Removed spurious documentation files.</p> <p>
Own Id: OTP-8057</p> </li></ul><h2>Reltool 0.5.2</h2><h2>Improvements and New Features</h2><ul><li> <p>
The documentation is now built with open source tools
(xsltproc and fop) that exists on most platforms. One
visible change is that the HTML frames are removed.</p> <p>
Own Id: OTP-8254</p> </li></ul><h2>Reltool 0.5.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
In the new release of Reltool (0.5) there is a severe bug
that may cause your source files to be deleted. The bug
is triggered when you generate a target system WITH
archive files AND your library directories are given with
absolute paths. (Library directories are given with the
ERL_LIBS environment variable or with the lib_dirs
configuration parameter.)</p> <p>
Own Id: OTP-8199</p> </li></ul><h2>Reltool 0.5</h2><h2>Improvements and New Features</h2><ul><li> <p>
The tool is still experimental. Feedback is appreciated. </p> <p>
Major improvements of the target system generation has
been performed. Now it is possible to generate a
relocatable target system that does not need to be
re-installed if it is moved to a new location. Archive
files are automatically generated. A detailed
specification of the target system can be generated
without actually creating the target system. Relocatable
escripts are put in the bin directory of the target
system. etc. etc.</p> <p>
Some new functions has been introduced in the
<strong>reltool</strong> module: <strong>start/1, start_link/1, get_config/3, get_target_spec/1 and eval_target_spec/3</strong>.</p> <p>
Some new configuration parameters has been introduced:
<strong>profile, incl_sys_filters, excl_sys_filters, incl_app_filters, excl_app_filters, incl_archive_filters, excl_archive_filters, archive_opts, escript and relocatable</strong>.</p> <p>
Some parameters have been obsoleted and given new
semantics: <strong>incl_erts_dirs (incl_sys_filters), excl_erts_dirs (excl_sys_filters), incl_app_dirs (incl_app_filters), excl_app_dirs (excl_app_filters) and escripts (escript).</strong></p> <p>
*** POTENTIAL INCOMPATIBILITY ***</p> <p>
Own Id: OTP-7949</p> </li></ul><h2>Known Bugs and Problems</h2><ul><li> <p>
The application is experimental. Feedback is appreciated.</p> </li></ul><h2>Reltool 0.2.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
The tool crashed when rel, script and boot files were
generated via the GUI. This has been fixed.</p> <p>
Own Id: OTP-7999</p> </li></ul><h2>Reltool 0.2.1</h2><h2>Improvements and New Features</h2><ul><li> <p>
Minor GUI fixes</p> <p>
Own Id: OTP-7840</p> </li></ul><h2>Reltool 0.2</h2><h2>Improvements and new features</h2><p>This is the first (experimental) release of Reltool.</p><h2>Known Bugs and Problems</h2><ul><li> <p>
The application is experimental.</p> </li></ul></body></html>