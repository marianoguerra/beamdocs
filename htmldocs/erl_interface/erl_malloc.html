<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>erl_malloc</h1><h1>erl_malloc</h1><p>Memory allocation functions.</p><p>This module provides functions for allocating and deallocating
memory.</p><h1>Functions</h1><h2>erl_alloc_eterm(etype):ETERM *</h2><p>Allocate an ETERM structure.</p><ul><li><span class="v">unsigned char etype;</span></li></ul><p>Allocates an <strong>(ETERM)</strong> structure.</p><p>Specify <strong>etype</strong> as one of the following
constants:</p><ul><li><strong>ERL_INTEGER</strong> </li><li><strong>ERL_U_INTEGER</strong> (unsigned integer) </li><li><strong>ERL_ATOM</strong> </li><li><strong>ERL_PID</strong> (Erlang process identifier) </li><li><strong>ERL_PORT</strong> </li><li><strong>ERL_REF</strong> (Erlang reference) </li><li><strong>ERL_LIST</strong> </li><li><strong>ERL_EMPTY_LIST</strong> </li><li><strong>ERL_TUPLE</strong> </li><li><strong>ERL_BINARY</strong> </li><li><strong>ERL_FLOAT</strong> </li><li><strong>ERL_VARIABLE</strong> </li><li><strong>ERL_SMALL_BIG</strong> (bignum) </li><li><strong>ERL_U_SMALL_BIG</strong> (bignum) </li></ul><p><strong>ERL_SMALL_BIG</strong> and
<strong>ERL_U_SMALL_BIG</strong> are for
creating Erlang <strong>bignums</strong>, which can contain integers
of any size. The size of an integer in Erlang is machine-dependent,
but any integer &gt; 2^28 requires a bignum.</p><h2>erl_eterm_release(void):void</h2><p>Clear the ETERM freelist.</p><p>Clears the freelist, where blocks are placed when they are
released by <strong>erl_free_term()</strong> and
<strong>erl_free_compound()</strong>.</p><h2>erl_eterm_statistics(allocated, freed):void</h2><p>Report term allocation statistics.</p><ul><li><span class="v">long *allocated;</span></li><li><span class="v">long *freed;</span></li></ul><p>Reports term allocation statistics.</p><p><strong>allocated</strong> and <strong>freed</strong> are
initialized to
contain information about the fix-allocator used to allocate
<strong>ETERM</strong> components.</p><ul><li> <p><strong>allocated</strong> is the number of blocks currently
allocated to <strong>ETERM</strong> objects.</p> </li><li> <p><strong>freed</strong> is the length of the freelist, where
blocks are placed when they are
released by <strong>erl_free_term()</strong> and
<strong>erl_free_compound()</strong>.</p> </li></ul><h2>erl_free(ptr):void</h2><p>Free some memory.</p><ul><li><span class="v">void *ptr;</span></li></ul><p>Calls the standard
<strong>free()</strong> function.</p><h2>erl_free_array(array, size):void</h2><p>Free an array of ETERM structures.</p><ul><li><span class="v">ETERM **array;</span></li><li><span class="v">int size;</span></li></ul><p>Frees an array of Erlang terms.</p><ul><li><strong>array</strong> is an array of ETERM* objects.</li><li><strong>size</strong> is the number of terms in the array. </li></ul><h2>erl_free_compound(t):void</h2><p>Free an array of ETERM structures.</p><ul><li><span class="v">ETERM *t;</span></li></ul><p>Normally it is the programmer's responsibility to free each
Erlang term that has been returned from any of the
<strong>Erl_Interface</strong> functions. However, as many of the
functions that build new Erlang terms in fact share objects
with other existing terms, it can be difficult for the
programmer to maintain pointers to all such terms to
free them individually.</p><p><strong>erl_free_compound()</strong> recursively frees all of the
subterms associated with a specified Erlang term, regardless of
whether we are still holding pointers to the subterms.</p><p>For an example, see section
<a href="./ei_users_guide#building_terms_and_patterns">Building Terms and Patterns</a>
in the User's Guide.</p><h2>erl_free_term(t):void</h2><p>Free an ETERM structure.</p><ul><li><span class="v">ETERM *t;</span></li></ul><p>Frees an Erlang term.</p><h2>erl_malloc(size):void</h2><p>Allocate some memory.</p><ul><li><span class="v">long size;</span></li></ul><p>Calls the standard
<strong>malloc()</strong> function.</p></body></html>