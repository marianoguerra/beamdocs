<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>Erlang Top</h1><h2>Introduction</h2><p>Erlang Top, <strong>etop</strong>, is a tool for presenting information
about Erlang processes similar to the information presented by
<strong>top</strong> in UNIX.
</p><h2>Getting Started</h2><p>Start Erlang Top in either of the following ways:</p><ul><li>Use script <strong>etop</strong>.</li><li>Use batch file <strong>etop.bat</strong>, for example,  <strong>etop -node tiger@durin</strong>.</li></ul><h2>Output</h2><p>The output from Erlang Top is as follows:</p><pre><code class="">
========================================================================================
 tiger@durin                                                               13:40:32
 Load:  cpu         0               Memory:  total        1997    binary         33
        procs     197                        processes       0    code          173
        runq      135                        atom         1002    ets            95

Pid            Name or Initial Func    Time    Reds  Memory    MsgQ Current Function
----------------------------------------------------------------------------------------
&lt;127.23.0&gt;     code_server                0   59585   78064       0 gen_server:loop/6   
&lt;127.21.0&gt;     file_server_2              0   36380   44276       0 gen_server:loop/6   
&lt;127.2.0&gt;      erl_prim_loader            0   27962    3740       0 erl_prim_loader:loop
&lt;127.9.0&gt;      kernel_sup                 0    6998    4676       0 gen_server:loop/6   
&lt;127.17.0&gt;     net_kernel                62    6018    3136       0 gen_server:loop/6   
&lt;127.0.0&gt;      init                       0    4156    4352       0 init:loop/1         
&lt;127.16.0&gt;     auth                       0    1765    1264       0 gen_server:loop/6   
&lt;127.18.0&gt;     inet_tcp_dist:accept       0     660    1416       0 prim_inet:accept0/2 
&lt;127.5.0&gt;      application_controll       0     569    6756       0 gen_server:loop/6   
&lt;127.137.0&gt;    net_kernel:do_spawn_       0     553    5840       0 dbg:do_relay_1/1    
========================================================================================
    </code></pre><p>The header includes some system information:
</p><dl><dt><strong>Load</strong></dt><dd> <dl><dt><strong>cpu</strong></dt><dd><p><strong>Runtime/Wallclock</strong>, that is, the percentage of time 
where the node has been active.</p></dd><dt><strong>procs</strong></dt><dd><p>The number of processes on the node.</p></dd><dt><strong>runq</strong></dt><dd><p>The number of processes that are ready to run.</p></dd></dl> </dd><dt><strong>Memory</strong></dt><dd><p>The memory allocated by the node in kilobytes.</p></dd></dl><p>For each process the following information is presented:
</p><dl><dt><strong>Time</strong></dt><dd><p>The runtime for the process, that is, the time that the process 
has been scheduled in.</p></dd><dt><strong>Reds</strong></dt><dd><p>The number of reductions executed on the process.</p></dd><dt><strong>Memory</strong></dt><dd><p>The size of the process in bytes, obtained by a
call to <strong>process_info(Pid,memory)</strong>.</p></dd><dt><strong>MsgQ</strong></dt><dd><p>The length of the message queue for the process.</p></dd></dl><div class="alert alert-info"><h4 class="alert-heading">Note</h4><p><em>Time</em> and <em>Reds</em> can be presented as
accumulated values or as values since the last update.</p></div><h2>Configuration</h2><p>All configuration parameters can be set at start by adding
<strong>-OptName Value</strong> to the command line, for example:</p><pre>
% <span class="input">etop -node tiger@durin -setcookie mycookie -lines 15</span></pre><p>A list of all valid Erlang Top configuration parameters is available in
module <a href="etop">etop</a>.
</p><p>The parameters <strong>lines</strong>, <strong>interval</strong>, <strong>accumulate</strong>,
and <strong>sort</strong> can be changed during runtime with function 
<a href="./etop#config/2">etop#config/2</a>.
</p><p><em>Example:</em></p><p>Change configuration parameter <strong>lines</strong> with text-based presentation. 
Before the change, 10 lines are presented as follows:</p><pre><code class="">
========================================================================================
 tiger@durin                                                               10:12:39
 Load:  cpu         0               Memory:  total        1858    binary         33
        procs     191                        processes       0    code          173
        runq        2                        atom         1002    ets            95

Pid            Name or Initial Func    Time    Reds  Memory    MsgQ Current Function
----------------------------------------------------------------------------------------
&lt;127.23.0&gt;     code_server                0   60350   71176       0 gen_server:loop/6   
&lt;127.21.0&gt;     file_server_2              0   36380   44276       0 gen_server:loop/6   
&lt;127.2.0&gt;      erl_prim_loader            0   27962    3740       0 erl_prim_loader:loop
&lt;127.17.0&gt;     net_kernel                 0   13808    3916       0 gen_server:loop/6   
&lt;127.9.0&gt;      kernel_sup                 0    6998    4676       0 gen_server:loop/6   
&lt;127.0.0&gt;      init                       0    4156    4352       0 init:loop/1         
&lt;127.18.0&gt;     inet_tcp_dist:accept       0    2196    1416       0 prim_inet:accept0/2 
&lt;127.16.0&gt;     auth                       0    1893    1264       0 gen_server:loop/6   
&lt;127.43.0&gt;     ddll_server                0     582    3744       0 gen_server:loop/6   
&lt;127.5.0&gt;      application_controll       0     569    6756       0 gen_server:loop/6   
========================================================================================      </code></pre><p>Function <strong>etop:config/2</strong> is called to change the number of showed 
lines to 5:</p><pre>
&gt; <span class="input">etop:config(lines,5).</span>
ok</pre><p>After the change, 5 lines are presented as follows:</p><pre><code class="">
(etop@durin)2&gt; 
========================================================================================
 tiger@durin                                                               10:12:44
 Load:  cpu         0               Memory:  total        1859    binary         33
        procs     192                        processes       0    code          173
        runq        2                        atom         1002    ets            95

Pid            Name or Initial Func    Time    Reds  Memory    MsgQ Current Function
----------------------------------------------------------------------------------------
&lt;127.17.0&gt;     net_kernel               183      70    4092       0 gen_server:loop/6   
&lt;127.335.0&gt;    inet_tcp_dist:do_acc     141      22    1856       0 dist_util:con_loop/9
&lt;127.19.0&gt;     net_kernel:ticker/2      155       6    1244       0 net_kernel:ticker1/2
&lt;127.341.0&gt;    net_kernel:do_spawn_       0       0    5840       0 dbg:do_relay_1/1    
&lt;127.43.0&gt;     ddll_server                0       0    3744       0 gen_server:loop/6   
========================================================================================
      </code></pre><h2>Print to File</h2><p>At any time, the current Erlang Top display can be dumped to a
text file with function 
<a href="./etop#dump/1">etop#dump/1</a>.
</p><h2>Stop</h2><p>To stop Erlang Top, use function 
<a href="./etop#stop/0">etop#stop/0</a>.
</p></body></html>