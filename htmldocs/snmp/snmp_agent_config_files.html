<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>Definition of Agent Configuration Files</h1><p>All configuration data must be included in configuration files
that are located in the configuration directory. The name of this
directory is given in the <strong>config_dir</strong> configuration
parameter.  These files are read at start-up, and are used to
initialize the SNMPv2-MIB or STANDARD-MIB, SNMP-FRAMEWORK-MIB,
SNMP-MPD-MIB, SNMP-VIEW-BASED-ACM-MIB, SNMP-COMMUNITY-MIB,
SNMP-USER-BASED-SM-MIB, SNMP-TARGET-MIB and SNMP-NOTIFICATION-MIB
(refer to the 
<a href="./snmp_agent_funct_descr#management">Management of the Agent</a> 
for a description of the MIBs). </p><p>The files are: </p><ul><li> <p><strong>agent.conf</strong>: see 
<a href="#agent_information">Agent Information</a></p> </li><li> <p><strong>standard.conf</strong>: see 
<a href="#system_information">System Information</a></p> </li><li> <p><strong>context.conf</strong>: see 
<a href="#context">Contexts</a></p> </li><li> <p><strong>community.conf</strong>: see 
<a href="#community">Communities</a></p> </li><li> <p><strong>target_addr.conf</strong>: see 
<a href="#target_addr">Target Address Definitions</a></p> </li><li> <p><strong>target_params.conf</strong>: see 
<a href="#target_params">Target Parameters Definitions</a></p> </li><li> <p><strong>vacm.conf</strong>: see 
<a href="#vacm">MIB Views for VACM</a></p> </li><li> <p><strong>usm.conf</strong>: see 
<a href="#usm">Security data for USM</a></p> </li><li> <p><strong>notify.conf</strong>: see 
<a href="#notify">Notify Definitions</a></p> </li></ul><p>The directory where the configuration files are found is given as
a parameter to the agent. </p><p>The entry format in all files are Erlang terms, separated by a
'<em>.</em>' and a <em>newline</em>. In the following sections, the
formats of these terms are described. Comments may be specified as
ordinary Erlang comments. </p><p>Syntax errors in these files are discovered and reported with the
function <strong>config_err/2</strong> of the error report module at start-up. </p><a name="agent_information"></a><h2>Agent Information</h2><p>The agent information should be stored in a file called
<strong>agent.conf</strong>. </p><p>Each entry is a tuple of size two:</p><p><strong>{AgentVariable, Value}.</strong></p><ul><li> <p><strong>AgentVariable</strong> is one of the variables is
SNMP-FRAMEWORK-MIB or one of the internal variables
<strong>intAgentUDPPort</strong>, which defines which UDP port the agent
listens to, or <strong>intAgentTransports</strong>, which defines the
transport domains and addresses of the agent. </p> </li><li> <p><strong>Value</strong> is the value for the variable.</p> </li></ul><p>The following example shows an <strong>agent.conf</strong> file: </p><pre>
{intAgentUDPPort, 4000}.
{intAgentTransports,
 [{transportDomainUdpIpv4, {141,213,11,24}},
  {transportDomainUdpIpv6, {0,0,0,0,0,0,0,1}}]}.
{snmpEngineID, "mbj's engine"}.
{snmpEngineMaxPacketSize, 484}.
    </pre><p>The value of <strong>intAgentTransports</strong> is a list of
<strong>{Domain, Addr}</strong> tuples, where <strong>Domain</strong>
is either <strong>transportDomainUdpIpv4</strong> or <strong>transportDomainUdpIpv6</strong>,
and <strong>Addr</strong> is the address in the domain.
<strong>Addr</strong> can be specified either as an
<strong>IpAddr</strong> or as an <strong>{IpAddr, IpPort}</strong> tuple.
<strong>IpAddr</strong> is either a regular Erlang/OTP
<a href="../kernel/inet#type-ip_address">kernel/inet#type-ip_address</a>
or a traditional SNMP integer list and <strong>IpPort</strong> is an integer.
</p><p>When the <strong>Addr</strong> value does not contain a port number,
the value of <strong>intAgentUDPPort</strong> is used.</p><p>The legacy and intermediate variables <strong>intAgentIpAddress</strong>
and <strong>intAgentTransportDomain</strong> are still supported so old
<strong>agent.conf</strong> files will work.
</p><p>The value of <strong>snmpEngineID</strong> is a string, which for a 
deployed agent should have a very specific structure. See
RFC 2271/2571 for details.</p><a name="context"></a><h2>Contexts</h2><p>The context information should be stored in a file called
<strong>context.conf</strong>.  The default context <strong>""</strong>
need not be present.</p><p>Each row defines a context in the agent.  This information is
used in the table <strong>vacmContextTable</strong> in the
SNMP-VIEW-BASED-ACM-MIB.</p><p>Each entry is a term:</p><p><strong>ContextName.</strong></p><ul><li> <p><strong>ContextName</strong> is a string.</p> </li></ul><a name="system_information"></a><h2>System Information</h2><p>The system information should be stored in a file called
<strong>standard.conf</strong>.</p><p>Each entry is a tuple of size two:</p><p><strong>{SystemVariable, Value}.</strong></p><ul><li> <p><strong>SystemVariable</strong> is one of the variables in the
system group, or <strong>snmpEnableAuthenTraps</strong>. </p> </li><li> <p><strong>Value</strong> is the value for the variable. </p> </li></ul><p>The following example shows a valid <strong>standard.conf</strong> file: </p><pre>
{sysDescr, "Erlang SNMP agent"}.
{sysObjectID, [1,2,3]}.
{sysContact, "(mbj,eklas)@erlang.ericsson.se"}.
{sysName, "test"}.
{sysServices, 72}.
{snmpEnableAuthenTraps, enabled}.
    </pre><p>A value must be provided for all variables, which lack default
values in the MIB. </p><a name="community"></a><h2>Communities</h2><p>The community information should be stored in a file called
<strong>community.conf</strong>. It must be present if the agent is
configured for SNMPv1 or SNMPv2c. </p><p>An SNMP <em>community</em> is a relationship between an SNMP
agent and a set of SNMP managers that defines authentication, access 
control and proxy characteristics. </p><p>The corresponding table is <strong>snmpCommunityTable</strong> in the
SNMP-COMMUNITY-MIB. </p><p>Each entry is a term: </p><p><strong>{CommunityIndex, CommunityName, SecurityName, ContextName, TransportTag}.</strong> </p><ul><li> <p><strong>CommunityIndex</strong> is a non-empty string.</p> </li><li> <p><strong>CommunityName</strong> is a string.</p> </li><li> <p><strong>SecurityName</strong> is a string.</p> </li><li> <p><strong>ContextName</strong> is a string.</p> </li><li> <p><strong>TransportTag</strong> is a string.</p> </li></ul><a name="vacm"></a><h2>MIB Views for VACM</h2><p>The information about MIB Views for VACM should be stored in a 
file called <strong>vacm.conf</strong>.</p><p>The corresponding tables are <strong>vacmSecurityToGroupTable</strong>,
<strong>vacmAccessTable</strong> and <strong>vacmViewTreeFamilyTable</strong> in the
SNMP-VIEW-BASED-ACM-MIB.</p><p>Each entry is one of the terms, one entry corresponds to one
row in one of the tables.</p><p><strong>{vacmSecurityToGroup, SecModel, SecName, GroupName}.</strong></p><p><strong>{vacmAccess, GroupName, Prefix, SecModel, SecLevel, Match, ReadView, WriteView, NotifyView}.</strong></p><p><strong>{vacmViewTreeFamily, ViewIndex, ViewSubtree, ViewStatus, ViewMask}.</strong></p><ul><li> <p><strong>SecModel</strong> is <strong>any</strong>, <strong>v1</strong>, <strong>v2c</strong>, or
<strong>usm</strong>.</p> </li><li> <p><strong>SecName</strong> is a string.</p> </li><li> <p><strong>GroupName</strong> is a string.</p> </li><li> <p><strong>Prefix</strong> is a string.</p> </li><li> <p><strong>SecLevel</strong> is <strong>noAuthNoPriv</strong>, <strong>authNoPriv</strong>,
or <strong>authPriv</strong></p> </li><li> <p><strong>Match</strong> is <strong>prefix</strong> or <strong>exact</strong>.</p> </li><li> <p><strong>ReadView</strong> is a string.</p> </li><li> <p><strong>WriteView</strong> is a string.</p> </li><li> <p><strong>NotifyView</strong> is a string.</p> </li><li> <p><strong>ViewIndex</strong> is an integer.</p> </li><li> <p><strong>ViewSubtree</strong> is a list of integer.</p> </li><li> <p><strong>ViewStatus</strong> is either <strong>included</strong> or <strong>excluded</strong></p> </li><li> <p><strong>ViewMask</strong> is either <strong>null</strong> or a list of ones and
zeros. Ones nominate that an exact match is used for this
sub-identifier. Zeros are wild-cards which match any
sub-identifier. If the mask is shorter than the sub-tree, the
tail is regarded as all ones. <strong>null</strong> is shorthand for a
mask with all ones. </p> </li></ul><a name="usm"></a><h2>Security data for USM</h2><p>The information about Security data for USM should be stored in a 
file called <strong>usm.conf</strong>, which must be present if the agent is 
configured for SNMPv3. </p><p>The corresponding table is <strong>usmUserTable</strong> in the
SNMP-USER-BASED-SM-MIB.</p><p>Each entry is a term:</p><p><strong>{EngineID, UserName, SecName, Clone, AuthP, AuthKeyC, OwnAuthKeyC, PrivP, PrivKeyC, OwnPrivKeyC, Public, AuthKey, PrivKey}.</strong></p><ul><li> <p><strong>EngineID</strong> is a string.</p> </li><li> <p><strong>UserName</strong> is a string.</p> </li><li> <p><strong>SecName</strong> is a string.</p> </li><li> <p><strong>Clone</strong> is <strong>zeroDotZero</strong> or a list of integers.</p> </li><li> <p><strong>AuthP</strong> is a <strong>usmNoAuthProtocol</strong>,
<strong>usmHMACMD5AuthProtocol</strong>, or <strong>usmHMACSHAAuthProtocol</strong>.</p> </li><li> <p><strong>AuthKeyC</strong> is a string.</p> </li><li> <p><strong>OwnAuthKeyC</strong> is a string.</p> </li><li> <p><strong>PrivP</strong> is a <strong>usmNoPrivProtocol</strong>, 
<strong>usmDESPrivProtocol</strong> or <strong>usmAesCfb128Protocol</strong>.</p> </li><li> <p><strong>PrivKeyC</strong> is a string.</p> </li><li> <p><strong>OwnPrivKeyC</strong> is a string.</p> </li><li> <p><strong>Public</strong> is a string.</p> </li><li> <p><strong>AuthKey</strong> is a list (of integer). This is the User's secret
localized authentication key. It is not visible in the MIB. The length
of this key needs to be 16 if <strong>usmHMACMD5AuthProtocol</strong> is used, 
and 20 if <strong>usmHMACSHAAuthProtocol</strong> is used.</p> </li><li> <p><strong>PrivKey</strong> is a list (of integer).  This is the User's secret
localized encryption key.  It is not visible in the MIB.  The length
of this key needs to be 16 if <strong>usmDESPrivProtocol</strong> or 
<strong>usmAesCfb128Protocol</strong> is used. </p> </li></ul><a name="notify"></a><h2>Notify Definitions</h2><p>The information about Notify Definitions should be stored in a
file called <strong>notify.conf</strong>. </p><p>The corresponding table is <strong>snmpNotifyTable</strong> in the
SNMP-NOTIFICATION-MIB.</p><p>Each entry is a term:</p><p><strong>{NotifyName, Tag, Type}.</strong></p><ul><li> <p><strong>NotifyName</strong> is a unique non-empty string.</p> </li><li> <p><strong>Tag</strong> is a string.</p> </li><li> <p><strong>Type</strong> is <strong>trap</strong> or <strong>inform</strong>.</p> </li></ul><a name="target_addr"></a><h2>Target Address Definitions</h2><p>The information about Target Address Definitions should be 
stored in a file called <strong>target_addr.conf</strong>. </p><p>The corresponding tables are <strong>snmpTargetAddrTable</strong> in the
SNMP-TARGET-MIB and <strong>snmpTargetAddrExtTable</strong> in the 
SNMP-COMMUNITY-MIB. </p><p>Each entry is a term: </p><p><strong>{TargetName, Domain, Addr, Timeout, RetryCount, TagList, ParamsName, EngineId}.</strong>
<br/> or <br/>
<strong>{TargetName, Domain, Addr, Timeout, RetryCount, TagList, ParamsName, EngineId, TMask, MaxMessageSize}.</strong> </p><ul><li> <p><strong>TargetName</strong> is a unique non-empty string. </p> </li><li> <p><strong>Domain</strong> is one of the atoms: 
<strong>transportDomainUdpIpv4</strong> | <strong>transportDomainUdpIpv6</strong>. </p> </li><li> <p><strong>Addr</strong> is either an <strong>IpAddr</strong> or
an <strong>{IpAddr, IpPort}</strong> tuple. <strong>IpAddr</strong> is either
a regular Erlang/OTP
<a href="../kernel/inet#type-ip_address">kernel/inet#type-ip_address</a>
or a traditional SNMP integer list, and <strong>IpPort</strong> is an integer.</p> <p>If <strong>IpPort</strong> is omitted <strong>162</strong> is used.</p> </li><li> <p><strong>Timeout</strong> is an integer. </p> </li><li> <p><strong>RetryCount</strong> is an integer. </p> </li><li> <p><strong>TagList</strong> is a string. </p> </li><li> <p><strong>ParamsName</strong> is a string. </p> </li><li> <p><strong>EngineId</strong> is a string or the atom <strong>discovery</strong>. </p> </li><li> <p><strong>TMask</strong> is specified just as <strong>Addr</strong> or as <strong>[]</strong>.
Note in particular that using a list of 6 bytes	for IPv4
or 8 words plus 2 bytes for IPv6 are still valid address formats
so old configurations will work.</p> </li><li> <p><strong>MaxMessageSize</strong> is an integer (default: 2048). </p> </li></ul><p>The old tuple formats with <strong>Ip</strong> address and <strong>Udp</strong>
port number found in old configurations still work.</p><p>Note that if <strong>EngineId</strong> has the value <strong>discovery</strong>, 
the agent cannot send
<strong>inform</strong> messages to that manager until it has performed the
<em>discovery</em> process with that manager. </p><a name="target_params"></a><h2>Target Parameters Definitions</h2><p>The information about Target Parameters Definitions should be
stored in a file called <strong>target_params.conf</strong>. </p><p>The corresponding table is <strong>snmpTargetParamsTable</strong> in the
SNMP-TARGET-MIB. </p><p>Each entry is a term: </p><p><strong>{ParamsName, MPModel, SecurityModel, SecurityName, SecurityLevel}.</strong></p><ul><li> <p><strong>ParamsName</strong> is a unique non-empty string. </p> </li><li> <p><strong>MPModel</strong> is <strong>v1</strong>, <strong>v2c</strong> or <strong>v3</strong></p> </li><li> <p><strong>SecurityModel</strong> is <strong>v1</strong>, <strong>v2c</strong>, or <strong>usm</strong>.</p> </li><li> <p><strong>SecurityName</strong> is a string.</p> </li><li> <p><strong>SecurityLevel</strong> is <strong>noAuthNoPriv</strong>, <strong>authNoPriv</strong>
or <strong>authPriv</strong>. </p> </li></ul></body></html>