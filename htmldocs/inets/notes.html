<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>Inets Release Notes</h1><h2>Inets 7.0.7</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix the internal handling of the option
erl_script_timeout in httpd. If explicit
erl_script_timeout value was supplied in seconds it was
not correctly converted to millisecond units for internal
usage.</p> <p>
This change fixes the handling of erl_script_timeout in
all possible configuration scenarios.</p> <p>
Own Id: OTP-15769 Aux Id: ERIERL-345 </p> </li></ul><h2>Inets 7.0.6</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix the internal handling of the option
erl_script_timeout in httpd. When httpd was started with
explicit erl_script_timeout, the value of the option was
converted to milliseconds before storage. Subsequent
calls to httpd:info/1 returned the input value multiplied
by 1000.</p> <p>
This change fixes the handing of erl_script_timeout by
storing the timeout in seconds and converting to
milliseconds before usage.</p> <p>
Own Id: OTP-15669 Aux Id: ERIERL-321 </p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Enhance documentation</p> <p>
Own Id: OTP-15508 Aux Id: ERL-816 </p> </li></ul><h2>Inets 7.0.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed bug that causes a crash in http client when using
hostnames (e.g. localhost) with the the option
ipv6_host_with_brackets set to true.</p> <p>
This change also fixes a regression: httpc:request fails
with connection error (nxdomain) if option
ipv6_host_with_brackets set to true and host component of
the URI is an IPv6 address.</p> <p>
Own Id: OTP-15554 Aux Id: ERIERL-289 </p> </li></ul><h2>Inets 7.0.4</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Make sure ipv6 addresses with brackets in URIs are
converted correctly before passing to lower level
functions like gen_tcp and ssl functions. Could cause
connection to fail.</p> <p>
Own Id: OTP-15544 Aux Id: ERIERL-289 </p> </li></ul><h2>Inets 7.0.3</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed http client to not send 'content-length' header in
chunked encoded requests.</p> <p>
Own Id: OTP-15338 Aux Id: ERL-733 </p> </li><li> <p>
Fixed http client to not drop explicit 'Content-Type'
header in requests without a body such as requests with
the 'Content-Type' of application/x-www-form-urlencoded.</p> <p>
Own Id: OTP-15339 Aux Id: ERL-736 </p> </li></ul><h2>Inets 7.0.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Enhance error handling, that is mod_get will return 403
if a path is a directory and not a file.</p> <p>
Own Id: OTP-15192</p> </li><li> <p>
Do not use chunked-encoding with 1xx, 204 and 304
responses when using mod_esi. Old behavior was not
compliant with HTTP/1.1 RFC and could cause clients to
hang when they received 1xx, 204 or 304 responses that
included an empty chunked-encoded body.</p> <p>
Own Id: OTP-15241</p> </li><li> <p>
Add robust handling of chunked-encoded HTTP responses
with an empty body (1xx, 204, 304). Old behavior could
cause the client to hang when connecting to a faulty
server implementation.</p> <p>
Own Id: OTP-15242</p> </li></ul><h2>Inets 7.0.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Change status code for no mod found to handle request to
501</p> <p>
Own Id: OTP-15215</p> </li></ul><h2>Inets 7.0</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed HTTP content injection bug in httpc (ERL-456).</p> <p>
Own Id: OTP-14726</p> </li><li> <p>
Fixed support for URI-references in HTTP 'Location'
header (ERL-333).</p> <p>
Own Id: OTP-14729</p> </li><li> <p>
Fix broken 'Content-Type' handling in httpc (ERL-536).</p> <p>
Own Id: OTP-15006</p> </li><li> <p>
Fix handling of relative paths in the script_alias
property of httpd (ERL-574).</p> <p>
Own Id: OTP-15021</p> </li><li> <p>
Fix httpd:reload_config/2 with path() as the first
argument (ERL-578).</p> <p>
Own Id: OTP-15025</p> </li><li> <p>
Improved gracefulness.</p> <p>
Own Id: OTP-15042</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Split inets and create separate ftp and tftp apps.</p> <p>
Own Id: OTP-14113</p> </li></ul><h2>Inets 6.5.2.4</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Do not use chunked-encoding with 1xx, 204 and 304
responses when using mod_esi. Old behavior was not
compliant with HTTP/1.1 RFC and could cause clients to
hang when they received 1xx, 204 or 304 responses that
included an empty chunked-encoded body.</p> <p>
Own Id: OTP-15241</p> </li><li> <p>
Add robust handling of chunked-encoded HTTP responses
with an empty body (1xx, 204, 304). Old behavior could
cause the client to hang when connecting to a faulty
server implementation.</p> <p>
Own Id: OTP-15242</p> </li></ul><h2>Inets 6.5.2.3</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Change status code for no mod found to handle request to
501</p> <p>
Own Id: OTP-15215</p> </li></ul><h2>Inets 6.5.2.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Enhance error handling, that is mod_get will return 403
if a path is a directory and not a file.</p> <p>
Own Id: OTP-15192</p> </li></ul><h2>Inets 6.5.2.1</h2><h2>Improvements and New Features</h2><ul><li> <p>
Options added for setting low-level properties on the
underlying TCP connections. The options are:
<strong>sock_ctrl</strong>, <strong>sock_data_act</strong> and
<strong>sock_data_pass</strong>. See the manual for details.</p> <p>
Own Id: OTP-15120 Aux Id: ERIERL-192 </p> </li></ul><h2>Inets 6.5.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
inets: httpd - Gracefully handle bad headers</p> <p>
The option max_headers operated on the individual header
length instead of the total length of all headers. Also
headers with empty keys are now discarded.</p> <p>
Own Id: OTP-15092</p> </li></ul><h2>Inets 6.5.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix broken options handling in httpc (ERL-441).</p> <p>
Own Id: OTP-15007</p> </li></ul><h2>Inets 6.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
httpc_manager crashes when a long running request is sent
on a persistent HTTP connection (keep-alive). Fixed
httpc_manager to use proper timeouts on keep-alive
connections.</p> <p>
Own Id: OTP-14908</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Add support for unix domain sockets in the http client.</p> <p>
Own Id: OTP-14854</p> </li></ul><h2>Inets 6.4.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
CGI environment variable CONTENT_LENGTH shall be a string</p> <p>
Own Id: OTP-14679</p> </li><li> <p>
In relaxed mode disregard Content-Length header if there
is also a Transfer-Encoding header.</p> <p>
Own Id: OTP-14727</p> </li><li> <p>
Eliminated race condition, that could cause http request
to sporadically fail to complete successfully, when
keep-alive connections are used.</p> <p>
Own Id: OTP-14783</p> </li></ul><h2>Inets 6.4.4</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Correct the handling of location headers so that the
status code is not hard coded. This should have been
fixed by commit 2cc5ba70cbbc6b3ace81a2a0324417c3b65265bb
but unfortunately was broken during a code refactoring
and unnoticed due to a faulty placed test case.</p> <p>
Own Id: OTP-14761</p> </li></ul><h2>Inets 6.4.3</h2><h2>Improvements and New Features</h2><ul><li> <p>
Fix broken handling of POST requests</p> <p>
New chunk mechanism of body data in POST requests added
in 5d01c70ca399edf28e99dc760506329689fab6ba broke
handling of POST body data not using the new mechanism.</p> <p>
Own Id: OTP-14656</p> </li><li> <p>
Make sure ints:stop/2 of the service httpd is synchronous</p> <p>
Own Id: OTP-14696</p> </li><li> <p>
Honor status code returned by ESI script and modernize
"location" header handling.</p> <p>
Own Id: OTP-14716</p> </li></ul><h2>Inets 6.4.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Make sure mod_log uses the correct status code</p> <p>
Own Id: OTP-14510</p> </li><li> <p>
Correct behaviour of mod_disk_log to proparly handle
repair options</p> <p>
Own Id: OTP-14530</p> </li></ul><h2>Inets 6.4.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
http_uri aligned to follow RFC 3986 and not convert "+"
to space when decoding URIs.</p> <p>
Own Id: OTP-14573</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Added new option max_client_body_chunk to httpd server to
allow chunked delivery of PUT and POST data to mod_esi
callback. Note, new mod_esi callback implementation is
required.</p> <p>
Also correct value provided by server_name environment
variable</p> <p>
Own Id: OTP-14450</p> </li></ul><h2>Inets 6.4</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
httpd_util:rfc1123_date/1 gracefully handle invalid DST
dates by returning the original time in the expected
rfc1123 format.</p> <p>
Own Id: OTP-14394</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Add unicode binary support to http_uri functions</p> <p>
Own Id: OTP-14404</p> </li><li> <p>
httpc - Change timeout handling so the redirects cause a
new timer to be set. This means that a simple redirected
request could return after 2*timeout milliseconds.</p> <p>
Own Id: OTP-14429</p> </li></ul><h2>Inets 6.3.9</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
The close of a chunked file reception crashed in a
certain timing sequence.</p> <p>
Own Id: OTP-14391 Aux Id: seq13306 </p> </li></ul><h2>Inets 6.3.8</h2><h2>Improvements and New Features</h2><ul><li> <p>
Added missing release note for inets-6.3.7</p> <p>
Own Id: OTP-14383</p> </li></ul><h2>Inets 6.3.7</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed a bug in ftp that made further operations after a
recv_chunk operation impossible.</p> <p>
Own Id: OTP-14242</p> </li><li> <p>Make default port, 80 and 443, implicit in automatic redirection.
</p> <p> Own Id: OTP-14301
</p> </li></ul><h2>Inets 6.3.6</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Chunk size decoding could fail. The symptom was that
chunk decoding sometimes failed depending on timing of
the received stream. If chunk size was split into two
different packets decoding would fail.</p> <p>
Own Id: OTP-13571 Aux Id: ERL-116 </p> </li><li> <p>
Prevent httpc user process to hang if httpc_handler
process terminates unexpectedly</p> <p>
Own Id: OTP-14091</p> </li><li> <p>
Correct Host header, to include port number, when
redirecting requests.</p> <p>
Own Id: OTP-14097</p> </li><li> <p>
Shutdown gracefully on connection or TLS handshake errors</p> <p>
Own Id: OTP-14173 Aux Id: seq13262 </p> </li></ul><h2>Inets 6.3.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Correct misstakes in ftp client introduced in inets-6.3.4</p> <p>
Own Id: OTP-14203 Aux Id: OTP-13982 </p> </li></ul><h2>Inets 6.3.4</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixes a bug that makes the ftp client end up in bad state
if there is a multi line response from the server and the
response number is in the message being sent.</p> <p>
Own Id: OTP-13960 Aux Id: PR1196 </p> </li><li> <p>
The ftp client could stop consuming messages when the
multiline response handling was corrected.</p> <p>
Own Id: OTP-13967</p> </li><li> <p>
Fix keep-alive https through proxy connections so that
all requests, following the first one, will run as
expected instead of failing.</p> <p>
Own Id: OTP-14041</p> </li><li> <p>
Fix bug from commit
fdfda2fab0921d409789174556582db28141448e that could make
listing of group members in mod_auth callbacks fail.</p> <p>
Own Id: OTP-14082</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Update behavior of httpc:request to match RFC-7231</p> <p>
Own Id: OTP-13902</p> </li><li> <p>
Fixed dialyzer warnings as well as some white-space
issues. Thanks to Kostis.</p> <p>
Own Id: OTP-13982 Aux Id: PR-1207 </p> </li></ul><h2>Inets 6.3.3</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
The legacy option 'inet6fb4' for inets had stopped
working. This bug has now been corrected. Fix by Edwin
Fine in bugs.erlang.org ERL-200 and Github PR#1132.</p> <p>
Own Id: OTP-13776 Aux Id: ERL-200 PR-1132 </p> </li></ul><h2>Inets 6.3.2</h2><h2>Improvements and New Features</h2><ul><li> <p>
PUT and DELETE support has been added to mod_esi</p> <p>
Own Id: OTP-13688 Aux Id: seq13149 </p> </li></ul><h2>Inets 6.3.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
A debug message was accidently left enabled in the ftp
client.</p> <p>
Own Id: OTP-13712 Aux Id: seq13143 </p> </li></ul><h2>Inets 6.3</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Ftp client fixes: 1) Corrected a bug that the ftp client
gen_server crashed if the listening data socket was
closed.</p> <p>
2) Corrections of ftp client error codes so they are as
defined in the reference manual</p> <p>
Own Id: OTP-13644</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p> Remove usage of erlang:now(). </p> <p>
Own Id: OTP-12441</p> </li><li> <p> Add handling of DELETE Body to http client. </p> <p>
Own Id: OTP-13383 Aux Id: PR-972 </p> </li><li> <p>
Removed references to mod_include and webtool from
examples and tests.</p> <p>
Own Id: OTP-13445 Aux Id: PR-988 </p> </li><li> <p>
Remove module inets_regexp. Module re should be used
instead.</p> <p>
*** POTENTIAL INCOMPATIBILITY ***</p> <p>
Own Id: OTP-13561</p> </li></ul><h2>Inets 6.2.4</h2><h2>Improvements and New Features</h2><ul><li> <p>
Handle multiple \t in mime types file</p> <p>
Own Id: OTP-13663 Aux Id: seq13132 </p> </li></ul><h2>Inets 6.2.3</h2><h2>Improvements and New Features</h2><ul><li> <p>
Put back unused module inets_regexp and remove it in OTP
19 instead as it is an incompatibility, although it is an
undocumented module and should not affect other
applications.</p> <p>
Own Id: OTP-13533</p> </li></ul><h2>Inets 6.2.2</h2><h2>Improvements and New Features</h2><ul><li> <p>
Add environment information item peer_cert to mod_esi</p> <p>
Own Id: OTP-13510</p> </li></ul><h2>Inets 6.2.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Mend ipv6_host_with_brackets option in httpc</p> <p>
Own Id: OTP-13417</p> </li></ul><h2>Inets 6.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
The TFTP client/server has been fixed to allow file sizes
larger than 32MB block by allowing the 16 bit block
counter to wrap. Since this is a commonly accepted
behavior we regard it as a bug fix.</p> <p>
Own Id: OTP-13403</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Handle HTTP PATCH method in client.</p> <p>
Own Id: OTP-13286</p> </li><li> <p>
Expected termination should not be logged as an
application error.</p> <p>
Own Id: OTP-13389</p> </li></ul><h2>Inets 6.1.1.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Mend ipv6_host_with_brackets option in httpc</p> <p>
Own Id: OTP-13417</p> </li></ul><h2>Inets 6.1.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
mod_alias now traverses all aliases picking the longest
match and not the first match.</p> <p>
Own Id: OTP-13248</p> </li></ul><h2>Inets 6.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Replace obs-folds with spaces instead of failing</p> <p>
Own Id: OTP-13069</p> </li><li> <p>
Add validation fun for URI scheme to http_uri API</p> <p>
Own Id: OTP-13071</p> </li><li> <p>
Handle stream bodies as documented.</p> <p>
Own Id: OTP-13093</p> </li><li> <p>
Correct error handling of mod_esi generated chunks. Send
warning headers in chunk trailers instead of generating
an unexpected additional 500 request response, when
problems, such as a timeout occurs.</p> <p>
Own Id: OTP-13110</p> </li><li> <p>
HTTP client terminates gracefully when an invalid chunked
length header is encountered.</p> <p>
Own Id: OTP-13117</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Add default for SNI (Server Name Indication) when running
https using the inets HTTP-client.</p> <p>
Own Id: OTP-12985</p> </li><li> <p>
Be forgiving to chunked sizes that have trailing
whitespaces as prior implementation was. Also some legacy
embedded devices does actually have trailing whitespaces
even though this in not according to the spec.</p> <p>
Own Id: OTP-13116</p> </li></ul><h2>Inets 6.0.3</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Improved error handling and gracfully termination when an
invalid chunked length header is encountered.</p> <p>
Own Id: OTP-13061</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Add possibility to set socket options, such as nodelay,
for httpd. Also phase out legacy option value inet6bf4
for the ipfamily option. This value will be translated to
the value inet.</p> <p>
*** POTENTIAL INCOMPATIBILITY ***</p> <p>
Own Id: OTP-13062</p> </li></ul><h2>Inets 6.0.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Avoid crash in mod_auth_server and mod_security_server
due to using an atom instead of a string when creating a
name.</p> <p>
Own Id: OTP-13022</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Add function response_default_headers/0 to httpd
customize API, to allow user to specify default values
for HTTP response headers.</p> <p>
Own Id: OTP-13013</p> </li></ul><h2>Inets 6.0.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix broken socket feature, that is on Linux systems a
socket may be opened before starting Erlang and then
passed to Erlang's httpd daemon. This is useful as the
wrap program can open a privileged port and Erlang does
not have to be run as root.</p> <p>
Own Id: OTP-12875 Aux Id: seq12878 </p> </li><li> <p>
Fix broken socket feature, that is on Linux systems a
socket may be opened before starting Erlang and then
passed to Erlangs tftp daemon. This is useful as the wrap
program can open a privileged port and Erlang does not
have to be run as root.</p> <p>
Own Id: OTP-12898 Aux Id: seq12900 </p> </li><li> <p>
httpc_handler should react properly to cancel requests
even when the request to be canceled was already finished
but httpc_manager did not get notified about that yet.</p> <p>
Own Id: OTP-12922</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Added format_status function to httpd process to avoid
sensitive information to be printed in supervisor logs.</p> <p>
Own Id: OTP-12976</p> </li><li> <p>
Return meaningful error reason disregarding whether a
http proxy is used or not.</p> <p>
Own Id: OTP-12984</p> </li></ul><h2>Inets 6.0</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix race condition in httpc. If the socket is closed by
the peer do not try to close it again.</p> <p>
Own Id: OTP-11845</p> </li><li> <p>
Avoid process leak by gracefully terminating httpc
request handler process when send operation fails.</p> <p>
Own Id: OTP-12362</p> </li><li> <p>
Reject messages with a Content-Length less than 0</p> <p>
Own Id: OTP-12739 Aux Id: seq12860 </p> </li><li> <p>
Let gen_tcp:controlling_process/2 and
inet_sctp:connect/[45] propagate prim_inet:setopt/3
errors instead of having them generate badmatch
exceptions.</p> <p>
Own Id: OTP-12798</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Remove Server Side Include support from inets, as this is
an old technic that has security issues and was not well
tested.</p> <p>
*** POTENTIAL INCOMPATIBILITY ***</p> <p>
Own Id: OTP-12156</p> </li><li> <p>
New value in <strong>server_tokens</strong> config for limiting
banner grabbing attempts. </p> <p>
By setting <strong>{server_tokens, none}</strong> in
<strong>ServiceConfig</strong> for <strong>inets:start(httpd, ServiceConfig)</strong>, the "Server:" header will not be set
in messages from the server.</p> <p>
Own Id: OTP-12661 Aux Id: seq12840 </p> </li><li> <p>
To enable the HTTP server to run in a virtualized
environment, where there can be more that one server that
has the same ip-address and port, we add a new option
profile.</p> <p>
Own Id: OTP-12674</p> </li><li> <p>
httpc: Fix implementation of gracefull shudown to work as
intended for keep alive connections not using pipelining.</p> <p>
Own Id: OTP-12803</p> </li><li> <p>
Correct handling of proxy options when using persistent
connections.</p> <p>
Own Id: OTP-12822</p> </li></ul><h2>Inets 5.10.9</h2><h2>Improvements and New Features</h2><ul><li> <p>
Add behaviour with optional callbacks to customize the
inets HTTP server.</p> <p>
Own Id: OTP-12776</p> </li></ul><h2>Inets 5.10.8</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Reject messages with a Content-Length less than 0</p> <p>
Own Id: OTP-12739 Aux Id: seq12860 </p> </li></ul><h2>Inets 5.10.7</h2><h2>Improvements and New Features</h2><ul><li> <p>
New value in <strong>server_tokens</strong> config for limiting
banner grabbing attempts. </p> <p>
By setting <strong>{server_tokens, none}</strong> in
<strong>ServiceConfig</strong> for <strong>inets:start(httpd, ServiceConfig)</strong>, the "Server:" header will not be set
in messages from the server.</p> <p>
Own Id: OTP-12661 Aux Id: seq12840 </p> </li></ul><h2>Inets 5.10.6</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
inets: parse correctly 'Set-Cookie' header with empty
value</p> <p>
httpc_cookie should parse cookies with empty values and
no attributes set in the 'Set-Cookie' headers.</p> <p>
Own Id: OTP-12455</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Add parsing of URI fragments to http_uri:parse</p> <p>
This fixes a bug in httpc where redirection URIs could
lead to bad requests if they contained fragments.</p> <p>
Own Id: OTP-12398</p> </li><li> <p>
httpc: http client now ignores invalid set-cookie headers</p> <p>
Own Id: OTP-12430</p> </li></ul><h2>Inets 5.10.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
mod_alias now handles https-URIs properly</p> <p>
Consistent view of configuration parameter
keep_alive_timeout, should be presented in the
httpd:info/[1,2] function in the same unit as it is
inputted.</p> <p>
Own Id: OTP-12436 Aux Id: seq12786 </p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Gracefully handle invalid content-length headers instead
of crashing in list_to_integer.</p> <p>
Own Id: OTP-12429</p> </li></ul><h2>Inets 5.10.4</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed a spelling mistake in httpc documentation.</p> <p>
Own Id: OTP-12221</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Add option {ftp_extension, boolean} to enable use of
extended commands EPSV and EPRT, as specified in RFC
2428, for IPv4 instead of using the legacy commands. Ipv6
cannot be supported without the extended commands.</p> <p>
Own Id: OTP-12255</p> </li></ul><h2>Inets 5.10.3</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix some spelling mistakes in documentation</p> <p>
Own Id: OTP-12152</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
httpd: Seperate timeout for TLS/SSL handshake from
keepalive timeout</p> <p>
Own Id: OTP-12013</p> </li><li> <p>
Warning: this is experimental and may disappear or change
without previous warning.</p> <p>
Experimental support for running Quickcheck and PropEr
tests from common_test suites is added to common_test.
See the reference manual for the new module
<strong>ct_property_testing</strong>.</p> <p>
Experimental property tests are added under
<strong>lib/{inet,ssh}/test/property_test</strong>. They can be run
directly or from the commont_test suites
<strong>inet/ftp_property_test_SUITE.erl</strong> and
<strong>ssh/test/ssh_property_test_SUITE.erl</strong>.</p> <p>
See the code in the <strong>test</strong> directories and the man
page for details.</p> <p>
(Thanks to Tuncer Ayaz for a patch adding Triq)</p> <p>
Own Id: OTP-12119</p> </li></ul><h2>Inets 5.10.2</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
httpc: Fix streaming bugs when handling small responses</p> <p>
Own Id: OTP-11992</p> </li></ul><h2>Inets 5.10.1</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Correct distirbing mode for httpd:reload_config/2</p> <p>
Own Id: OTP-11914</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Improved handling of invalid strings in the HTTP request
line.</p> <p>
Impact: May improve memory consumption</p> <p>
Own Id: OTP-11925 Aux Id: Sequence 12601 </p> </li></ul><h2>Inets 5.10</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fixed a spelling mistake in httpc doc (Thanks to Wasif
Riaz Malik)</p> <p>
Own Id: OTP-11538</p> </li><li> <p>
Application upgrade (appup) files are corrected for the
following applications: </p> <p>
<strong>asn1, common_test, compiler, crypto, debugger, dialyzer, edoc, eldap, erl_docgen, et, eunit, gs, hipe, inets, observer, odbc, os_mon, otp_mibs, parsetools, percept, public_key, reltool, runtime_tools, ssh, syntax_tools, test_server, tools, typer, webtool, wx, xmerl</strong></p> <p>
A new test utility for testing appup files is added to
test_server. This is now used by most applications in
OTP.</p> <p>
(Thanks to Tobias Schlager)</p> <p>
Own Id: OTP-11744</p> </li><li> <p>
ftp now sanitize file name, user name and passwords from
&lt;CR&gt; and &lt;LF&gt; tags (Thanks to Sergei Golovan)</p> <p>
Own Id: OTP-11750</p> </li><li> <p>
Corrected error handling in the HTTP client, making it
behave more graceful.</p> <p>
Thanks to Kirilll Zaborsky</p> <p>
Own Id: OTP-11794</p> </li><li> <p>
Support identity transfer-encoding in httpc.</p> <p>
Thanks to Anthony Ramine</p> <p>
Own Id: OTP-11802</p> </li><li> <p>
Ignore empty Set-Cookie headers to increase
interoperability with servers that violate the RFC. </p> <p>
Thanks to Kirilll Zaborsky</p> <p>
Own Id: OTP-11803</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
The commit 6189bc07 "inets: httpc improve pipelining" has
been reverted, as it turned out to break things rather
than improve pipelining utilization. It is instead up to
the user to configure httpc and use it wisely to be able
to get the most out of pipelining.</p> <p>
Own Id: OTP-11756</p> </li><li> <p>
Handle all response codes in httpd_util:message/3</p> <p>
Own Id: OTP-11838</p> </li></ul><h2>Inets 5.9.8</h2><h2>Improvements and New Features</h2><ul><li> <p>
Mend max_clients check that was broken and avoid too
extensive logging that could cause memory problems.</p> <p>
Own Id: OTP-11557 Aux Id: seq12478 </p> </li></ul><h2>Inets 5.9.7</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Fix httpd config option 'script_timeout' and fixed httpd
config option 'keep_alive_timeout'. Thanks to Johannes
Weissl.</p> <p>
Own Id: OTP-11276</p> </li><li> <p>
Make httpc:request_cancel/[1,2] asynchronous. Previously
these functions tried to guarantee request answer would
not reach the client, which only worked for some of the
use cases. Now these functions are totally asynchronous
which makes it the clients responsibility to disregard
possible answers to canceled requests. </p> <p>
Also pipelining implementation has been changed to
improve the utilization factor. Further investigation of
possible enhancements in this area are planned for later.</p> <p>
*** POTENTIAL INCOMPATIBILITY ***</p> <p>
Own Id: OTP-11312</p> </li><li> <p>
[httpd] Add handling of new response for mod_head
(otherwise causing case_clause crash). Also updated
logging: Removed logging for keep-alive connections
timeout (this is a normal occurrence and not an error)
and some access-log body size corrections.</p> <p>
Own Id: OTP-11328</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
The ftp client now supports ftp over tls (ftps).</p> <p>
Own Id: OTP-11037</p> </li></ul><h2>Inets 5.9.6</h2><h2>Improvements and New Features</h2><ul><li> <p>
httpc: Allow content body in DELETE requests. Thanks to
James Wheare.</p> <p>
Own Id: OTP-11190</p> </li><li> <p>
Add missing brackets to report formatting on ftp_progress
process exit. Thanks to Artur Wilniewczyc.</p> <p>
Own Id: OTP-11202</p> </li><li> <p>
Fix some errors in the inets documentation. Thanks to
Johannes Weissl.</p> <p>
Own Id: OTP-11210</p> </li><li> <p>
Fix various typos in httpd, inets. Thanks to Tomohiko
Aono.</p> <p>
Own Id: OTP-11226</p> </li><li> <p>
Fix httpd config option 'erl_script_nocache'. Thanks to
Johannes Weissl.</p> <p>
Own Id: OTP-11260</p> </li></ul><h2>Inets 5.9.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
Reverted incorrect commit that broke cookie handling when
using httpc-profiles.</p> <p>
Own Id: OTP-10956</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Fix http_request:http_headers/1 to send content-length
when length is zero. Thanks to CA Meijer.</p> <p>
Own Id: OTP-10934</p> </li><li> <p>
Integrate elliptic curve contribution from Andreas
Schultz </p> <p>
In order to be able to support elliptic curve cipher
suites in SSL/TLS, additions to handle elliptic curve
infrastructure has been added to public_key and crypto.</p> <p>
This also has resulted in a rewrite of the crypto API to
gain consistency and remove unnecessary overhead. All OTP
applications using crypto has been updated to use the new
API.</p> <p>
Impact: Elliptic curve cryptography (ECC) offers
equivalent security with smaller key sizes than other
public key algorithms. Smaller key sizes result in
savings for power, memory, bandwidth, and computational
cost that make ECC especially attractive for constrained
environments.</p> <p>
Own Id: OTP-11009</p> </li><li> <p>
Fix {stream, {self, once}} in httpc to work as expected.
Thanks to Masatake Daimon</p> <p>
Own Id: OTP-11122</p> </li></ul><h2>Inets 5.9.4</h2><h2>Improvements and New Features</h2><ul><li> <p>
httpd: The modules option now defaults to the documented
value.</p> <p>
Own Id: OTP-10844</p> </li><li> <p>
httpc: Fixed persistent connection implementation that
was broken by a patch to R13. The patch made persisten
connections behaved the same way as pipelining.</p> <p>
Own Id: OTP-10845</p> </li><li> <p>
httpd: Simplified configuration of ssl in httpd, this
also enables all ssl options to be configured. The old
and limited way is no longer documented but will be
supported for backwards comatibility for some time.</p> <p>
Own Id: OTP-10846</p> </li><li> <p>
Handle correctly the "No files found or file unavailable"
error code. Thanks to Serge Aleynikov</p> <p>
Own Id: OTP-10886</p> </li></ul><h2>Inets 5.9.3</h2><h2>Improvements and New Features</h2><ul><li> <p>
httpc: The HTTP client now supports HTTPS through proxies</p> <p>
Own Id: OTP-10256 Aux Id: kunagi-2
[ce2e800e-c99f-4050-a1c4-f47023d9c7aa-1] </p> </li><li> <p> Some examples overflowing the width of PDF pages have
been corrected. </p> <p>
Own Id: OTP-10665</p> </li><li> <p>
Fix autoredirect for POST requests responding 303. Thanks
to Hans Svensson.</p> <p>
Own Id: OTP-10765</p> </li></ul><h2>Inets 5.9.2.2</h2><h2>Improvements and New Features</h2><ul><li> <p>
Make log_alert configurable as option in ssl, SSLLogLevel
added as option to inets conf file</p> <p>
Own Id: OTP-11259</p> </li></ul><h2>Inets 5.9.2.1</h2><h2>Improvements and New Features</h2><ul><li> <p>
Fixed obsolete error report in inets.</p> <p>
Own Id: OTP-11185 Aux Id: seq12357 </p> </li></ul><h2>Inets 5.9.2</h2><h2>Improvements and New Features</h2><ul><li> <p>
Minimum bytes per second</p> <p>
New option to http server, {minimum_bytes_per_second,
integer()}, for a connection, if it is not reached the
socket will close for that specific connection. Can be
used to prevent hanging requests from faulty clients.</p> <p>
Own Id: OTP-10392</p> </li></ul><h2>Inets 5.9.1</h2><h2>Improvements and New Features</h2><ul><li> <p>Better handling of errorI(s) during update of the session 
database. </p> <p>Also added and updated some debugging functions 
<a href="./httpc#which_sessions-0">which_sessions/[0,1]</a>
and 
<a href="./httpc#info-0">info/0</a>. </p> <p>Own Id: OTP-10093</p> <p>Aux Id: Seq 12062</p> </li><li> <p>Removed R14B compatible version of (inets-service and
tftp) behaviour definition. </p> <p>Own Id: OTP-10095</p> </li><li> <p>[httpc] Documentation of KeepAlive and Pipeline timeout 
options have been improved. </p> <p>Own Id: OTP-10114</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] Cancel request does not work due to incorrect 
handler table creation (wrong keypos). </p> <p>Vyacheslav Vorobyov</p> <p>Own Id: OTP-10092</p> </li></ul><h2>Incompatibilities</h2><p>-</p><h2>Inets 5.9</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpd] Make the server header configurable with new config
option 
<a href="./httpd#prop_server_tokens">server_tokens</a>.
The value of the server header, which was previously hard-coded 
(at compile time), is now possible to manipulate through the means 
of the 
<a href="./httpd#prop_server_tokens">server_tokens</a> 
config option. </p> <p>Own Id: OTP-9805</p> </li><li> <p>Improve inets support for inets as an included application. </p> <p><strong>inets_app</strong> calls <strong>supervisor:start_link/3</strong> directly 
rather than calling the root supervisor function 
<strong>inets_sup:start_link/0</strong>. 
This precludes using included_applications to start inets without 
having a wrapper function. </p> <p>Jay Nelson</p> <p>Own Id: OTP-9960</p> </li><li> <p>[httpc] Add function for retrieving current options, 
<a href="./httpc#get_options-1">get_options/[1,2]</a>. </p> <p>Own Id: OTP-9979</p> </li><li> <p>Utility module 
<a href="http_uri">http_uri</a>
now officially supported. </p> <p>Also, the 
<a href="./http_uri#parse">parse</a> 
function has been extended with more
scheme support and a way to provide your own scheme info. </p> <p>Own Id: OTP-9983</p> <p>Aux Id: Seq 12022</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><p>-</p><h2>Inets 5.8.1</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[ftp] Fails to open IPv6 connection due to badly formatted
IPv6 address in EPRT command. The address part of the command
incorrectly contained decimal elements instead of hexadecimal. </p> <p>Own Id: OTP-9827</p> <p>Aux Id: Seq 11970 </p> </li><li> <p>[httpc] Bad Keep Alive Mode. When selecting a session, 
the "state" of the session (specifically if the server has 
responded) was not taken into account. </p> <p>Own Id: OTP-9847</p> </li><li> <p>[httpc] The client incorrectly streams 404 responses. 
The documentation specifies that only 200 and 206 responses 
shall be streamed. </p> <p>Shane Evens</p> <p>Own Id: OTP-9860</p> </li></ul><h2>Inets 5.8</h2><h2>Improvements and New Features</h2><ul><li> <p>[ftpc] Add a config option to specify a 
<a href="../ftp/ftp#dtimeout">data connect timeout</a>.
That is how long the ftp client will wait for the server to connect
to the data socket. If this timeout occurs, an error will be 
returned to the caller and the ftp client process will be 
terminated. </p> <p>Own Id: OTP-9545</p> </li><li> <p>[httpc] Wrong Host header in IPv6 HTTP requests.
When a URI with a IPv6 host is parsed, the brackets that encapsulates
the address part is removed. This value is then supplied as the host 
header. This can cause problems with some servers.
A workaround for this is to use headers_as_is and provide the host
header with the requst call. 
To solve this a new option has been added, 
<a href="./httpc#ipv6_host_with_brackets">ipv6_host_with_brackets</a>. 
This option specifies if the host value of the host header shall 
include the brackets or not. By default, it does not (as before). 
</p> <p>Own Id: OTP-9628</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpd] Fix logging of content length in mod_log. </p> <p>Garrett Smith</p> <p>Own Id: OTP-9715</p> </li><li> <p>[httpd] Sometimes entries in the transfer log was written 
with the message size as list of numbers. This list was actually 
the size as a string, e.g. "123", written with the control 
sequence ~w. This has now been corrected so that any string is 
converted to an integer (if possible). </p> <p>Own Id: OTP-9733</p> </li><li> <p>Fixed various problems detected by Dialyzer. </p> <p>Own Id: OTP-9736</p> </li></ul><h2>Incompatibilities</h2><ul><li> <p>[httpc] Deprecated interface module <strong>http</strong> has been removed. 
It has (long) been replaced by http client interface module 
<a href="httpc">httpc</a>. </p> <p>Own Id: OTP-9359</p> </li><li> <p>[httpc|httpd] The old ssl implementation (based on OpenSSL), 
has been deprecated. The config option that specified usage of 
this version of the ssl app, <strong>ossl</strong>, has been removed. </p> <p>Own Id: OTP-9522</p> </li></ul><h2>Inets 5.7.2</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpd] XSS prevention did not work for hex-encoded URL's. </p> <p>Own Id: OTP-9655</p> </li><li> <p>[httpd] GET request with malformed header date caused 
server crash (non-fatal) with no reply to client. Will
now result in a reply with status code 400. </p> <p>Own Id: OTP-9674</p> <p>Aux Id: seq11936</p> </li></ul><h2>Inets 5.7.1</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] Parsing of a cookie expire date should be more forgiving. 
That is, if the parsing fails, the date should be ignored.
Also added support for (yet another) date format: 
"Tue Jan 01 08:00:01 2036 GMT". </p> <p>Own Id: OTP-9433</p> </li><li> <p>[httpc] Rewrote cookie parsing. Among other things solving 
cookie processing from www.expedia.com. </p> <p>Own Id: OTP-9434</p> </li><li> <p>[httpd] Fix httpd directory traversal on Windows. 
Directory traversal was possible on Windows where
backward slash is used as directory separator. </p> <p>AndrÃ¡s Veres-SzentkirÃ¡lyi.</p> <p>Own Id: OTP-9561</p> </li></ul><h2>Inets 5.7</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpc|httpd] Added support for IPv6 with ssl. </p> <p>Own Id: OTP-5566</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] Remove unnecessary usage of iolist_to_binary when 
processing body (for PUT and POST). </p> <p>Filipe David Manana</p> <p>Own Id: OTP-9317</p> </li><li> <p>[ftp] FTP client doesn't work with IPv6 host.</p> <p>Attila Rajmund Nohl</p> <p>Own Id: OTP-9342 Aux Id: seq11853</p> </li><li> <p>[httpd] Peer/sockname resolv doesn't work with IPv6 addrs 
in HTTP. </p> <p>Attila Rajmund Nohl.</p> <p>Own Id: OTP-9343</p> </li><li> <p>[httpc] Clients started stand-alone not properly handled. 
Also it was not documented how to use them, that is that 
once started, they are represented by a <strong>pid()</strong> and not by 
their <strong>profile()</strong>. </p> <p>Own Id: OTP-9365</p> </li></ul><h2>Inets 5.6</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpc] Add support for upload body streaming (PUT and POST).</p> <p>For more info, 
see the definition of the <strong>Body</strong> argument of the 
<a href="./httpc#request-4">request/[4,5]</a> 
function. </p> <p>Filipe David Manana</p> <p>Own Id: OTP-9094</p> </li><li> <p>[ftp] Added (type) spec for all exported functions.</p> <p>Own Id: OTP-9114 Aux Id: seq11799</p> </li><li> <p>[httpd] 
<a href="./mod_esi#deliver-2">mod_esi:deliver/2</a> 
made to accept binary data. </p> <p>Bernard Duggan</p> <p>Own Id: OTP-9123</p> </li><li> <p>[httpd] Prevent XSS in error pages.
Prevent user controlled input from being interpreted 
as HTML in error pages by encoding the reserved HTML 
characters. </p> <p>Michael Santos</p> <p>Own Id: OTP-9124</p> </li><li> <p>[httpd] Improved error messages. </p> <p>Ricardo Catalinas JimÃ©nez</p> <p>Own Id: OTP-9157</p> </li><li> <p>[httpd] Extended support for file descriptors. 
In order to be able to bind to a privileged port 
without running the erlang VM as root, the support 
for using file descriptors has been improved. 
It is now possible to add the file descriptor to the config 
(option fd) when calling the 
<a href="./inets#start-2">inets:start(httpd, ...)</a> 
function. </p> <p>Attila Rajmund Nohl</p> <p>Own Id: OTP-9202</p> <p>Aux Id: seq11819</p> </li><li> <p>The default ssl kind has now been changed to <strong>essl</strong>. </p> <p><strong>ossl</strong> will work for as long as the ssl application 
supports it. </p> <p>See the httpd 
<a href="./httpd#props_comm">socket_type</a> 
communication property or the httpc 
<a href="./httpc#request-4">request/[4,5]</a> function
for more info. </p> <p>Own Id: OTP-9230</p> <p>*** POTENTIAL INCOMPATIBILITY ***</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpd] Wrong 
<a href="./httpd#props_sec">security property</a> 
names used in documentation. </p> <p><strong>security_data_file</strong> used instead of <strong>data_file</strong>. </p> <p><strong>security_max_retries</strong> used instead of <strong>max_retries</strong>. </p> <p><strong>security_block_time</strong> used instead of <strong>block_time</strong>. </p> <p><strong>security_fail_expire_time</strong> used instead of <strong>fail_expire_time</strong>. </p> <p><strong>security_auth_timeout</strong> used instead of <strong>auth_timeout</strong>. </p> <p>Garrett Smith</p> <p>Own Id: OTP-9131</p> </li><li> <p>[httpd] Fix timeout message generated by mod_esi.
When a mod_esi request times out, the code to send a 
timeout response was incorrect and generated an 
internal server error as well as an invalid response 
line. </p> <p>Bernard Duggan</p> <p>Own Id: OTP-9158</p> </li><li> <p>[httpc] httpc manager crashes. 
When a request results in a retry, the request id will be "reused" 
in the previous implementation a race condition could occur causing 
the manager to crash. </p> <p>This is now avoided by using proc_lib:init_ack and 
gen_server:enter_loop to allow mor advanced initialization of 
httpc_handlers without blocking the httpc_manger and eliminating 
extra processes that can cause race conditions. </p> <p>Own Id: OTP-9246</p> </li><li> <p>[httpc] Issuing a request (<strong>httpc:request</strong>) to an 
host with the ssl option 
<strong>{ip, {127,0,0,1}}</strong> results in an handler crash. 
The reason was that the connect call resulted in an exit with 
reason <strong>badarg</strong> 
(this was the same for both <strong>ssl</strong> and <strong>gen_tcp</strong>). </p> <p>Exits was not catched. This has now been improved. </p> <p>Own Id: OTP-9289</p> <p>Aux Id: seq11845</p> </li></ul><h2>Inets 5.5.2</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpd] httpd_response:send_chunk handles empty list and 
empty binary - i.e. no chunk is sent, but it does 
not handle a list with an empty binary [&lt;&lt;&gt;&gt;]. 
This will be sent as an empty chunk - which in turn 
will be encoded by http_chunk to the same as a final 
chunk, which will make the http client believe that 
the end of the page is reached.</p> <p>Own Id: OTP-8906</p> </li></ul><h2>Inets 5.5.1</h2><h2>Improvements and New Features</h2><ul><li> <p>Miscellaneous inet6 related problems.</p> <p>Own Id: OTP-8927</p> </li><li> <p>Updated http-server to make sure URLs in error-messages
are URL-encoded. Added support in http-client to use
URL-encoding. Also added the missing include directory
for the inets application.</p> <p>Own Id: OTP-8940</p> <p>Aux Id: seq11735</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>Fix format_man_pages so it handles all man sections
and remove warnings/errors in various man pages. </p> <p>Own Id: OTP-8600</p> </li><li> <p>[httpc] Pipelined and queued requests not processed when
connection closed remotelly.</p> <p>Own Id: OTP-8906</p> </li></ul><h2>Inets 5.5</h2><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>
[httpc] If a request times out (not connect timeout), the
handler process exited (normal) but neglected to inform
the manager process. For this reason, the manager did not
clean up the request table., resulting in a memory leak.
Also the manager did not create a monitor for the
handler, so in an unforseen handler crash, this could
also create a memory leak.</p> <p>
Own Id: OTP-8739</p> </li><li> <p>
The service tftp was spelled wrong in documentation and
in some parts of the code. It should be tftp.</p> <p>
Own Id: OTP-8741 Aux Id: seq11635 </p> </li><li> <p>
[httpc] Replaced the old http client api module (http)
with the new, httpc in the users guide.</p> <p>
Own Id: OTP-8742</p> </li></ul><h2>Improvements and New Features</h2><ul><li> <p>
Eliminated warnings for auto-imported BIF clashes.</p> <p>
Own Id: OTP-8840</p> </li></ul><h2>Inets 5.4</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpc|httpd] - Now allow the use of the "new" ssl, by using
the <strong>essl</strong> tag instead. </p>  <p>See the <strong>http_option</strong> option in the 
<a href="./httpc#request-4">request/[4,5]</a> or 
the <a href="./httpd#props_comm">socket-type</a>
section of the Communication properties chapter for more info, </p> <p>Own Id: OTP-7907</p> </li><li> <p>Deprecated functions designated to be removed in R14 has been
removed. Also, some new functions has been marked as deprecated
(the old http client api module). </p> <p>Own Id: OTP-8564</p> <p>*** POTENTIAL INCOMPATIBILITY ***</p> </li><li> <p>[httpd] - Improved mod_alias. 
Now able to do better URL rewrites. </p>  <p>See 
<a href="./httpd#props_alias">URL aliasing properties</a> 
and the 
<a href="./httpd#props_cgi">CGI properties</a>
section(s) for more info, </p> <p>Own Id: OTP-8573</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><p>-</p><h2>Inets 5.3.3</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] - Made cookie handling more case insensitive.</p> <p>Own Id: OTP-8609</p> <p>Nicolas Thauvin</p> </li><li> <p>[httpc|httpd] - Netscape cookie dates can also be given with a 
2-digit year (e.g. 06 = 2006). </p> <p>Own Id: OTP-8610</p> <p>Nicolas Thauvin</p> </li><li> <p>[httpd] - Added support (again) for the documented debugging 
features. See the User's Guide 
<a href="./http_server#config">Configuration</a> 
chapter for more info. </p> <p>Own Id: OTP-8624</p> </li></ul><h2>Inets 5.3.2</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] - Memory leak plugged. 
The profile manager never cleaned up in its handler database. 
This meant that with each new request handler, another entry 
was created that was never deleted. Eventually the request
id counter (used as a key) would wrap, but the machine would 
most likely run out of memory before that happened.</p> <p>Own Id: OTP-8542</p> <p>Lev Walkin</p> </li><li> <p>[httpc] - https requests with default port (443) not handled 
properly. </p> <p>Own Id: OTP-8607</p> <p>jebu ittiachen</p> </li></ul><h2>Inets 5.3.1</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] - Badly formated error reason for errors occuring 
during initial connect to a server. 
Also, the possible error reasons was 
not properly documented.</p> <p>Own Id: OTP-8508</p> <p>Aux Id: seq11407</p> </li><li> <p>[httpd] - Issues with ESI erl_script_timeout. </p> <ul><li> <p>The <strong>erl_script_timeout</strong> config option is ducumented
as a number of seconds. But when parsing the config, in the
new format (not a config file), it was handled as if in
number of milliseconds. </p> </li><li> <p>When the erl-script-timeout time was exceeded, the server
incorrectly marked the answer as sent, thereby leaving 
client hanging (with an incomplete answer).
This has been changed, so that now the socket will be
closed. </p> </li></ul> <p>Own Id: OTP-8509</p> </li></ul><h2>Inets 5.3</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpc] - Allow users to pass socket options to the transport 
module when making requests. </p>  <p>See the <strong>socket_opts</strong> option in the 
<a href="./httpc#request-4">request/4</a> or 
<a href="./httpc#set_options-1">set_options/[1,2]</a>
for more info, </p> <p>Own Id: OTP-8352</p> </li><li> <p>[httpc] Fix bug crafting Host header when port is not 80. </p> <p>The host header should include the port number as well as the 
host name when making a request to a server listening on a port 
other than the HTTP default of 80. Currently, only the host 
name is included. This is important to make the http client 
more compliant with the HTTP specification. </p> <p>Own Id: OTP-8371</p> <p>Kelly McLaughlin</p> </li><li> <p>[httpc|httpd] http_chunk data handling/passing improvement. </p>  <p>This is a modification to the http_chunk module to forward any 
full chunk received, regardless of whether the size field for the 
following chunk has been received yet.  This allows http_chunk to 
be used in situations where a long term HTTP connection is used to 
send periodic status updates as individual chunks.  Previously a 
given chunk would not be forwarded to the client process until the 
size for the next chunk had been read which rendered the module 
difficult to use for the scenario described. </p> <p>Bernard Duggan</p> <p>Own Id: OTP-8351</p> </li><li> <p>Include the inets test suite in the release of the 
application. </p>  <p>Own Id: OTP-8349</p> </li><li> <p>[httpc] - It is now possible to configure the client to 
deliver an async reply to more receivers then the calling 
process. </p>  <p>See the 
<a href="./httpc#request-2">receiver</a>
option for more info, </p> <p>Own Id: OTP-8106</p> </li><li> <p>[httpd] - Methods "PUT" and "DELETE" now allowed. </p>  <p>huntermorris@gmail.com</p> <p>Own Id: OTP-8103</p> </li><li> <p>[httpc] Several more or less critical fixes:</p> <ul><li> <p>Initial call between the httpc manager and request 
handler was synchronous. </p> <p>When the manager starts a new request handler, 
this is no longer a synchronous operation. Previously, 
the new request handler made the connection to the 
server and issuing of the first request (the reason 
for starting it) in the gen_server init function. 
If the connection for some reason "took some time", 
the manager hanged, leaving all other activities by 
that manager also hanging. </p> </li></ul> <p>As a side-effect of these changes, some modules was also 
renamed, and a new api module, 
<a href="httpc">httpc</a>, has been introduced
(the old module <strong>http</strong> is <em>not</em> removed, but is 
now just wrapper for <strong>httpc</strong>). </p> <p>Own Id: OTP-8016</p> <p>*** POTENTIAL INCOMPATIBILITY ***</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpd] The server did not fully support the documented module
callback api. Specifically, the load function should be able to
return the atom <strong>ok</strong>, but this was not accepted. </p> <p>Own Id: OTP-8359</p> </li><li> <p>Fixing various documentation-related bugs (bad quotes).</p> <p>Own Id: OTP-8327</p> </li><li> <p>Fixing minor Dialyzer and copyright problem(s). </p> <p>Own Id: OTP-8315</p> </li><li> <p>[httpc] - Added basic sanity check of option value 
combinations.</p> <p>adam.kocoloski@gmail.com</p> <p>Own Id: OTP-8056</p> </li></ul><h2>Inets 5.2</h2><h2>Improvements and New Features</h2><ul><li> <p>[ftpc] - Start of the FTP client has been changed in 
the following way: </p> <ul><li> <p>It is now also possible to start a standalone FTP client 
process using the re-introduced  
<a href="../ftp/ftp#open">ftp:open</a> 
function. </p> <p>This is an alternative to starting the client using the 
<a href="../ftp/ftp#service_start">inets service framework</a>. </p> <p>The old <strong>ftp:open/1</strong>, undocumented, function, 
caused the client to be hooken into the inets service
supervision framework. This is <em>no</em> longer the
case. </p> <p>*** POTENTIAL INCOMPATIBILITY ***</p> </li><li> <p>Previously, the FTP client attempted to use IPv6, 
unless otherwise instructed (the <strong>ip_v6_disabled</strong> 
flag), and only used IPv4 if this did not work. 
This has now been <em>changed</em>. </p> <p>A new option, 
<a href="../ftp/ftp#ipfamily">ipfamily</a>, 
has been introduced, with the default value 
<strong>inet</strong> (IPv4). </p> <p>See <a href="../ftp/ftp#open">ftp:open</a> 
for more info.</p> <p>*** POTENTIAL INCOMPATIBILITY ***</p> </li></ul> <p>Own Id: OTP-8258</p> </li><li> <p>The documentation is now built with open source tools 
(<em>xsltproc</em> and <em>fop</em>) that exists on most 
platforms. One visible change is that the frames are removed.</p> <p>Own Id: OTP-8249</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] - Streaming to file did not work.</p> <p>dizzyd@gmail.com</p> <p>Own Id: OTP-8204</p> </li><li> <p>[ftpc] - The 
<a href="../ftp/ftp#ls2">ls/2</a> function (LIST command) 
and the 
<a href="../ftp/ftp#nlist2">nlist/2</a> function 
(NLST command) 
with wildcards did 
not work properly. </p> <p>These functions is documented as working on directories, but 
this is actually not according the standard. The LIST and NLST
commands are specified to operate on a directory or other 
group of files, or a file.</p> <p>Previously, an attempt was made to check if the listing
returned by the server was actually an error message. This
was done by changing remote directory (cd) into the 
(assumed) "directory". This may work if Pathname was actually 
a directory, but as this is not always the case, this test 
does not work. Instead, we now return the actual server 
result and leave the interpretation to the caller. </p> <p>*** POTENTIAL INCOMPATIBILITY ***</p> <p>Own Id: OTP-8247</p> <p>Aux Id: seq11407</p> </li><li> <p>[httpc] - Fixes various bugs in timeout and keep-alive queue 
handling. </p> <ul><li> <p>When a queued request times, out the error mssage is sent 
the owner of the active request. </p> </li><li> <p>Requests in the keep-alive queue is forgotten when 
handler terminates. </p> </li><li> <p>Timeout out requests are retried. </p> </li></ul> <p>Jean-SÃ©bastien PÃ©dron</p> <p>Own Id: OTP-8248</p> </li><li> <p>[httpd] - Unnecessarily strict matching when handling closing sockets. </p> <p>Own Id: OTP-8280</p> </li></ul><h2>Inets 5.1.3</h2><h2>Improvements and New Features</h2><p>-</p><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] - Raise condition. 
When http:request is called and httpc_manager selects a session 
where there's already a pending request, then the connection 
handler for that session effectively resets its parser, readying
it for the response to the second request. But if there are still 
some inbound packets for the response to the first request, things 
get confused.</p> <p>tomas.abrahamsson@gmail.com</p> <p>Own Id: OTP-8154</p> </li></ul><h2>Inets 5.1.2</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpc] - Added http option <strong>connect_timeout</strong> for http 
client request.
The <strong>connect_timeout</strong> option is used for the initial 
request, when the client connects to the server. Default 
value is that of the <strong>timeout</strong> option. </p> <p>See the 
<a href="./httpc#request-4">request/[4,5]</a> 
function for more info. </p> <p>Own Id: OTP-7298</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpd] - Failed to create listen socket with invalid 
option combo. The http-server failed to create its listen 
socket when the bind-address was an IPv4-address (a tuple of
size 4) and the ipfamily option was inet6fb4. </p> <p>Own Id: OTP-8118</p> <p>Aux Id: seq11321</p> </li><li> <p>[httpd] - Removed documentation for non-existing function 
(httpd_util:header/2,3,4). </p> <p>Own Id: OTP-8101</p> </li></ul><h2>Inets 5.1.1</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpd] - When starting inets (the web-server) and supplying 
a descriptor on the command line 
(example: erl -httpd_8888 &lt;descriptor&gt;) 
it is now possible to specify which ip-family to use:
<strong>inet | inet6 | inet6fb4</strong>. </p> <p>Example: erl -httpd_8888 10|inet6</p> <p>When starting the web-server either using a file with 
property list (the proplist_file) or a an property list,
using the ipfamily option: 
<strong>{ipfamily, inet | inet6 | inet6fb4}</strong>. </p> <p>Finally, when starting the web-server using the classical
apache-style config file, the <strong>BindAddress</strong> directive
has been augmented to allow the specification of the 
IpFamily: <strong>BindAddress blirk.ericsson.se|inet</strong></p> <p>Default is <strong>inet6fb4</strong> which emulates the 
behaviour of the previous version. </p> <p>See the 
<a href="./httpd#props_comm">Communication properties</a> 
section for more info. </p> <p>Own Id: OTP-8069</p> <p>Aux Id: seq11086</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>[httpc] - Reception of unexpected data causes handler crash. </p> <p>Own Id: OTP-8052</p> </li></ul><h2>Inets 5.1</h2><h2>Improvements and New Features</h2><ul><li> <p>[httpc] Added support for web services using only basic auth,
with a token as the user part and no password part.</p> <p>twoggle@gmail.com</p> <p>Own Id: OTP-7998</p> </li><li> <p>[httpc] - Bind HTTP client to IP-addr. It is now possible 
to specify an alternate ip-address and port to be used when 
the client connects to the server. </p> <p>As a side-effect of this, the option <strong>ipv6</strong> has been 
removed and replaced by the <strong>ipfamily</strong> option. </p> <p>See <a href="./httpc#set_options-1">http:set_options/[1,2]</a> 
for more info. </p> <p>*** POTENTIAL INCOMPATIBILITY ***</p> <p>Own Id: OTP-8004</p> </li></ul><h2>Fixed Bugs and Malfunctions</h2><ul><li> <p>Updated guard tests (i.e. is_list(L) instead of
list(L) and possibly andalso/orelse instead of ","/";"). </p> <p>Own Id: OTP-7994</p> </li><li> <p>[httpc] - Remove use of the deprecated regexp module. </p> <p>Own Id: OTP-8001</p> </li><li> <p>[httpc] - The option <strong>max_keep_alive_length</strong> was 
not handled properly. </p> <p>Own Id: OTP-8005</p> </li></ul></body></html>