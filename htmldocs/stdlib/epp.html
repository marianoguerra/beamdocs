<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>epp</h1><h1>epp</h1><p>An Erlang code preprocessor.</p><p>The Erlang code preprocessor includes functions that are used by the
<a href="./compile">compiler/compile</a>
module to preprocess macros and include files before
the parsing takes place.The Erlang source file <a name="encoding"></a><em>encoding</em> is selected by a
comment in one of the first two lines of the source file. The
first string matching the regular expression
<strong>coding\s*[:=]\s*([-a-zA-Z0-9])+</strong> selects the encoding. If
the matching string is not a valid encoding, it is ignored. The
valid encodings are <strong>Latin-1</strong> and <strong>UTF-8</strong>, where the
case of the characters can be chosen freely.<em>Examples:</em><pre>
%% coding: utf-8</pre><pre>
%% For this file we have chosen encoding = Latin-1</pre><pre>
%% -*- coding: latin-1 -*-</pre></p><h1>Data Types</h1><span class="name">macros</span><span class="name">epp_handle</span><p>Handle to the <strong>epp</strong> server.</p><span class="name">source_encoding</span><h1>Functions</h1><h2>close/1</h2><p>Close the preprocessing of the file associated with <strong>Epp</strong>. </p><p>Closes the preprocessing of a file.</p><h2>default_encoding/0</h2><p>Return the default encoding of Erlang source files.</p><p>Returns the default encoding of Erlang source files.</p><h2>encoding_to_string/1</h2><p>Return a string representation of an encoding.</p><p>Returns a string representation of an encoding. The string
is recognized by
<a href="#read_encoding/1">read_encoding/1</a>,
<a href="#read_encoding_from_binary/1">read_encoding_from_binary/1</a>, and
<a href="#set_encoding/1">set_encoding/1</a>
as a valid encoding.</p><h2>format_error/1</h2><p>Format an error descriptor.</p><p>Takes an <strong><span class="anno">ErrorDescriptor</span></strong> and returns
a string that
describes the error or warning. This function is usually
called implicitly when processing an <strong>ErrorInfo</strong>
structure (see section
<a href="#errorinfo">Error Information</a>).</p><h2>open/1</h2><p>Open a file for preprocessing.</p><p>Opens a file for preprocessing.</p><p>If you want to change the file name of the implicit -file()
attributes inserted during preprocessing, you can do with
<strong>{source_name, <span class="anno">SourceName</span>}</strong>. If unset it will
default to the name of the opened file.</p><p>If <strong>extra</strong> is specified in
<strong><span class="anno">Options</span></strong>, the return value is
<strong>{ok, <span class="anno">Epp</span>, <span class="anno">Extra</span>}</strong> instead
of <strong>{ok, <span class="anno">Epp</span>}</strong>.</p><h2>open/2</h2><p>Open a file for preprocessing.</p><p>Equivalent to
<strong>epp:open([{name, FileName}, {includes, IncludePath}])</strong>.</p><h2>open/3</h2><p>Open a file for preprocessing.</p><p>Equivalent to <strong>epp:open([{name, FileName}, {includes, IncludePath}, {macros, PredefMacros}])</strong>.</p><h2>parse_erl_form/1</h2><p>Return the next Erlang form from the opened Erlang source file. </p><ul><li>warning_info</li></ul><p>Returns the next Erlang form from the opened Erlang source file.
Tuple <strong>{eof, <span class="anno">Line</span>}</strong> is returned at the end of the
file. The first form corresponds to an implicit attribute
<strong>-file(File,1).</strong>, where <strong>File</strong> is the file name.</p><h2>parse_file/2</h2><p>Preprocess and parse an Erlang source file.</p><p>Preprocesses and parses an Erlang source file.
Notice that tuple <strong>{eof, <span class="anno">Line</span>}</strong> returned at the
end of the file is included as a "form".</p><p>If you want to change the file name of the implicit -file()
attributes inserted during preprocessing, you can do with
<strong>{source_name, <span class="anno">SourceName</span>}</strong>. If unset it will
default to the name of the opened file.</p><p>If <strong>extra</strong> is specified in
<strong><span class="anno">Options</span></strong>, the return value is
<strong>{ok, [<span class="anno">Form</span>], <span class="anno">Extra</span>}</strong> instead
of <strong>{ok, [<span class="anno">Form</span>]}</strong>.</p><h2>parse_file/3</h2><p>Preprocess and parse an Erlang source file.</p><p>Equivalent to <strong>epp:parse_file(FileName, [{includes, IncludePath}, {macros, PredefMacros}])</strong>.</p><h2>read_encoding/1</h2><h2>read_encoding/2</h2><p>Read the encoding from a file.</p><p>Read the <a href="#encoding">encoding</a> from
a file. Returns the read encoding, or <strong>none</strong> if no
valid encoding is found.</p><p>Option <strong>in_comment_only</strong> is <strong>true</strong> by
default, which is correct for Erlang source files. If set to
<strong>false</strong>, the encoding string does not necessarily have to
occur in a comment.</p><h2>read_encoding_from_binary/1</h2><h2>read_encoding_from_binary/2</h2><p>Read the encoding from a binary.</p><p>Read the <a href="#encoding">encoding</a> from
a binary. Returns the read encoding, or <strong>none</strong> if no
valid encoding is found.</p><p>Option <strong>in_comment_only</strong> is <strong>true</strong> by
default, which is correct for Erlang source files. If set to
<strong>false</strong>, the encoding string does not necessarily have to
occur in a comment.</p><h2>set_encoding/1</h2><p>Read and set the encoding of an I/O device.</p><p>Reads the <a href="#encoding">encoding</a> from
an I/O device and sets the encoding of the device
accordingly. The position of the I/O device referenced by
<strong><span class="anno">File</span></strong> is not affected. If no valid
encoding can be read from the I/O device, the encoding of the
I/O device is set to the default encoding.</p><p>Returns the read encoding, or <strong>none</strong> if no valid
encoding is found.</p><h2>set_encoding/2</h2><p>Read and set the encoding of an I/O device.</p><p>Reads the <a href="#encoding">encoding</a> from
an I/O device and sets the encoding of the device
accordingly. The position of the I/O device referenced by
<strong><span class="anno">File</span></strong> is not affected. If no valid
encoding can be read from the I/O device, the encoding of the
I/O device is set to the
<a href="#encoding">encoding</a> specified by
<strong><span class="anno">Default</span></strong>.</p><p>Returns the read encoding, or <strong>none</strong> if no valid
encoding is found.</p><h2>Error Information</h2><a name="errorinfo"></a><p><strong>ErrorInfo</strong> is the standard <strong>ErrorInfo</strong> structure that is
returned from all I/O modules. The format is as follows:</p><pre><code class="">
{ErrorLine, Module, ErrorDescriptor}</code></pre><p>A string describing the error is obtained with the following call:</p><pre><code class="">
Module:format_error(ErrorDescriptor)</code></pre><h2>See Also</h2><p><a href="erl_parse">erl_parse</a></p></body></html>