<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>erl_scan</h1><h1>erl_scan</h1><p>The Erlang token scanner.</p><p>This module contains functions for tokenizing (scanning) characters into
Erlang tokens.</p><h1>Data Types</h1><span class="name">category</span><span class="name">error_description</span><span class="name">error_info</span><span class="name">option</span><span class="name">options</span><span class="name">symbol</span><span class="name">resword_fun</span><span class="name">token</span><span class="name">tokens</span><span class="name">tokens_result</span><h1>Functions</h1><h2>category/1</h2><p>Return the category.</p><p>Returns the category of <strong><span class="anno">Token</span></strong>.</p><h2>column/1</h2><p>Return the column.</p><p>Returns the column of <strong><span class="anno">Token</span></strong>'s
collection of annotations.</p><h2>end_location/1</h2><p>Return the end location of the text.</p><p>Returns the end location of the text of
<strong><span class="anno">Token</span></strong>'s collection of annotations. If
there is no text, <strong>undefined</strong> is returned.</p><h2>format_error/1</h2><p>Format an error descriptor.</p><p>Uses an <strong><span class="anno">ErrorDescriptor</span></strong> and returns a string 
that describes the error or warning. This function is usually
called implicitly when an <strong>ErrorInfo</strong> structure is
processed (see section
<a href="#errorinfo">Error Information</a>).</p><h2>line/1</h2><p>Return the line.</p><p>Returns the line of <strong><span class="anno">Token</span></strong>'s collection
of annotations.</p><h2>location/1</h2><p>Return the location.</p><p>Returns the location of <strong><span class="anno">Token</span></strong>'s
collection of annotations.</p><h2>reserved_word/1</h2><p>Test for a reserved word.</p><p>Returns <strong>true</strong> if <strong><span class="anno">Atom</span></strong> is an
Erlang reserved word, otherwise <strong>false</strong>.</p><h2>string/1</h2><h2>string/2</h2><h2>string/3</h2><p>Scan a string and return the Erlang tokens.</p><p>Takes the list of characters <strong><span class="anno">String</span></strong> and tries to
scan (tokenize) them. Returns one of the following:</p><dl><dt><strong>{ok, <span class="anno">Tokens</span>, <span class="anno">EndLocation</span>}</strong></dt><dd> <p><strong><span class="anno">Tokens</span></strong> are the Erlang tokens from
<strong><span class="anno">String</span></strong>. <strong><span class="anno">EndLocation</span></strong>
is the first location after the last token.</p> </dd><dt><strong>{error, <span class="anno">ErrorInfo</span>, <span class="anno">ErrorLocation</span>}</strong></dt><dd> <p>An error occurred. <strong><span class="anno">ErrorLocation</span></strong> is the
first location after the erroneous token.</p> </dd></dl><p><strong>string(<span class="anno">String</span>)</strong> is equivalent to
<strong>string(<span class="anno">String</span>, 1)</strong>, and
<strong>string(<span class="anno">String</span>, <span class="anno">StartLocation</span>)</strong> is equivalent to
<strong>string(<span class="anno">String</span>, <span class="anno">StartLocation</span>, [])</strong>.</p><p><strong><span class="anno">StartLocation</span></strong> indicates the initial location
when scanning starts. If <strong><span class="anno">StartLocation</span></strong> is a line,
<strong>Anno</strong>, <strong><span class="anno">EndLocation</span></strong>, and
<strong><span class="anno">ErrorLocation</span></strong> are lines. If
<strong><span class="anno">StartLocation</span></strong> is a pair of a line and a column,
<strong>Anno</strong> takes the form of an opaque compound
data type, and <strong><span class="anno">EndLocation</span></strong> and
<strong><span class="anno">ErrorLocation</span></strong>
are pairs of a line and a column. The <em>token annotations</em> contain information about the column and the
line where the token begins, as well as the text of the
token (if option <strong>text</strong> is specified), all of which can
be accessed by calling
<a href="#column/1">column/1</a>,
<a href="#line/1">line/1</a>,
<a href="#location/1">location/1</a>, and
<a href="#text/1">text/1</a>.</p><p>A <em>token</em> is a tuple containing information about
syntactic category, the token annotations, and the
terminal symbol. For punctuation characters (such as <strong>;</strong> and 
<strong>|</strong>) and reserved words, the category and the symbol
coincide, and the token is represented by a two-tuple.
Three-tuples have one of the following forms:</p><ul><li><strong>{atom, Anno, atom()}</strong></li><li><strong>{char, Anno, char()}</strong></li><li><strong>{comment, Anno, string()}</strong></li><li><strong>{float, Anno, float()}</strong></li><li><strong>{integer, Anno, integer()}</strong></li><li><strong>{var, Anno, atom()}</strong></li><li><strong>{white_space, Anno, string()}</strong></li></ul><p>Valid options:</p><dl><dt><strong>{reserved_word_fun, reserved_word_fun()}</strong></dt><dd><p>A callback function that is called when the scanner
has found an unquoted atom. If the function returns
<strong>true</strong>, the unquoted atom itself becomes the category
of the token. If the function returns <strong>false</strong>,
<strong>atom</strong> becomes the category of the unquoted atom.</p> </dd><dt><strong>return_comments</strong></dt><dd><p>Return comment tokens.</p> </dd><dt><strong>return_white_spaces</strong></dt><dd><p>Return white space tokens. By convention, a newline
character, if present, is always the first character of the
text (there cannot be more than one newline in a white space
token).</p> </dd><dt><strong>return</strong></dt><dd><p>Short for <strong>[return_comments, return_white_spaces]</strong>.</p> </dd><dt><strong>text</strong></dt><dd><p>Include the token text in the token annotation. The
text is the part of the input corresponding to the token.</p> </dd></dl><h2>symbol/1</h2><p>Return the symbol.</p><p>Returns the symbol of <strong><span class="anno">Token</span></strong>.</p><h2>text/1</h2><p>Return the text.</p><p>Returns the text of <strong><span class="anno">Token</span></strong>'s collection
of annotations. If there is no text, <strong>undefined</strong> is
returned.</p><h2>tokens/3</h2><h2>tokens/4</h2><p>Re-entrant scanner.</p><ul><li>char_spec</li></ul><ul><li>return_cont</li></ul>An opaque continuation.<p>This is the re-entrant scanner, which scans characters until
either a <em>dot</em> ('.' followed by a white space) or
<strong>eof</strong> is reached. It returns:</p><dl><dt><strong>{done, <span class="anno">Result</span>, <span class="anno">LeftOverChars</span>}</strong> </dt><dd> <p>Indicates that there is sufficient input
data to get a result. <strong><span class="anno">Result</span></strong> is:</p> <dl><dt><strong>{ok, Tokens, EndLocation}</strong></dt><dd> <p>The scanning was successful. <strong>Tokens</strong>
is the list of tokens including <em>dot</em>.</p> </dd><dt><strong>{eof, EndLocation}</strong></dt><dd> <p>End of file was encountered before any more tokens.</p> </dd><dt><strong>{error, ErrorInfo, EndLocation}</strong></dt><dd> <p>An error occurred. <strong><span class="anno">LeftOverChars</span></strong>
is the remaining characters of the input data,
starting from <strong>EndLocation</strong>.</p> </dd></dl> </dd><dt><strong>{more, <span class="anno">Continuation1</span>}</strong></dt><dd> <p>More data is required for building a term.
<strong><span class="anno">Continuation1</span></strong> must be passed in a new call to
<strong>tokens/3,4</strong> when more data is available.</p> </dd></dl><p>The <strong><span class="anno">CharSpec</span></strong> <strong>eof</strong> signals end of file.
<strong><span class="anno">LeftOverChars</span></strong> then takes the value <strong>eof</strong>
as well.</p><p><strong>tokens(<span class="anno">Continuation</span>, <span class="anno">CharSpec</span>, <span class="anno">StartLocation</span>)</strong> is equivalent to
<strong>tokens(<span class="anno">Continuation</span>, <span class="anno">CharSpec</span>, <span class="anno">StartLocation</span>, [])</strong>.</p><p>For a description of the options, see
<a href="#string/3">string/3</a>.</p><a name="errorinfo"></a><h2>Error Information</h2><p><strong>ErrorInfo</strong> is the standard <strong>ErrorInfo</strong> structure that is
returned from all I/O modules. The format is as follows:</p><pre><code class="">
{ErrorLocation, Module, ErrorDescriptor}</code></pre><p>A string describing the error is obtained with the following call:</p><pre><code class="">
Module:format_error(ErrorDescriptor)</code></pre><h2>Notes</h2><p>The continuation of the first call to the re-entrant input
functions must be <strong>[]</strong>. For a complete description of how the
re-entrant input scheme works, see Armstrong, Virding and
Williams: 'Concurrent Programming in Erlang', Chapter 13.</p><h2>See Also</h2><p><a href="erl_anno">erl_anno</a>,
<a href="erl_parse">erl_parse</a>,
<a href="io">io</a></p></body></html>