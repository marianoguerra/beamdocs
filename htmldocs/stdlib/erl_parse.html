<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>erl_parse</h1><h1>erl_parse</h1><p>The Erlang parser.</p><p>This module is the basic Erlang parser that converts tokens into
the abstract form of either forms (that is, top-level constructs),
expressions, or terms. The Abstract Format is described in the
<a href="./absform">ERTS User's Guide</a>.
Notice that a token list must end with the <em>dot</em> token to be
acceptable to the parse functions (see the <a href="erl_scan">erl_scan</a>) module.</p><h1>Data Types</h1><span class="name">abstract_clause()</span><p>Abstract form of an Erlang clause.</p><span class="name">abstract_expr()</span><p>Abstract form of an Erlang expression.</p><span class="name">abstract_form()</span><p>Abstract form of an Erlang form.</p><span class="name">abstract_type()</span><p>Abstract form of an Erlang type.</p><span class="name">erl_parse_tree</span><span class="name">error_description</span><span class="name">error_info</span><span class="name">form_info</span><p>Tuples <strong>{error, error_info()}</strong> and <strong>{warning, error_info()}</strong>, denoting syntactically incorrect forms and
warnings, and <strong>{eof, line()}</strong>, denoting an end-of-stream
encountered before a complete form had been parsed.</p><span class="name">token</span><h1>Functions</h1><h2>abstract/1</h2><p>Convert an Erlang term into an abstract form.</p><p>Converts the Erlang data structure <strong><span class="anno">Data</span></strong> into an
abstract form of type <strong><span class="anno">AbsTerm</span></strong>.
This function is the inverse of
<a href="#normalise/1">normalise/1</a>.</p><p><strong>erl_parse:abstract(T)</strong> is equivalent to
<strong>erl_parse:abstract(T, 0)</strong>.</p><h2>abstract/2</h2><p>Convert an Erlang term into an abstract form.</p><ul><li>encoding_func</li></ul><p>Converts the Erlang data structure <strong><span class="anno">Data</span></strong> into an
abstract form of type <strong><span class="anno">AbsTerm</span></strong>.</p><p>Option <strong><span class="anno">Line</span></strong> is the line to be
assigned to each node of <strong><span class="anno">AbsTerm</span></strong>.</p><p>Option <strong><span class="anno">Encoding</span></strong> is used for
selecting which integer lists to be considered
as strings. The default is to use the encoding returned by
function <a href="./epp#default_encoding/0">epp#default_encoding/0</a>.
Value <strong>none</strong> means that no integer lists are
considered as strings. <strong>encoding_func()</strong> is
called with one integer of a list at a time; if it
returns <strong>true</strong> for every integer, the list is
considered a string.</p><h2>anno_from_term/1</h2><p>Return annotations as terms.</p><p>Assumes that <strong><span class="anno">Term</span></strong> is a term with the same
structure as a <strong>erl_parse</strong> tree, but with terms,
say <strong>T</strong>, where a <strong>erl_parse</strong> tree has collections
of annotations. Returns a <strong>erl_parse</strong> tree where each
term <strong>T</strong> is replaced by the value returned by
<a href="./erl_anno#from_term/1">erl_anno#from_term/1</a>. The term
<strong><span class="anno">Term</span></strong> is traversed in a depth-first,
left-to-right fashion.</p><h2>anno_to_term/1</h2><p>Return the representation of annotations.</p><p>Returns a term where each collection of annotations
<strong>Anno</strong> of the nodes of the <strong>erl_parse</strong> tree
<strong><span class="anno">Abstr</span></strong> is replaced by the term
returned by <a href="./erl_anno#to_term/1">erl_anno#to_term/1</a>. The
<strong>erl_parse</strong> tree is traversed in a depth-first,
left-to-right fashion.</p><h2>fold_anno/3</h2><p>Fold a function over the annotations of an <strong>erl_parse</strong> tree. </p><p>Updates an accumulator by applying <strong><span class="anno">Fun</span></strong> on
each collection of annotations of the <strong>erl_parse</strong> tree
<strong><span class="anno">Abstr</span></strong>. The first call to
<strong><span class="anno">Fun</span></strong> has <strong><span class="anno">AccIn</span></strong> as
argument, the returned accumulator
<strong><span class="anno">AccOut</span></strong> is passed to the next call, and
so on. The final value of the accumulator is returned. The
<strong>erl_parse</strong> tree is traversed in a depth-first, left-to-right
fashion.</p><h2>format_error(ErrorDescriptor) -&gt; Chars</h2><p>Format an error descriptor.</p><ul><li><span class="v">ErrorDescriptor = </span></li><li><span class="v">Chars = [char() | Chars]</span></li></ul><p>Uses an <strong>ErrorDescriptor</strong> and returns a string
that describes the error. This function is usually called
implicitly when an <strong>ErrorInfo</strong> structure is processed
(see section <a href="#errorinfo"> Error Information</a>).</p><h2>map_anno/2</h2><p>Map a function over the annotations of an <strong>erl_parse</strong> tree. </p><p>Modifies the <strong>erl_parse</strong> tree <strong><span class="anno">Abstr</span></strong>
by applying <strong><span class="anno">Fun</span></strong> on each collection of
annotations of the nodes of the <strong>erl_parse</strong> tree. The
<strong>erl_parse</strong> tree is traversed in a depth-first,
left-to-right fashion.</p><h2>mapfold_anno/3</h2><p>Map and fold a function over the annotations of an <strong>erl_parse</strong> tree.</p><p>Modifies the <strong>erl_parse</strong> tree <strong><span class="anno">Abstr</span></strong>
by applying <strong><span class="anno">Fun</span></strong> on each collection of
annotations of the nodes of the <strong>erl_parse</strong> tree, while
at the same time updating an accumulator. The first call to
<strong><span class="anno">Fun</span></strong> has <strong><span class="anno">AccIn</span></strong> as
second argument, the returned accumulator
<strong><span class="anno">AccOut</span></strong> is passed to the next call, and
so on. The modified <strong>erl_parse</strong> tree and the
final value of the accumulator are returned. The
<strong>erl_parse</strong> tree is traversed in a depth-first,
left-to-right fashion.</p><h2>new_anno/1</h2><p>Create new annotations.</p><p>Assumes that <strong><span class="anno">Term</span></strong> is a term with the same
structure as a <strong>erl_parse</strong> tree, but with <a href="./erl_anno#type-location">locations</a> where a
<strong>erl_parse</strong> tree has collections of annotations.
Returns a <strong>erl_parse</strong> tree where each location <strong>L</strong>
is replaced by the value returned by <a href="./erl_anno#new/1">erl_anno#new/1</a>.
The term <strong><span class="anno">Term</span></strong> is traversed in a
depth-first, left-to-right fashion.</p><h2>normalise/1</h2><p>Convert abstract form to an Erlang term.</p><p>Converts the abstract form <strong><span class="anno">AbsTerm</span></strong> of a
term into a conventional Erlang data structure (that is, the
term itself). This function is the inverse of
<a href="#abstract/1">abstract/1</a>.</p><h2>parse_exprs/1</h2><p>Parse Erlang expressions.</p><p>Parses <strong><span class="anno">Tokens</span></strong> as if it was a list of expressions.
Returns one of the following:</p><dl><dt><strong>{ok, <span class="anno">ExprList</span>}</strong></dt><dd> <p>The parsing was successful. <strong><span class="anno">ExprList</span></strong> is a
list of the abstract forms of the parsed expressions.</p> </dd><dt><strong>{error, <span class="anno">ErrorInfo</span>}</strong></dt><dd> <p>An error occurred.</p> </dd></dl><h2>parse_form/1</h2><p>Parse an Erlang form.</p><p>Parses <strong><span class="anno">Tokens</span></strong> as if it was a form. Returns one
of the following:</p><dl><dt><strong>{ok, <span class="anno">AbsForm</span>}</strong></dt><dd> <p>The parsing was successful. <strong><span class="anno">AbsForm</span></strong> is the
abstract form of the parsed form.</p> </dd><dt><strong>{error, <span class="anno">ErrorInfo</span>}</strong></dt><dd> <p>An error occurred.</p> </dd></dl><h2>parse_term/1</h2><p>Parse an Erlang term.</p><p>Parses <strong><span class="anno">Tokens</span></strong> as if it was a term. Returns
one of the following:</p><dl><dt><strong>{ok, <span class="anno">Term</span>}</strong></dt><dd> <p>The parsing was successful. <strong><span class="anno">Term</span></strong> is
the Erlang term corresponding to the token list.</p> </dd><dt><strong>{error, <span class="anno">ErrorInfo</span>}</strong></dt><dd> <p>An error occurred.</p> </dd></dl><h2>tokens/1</h2><h2>tokens/2</h2><p>Generate a list of tokens for an expression.</p><p>Generates a list of tokens representing the abstract
form <strong><span class="anno">AbsTerm</span></strong> of an expression. Optionally,
<strong><span class="anno">MoreTokens</span></strong> is appended.</p><a name="errorinfo"></a><h2>Error Information</h2><p><strong>ErrorInfo</strong> is the standard <strong>ErrorInfo</strong> structure that is
returned from all I/O modules. The format is as follows:</p><pre><code class="">
{ErrorLine, Module, ErrorDescriptor}</code></pre><p>A string describing the error is obtained with the following call:</p><pre><code class="">
Module:format_error(ErrorDescriptor)</code></pre><h2>See Also</h2><p><a href="erl_anno">erl_anno</a>,
<a href="erl_scan">erl_scan</a>,
<a href="io">io</a>,
section <a href="./absform">The Abstract Format</a>
in the ERTS User's Guide</p></body></html>