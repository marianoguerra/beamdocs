<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>init</h1><h1>init</h1><p>Coordination of system startup.</p><p>This module is preloaded and contains the code for
the <strong>init</strong> system process that coordinates the startup of
the system. The first function evaluated at startup is
<strong>boot(BootArgs)</strong>, where <strong>BootArgs</strong> is a list of
command-line arguments supplied to the Erlang runtime system from
the local operating system; see
<a href="./erl">erts/erl</a>.<strong>init</strong> reads the boot script, which contains instructions on
how to initiate the system. For more information about boot scripts, see
<a href="./script">sasl/script</a>.<strong>init</strong> also contains functions to restart, reboot, and stop
the system.</p><h1>Functions</h1><h2>boot/1</h2><p>Start the Erlang runtime system.</p><p>Starts the Erlang runtime system. This function is called
when the emulator is started and coordinates system startup.</p><p><strong><span class="anno">BootArgs</span></strong> are all command-line arguments except
the emulator flags, that is, flags and plain arguments; see
<a href="./erl">erts/erl</a>.</p><p><strong>init</strong> interprets some of the flags, see section
<a href="#flags">Command-Line Flags</a> below.
The remaining flags ("user flags") and plain arguments are
passed to the <strong>init</strong> loop and can be retrieved by calling
<a href="#get_arguments/0">get_arguments/0</a>
and <a href="#get_plain_arguments/0">get_plain_arguments/0</a>, respectively.</p><h2>get_argument/1</h2><p>Get the values associated with a command-line user flag. </p><p>Returns all values associated with the command-line user flag
<strong><span class="anno">Flag</span></strong>. If <strong><span class="anno">Flag</span></strong> is provided
several times, each <strong><span class="anno">Values</span></strong> is returned in
preserved order. Example:</p><pre>
% <span class="input">erl -a b c -a d</span>
...
1&gt; <span class="input">init:get_argument(a).</span>
{ok,[["b","c"],["d"]]}</pre><p>The following flags are defined
automatically and can be retrieved using this function:</p><dl><dt><strong>root</strong></dt><dd> <p>The installation directory of Erlang/OTP, <strong>$ROOT</strong>:</p> <pre>
2&gt; <span class="input">init:get_argument(root).</span>
{ok,[["/usr/local/otp/releases/otp_beam_solaris8_r10b_patched"]]}</pre> </dd><dt><strong>progname</strong></dt><dd> <p>The name of the program which started Erlang:</p> <pre>
3&gt; <span class="input">init:get_argument(progname).</span>
{ok,[["erl"]]}</pre> </dd><dt><strong>home</strong></dt><dd> <p>The home directory:</p> <pre>
4&gt; <span class="input">init:get_argument(home).</span>
{ok,[["/home/harry"]]}</pre> </dd></dl><p>Returns <strong>error</strong> if no value is associated with <strong>Flag</strong>.</p><h2>get_arguments/0</h2><p>Get all command-line user flags.</p><p>Returns all command-line flags and the system-defined flags, see
<a href="#get_argument/1">get_argument/1</a>.</p><h2>get_plain_arguments/0</h2><p>Get all non-flag command-line arguments.</p><p>Returns any plain command-line arguments as a list of strings
(possibly empty).</p><h2>get_status/0</h2><p>Get system status information.</p><ul><li>internal_status</li></ul><p>The current status of the <strong>init</strong> process can be
inspected. During system startup (initialization),
<strong><span class="anno">InternalStatus</span></strong> is <strong>starting</strong>, and
<strong><span class="anno">ProvidedStatus</span></strong> indicates how far the boot
script has been interpreted. Each <strong>{progress, Info}</strong> term
interpreted in the boot script affects
<strong><span class="anno">ProvidedStatus</span></strong>, that is,
<strong><span class="anno">ProvidedStatus</span></strong> gets the value of <strong>Info</strong>.</p><h2>reboot/0</h2><p>Take down and restart an Erlang node smoothly.</p><p>All applications are taken down smoothly, all code is
unloaded, and all ports are closed before the system
terminates. If command-line flag <strong>-heart</strong> was specified,
the <strong>heart</strong> program tries to reboot the system. For more
information, see
<a href="./heart">kernel/heart</a>.</p><p>To limit the shutdown time, the time <strong>init</strong> is allowed
to spend taking down applications, command-line flag
<strong>-shutdown_time</strong> is to be used.</p><h2>restart/0</h2><p>Restart the running Erlang node.</p><p>The system is restarted <em>inside</em> the running Erlang
node, which means that the emulator is not restarted. All
applications are taken down smoothly, all code is unloaded,
and all ports are closed before the system is booted again in
the same way as initially started. The same <strong>BootArgs</strong>
are used again.</p><p>To limit the shutdown time, the time <strong>init</strong> is allowed
to spend taking down applications, command-line flag
<strong>-shutdown_time</strong> is to be used.</p><h2>script_id/0</h2><p>Get the identity of the used boot script.</p><p>Gets the identity of the boot script used to boot the system.
<strong><span class="anno">Id</span></strong> can be any Erlang term. In the delivered boot
scripts, <strong><span class="anno">Id</span></strong> is <strong>{Name, Vsn}</strong>. <strong>Name</strong>
and <strong>Vsn</strong> are strings.</p><h2>stop/0</h2><p>Take down an Erlang node smoothly.</p><p>The same as
<a href="#stop/1">stop/1</a>.</p><h2>stop/1</h2><p>Take down an Erlang node smoothly.</p><p>All applications are taken down smoothly, all code is
unloaded, and all ports are closed before the system
terminates by calling <strong>halt(<span class="anno">Status</span>)</strong>. If
command-line flag <strong>-heart</strong> was specified, the <strong>heart</strong>
program is terminated before the Erlang node terminates.
For more information, see
<a href="./heart">kernel/heart</a>.</p><p>To limit the shutdown time, the time <strong>init</strong> is allowed
to spend taking down applications, command-line flag
<strong>-shutdown_time</strong> is to be used.</p><a name="flags"></a><h2>Command-Line Flags</h2><div class="alert alert-warning"><h4 class="alert-heading">Warning</h4><p>The support for loading of code from archive files is
experimental. The only purpose of releasing it before it is ready
is to obtain early feedback. The file format, semantics,
interfaces, and so on, can  be changed in a future release. The
<strong>-code_path_choice</strong> flag is also experimental.</p></div><p>The <strong>init</strong> module interprets the following command-line flags:</p><dl><dt><strong>--</strong></dt><dd> <p>Everything following <strong>--</strong> up to the next flag is
considered plain arguments and can be retrieved using
<a href="#get_plain_arguments/0">get_plain_arguments/0</a>.</p> </dd><dt><strong>-code_path_choice Choice</strong></dt><dd> <p>Can be set to <strong>strict</strong> or <strong>relaxed</strong>. It controls how each
directory in the code path is to be interpreted:</p> <ul><li> <p>Strictly as it appears in the <strong>boot script</strong>, or</p> </li><li> <p><strong>init</strong> is to be more relaxed and try to find a suitable
directory if it can choose from a regular <strong>ebin</strong> directory
and an <strong>ebin</strong> directory in an archive file.</p> </li></ul> <p>This flag is particular
useful when you want to elaborate with code loading from
archives without editing the <strong>boot script</strong>. For more
information about interpretation of boot scripts, see
<a href="./script">sasl/script</a>.
The flag has also a similar effect on how the code server works; see
<a href="./code">kernel/code</a>.</p> </dd><dt><strong>-epmd_module Module</strong></dt><dd> <p>Specifies the module to use for registration and lookup of
node names.  Defaults to <strong>erl_epmd</strong>.</p> </dd><dt><strong>-eval Expr</strong></dt><dd> <p>Scans, parses, and evaluates an arbitrary expression
<strong>Expr</strong> during system initialization. If any of these
steps fail (syntax error, parse error, or exception during
evaluation), Erlang stops with an error message. In the following
example Erlang is used as a hexadecimal calculator:</p> <pre>
% <span class="input">erl -noshell -eval 'R = 16#1F+16#A0, io:format("~.16B~n", [R])' \\</span>
<span class="input">-s erlang halt</span>
BF</pre> <p>If multiple <strong>-eval</strong> expressions are specified, they
are evaluated sequentially in the order specified.
<strong>-eval</strong> expressions are evaluated sequentially with
<strong>-s</strong> and <strong>-run</strong> function calls (this also in
the order specified). As with <strong>-s</strong> and <strong>-run</strong>, an
evaluation that does not terminate blocks the system
initialization process.</p> </dd><dt><strong>-extra</strong></dt><dd> <p>Everything following <strong>-extra</strong> is considered plain
arguments and can be retrieved using
<a href="#get_plain_arguments/0">get_plain_arguments/0</a>.</p> </dd><dt><strong>-run Mod [Func [Arg1, Arg2, ...]]</strong></dt><dd> <p>Evaluates the specified function call during system
initialization. <strong>Func</strong> defaults to <strong>start</strong>. If no
arguments are provided, the function is assumed to be of arity
0. Otherwise it is assumed to be of arity 1, taking the list
<strong>[Arg1,Arg2,...]</strong> as argument. All arguments are passed
as strings. If an exception is raised, Erlang stops with an
error message.</p> <p>Example:</p> <pre>
% <span class="input">erl -run foo -run foo bar -run foo bar baz 1 2</span></pre> <p>This starts the Erlang runtime system and evaluates
the following functions:</p> <pre><code class="">
foo:start()
foo:bar()
foo:bar(["baz", "1", "2"]).</code></pre> <p>The functions are executed sequentially in an initialization
process, which then terminates normally and passes control to
the user. This means that a <strong>-run</strong> call that does not
return blocks further processing; to avoid this, use
some variant of <strong>spawn</strong> in such cases.</p> </dd><dt><strong>-s Mod [Func [Arg1, Arg2, ...]]</strong></dt><dd> <p>Evaluates the specified function call during system
initialization. <strong>Func</strong> defaults to <strong>start</strong>. If no
arguments are provided, the function is assumed to be of arity
0. Otherwise it is assumed to be of arity 1, taking the list
<strong>[Arg1,Arg2,...]</strong> as argument. All arguments are passed
as atoms. If an exception is raised, Erlang stops with an
error message.</p> <p>Example:</p> <pre>
% <span class="input">erl -s foo -s foo bar -s foo bar baz 1 2</span></pre> <p>This starts the Erlang runtime system and evaluates
the following functions:</p> <pre><code class="">
foo:start()
foo:bar()
foo:bar([baz, '1', '2']).</code></pre> <p>The functions are executed sequentially in an initialization
process, which then terminates normally and passes control to
the user. This means that a <strong>-s</strong> call that does not
return blocks further processing; to avoid this, use
some variant of <strong>spawn</strong> in such cases.</p> <p>Because of the limited length of atoms, it is recommended to
use <strong>-run</strong> instead.</p> </dd></dl><h2>Example</h2><pre>
% <span class="input">erl -- a b -children thomas claire -ages 7 3 -- x y</span>
...

1&gt; <span class="input">init:get_plain_arguments().</span>
["a","b","x","y"]
2&gt; <span class="input">init:get_argument(children).</span>
{ok,[["thomas","claire"]]}
3&gt; <span class="input">init:get_argument(ages).</span>
{ok, [["7","3"]]}
4&gt; <span class="input">init:get_argument(silly).</span>
error</pre><h2>See Also</h2><p><a href="erl_prim_loader">erl_prim_loader</a>, 
<a href="./heart">kernel/heart</a></p></body></html>