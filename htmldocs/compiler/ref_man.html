<!doctype html>
<html><head><meta charset="utf-8"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css"></head><body style="margin: 4em 10%"><h1>Compiler Reference Manual</h1><p>The Compiler application compiles Erlang
code to byte-code. The highly compact byte-code is executed by
the Erlang emulator.</p><h2>compile</h2><p>Erlang Compiler</p><p>This module provides an interface to the standard Erlang
compiler. It can generate either a new file, which contains
the object code, or return a binary, which can be loaded directly.
</p><h2>Functions</h2><h3>env_compiler_options()</h3><p> Compiler options defined via the environment variable <strong>ERL_COMPILER_OPTIONS</strong> </p><p>Return compiler options given via the environment variable
<strong>ERL_COMPILER_OPTIONS</strong>. If the value is a list, it is
returned as is. If it is not a list, it is put into a list.
</p><h3>file(File)</h3><p>Compiles a file.</p><p>Is the same as
<strong>file(File, [verbose,report_errors,report_warnings])</strong>.
</p><h3>file(File, Options) -&gt; CompRet</h3><p>Compiles a file.</p><ul><li><span class="v">CompRet = ModRet | BinRet | ErrRet</span></li><li><span class="v">ModRet = {ok,ModuleName} | {ok,ModuleName,Warnings}</span></li><li><span class="v">BinRet = {ok,ModuleName,Binary} | {ok,ModuleName,Binary,Warnings}</span></li><li><span class="v">ErrRet = error | {error,Errors,Warnings}</span></li></ul><p>Compiles the code in the file <strong>File</strong>, which is an
Erlang source code file without the <strong>.erl</strong> extension.
<strong>Options</strong> determine the behavior of the compiler.</p><p>Returns <strong>{ok,ModuleName}</strong> if successful, or <strong>error</strong>
if there are errors. An object code file is created if
the compilation succeeds without errors. It is considered
to be an error if the module name in the source code is
not the same as the basename of the output file.</p><p><a name="type-option"></a>Available options:</p><dl><dt><strong>basic_validation</strong></dt><dd> <p>This option is a fast way to test whether a module will
compile successfully. This is useful for code generators
that want to verify the code that they emit. No code is
generated. If warnings are enabled, warnings generated by
the <strong>erl_lint</strong> module (such as warnings for unused
variables and functions) are also returned.</p> <p>Use option <strong>strong_validation</strong> to generate all
warnings that the compiler would generate.</p> </dd><dt><strong>strong_validation</strong></dt><dd> <p>Similar to option <strong>basic_validation</strong>. No code
is generated, but more compiler passes are run
to ensure that warnings generated by the optimization
passes are generated (such as clauses that will not match,
or expressions that are guaranteed to fail with an
exception at runtime).</p> </dd><dt><strong>binary</strong></dt><dd> <p>The compiler returns the object code in a
binary instead of creating an object file. If successful,
the compiler returns <strong>{ok,ModuleName,Binary}</strong>.</p> </dd><dt><strong>bin_opt_info</strong></dt><dd> <p>The compiler will emit informational warnings about binary
matching optimizations (both successful and unsuccessful).
For more information, see the section about
<a href="../doc/efficiency_guide/binaryhandling#bin_opt_info">bin_opt_info</a>
in the Efficiency Guide.</p> </dd><dt><strong>{compile_info, [{atom(), term()}]}</strong></dt><dd> <p>Allows compilers built on top of <strong>compile</strong> to attach
extra compilation metadata to the <strong>compile_info</strong> chunk
in the generated beam file.</p> <p>It is advised for compilers to remove all non-deterministic
information if the <strong>deterministic</strong> option is supported and
it was supplied by the user.</p> </dd><dt><strong>compressed</strong></dt><dd> <p>The compiler will compress the generated object code,
which can be useful for embedded systems.</p> </dd><dt><strong>debug_info</strong></dt><dd> <a name="debug_info"></a> <p>Includes debug information in the form of <a href="./absform"> Erlang Abstract Format</a> in the <strong>debug_info</strong>
chunk of the compiled beam module. Tools such as Debugger,
Xref, and Cover require the debug information to be included.</p> <p><em>Warning</em>: Source code can be reconstructed from
the debug information. Use encrypted debug information
(<strong>encrypt_debug_info</strong>) to prevent this.</p> <p>For details, see
<a href="../stdlib/beam_lib#debug_info">beam_lib(3)</a>.</p> </dd><dt><strong>{debug_info, {Backend, Data}}</strong></dt><dd> <a name="debug_info"></a> <p>Includes custom debug information in the form of a
<strong>Backend</strong> module with custom <strong>Data</strong> in the compiled beam module.
The given module must implement a <strong>debug_info/4</strong> function
and is responsible for generating different code representations,
as described in the <strong>debug_info</strong> under
<a href="../stdlib/beam_lib#debug_info">beam_lib(3)</a>.</p> <p><em>Warning</em>: Source code can be reconstructed from
the debug information. Use encrypted debug information
(<strong>encrypt_debug_info</strong>) to prevent this.</p> </dd><dt><strong>{debug_info_key,KeyString}</strong></dt><dd></dd><dt><strong>{debug_info_key,{Mode,KeyString}}</strong></dt><dd> <a name="debug_info_key"></a> <p>Includes debug information, but encrypts it so that it
cannot be accessed without supplying the key. (To give
option <strong>debug_info</strong> as well is allowed, but
not necessary.) Using this option is a good way to always
have the debug information available during testing, yet
protecting the source code.</p> <p><strong>Mode</strong> is the type of crypto algorithm to be used
for encrypting the debug information. The default
(and currently the only) type is <strong>des3_cbc</strong>.</p> <p>For details, see
<a href="../stdlib/beam_lib#debug_info">beam_lib(3)</a>.</p> </dd><dt><strong>encrypt_debug_info</strong></dt><dd> <a name="encrypt_debug_info"></a> <p>Similar to the <strong>debug_info_key</strong> option, but
the key is read from an <strong>.erlang.crypt</strong> file.
</p> <p>For details, see
<a href="../stdlib/beam_lib#debug_info">beam_lib(3)</a>.</p> </dd><dt><strong>deterministic</strong></dt><dd> <p>Omit the <strong>options</strong> and <strong>source</strong> tuples in
the list returned by <strong>Module:module_info(compile)</strong>, and
reduce the paths in stack traces to the module name alone.
This option will make it easier to achieve reproducible builds.
</p> </dd><dt><strong>makedep</strong></dt><dd> <p>Produces a Makefile rule to track headers dependencies.
No object file is produced.
</p> <p>By default, this rule is written to
<strong>&lt;File&gt;.Pbeam</strong>. However, if option
<strong>binary</strong> is set, nothing is written and the rule is
returned in <strong>Binary</strong>.
</p> <p>For example, if you have the following module:
</p> <pre><code class="">
-module(module).

-include_lib("eunit/include/eunit.hrl").
-include("header.hrl").</code></pre> <p>The Makefile rule generated by this option looks as follows:
</p> <pre><code class="">
module.beam: module.erl \
  /usr/local/lib/erlang/lib/eunit/include/eunit.hrl \
  header.hrl</code></pre> </dd><dt><strong>makedep_side_effect</strong></dt><dd> <p>The dependecies are created as a side effect to the
normal compilation process. This means that the object
file will also be produced. This option override the
<strong>makedep</strong> option.
</p> </dd><dt><strong>{makedep_output, Output}</strong></dt><dd> <p>Writes generated rules to <strong>Output</strong> instead of the
default <strong>&lt;File&gt;.Pbeam</strong>. <strong>Output</strong>
can be a filename or an <strong>io_device()</strong>. To write to
stdout, use <strong>standard_io</strong>. However, if <strong>binary</strong>
is set, nothing is written to <strong>Output</strong> and the
result is returned to the caller with
<strong>{ok, ModuleName, Binary}</strong>.
</p> </dd><dt><strong>{makedep_target, Target}</strong></dt><dd> <p>Changes the name of the rule emitted to <strong>Target</strong>.
</p> </dd><dt><strong>makedep_quote_target</strong></dt><dd> <p>Characters in <strong>Target</strong> special to make(1) are quoted.
</p> </dd><dt><strong>makedep_add_missing</strong></dt><dd> <p>Considers missing headers as generated files and adds them to the
dependencies.
</p> </dd><dt><strong>makedep_phony</strong></dt><dd> <p>Adds a phony target for each dependency.
</p> </dd><dt><strong>'P'</strong></dt><dd> <p>Produces a listing of the parsed code, after preprocessing
and parse transforms, in the file
<strong>&lt;File&gt;.P</strong>. No object file is produced.
</p> </dd><dt><strong>'E'</strong></dt><dd> <p>Produces a listing of the code, after all source code
transformations have been performed, in the file
<strong>&lt;File&gt;.E</strong>. No object file is produced.
</p> </dd><dt><strong>'S'</strong></dt><dd> <p>Produces a listing of the assembler code in the file
<strong>&lt;File&gt;.S</strong>. No object file is produced.
</p> </dd><dt><strong>report_errors/report_warnings</strong></dt><dd> <p>Causes errors/warnings to be printed as they occur.</p> </dd><dt><strong>report</strong></dt><dd> <p>A short form for both <strong>report_errors</strong> and
<strong>report_warnings</strong>.</p> </dd><dt><strong>return_errors</strong></dt><dd> <p>If this flag is set,
<strong>{error,ErrorList,WarningList}</strong> is returned when
there are errors.</p> </dd><dt><strong>return_warnings</strong></dt><dd> <p>If this flag is set, an extra field, containing
<strong>WarningList</strong>, is added to the tuples returned on
success.</p> </dd><dt><strong>warnings_as_errors</strong></dt><dd> <p>Causes warnings to be treated as errors. This option is supported
since R13B04.</p> </dd><dt><strong>return</strong></dt><dd> <p>A short form for both <strong>return_errors</strong> and
<strong>return_warnings</strong>.</p> </dd><dt><strong>verbose</strong></dt><dd> <p>Causes more verbose information from the compiler,
describing what it is doing.</p> </dd><dt><strong>{source,FileName}</strong></dt><dd> <p>Overrides the source file name as presented in
<strong>module_info(compile)</strong> and stack traces.</p> </dd><dt><strong>{outdir,Dir}</strong></dt><dd> <p>Sets a new directory for the object code. The current
directory is used for output, except when a directory
has been specified with this option.</p> </dd><dt><strong>export_all</strong></dt><dd> <p>Causes all functions in the module to be exported.</p> </dd><dt><strong>{i,Dir}</strong></dt><dd> <p>Adds <strong>Dir</strong> to the list of directories to be searched
when including a file. When encountering an
<strong>-include</strong> or <strong>-include_lib</strong> directive,
the compiler searches for header files in the following
directories:</p> <ul><li> <p><strong>"."</strong>, the current working directory of
the file server</p> </li><li> <p>The base name of the compiled file</p> </li><li> <p>The directories specified using option <strong>i</strong>;
the directory specified last is searched first</p> </li></ul> </dd><dt><strong>{d,Macro}</strong></dt><dd></dd><dt><strong>{d,Macro,Value}</strong></dt><dd> <p>Defines a macro <strong>Macro</strong> to have the value
<strong>Value</strong>. <strong>Macro</strong> is of type atom, and <strong>Value</strong> can be any term.
The default <strong>Value</strong> is <strong>true</strong>.</p> </dd><dt><strong>{parse_transform,Module}</strong></dt><dd> <p>Causes the parse transformation function
<strong>Module:parse_transform/2</strong> to be applied to the
parsed code before the code is checked for errors.</p> </dd><dt><strong>from_asm</strong></dt><dd> <p>The input file is expected to be assembler code (default
file suffix ".S"). Notice that the format of assembler files
is not documented, and can change between releases.</p> </dd><dt><strong>from_core</strong></dt><dd> <p>The input file is expected to be core code (default
file suffix ".core"). Notice that the format of core files
is not documented, and can change between releases.</p> </dd><dt><strong>no_spawn_compiler_process</strong></dt><dd> <p>By default, all code is compiled in a separate process
which is terminated at the end of compilation. However,
some tools, like Dialyzer or compilers for other BEAM languages,
may already manage their own worker processes and spawning
an extra process may slow the compilation down.
In such scenarios, you can pass this option to stop the
compiler from spawning an additional process.</p> </dd><dt><strong>no_strict_record_tests</strong></dt><dd> <p>This option is not recommended.</p> <p>By default, the generated code for
operation <strong>Record#record_tag.field</strong> verifies that
the tuple <strong>Record</strong> has the correct size for
the record, and that the first element is the tag
<strong>record_tag</strong>. Use this option to omit
the verification code.</p> </dd><dt><strong>no_error_module_mismatch</strong></dt><dd> <p>Normally the compiler verifies that the module name
given in the source code is the same as the base name
of the output file and refuses to generate an output file
if there is a mismatch. If you have a good reason (or
other reason) for having a module name unrelated to the
name of the output file, this option disables that verification
(there will not even be a warning if there is a mismatch).</p> </dd><dt><strong>{no_auto_import,[{F,A}, ...]}</strong></dt><dd> <p>Makes the function <strong>F/A</strong> no longer being
auto-imported from the <strong>erlang</strong> module, which resolves
BIF name clashes. This option must be used to resolve name
clashes with BIFs auto-imported before R14A, if it is needed to
call the local function with the same name as an
auto-imported BIF without module prefix.</p> <div class="alert alert-info"><h4 class="alert-heading">Note</h4><p>As from R14A and forward, the compiler resolves calls
without module prefix to local or imported functions before
trying with auto-imported BIFs. If the BIF is to be
called, use the <strong>erlang</strong> module prefix in the call, not
<strong>{no_auto_import,[{F,A}, ...]}</strong>.</p></div> <p>If this option is written in the source code, as a 
<strong>-compile</strong> directive, the syntax <strong>F/A</strong> can be used instead 
of <strong>{F,A}</strong>, for example:</p> <pre><code class="">-compile({no_auto_import,[error/1]}).</code></pre> </dd><dt><strong>no_auto_import</strong></dt><dd> <p>Do not auto-import any functions from <strong>erlang</strong> module.</p> </dd><dt><strong>no_line_info</strong></dt><dd> <p>Omits line number information to produce a slightly
smaller output file.
</p> </dd><dt><strong>{extra_chunks, [{binary(), binary()}]}</strong></dt><dd> <p>Pass extra chunks to be stored in the <strong>.beam</strong> file.
The extra chunks must be a list of tuples with a four byte
binary as chunk name followed by a binary with the chunk contents.
See <a href="./beam_lib">beam_lib</a> for
more information.
</p> </dd></dl><p>If warnings are turned on (option <strong>report_warnings</strong>
described earlier), the following options control what type of
warnings that are generated.
<a name="erl_lint_options"></a>
Except from <strong>{warn_format,Verbosity}</strong>, the following options 
have two forms:</p><ul><li>A <strong>warn_xxx</strong> form, to turn on the warning.</li><li>A <strong>nowarn_xxx</strong> form, to turn off the warning.</li></ul><p>In the descriptions that follow, the form that is used to change 
the default value are listed.</p><dl><dt><strong>{warn_format, Verbosity}</strong></dt><dd> <p>Causes warnings to be emitted for malformed format
strings as arguments to <strong>io:format</strong> and similar
functions.</p> <p><strong>Verbosity</strong> selects the number of warnings:</p> <ul><li><strong>0</strong> = No warnings</li><li><strong>1</strong> = Warnings for invalid format strings and incorrect  number of arguments</li><li><strong>2</strong> = Warnings also when the validity cannot  be checked, for example, when the format string argument is a variable.</li></ul> <p>The default verbosity is <strong>1</strong>. Verbosity <strong>0</strong> can
also be selected by option <strong>nowarn_format</strong>.</p> </dd><dt><strong>nowarn_bif_clash</strong></dt><dd> <p>This option is removed, it generates a fatal error if used.</p> <div class="alert alert-warning"><h4 class="alert-heading">Warning</h4><p>As from beginning with R14A, the compiler no longer calls the
auto-imported BIF if the name clashes with a local or
explicitly imported function, and a call without explicit
module name is issued. Instead, the local or imported
function is called. Still accepting <strong>nowarn_bif_clash</strong> would 
make a module calling functions clashing with auto-imported BIFs
compile with both the old and new compilers, but with
completely different semantics. This is why the option is removed.</p><p>The use of this option has always been discouraged.
As from R14A, it is an error to use it.</p><p>To resolve BIF clashes, use explicit module names or the
<strong>{no_auto_import,[F/A]}</strong> compiler directive.</p></div> </dd><dt><strong>{nowarn_bif_clash, FAs}</strong></dt><dd> <p>This option is removed, it generates a fatal error if used.</p> <div class="alert alert-warning"><h4 class="alert-heading">Warning</h4><p>The use of this option has always been discouraged.
As from R14A, it is an error to use it.</p><p>To resolve BIF clashes, use explicit module names or the
<strong>{no_auto_import,[F/A]}</strong> compiler directive.</p></div> </dd><dt><strong>nowarn_export_all</strong></dt><dd> <p>Turns off warnings for uses of the <strong>export_all</strong>
option. Default is to emit a warning if option
<strong>export_all</strong> is also given.</p> </dd><dt><strong>warn_export_vars</strong></dt><dd> <p>Emits warnings for all implicitly exported variables 
referred to after the primitives where they were first defined. 
By default, the compiler only emits warnings for exported 
variables referred to in a pattern.</p> </dd><dt><strong>nowarn_shadow_vars</strong></dt><dd> <p>Turns off warnings for "fresh" variables 
in functional objects or list comprehensions with the same 
name as some already defined variable. Default is to 
emit warnings for such variables.</p>    </dd><dt><strong>nowarn_unused_function</strong></dt><dd> <p>Turns off warnings for unused local functions. Default 
is to emit warnings for all local functions that are not called
directly or indirectly by an exported function.
The compiler does not include unused local functions in
the generated beam file, but the warning is still useful
to keep the source code cleaner.</p> </dd><dt><strong>{nowarn_unused_function, FAs}</strong></dt><dd> <p>Turns off warnings for unused local functions like
<strong>nowarn_unused_function</strong> does, but only for the mentioned
local functions. <strong>FAs</strong> is a tuple <strong>{Name,Arity}</strong>
or a list of such tuples.</p> </dd><dt><strong>nowarn_deprecated_function</strong></dt><dd> <p>Turns off warnings for calls to deprecated functions. Default 
is to emit warnings for every call to a function known by the 
compiler to be deprecated. Notice that the compiler does not know
about attribute <strong>-deprecated()</strong>, but uses an
assembled list of deprecated functions in Erlang/OTP. To
do a more general check, the Xref tool can be used.
See also
<a href="../tools/xref#deprecated_function">xref(3)</a>
and the function
<a href="../tools/xref#m/1">xref:m/1</a>, also
accessible through the function 
<a href="../stdlib/c#xm/1">c:xm/1</a>.</p> </dd><dt><strong>{nowarn_deprecated_function, MFAs}</strong></dt><dd> <p>Turns off warnings for calls to deprecated functions like
<strong>nowarn_deprecated_function</strong> does, but only for
the mentioned functions. <strong>MFAs</strong> is a tuple
<strong>{Module,Name,Arity}</strong> or a list of such tuples.</p> </dd><dt><strong>nowarn_deprecated_type</strong></dt><dd> <p>Turns off warnings for use of deprecated types. Default 
is to emit warnings for every use of a type known by the compiler
to be deprecated.</p> </dd><dt><strong>nowarn_removed</strong></dt><dd> <p>Turns off warnings for calls to functions that have
been removed. Default is to emit warnings for every call
to a function known by the compiler to have been recently
removed from Erlang/OTP.</p> </dd><dt><strong>{nowarn_removed, ModulesOrMFAs}</strong></dt><dd> <p>Turns off warnings for calls to modules or functions
that have been removed. Default is to emit warnings for
every call to a function known by the compiler to have
been recently removed from Erlang/OTP.</p> </dd><dt><strong>nowarn_obsolete_guard</strong></dt><dd> <p>Turns off warnings for calls to old type testing BIFs, 
such as <strong>pid/1</strong> and <strong>list/1</strong>. See the
<a href="../doc/reference_manual/expressions#guards">Erlang Reference Manual</a>
for a complete list of type testing BIFs and their old
equivalents. Default is to emit warnings for calls to
old type testing BIFs.</p> </dd><dt><strong>warn_unused_import</strong></dt><dd> <p>Emits warnings for unused imported functions. 
Default is to emit no warnings for unused imported functions.</p> </dd><dt><strong>nowarn_unused_vars</strong></dt><dd> <p>By default, warnings are emitted for unused variables,
except for variables beginning with an underscore 
("Prolog style warnings").
Use this option to turn off this kind of warnings.</p> </dd><dt><strong>nowarn_unused_record</strong></dt><dd> <p>Turns off warnings for unused record types. Default is to 
emit warnings for unused locally defined record types.</p> </dd></dl><p>Another class of warnings is generated by the compiler
during optimization and code generation. They warn about
patterns that will never match (such as <strong>a=b</strong>), guards
that always evaluate to false, and expressions that
always fail (such as <strong>atom+42</strong>).</p><p>Those warnings cannot be disabled (except by
disabling all warnings).</p><div class="alert alert-info"><h4 class="alert-heading">Note</h4><p>The compiler does not warn for expressions that it
does not attempt to optimize. For example, the compiler tries
to evaluate <strong>1/0</strong>, detects that it will cause an
exception, and emits a warning. However,
the compiler is silent about the similar expression,
<strong>X/0</strong>, because of the variable in it. Thus, the compiler does
not even try to evaluate and therefore it emits no warnings.</p></div><div class="alert alert-warning"><h4 class="alert-heading">Warning</h4><p>The absence of warnings does not mean that
there are no remaining errors in the code.</p></div><div class="alert alert-info"><h4 class="alert-heading">Note</h4><p>All options, except the include path
(<strong>{i,Dir}</strong>), can also be given in the file with attribute
<strong>-compile([Option,...])</strong>.
Attribute <strong>-compile()</strong> is allowed after the function
definitions.</p></div><div class="alert alert-info"><h4 class="alert-heading">Note</h4><p>Before OTP 22, the option <strong>{nowarn_deprecated_function, MFAs}</strong> was only recognized when given in the file with
attribute <strong>-compile()</strong>. (The option
<strong>{nowarn_unused_function,FAs}</strong> was incorrectly documented
to only work in a file, but it also worked when given in the
option list.) Starting from OTP 22, all options that can be
given in the file can also be given in the option list.</p></div><p>For debugging of the compiler, or for pure curiosity,
the intermediate code generated by each compiler pass can be
inspected.
To print a complete list of the options to produce list files,
type <strong>compile:options()</strong> at the Erlang shell prompt.
The options are printed in the order that the passes are
executed. If more than one listing option is used, the one
representing the earliest pass takes effect.</p><p>Unrecognized options are ignored.</p><p>Both <strong>WarningList</strong> and <strong>ErrorList</strong> have
the following format:</p><pre><code class="">
[{FileName,[ErrorInfo]}].</code></pre><p><strong>ErrorInfo</strong> is described later in this section. 
The filename is included here, as the compiler uses the 
Erlang pre-processor <strong>epp</strong>, which allows the code to be 
included in other files. It is therefore important to know to
<em>which</em> file the line number of an error or a warning refers.
</p><h3>forms(Forms)</h3><p>Compiles a list of forms.</p><p>Is the same as
<strong>forms(Forms, [verbose,report_errors,report_warnings])</strong>.
</p><h3>forms(Forms, Options) -&gt; CompRet</h3><p>Compiles a list of forms.</p><ul><li><span class="v">Forms = [Form]</span></li><li><span class="v">CompRet = BinRet | ErrRet</span></li><li><span class="v">BinRet = {ok,ModuleName,BinaryOrCode} | {ok,ModuleName,BinaryOrCode,Warnings}</span></li><li><span class="v">BinaryOrCode = binary() | term()</span></li><li><span class="v">ErrRet = error | {error,Errors,Warnings}</span></li></ul><p>Analogous to <strong>file/1</strong>, but takes a list of forms (in
the Erlang abstract format representation) as first argument.
Option <strong>binary</strong> is implicit, that is, no object code
file is produced. For options that normally produce a listing 
file, such as 'E', the internal format for that compiler pass 
(an Erlang term, usually not a binary) is returned instead of 
a binary.</p><h3>format_error(ErrorDescriptor) -&gt; chars()</h3><p>Formats an error descriptor.</p><ul><li><span class="v">ErrorDescriptor = errordesc()</span></li></ul><p>Uses an <strong>ErrorDescriptor</strong> and returns a deep list of
characters that describes the error. This function is
usually called implicitly when an <strong>ErrorInfo</strong> structure 
(described in section 
<a href="#error_information">Error Information</a>) is processed.</p><h3>output_generated(Options) -&gt; true | false</h3><p>Determines whether the compiler generates an output file.</p><ul><li><span class="v">Options = [term()]</span></li></ul><p>Determines whether the compiler generates a <strong>beam</strong>
file with the given options. <strong>true</strong> means that a <strong>beam</strong>
file is generated. <strong>false</strong> means that the compiler
generates some listing file, returns a binary, or merely
checks the syntax of the source code.</p><h3>noenv_file(File, Options) -&gt; CompRet</h3><p>Compiles a file (ignoring <strong>ERL_COMPILER_OPTIONS)</strong>.</p><p>Works like <a href="#file/2">file/2</a>,
except that the environment variable <strong>ERL_COMPILER_OPTIONS</strong>
is not consulted.</p><h3>noenv_forms(Forms, Options) -&gt; CompRet</h3><p>Compiles a list of forms (ignoring <strong>ERL_COMPILER_OPTIONS)</strong>.</p><p>Works like <a href="#forms/2">forms/2</a>,
except that the environment variable <strong>ERL_COMPILER_OPTIONS</strong>
is not consulted.</p><h3>noenv_output_generated(Options) -&gt; true | false</h3><p>Determines whether the compiler generates an output file  (ignoring <strong>ERL_COMPILER_OPTIONS)</strong>.</p><ul><li><span class="v">Options = [term()]</span></li></ul><p>Works like
<a href="#output_generated/1">output_generated/1</a>,
except that the environment variable <strong>ERL_COMPILER_OPTIONS</strong>
is not consulted.</p><h3>Default Compiler Options</h3><p>The (host operating system) environment variable
<strong>ERL_COMPILER_OPTIONS</strong> can be used to give default compiler
options. Its value must be a valid Erlang term. If the value is a
list, it is used as is. If it is not a list, it is put
into a list.</p><p>The list is appended to any options given to
<a href="#file/2">file/2</a>,
<a href="#forms/2">forms/2</a>, and
<a href="#output_generated/1">output_generated/2</a>.
Use the alternative functions
<a href="#noenv_file/2">noenv_file/2</a>,
<a href="#noenv_forms/2">noenv_forms/2</a>, or
<a href="#noenv_output_generated/1">noenv_output_generated/2</a>
if you do not want the environment variable to be consulted,
for example, if you are calling the compiler recursively from
inside a parse transform.</p><p>The list can be retrieved with
<a href="#env_compiler_options/0">env_compiler_options/0</a>.</p><h3>Inlining</h3><p>The compiler can do function inlining within an Erlang
module. Inlining means that a call to a function is replaced with
the function body with the arguments replaced with the actual
values. The semantics are preserved, except if exceptions are
generated in the inlined code. Exceptions are reported as
occurring in the function the body was inlined into. Also,
<strong>function_clause</strong> exceptions are converted to similar
<strong>case_clause</strong> exceptions.</p><p>When a function is inlined, the original function is
kept if it is exported (either by an explicit export or if the
option <strong>export_all</strong> was given) or if not all calls to the
function are inlined.</p><p>Inlining does not necessarily improve running time.
For example, inlining can increase Beam stack use, which
probably is detrimental to performance for recursive functions.
</p><p>Inlining is never default. It must be explicitly enabled with a
compiler option or a <strong>-compile()</strong> attribute in the source
module.</p><p>To enable inlining, either use the option <strong>inline</strong> to
let the compiler decide which functions to inline, or
<strong>{inline,[{Name,Arity},...]}</strong> to have the compiler inline
all calls to the given functions. If the option is given inside
a <strong>compile</strong> directive in an Erlang module, <strong>{Name,Arity}</strong>
can be written as <strong>Name/Arity</strong>.</p><p>Example of explicit inlining:</p><pre>
-compile({inline,[pi/0]}).

pi() -&gt; 3.1416.
    </pre><p>Example of implicit inlining:</p><pre>
-compile(inline).</pre><p>The option <strong>{inline_size,Size}</strong> controls how large functions
that are allowed to be inlined. Default is <strong>24</strong>, which
keeps the size of the inlined code roughly the same as
the un-inlined version (only relatively small functions are
inlined).</p><p>Example:</p><pre>
%% Aggressive inlining - will increase code size.
-compile(inline).
-compile({inline_size,100}).</pre><h3>Inlining of List Functions</h3><p>The compiler can also inline various list manipulation functions
from the module <strong>list</strong> in STDLIB.</p><p>This feature must be explicitly enabled with a compiler option or a
<strong>-compile()</strong> attribute in the source module.</p><p>To enable inlining of list functions, use option <strong>inline_list_funcs</strong>.</p><p>The following functions are inlined:</p><ul><li><a href="../stdlib/lists#all/2">lists:all/2</a></li><li><a href="../stdlib/lists#any/2">lists:any/2</a></li><li><a href="../stdlib/lists#foreach/2">lists:foreach/2</a></li><li><a href="../stdlib/lists#map/2">lists:map/2</a></li><li><a href="../stdlib/lists#flatmap/2">lists:flatmap/2</a></li><li><a href="../stdlib/lists#filter/2">lists:filter/2</a></li><li><a href="../stdlib/lists#foldl/3">lists:foldl/3</a></li><li><a href="../stdlib/lists#foldr/3">lists:foldr/3</a></li><li><a href="../stdlib/lists#mapfoldl/3">lists:mapfoldl/3</a></li><li><a href="../stdlib/lists#mapfoldr/3">lists:mapfoldr/3</a></li></ul><h3>Parse Transformations</h3><p>Parse transformations are used when a programmer wants to use
Erlang syntax but with different semantics. The original Erlang
code is then transformed into other Erlang code.</p><a name="error_information"></a><h3>Error Information</h3><p>The <strong>ErrorInfo</strong> mentioned earlier is the standard
<strong>ErrorInfo</strong> structure, which is returned from all I/O modules.
It has the following format:</p><pre><code class="">
{ErrorLine, Module, ErrorDescriptor}</code></pre><p><strong>ErrorLine</strong> is the atom <strong>none</strong> if the error does
not correspond to a specific line, for example, if the source file does
not exist.</p><p>A string describing the error is obtained with the following
call:</p><pre><code class="">
Module:format_error(ErrorDescriptor)</code></pre><h3>See Also</h3><p>
<a href="./epp">epp(3)</a>,
<a href="./erl_id_trans">erl_id_trans(3)</a>,
<a href="./erl_lint">erl_lint(3)</a>,
<a href="./beam_lib">beam_lib(3)</a>
</p></body></html>