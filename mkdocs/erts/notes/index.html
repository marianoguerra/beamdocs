<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>ERTS Release Notes - Erlang OTP</title>
  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "ERTS Release Notes";
    var mkdocs_page_input_path = "erts/notes.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Erlang OTP</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Erlang/OTP</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Asn1</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../asn1/asn1_getting_started/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1_introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1_overview/">ASN.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1_spec/">Specialized Decodes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1ct/">asn1ct</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/notes/">asn1 Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Common test</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../common_test/basics_chapter/">Common Test Basics</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/common_test_app/">Common Test</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/config_file_chapter/">External Configuration Data</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/cover_chapter/">Code Coverage Analysis</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct/">ct</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_cover/">ct_cover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_ftp/">ct_ftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_hooks/">Common Test Hooks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_hooks_chapter/">Common Test Hooks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_master/">ct_master</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_master_chapter/">Using Common Test for Large-Scale Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_netconfc/">ct_netconfc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_property_test/">ct_property_test</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_rpc/">ct_rpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_run/">The ct_run program</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_slave/">ct_slave</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_snmp/">ct_snmp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_ssh/">ct_ssh</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_telnet/">ct_telnet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_testspec/">ct_testspec</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/dependencies_chapter/">Dependencies between Test Cases and Suites</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/event_handler_chapter/">Event Handling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/example_chapter/">Examples and Templates</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/getting_started_chapter/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/install_chapter/">Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/notes/">Common Test Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/run_test_chapter/">Running Tests and Analyzing Results</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/test_structure_chapter/">Test Structure</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/unix_telnet/">unix_telnet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/why_test_chapter/">Some Thoughts about Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/write_test_chapter/">Writing Test Suites</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Compiler</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../compiler/cerl/">cerl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/cerl_clauses/">cerl_clauses</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/cerl_trees/">cerl_trees</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/compile/">compile</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/internal/">Internal</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/notes/">Compiler Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Crypto</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../crypto/algorithm_details/">Algorithm Details</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/crypto/">crypto</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/crypto_app/">crypto</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/engine_keys/">Engine Stored Keys</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/engine_load/">Engine Load</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/fips/">FIPS mode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/licenses/">Licenses</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/new_api/">New and Old API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/notes/">Crypto Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/usersguide/">Crypto User's Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Debugger</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../debugger/debugger/">debugger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/debugger_chapter/">Debugger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/i/">i</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/int/">int</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/notes/">Debugger Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Dialyzer</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../dialyzer/dialyzer/">dialyzer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dialyzer/dialyzer_chapter/">Dialyzer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dialyzer/notes/">Dialyzer Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dialyzer/typer/">typer</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Diameter</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../diameter/diameter_examples/">Examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../diameter/diameter_using/">Usage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../diameter/user_man/">Diameter Users Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Edoc</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../edoc/edoc/">edoc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_doclet/">edoc_doclet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_extract/">edoc_extract</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_layout/">edoc_layout</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_lib/">edoc_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_run/">edoc_run</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/notes/">EDoc Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Eldap</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../eldap/eldap/">eldap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eldap/notes/">Eldap Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eldap/usersguide/">Eldap User's Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Erl docgen</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../erl_docgen/block_tags/">Block Tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/character_entities/">Character Entities</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/doc-build/">How to Build OTP like documentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/erl_docgen_app/">erl_docgen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/header_tags/">Header Tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/inline_tags/">Inline Tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/notes/">Erl_Docgen Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/overview/">Overview OTP DTDs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/refman_dtds/">Reference Manual DTDs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/user_guide_dtds/">User's Guide DTDs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Erl interface</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../erl_interface/ei/">ei</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/ei_connect/">ei_connect</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/ei_users_guide/">Erl_Interface User's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_call/">erl_call</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_connect/">erl_connect</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_error/">erl_error</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_eterm/">erl_eterm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_format/">erl_format</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_global/">erl_global</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_malloc/">erl_malloc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_marshal/">erl_marshal</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/notes/">Erl_interface Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/registry/">registry</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Erts</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../CarrierMigration/">Carrier Migration</a>
                </li>
                <li class="">
                    
    <a class="" href="../CodeLoading/">Non-Blocking Code Loading</a>
                </li>
                <li class="">
                    
    <a class="" href="../CountingInstructions/">Counting Instructions</a>
                </li>
                <li class="">
                    
    <a class="" href="../DelayedDealloc/">Delayed Dealloc</a>
                </li>
                <li class="">
                    
    <a class="" href="../GarbageCollection/">Erlang Garbage Collector</a>
                </li>
                <li class="">
                    
    <a class="" href="../PTables/">Process and Port Tables</a>
                </li>
                <li class="">
                    
    <a class="" href="../PortSignals/">Port Signals</a>
                </li>
                <li class="">
                    
    <a class="" href="../ProcessManagementOptimizations/">Process Management Optimizations</a>
                </li>
                <li class="">
                    
    <a class="" href="../SuperCarrier/">Super Carrier</a>
                </li>
                <li class="">
                    
    <a class="" href="../ThreadProgress/">Thread Progress</a>
                </li>
                <li class="">
                    
    <a class="" href="../Tracing/">Non-blocking trace setting</a>
                </li>
                <li class="">
                    
    <a class="" href="../absform/">The Abstract Format</a>
                </li>
                <li class="">
                    
    <a class="" href="../alt_disco/">How to Implement an Alternative Service Discovery for Erlang Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../alt_dist/">How to Implement an Alternative Carrier for the Erlang Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../atomics/">atomics</a>
                </li>
                <li class="">
                    
    <a class="" href="../beam_makeops/">The beam_makeops script</a>
                </li>
                <li class="">
                    
    <a class="" href="../communication/">Communication in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../counters/">counters</a>
                </li>
                <li class="">
                    
    <a class="" href="../crash_dump/">How to Interpret the Erlang Crash Dumps</a>
                </li>
                <li class="">
                    
    <a class="" href="../driver/">How to Implement a Driver</a>
                </li>
                <li class="">
                    
    <a class="" href="../driver_entry/">driver_entry</a>
                </li>
                <li class="">
                    
    <a class="" href="../epmd/">epmd</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl/">erl</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_dist_protocol/">Distribution Protocol</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_driver/">erl_driver</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_ext_dist/">External Term Format</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_nif/">erl_nif</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_prim_loader/">erl_prim_loader</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_tracer/">erl_tracer</a>
                </li>
                <li class="">
                    
    <a class="" href="../erlang/">erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../erlc/">erlc</a>
                </li>
                <li class="">
                    
    <a class="" href="../erlsrv/">erlsrv</a>
                </li>
                <li class="">
                    
    <a class="" href="../erts_alloc/">erts_alloc</a>
                </li>
                <li class="">
                    
    <a class="" href="../escript/">escript</a>
                </li>
                <li class="">
                    
    <a class="" href="../inet_cfg/">Inet Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../init/">init</a>
                </li>
                <li class="">
                    
    <a class="" href="../internal/">Internal</a>
                </li>
                <li class="">
                    
    <a class="" href="../introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../match_spec/">Match Specifications in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../net/">net</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">ERTS Release Notes</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#erts-release-notes">ERTS Release Notes</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#erts-1035">Erts 10.3.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1034">Erts 10.3.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_1">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1033">Erts 10.3.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_2">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1032">Erts 10.3.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_3">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1031">Erts 10.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_4">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-103">Erts 10.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_5">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-1025">Erts 10.2.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_6">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1024">Erts 10.2.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_7">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1023">Erts 10.2.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_8">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1022">Erts 10.2.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_9">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1021">Erts 10.2.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_10">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-102">Erts 10.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_11">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_1">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-1013">Erts 10.1.3</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_2">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-1012">Erts 10.1.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_12">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1011">Erts 10.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_13">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-101">Erts 10.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_14">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_3">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-1008">Erts 10.0.8</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_15">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1007">Erts 10.0.7</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_16">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1006">Erts 10.0.6</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_17">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1005">Erts 10.0.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_18">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1004">Erts 10.0.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_19">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1003">Erts 10.0.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_20">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1002">Erts 10.0.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_21">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-1001">Erts 10.0.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_22">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-100">Erts 10.0</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_23">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_4">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-93310">Erts 9.3.3.10</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_24">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-9339">Erts 9.3.3.9</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_5">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-9338">Erts 9.3.3.8</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_25">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-9337">Erts 9.3.3.7</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_26">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-9336">Erts 9.3.3.6</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_6">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-9335">Erts 9.3.3.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_27">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-9334">Erts 9.3.3.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_28">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-9333">Erts 9.3.3.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_29">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-9332">Erts 9.3.3.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_30">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-9331">Erts 9.3.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_31">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-933">Erts 9.3.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_32">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-932">Erts 9.3.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_33">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-931">Erts 9.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_34">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-93">Erts 9.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_35">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_7">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-921">Erts 9.2.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_8">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-9201">Erts 9.2.0.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_9">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-92">Erts 9.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_36">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_10">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-915">Erts 9.1.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_37">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-914">Erts 9.1.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_38">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-913">Erts 9.1.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_39">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-912">Erts 9.1.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_40">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-911">Erts 9.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_41">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-91">Erts 9.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_42">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_11">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-905">Erts 9.0.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_43">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-904">Erts 9.0.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_44">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-903">Erts 9.0.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_45">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-902">Erts 9.0.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_46">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-901">Erts 9.0.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_47">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-90">Erts 9.0</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_48">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_12">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-8357">Erts 8.3.5.7</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_49">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_13">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-8356">Erts 8.3.5.6</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_50">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-8355">Erts 8.3.5.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_51">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-8354">Erts 8.3.5.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_52">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-8353">Erts 8.3.5.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_53">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-8352">Erts 8.3.5.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_54">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-8351">Erts 8.3.5.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_55">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-835">Erts 8.3.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_56">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-834">Erts 8.3.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_57">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-833">Erts 8.3.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_58">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-832">Erts 8.3.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_59">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-831">Erts 8.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_60">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-83">Erts 8.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_61">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_14">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-822">Erts 8.2.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_62">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-821">Erts 8.2.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_63">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-82">Erts 8.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_64">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_15">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-8111">Erts 8.1.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_65">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-811">Erts 8.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_66">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-81">Erts 8.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_67">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_16">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-805">Erts 8.0.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_68">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-804">Erts 8.0.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_69">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-803">Erts 8.0.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_70">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-802">Erts 8.0.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_71">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-801">Erts 8.0.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_72">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-80">Erts 8.0</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_73">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_17">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-7316">Erts 7.3.1.6</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_18">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-7315">Erts 7.3.1.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_74">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-7314">Erts 7.3.1.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_75">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-7313">Erts 7.3.1.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_76">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-7312">Erts 7.3.1.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_77">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-7311">Erts 7.3.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_78">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-731">Erts 7.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_79">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-73">Erts 7.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_80">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_19">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-7211">Erts 7.2.1.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_20">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-721">Erts 7.2.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_81">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-72">Erts 7.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_82">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_21">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-71">Erts 7.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_83">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_22">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-703">Erts 7.0.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_84">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-702">Erts 7.0.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_85">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_23">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-701">Erts 7.0.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_86">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-70">Erts 7.0</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_87">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_24">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-6417">Erts 6.4.1.7</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_88">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-6416">Erts 6.4.1.6</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_89">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-6415">Erts 6.4.1.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_90">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-6414">Erts 6.4.1.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_91">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-641">Erts 6.4.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_92">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-64">Erts 6.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_93">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_25">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-631">Erts 6.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_94">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-63">Erts 6.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_95">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_26">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-621">Erts 6.2.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_96">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-62">Erts 6.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_97">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_27">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-612">Erts 6.1.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_98">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-611">Erts 6.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_99">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-61">Erts 6.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_100">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_28">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-601">Erts 6.0.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_101">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-60">Erts 6.0</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_102">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_29">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-51041">Erts 5.10.4.1</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-5104">Erts 5.10.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_103">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_30">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-51031">Erts 5.10.3.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_31">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5103">Erts 5.10.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_104">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_32">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5102">Erts 5.10.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_105">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_33">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_1">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-51012">Erts 5.10.1.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_106">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-51011">Erts 5.10.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_107">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_34">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5101">Erts 5.10.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_108">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_35">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-510">Erts 5.10</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_109">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_36">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5931">Erts 5.9.3.1</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_2">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-593">Erts 5.9.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_110">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_37">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-592">Erts 5.9.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_111">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_38">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5912">Erts 5.9.1.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_112">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5911">Erts 5.9.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_113">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_39">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-591">Erts 5.9.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_114">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_40">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_3">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-5901">Erts 5.9.0.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_115">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-59">Erts 5.9</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_116">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_41">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-585">Erts 5.8.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_117">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_42">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-584">Erts 5.8.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_118">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_43">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5832">Erts 5.8.3.2</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_4">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-5831">Erts 5.8.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_119">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-583">Erts 5.8.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_120">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_44">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-582">Erts 5.8.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_121">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_45">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5812">Erts 5.8.1.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_122">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5811">Erts 5.8.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_123">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-581">Erts 5.8.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_124">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_46">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_5">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-58">Erts 5.8</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_125">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_47">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5752">Erts 5.7.5.2</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_6">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-5751">Erts 5.7.5.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_126">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-575">Erts 5.7.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_127">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_48">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-574">Erts 5.7.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_128">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_49">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-573">Erts 5.7.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_129">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_50">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-572">Erts 5.7.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_130">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_51">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-571">Erts 5.7.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_131">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_52">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-57">Erts 5.7</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_132">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_53">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5651">Erts 5.6.5.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_133">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-565">Erts 5.6.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_134">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_54">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5642">Erts 5.6.4.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_135">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5641">Erts 5.6.4.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_55">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-564">Erts 5.6.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_136">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_56">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_7">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-5633">Erts 5.6.3.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_137">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_57">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5632">Erts 5.6.3.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_138">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5631">Erts 5.6.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_139">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-563">Erts 5.6.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_140">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_58">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_8">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-562">Erts 5.6.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_141">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_59">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5611">Erts 5.6.1.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_142">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_60">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-561">Erts 5.6.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_143">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_61">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-56">Erts 5.6</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_144">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_62">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5555">Erts 5.5.5.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_145">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5554">Erts 5.5.5.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_146">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5553">Erts 5.5.5.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_147">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5552">Erts 5.5.5.2</a></li>
        
            <li><a class="toctree-l4" href="#known-bugs-and-problems_9">Known Bugs and Problems</a></li>
        
            <li><a class="toctree-l4" href="#erts-5551">Erts 5.5.5.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_148">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_63">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-555">Erts 5.5.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_149">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_64">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5543">Erts 5.5.4.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_150">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_65">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5542">Erts 5.5.4.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_151">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_66">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5541">Erts 5.5.4.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_152">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-554">Erts 5.5.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_153">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_67">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5531">Erts 5.5.3.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_154">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_68">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-553">Erts 5.5.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_155">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_69">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5522">Erts 5.5.2.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_156">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5521">Erts 5.5.2.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_157">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-552">Erts 5.5.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_158">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_70">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5511">Erts 5.5.1.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_71">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-551">Erts 5.5.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_159">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_72">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-55">ERTS 5.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_160">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_73">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5413">ERTS 5.4.13</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_161">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_74">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5412">ERTS 5.4.12</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_162">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_75">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5411">ERTS 5.4.11</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_163">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_76">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5410">ERTS 5.4.10</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_164">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_77">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5492">ERTS 5.4.9.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_165">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-5491">ERTS 5.4.9.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_78">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-549">ERTS 5.4.9</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_166">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_79">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-548">ERTS 5.4.8</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_167">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_80">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-547">ERTS 5.4.7</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_168">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_81">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-546">ERTS 5.4.6</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_169">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_82">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-545">ERTS 5.4.5</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_170">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_83">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-544">ERTS 5.4.4</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_171">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_84">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-543">ERTS 5.4.3</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_172">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_85">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-5421">ERTS 5.4.2.1</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_86">Improvements and New Features</a></li>
        
            <li><a class="toctree-l4" href="#erts-542">ERTS 5.4.2</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_173">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#erts-541">ERTS 5.4.1</a></li>
        
            <li><a class="toctree-l4" href="#fixed-bugs-and-malfunctions_174">Fixed Bugs and Malfunctions</a></li>
        
            <li><a class="toctree-l4" href="#improvements-and-new-features_87">Improvements and New Features</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../persistent_term/">persistent_term</a>
                </li>
                <li class="">
                    
    <a class="" href="../run_erl/">run_erl</a>
                </li>
                <li class="">
                    
    <a class="" href="../socket/">socket</a>
                </li>
                <li class="">
                    
    <a class="" href="../socket_usage/">Socket Usage</a>
                </li>
                <li class="">
                    
    <a class="" href="../start/">start</a>
                </li>
                <li class="">
                    
    <a class="" href="../start_erl/">start_erl</a>
                </li>
                <li class="">
                    
    <a class="" href="../time_correction/">Time and Time Correction in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../tty/">tty - A Command-Line Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../werl/">werl</a>
                </li>
                <li class="">
                    
    <a class="" href="../zlib/">zlib</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Et</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../et/et/">et</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_collector/">et_collector</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_desc/">Description</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_examples/">Advanced examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_selector/">et_selector</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_tutorial/">Tutorial</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_viewer/">et_viewer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/notes/">Event Tracer (ET) Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Eunit</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../eunit/eunit/">eunit</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eunit/eunit_surefire/">eunit_surefire</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eunit/notes/">EUnit Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Ftp</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../ftp/ftp/">ftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ftp/ftp_client/">FTP Client</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ftp/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ftp/notes/">FTP Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Hipe</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../hipe/hipe_app/">HiPE</a>
                </li>
                <li class="">
                    
    <a class="" href="../../hipe/notes/">HiPE Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Inets</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../inets/http_client/">HTTP Client</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/http_server/">HTTP server</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/http_uri/">http_uri</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpc/">httpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd/">httpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd_custom_api/">httpd_custom_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd_socket/">httpd_socket</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd_util/">httpd_util</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/inets/">inets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/inets_services/">Inets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_alias/">mod_alias</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_auth/">mod_auth</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_esi/">mod_esi</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_security/">mod_security</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/notes/">Inets Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Jinterface</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../jinterface/jinterface/">jinterface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../jinterface/jinterface_users_guide/">The Jinterface Package</a>
                </li>
                <li class="">
                    
    <a class="" href="../../jinterface/notes/">Jinterface Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Kernel</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../kernel/app/">app</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/application/">application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/auth/">auth</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/code/">code</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/config/">config</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/disk_log/">disk_log</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_boot_server/">erl_boot_server</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_ddll/">erl_ddll</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_epmd/">erl_epmd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_prim_loader_stub/">erl_prim_loader</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erlang_stub/">erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/error_handler/">error_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/error_logger/">error_logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/file/">file</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/gen_sctp/">gen_sctp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/gen_tcp/">gen_tcp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/gen_udp/">gen_udp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/global/">global</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/global_group/">global_group</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/heart/">heart</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/inet/">inet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/inet_res/">inet_res</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/init_stub/">init</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/introduction_chapter/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/kernel_app/">kernel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger/">logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_chapter/">Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_disk_log_h/">logger_disk_log_h</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_filters/">logger_filters</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_formatter/">logger_formatter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_std_h/">logger_std_h</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/net_adm/">net_adm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/net_kernel/">net_kernel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/notes/">Kernel Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/os/">os</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/pg2/">pg2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/rpc/">rpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/seq_trace/">seq_trace</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/user/">user</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/wrap_log_reader/">wrap_log_reader</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/zlib_stub/">zlib</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Megaco</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../megaco/megaco/">megaco</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_meas/">megaco_codec_meas</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_mstone1/">megaco_codec_mstone1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_mstone2/">megaco_codec_mstone2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_transform/">megaco_codec_transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_debug/">Testing and tools</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_edist_compress/">megaco_encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_encode/">Internal form and its encodings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_encoder/">megaco_encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_examples/">Implementation examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_flex_scanner/">megaco_flex_scanner</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_mib/">Megaco mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_performance/">Performance comparison</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_run/">Running the stack</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_tcp/">megaco_tcp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_transport/">megaco_transport</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_transport_mechanisms/">Transport mechanisms</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_udp/">megaco_udp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_user/">megaco_user</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/notes/">Megaco Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Mnesia</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_App_A/">Appendix A: Backup Callback Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_App_B/">Appendix B: Activity Access Callback Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_App_C/">Appendix C: Fragmented Table Hashing Callback Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap1/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap2/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap3/">Build a Mnesia Database</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap4/">Transactions and Other Access Contexts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap5/">Miscellaneous Mnesia Features</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap7/">Mnesia System Information</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap8/">Combine Mnesia with SNMP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_overview/">Mnesia</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/mnesia/">mnesia</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/mnesia_frag_hash/">mnesia_frag_hash</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/mnesia_registry/">mnesia_registry</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/notes/">Mnesia Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Observer</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../observer/cdv/">The cdv program</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/crashdump/">crashdump_viewer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/crashdump_ug/">Crashdump Viewer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/etop/">etop</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/etop_ug/">Erlang Top</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/introduction_ug/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/notes/">Observer Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/observer/">Observer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/observer_app/">Observer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/observer_ug/">Observer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/ttb/">ttb</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/ttb_ug/">Trace Tool Builder</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Os mon</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../os_mon/cpu_sup/">cpu_sup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/disksup/">disksup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/memsup/">memsup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/notes/">OS_Mon Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/nteventlog/">nteventlog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/os_mon_app/">os_mon</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/os_sup/">os_sup</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Parsetools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../parsetools/leex/">leex</a>
                </li>
                <li class="">
                    
    <a class="" href="../../parsetools/notes/">Parsetools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../parsetools/yecc/">yecc</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Public key</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../public_key/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/notes/">public_key Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/public_key/">public_key</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/public_key_app/">public_key</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/public_key_records/">Public-Key Records</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/using_public_key/">Getting Started</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Reltool</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../reltool/notes/">Reltool Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool/">reltool</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool_examples/">Examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool_usage/">Usage</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Runtime tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../runtime_tools/DTRACE/">DTrace and Erlang/OTP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/LTTng/">LTTng and Erlang/OTP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/SYSTEMTAP/">SystemTap and Erlang/OTP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/dbg/">dbg</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/dyntrace/">dyntrace</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/erts_alloc_config/">erts_alloc_config</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/msacc/">Microstate Accounting</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/notes/">Runtime_Tools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/runtime_tools_app/">runtime_tools</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/scheduler/">Scheduler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/system_information/">System information</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Sasl</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../sasl/alarm_handler/">alarm_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/appup/">appup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/error_logging/">SASL Error Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/notes/">SASL Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/rb/">rb</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/rel/">rel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/release_handler/">release_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/relup/">relup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/sasl_app/">sasl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/sasl_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/script/">script</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/systools/">systools</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Snmp</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../snmp/notes/">SNMP Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp/">snmp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_advanced_agent/">Advanced Agent Topics</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_agent_config_files/">Definition of Agent Configuration Files</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_agent_funct_descr/">Agent Functional Description</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_agent_netif/">Definition of Agent Net if</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_app/">snmp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_app_a/">SNMP Appendix A</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_app_b/">SNMP Appendix B</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_audit_trail_log/">Audit Trail Log</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_community_mib/">snmp_community_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_config/">Running the application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_def_instr_functions/">Definition of Instrumentation Functions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_framework_mib/">snmp_framework_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_generic/">snmp_generic</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_impl_example_agent/">Agent Implementation Example</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_impl_example_manager/">Manager Implementation Example</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_index/">snmp_index</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_instr_functions/">Instrumentation Functions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_intro/">SNMP Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_manager_config_files/">Definition of Manager Configuration Files</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_manager_funct_descr/">Manager Functional Description</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_manager_netif/">Definition of Manager Net if</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_mib_compiler/">The MIB Compiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_notification_mib/">snmp_notification_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_pdus/">snmp_pdus</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_standard_mib/">snmp_standard_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_target_mib/">snmp_target_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_user_based_sm_mib/">snmp_user_based_sm_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_view_based_acm_mib/">snmp_view_based_acm_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa/">snmpa</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_conf/">snmpa_conf</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_discovery_handler/">snmpa_discovery_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error/">snmpa_error</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error_io/">snmpa_error_io</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error_logger/">snmpa_error_logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error_report/">snmpa_error_report</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_local_db/">snmpa_local_db</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_mib_data/">snmpa_mib_data</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_mib_storage/">snmpa_mib_storage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_mpd/">snmpa_mpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_network_interface/">snmpa_network_interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_network_interface_filter/">snmpa_network_interface_filter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_notification_delivery_info_receiver/">snmpa_notification_delivery_info_receiver</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_notification_filter/">snmpa_notification_filter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_supervisor/">snmpa_supervisor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpc/">snmpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpc_cmd/">snmpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm/">snmpm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_conf/">snmpm_conf</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_mpd/">snmpm_mpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_network_interface/">snmpm_network_interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_network_interface_filter/">snmpm_network_interface_filter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_user/">snmpm_user</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Ssh</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../ssh/configure_algos/">Configuring algorithms in SSH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/notes/">SSH Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh/">ssh</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_app/">SSH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_client_channel/">ssh_client_channel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_client_key_api/">ssh_client_key_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_connection/">ssh_connection</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_file/">ssh_file</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_server_channel/">ssh_server_channel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_server_key_api/">ssh_server_key_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_sftp/">ssh_sftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_sftpd/">ssh_sftpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/terminology/">Terminology</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/usersguide/">SSH User's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/using_ssh/">Getting Started</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Ssl</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../ssl/notes/">SSL Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/refman/">SSL Reference Manual</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl/">ssl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_app/">ssl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_crl_cache/">ssl_crl_cache</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_crl_cache_api/">ssl_crl_cache_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_distribution/">Using TLS for Erlang Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_protocol/">TLS/DTLS and TLS Predecessor, SSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_session_cache_api/">ssl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/standards_compliance/">Standards Compliance</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/usersguide/">SSL User's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/using_ssl/">Using SSL application API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Stdlib</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../stdlib/array/">array</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/assert_hrl/">assert.hrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/base64/">base64</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/beam_lib/">beam_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/binary/">binary</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/c/">c</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/calendar/">calendar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/dets/">dets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/dict/">dict</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/digraph/">digraph</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/digraph_utils/">digraph_utils</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/epp/">epp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_anno/">erl_anno</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_eval/">erl_eval</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_expand_records/">erl_expand_records</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_id_trans/">erl_id_trans</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_internal/">erl_internal</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_lint/">erl_lint</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_parse/">erl_parse</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_pp/">erl_pp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_scan/">erl_scan</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_tar/">erl_tar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/ets/">ets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/file_sorter/">file_sorter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/filelib/">filelib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/filename/">filename</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gb_sets/">gb_sets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gb_trees/">gb_trees</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_event/">gen_event</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_fsm/">gen_fsm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_server/">gen_server</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_statem/">gen_statem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/io/">io</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/io_lib/">io_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/io_protocol/">The Erlang I/O Protocol</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/lists/">lists</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/log_mf_h/">log_mf_h</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/maps/">maps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/math/">math</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/ms_transform/">ms_transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/notes/">STDLIB Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/orddict/">orddict</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/ordsets/">ordsets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/pool/">pool</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/proc_lib/">proc_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/proplists/">proplists</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/qlc/">qlc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/queue/">queue</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/rand/">rand</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/random/">random</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/re/">re</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/sets/">sets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/shell/">shell</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/shell_default/">shell_default</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/slave/">slave</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/sofs/">sofs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/stdlib_app/">STDLIB</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/string/">string</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/supervisor/">supervisor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/supervisor_bridge/">supervisor_bridge</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/sys/">sys</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/timer/">timer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/unicode/">unicode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/unicode_usage/">Using Unicode in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/uri_string/">uri_string</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/win32reg/">win32reg</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/zip/">zip</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Syntax tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../syntax_tools/epp_dodger/">epp_dodger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_comment_scan/">erl_comment_scan</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_prettypr/">erl_prettypr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_recomment/">erl_recomment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_syntax/">erl_syntax</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_syntax_lib/">erl_syntax_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_tidy/">erl_tidy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/igor/">igor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/merl/">merl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/merl_transform/">merl_transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/notes/">Syntax_Tools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/prettypr/">prettypr</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">System</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">Design principles</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/applications/">Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/appup_cookbook/">Appup Cookbook</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/book/">OTP Design Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/des_princ/">Overview</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/distributed_applications/">Distributed Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/events/">gen_event Behaviour</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/gen_server_concepts/">gen_server Behaviour</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/included_applications/">Included Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/part/">OTP Design Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/release_handling/">Release Handling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/release_structure/">Releases</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/spec_proc/">sys and proc_lib</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/statem/">gen_statem Behavior</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/sup_princ/">Supervisor Behaviour</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Efficiency guide</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/advanced/">Advanced</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/binaryhandling/">Constructing and Matching Binaries</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/book/">Efficiency Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/commoncaveats/">Common Caveats</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/drivers/">Drivers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/functions/">Functions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/introduction/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/listhandling/">List Handling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/myths/">The Seven Myths of Erlang Performance</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/part/">Efficiency Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/processes/">Processes</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/profiling/">Profiling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/retired_myths/">Retired Myths</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/tablesDatabases/">Tables and Databases</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Embedded</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/book/">Embedded Systems</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/embedded_nt/">Windows NT</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/embedded_solaris/">Embedded Solaris</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/part/">Embedded Systems User's Guide</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">General info</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/book/">General Information</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/deprecations/">Deprecations</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/part/">General Information</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/scheduled_for_removal/">Scheduled for Removal</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Getting started</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/book/">Getting Started with Erlang</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/conc_prog/">Concurrent Programming</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/intro/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/part/">Getting Started With Erlang</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/records_macros/">Records and Macros</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/robustness/">Robustness</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/seq_prog/">Sequential Programming</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation guide</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/INSTALL-CROSS/">Cross Compiling Erlang/OTP</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/INSTALL-WIN32/">How to Build Erlang/OTP on Windows</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/INSTALL/">Building and Installing Erlang/OTP</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/OTP-PATCH-APPLY/">Patching OTP Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/book/">Installation Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/install-binary/">Installing the Binary Release</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/part/">Installation Guide</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Oam</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/oam/book/">OAM Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/oam/oam_intro/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/oam/part/">OAM Principles</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Programming examples</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/bit_syntax/">Bit Syntax</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/book/">Programming Examples</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/funs/">Funs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/list_comprehensions/">List Comprehensions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/part/">Programming Examples</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/records/">Records</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Reference manual</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/book/">Erlang Reference Manual</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/character_set/">Character Set and Source File Encoding</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/code_loading/">Compilation and Code Loading</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/data_types/">Data Types</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/distributed/">Distributed Erlang</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/errors/">Errors and Error Handling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/expressions/">Expressions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/functions/">Functions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/introduction/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/macros/">Preprocessor</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/modules/">Modules</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/part/">Erlang Reference Manual</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/patterns/">Pattern Matching</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/ports/">Ports and Port Drivers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/processes/">Processes</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/records/">Records</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/typespec/">Types and Function Specifications</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">System architecture intro</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_architecture_intro/book/">System Architecture</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_architecture_intro/part/">Introduction to the System Architecture</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_architecture_intro/sys_arch_intro/">Introduction</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">System principles</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/book/">System Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/create_target/">Creating and Upgrading a Target System</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/error_logging/">Error Logging</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/misc/">Support, Compatibility, Deprecations, and Removal</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/part/">System Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/system_principles/">System Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/upgrade/">Upgrade when Erlang/OTP has Changed</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/versions/">Versions</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Tutorial</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/book/">Interoperability Tutorial</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/c_port/">Ports</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/c_portdriver/">Port Drivers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/cnode/">C Nodes</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/erl_interface/">Erl_Interface</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/example/">Problem Example</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/introduction/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/nif/">NIFs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/overview/">Overview</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/part/">Interoperability Tutorial</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tftp</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tftp/getting_started/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/notes/">TFTP Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/tftp/">tftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/usersguide/">TFTP User's Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tools/cover/">cover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/cover_chapter/">cover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/cprof/">cprof</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/cprof_chapter/">cprof - The Call Count Profiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/eprof/">eprof</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/erlang_mode/">Erlang mode for Emacs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/erlang_mode_chapter/">The Erlang mode for Emacs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/fprof/">fprof</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/fprof_chapter/">fprof - The File Trace Profiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/instrument/">instrument</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/lcnt/">lcnt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/lcnt_chapter/">lcnt - The Lock Profiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/make/">make</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/notes/">Tools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/tags/">tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/xref/">xref</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/xref_chapter/">Xref - The Cross Reference Tool</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Wx</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../wx/glu/">glu</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/notes/">wxErlang Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wx/">wx</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAcceleratorEntry/">wxAcceleratorEntry</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAcceleratorTable/">wxAcceleratorTable</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxActivateEvent/">wxActivateEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxArtProvider/">wxArtProvider</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiDockArt/">wxAuiDockArt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiManager/">wxAuiManager</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiManagerEvent/">wxAuiManagerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiNotebook/">wxAuiNotebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiNotebookEvent/">wxAuiNotebookEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiPaneInfo/">wxAuiPaneInfo</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiSimpleTabArt/">wxAuiSimpleTabArt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiTabArt/">wxAuiTabArt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBitmap/">wxBitmap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBitmapButton/">wxBitmapButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBitmapDataObject/">wxBitmapDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBoxSizer/">wxBoxSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBrush/">wxBrush</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBufferedDC/">wxBufferedDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBufferedPaintDC/">wxBufferedPaintDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxButton/">wxButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCalendarCtrl/">wxCalendarCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCalendarDateAttr/">wxCalendarDateAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCalendarEvent/">wxCalendarEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCaret/">wxCaret</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCheckBox/">wxCheckBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCheckListBox/">wxCheckListBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxChildFocusEvent/">wxChildFocusEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxChoice/">wxChoice</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxChoicebook/">wxChoicebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxClientDC/">wxClientDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxClipboard/">wxClipboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxClipboardTextEvent/">wxClipboardTextEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCloseEvent/">wxCloseEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourData/">wxColourData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourDialog/">wxColourDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourPickerCtrl/">wxColourPickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourPickerEvent/">wxColourPickerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxComboBox/">wxComboBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCommandEvent/">wxCommandEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxContextMenuEvent/">wxContextMenuEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxControl/">wxControl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxControlWithItems/">wxControlWithItems</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCursor/">wxCursor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDC/">wxDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDCOverlay/">wxDCOverlay</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDataObject/">wxDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDateEvent/">wxDateEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDatePickerCtrl/">wxDatePickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDialog/">wxDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDirDialog/">wxDirDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDirPickerCtrl/">wxDirPickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDisplay/">wxDisplay</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDisplayChangedEvent/">wxDisplayChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDropFilesEvent/">wxDropFilesEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxEraseEvent/">wxEraseEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxEvent/">wxEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxEvtHandler/">wxEvtHandler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFileDataObject/">wxFileDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFileDialog/">wxFileDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFileDirPickerEvent/">wxFileDirPickerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFilePickerCtrl/">wxFilePickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFindReplaceData/">wxFindReplaceData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFindReplaceDialog/">wxFindReplaceDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFlexGridSizer/">wxFlexGridSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFocusEvent/">wxFocusEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFont/">wxFont</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontData/">wxFontData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontDialog/">wxFontDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontPickerCtrl/">wxFontPickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontPickerEvent/">wxFontPickerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFrame/">wxFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGBSizerItem/">wxGBSizerItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGCDC/">wxGCDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGLCanvas/">wxGLCanvas</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGauge/">wxGauge</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGenericDirCtrl/">wxGenericDirCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsBrush/">wxGraphicsBrush</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsContext/">wxGraphicsContext</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsFont/">wxGraphicsFont</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsMatrix/">wxGraphicsMatrix</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsObject/">wxGraphicsObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsPath/">wxGraphicsPath</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsPen/">wxGraphicsPen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsRenderer/">wxGraphicsRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGrid/">wxGrid</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridBagSizer/">wxGridBagSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellAttr/">wxGridCellAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellBoolEditor/">wxGridCellBoolEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellBoolRenderer/">wxGridCellBoolRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellChoiceEditor/">wxGridCellChoiceEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellEditor/">wxGridCellEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellFloatEditor/">wxGridCellFloatEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellFloatRenderer/">wxGridCellFloatRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellNumberEditor/">wxGridCellNumberEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellNumberRenderer/">wxGridCellNumberRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellRenderer/">wxGridCellRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellStringRenderer/">wxGridCellStringRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellTextEditor/">wxGridCellTextEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridEvent/">wxGridEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridSizer/">wxGridSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHelpEvent/">wxHelpEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHtmlEasyPrinting/">wxHtmlEasyPrinting</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHtmlLinkEvent/">wxHtmlLinkEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHtmlWindow/">wxHtmlWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIcon/">wxIcon</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIconBundle/">wxIconBundle</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIconizeEvent/">wxIconizeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIdleEvent/">wxIdleEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxImage/">wxImage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxImageList/">wxImageList</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxInitDialogEvent/">wxInitDialogEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxJoystickEvent/">wxJoystickEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxKeyEvent/">wxKeyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxLayoutAlgorithm/">wxLayoutAlgorithm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListBox/">wxListBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListCtrl/">wxListCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListEvent/">wxListEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListItem/">wxListItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListItemAttr/">wxListItemAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListView/">wxListView</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListbook/">wxListbook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxLocale/">wxLocale</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxLogNull/">wxLogNull</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMDIChildFrame/">wxMDIChildFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMDIClientWindow/">wxMDIClientWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMDIParentFrame/">wxMDIParentFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMask/">wxMask</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMaximizeEvent/">wxMaximizeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMemoryDC/">wxMemoryDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenu/">wxMenu</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenuBar/">wxMenuBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenuEvent/">wxMenuEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenuItem/">wxMenuItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMessageDialog/">wxMessageDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMiniFrame/">wxMiniFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMirrorDC/">wxMirrorDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMouseCaptureChangedEvent/">wxMouseCaptureChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMouseCaptureLostEvent/">wxMouseCaptureLostEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMouseEvent/">wxMouseEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMoveEvent/">wxMoveEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMultiChoiceDialog/">wxMultiChoiceDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNavigationKeyEvent/">wxNavigationKeyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNotebook/">wxNotebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNotebookEvent/">wxNotebookEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNotifyEvent/">wxNotifyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxOverlay/">wxOverlay</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPageSetupDialog/">wxPageSetupDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPageSetupDialogData/">wxPageSetupDialogData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPaintDC/">wxPaintDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPaintEvent/">wxPaintEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPalette/">wxPalette</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPaletteChangedEvent/">wxPaletteChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPanel/">wxPanel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPasswordEntryDialog/">wxPasswordEntryDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPen/">wxPen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPickerBase/">wxPickerBase</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPopupTransientWindow/">wxPopupTransientWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPopupWindow/">wxPopupWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPostScriptDC/">wxPostScriptDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPreviewCanvas/">wxPreviewCanvas</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPreviewControlBar/">wxPreviewControlBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPreviewFrame/">wxPreviewFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintData/">wxPrintData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintDialog/">wxPrintDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintDialogData/">wxPrintDialogData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintPreview/">wxPrintPreview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrinter/">wxPrinter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintout/">wxPrintout</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxProgressDialog/">wxProgressDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxQueryNewPaletteEvent/">wxQueryNewPaletteEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxRadioBox/">wxRadioBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxRadioButton/">wxRadioButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxRegion/">wxRegion</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSashEvent/">wxSashEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSashLayoutWindow/">wxSashLayoutWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSashWindow/">wxSashWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScreenDC/">wxScreenDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrollBar/">wxScrollBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrollEvent/">wxScrollEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrollWinEvent/">wxScrollWinEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrolledWindow/">wxScrolledWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSetCursorEvent/">wxSetCursorEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxShowEvent/">wxShowEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSingleChoiceDialog/">wxSingleChoiceDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizeEvent/">wxSizeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizer/">wxSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizerFlags/">wxSizerFlags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizerItem/">wxSizerItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSlider/">wxSlider</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSpinButton/">wxSpinButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSpinCtrl/">wxSpinCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSpinEvent/">wxSpinEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSplashScreen/">wxSplashScreen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSplitterEvent/">wxSplitterEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSplitterWindow/">wxSplitterWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticBitmap/">wxStaticBitmap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticBox/">wxStaticBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticBoxSizer/">wxStaticBoxSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticLine/">wxStaticLine</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticText/">wxStaticText</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStatusBar/">wxStatusBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStdDialogButtonSizer/">wxStdDialogButtonSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStyledTextCtrl/">wxStyledTextCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStyledTextEvent/">wxStyledTextEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSysColourChangedEvent/">wxSysColourChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSystemOptions/">wxSystemOptions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSystemSettings/">wxSystemSettings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTaskBarIcon/">wxTaskBarIcon</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTaskBarIconEvent/">wxTaskBarIconEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextAttr/">wxTextAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextCtrl/">wxTextCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextDataObject/">wxTextDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextEntryDialog/">wxTextEntryDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToggleButton/">wxToggleButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToolBar/">wxToolBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToolTip/">wxToolTip</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToolbook/">wxToolbook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTopLevelWindow/">wxTopLevelWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTreeCtrl/">wxTreeCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTreeEvent/">wxTreeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTreebook/">wxTreebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxUpdateUIEvent/">wxUpdateUIEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindow/">wxWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindowCreateEvent/">wxWindowCreateEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindowDC/">wxWindowDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindowDestroyEvent/">wxWindowDestroyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxXmlResource/">wxXmlResource</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wx_misc/">wx_misc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wx_object/">wx_object</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Xmerl</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../xmerl/notes/">Xmerl Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl/">xmerl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_eventp/">xmerl_eventp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_sax_parser/">xmerl_sax_parser</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_scan/">xmerl_scan</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_ug/">xmerl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_xpath/">xmerl_xpath</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_xs/">xmerl_xs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_xsd/">xmerl_xsd</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Erlang OTP</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Erts &raquo;</li>
        
      
    
    <li>ERTS Release Notes</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="erts-release-notes">ERTS Release Notes</h1>
<p>This document describes the changes made to the ERTS application.</p>
<h2 id="erts-1035">Erts 10.3.5</h2>
<h2 id="fixed-bugs-and-malfunctions">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed more bugs in <em>process_info(reductions)</em> causing it to sometimes behave non-monotonic. That is, a subsequent call toward the same process could return a lower reduction value.</li>
</ul>
<p>Own Id: OTP-15793 Aux Id: ERIERL-337, OTP-15709</p>
<h2 id="erts-1034">Erts 10.3.4</h2>
<h2 id="fixed-bugs-and-malfunctions_1">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Add missing documentation of new external tags <em>NEW_PID</em> , <em>NEW_PORT</em> and <em>NEWER_REFERENCE</em> introduced in OTP 19.</li>
</ul>
<p>These new tags are planned to be "activated" in OTP 23 when distribution capability flag <em>DFLAG_BIG_CREATION</em> becomes mandatory. Older nodes (&gt;= 19) are able to decode these new tags and send them back to the new node. Nodes older than OTP 23 will however never encode their own local pids, ports and references using the new tags.</p>
<p>Own Id: OTP-15766</p>
<h2 id="erts-1033">Erts 10.3.3</h2>
<h2 id="fixed-bugs-and-malfunctions_2">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix <em>erlang:open_port/2</em> with the <em>fd</em> option to correctly cleanup the pollset when the port is closed. Before this fix there would be error printouts sent to logger when the same fd was reused in a new port.</li>
</ul>
<p>Own Id: OTP-15753 Aux Id: ERL-900</p>
<h2 id="erts-1032">Erts 10.3.2</h2>
<h2 id="fixed-bugs-and-malfunctions_3">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug in <em>seq_trace:reset_trace/0</em> that could crash the emulator.</li>
</ul>
<p>Own Id: OTP-15704
* 
Fixed bug in <em>process_info(reductions)</em> causing it to sometimes return invalid results.</p>
<p>Own Id: OTP-15709 Aux Id: ERIERL-337</p>
<h2 id="erts-1031">Erts 10.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_4">Fixed Bugs and Malfunctions</h2>
<ul>
<li>If a suspend/resume signal pair was sent to a process while it was executing dirty, the receiving process could later end up in a suspended state indefinitely. This bug was introduced in ERTS version 10.0 (OTP 21.0).</li>
</ul>
<p>Suspend/resume signals are sent from <a href="../erts/erlang#suspend_process/1">erts/erlang#suspend_process/1</a> / <a href="../erts/erlang#resume_process/1">erts/erlang#resume_process/1</a> . The <a href="./dbg">runtime_tools/dbg</a> trace tool utilize this functionality and could thus trigger this bug.</p>
<p>Own Id: OTP-15688
* 
Fix a possible deadlock when terminating the ERTS caused by a dirty scheduler not releasing it's run-queue lock when terminating.</p>
<p>Own Id: OTP-15690 Aux Id: PR-2172</p>
<h2 id="erts-103">Erts 10.3</h2>
<h2 id="fixed-bugs-and-malfunctions_5">Fixed Bugs and Malfunctions</h2>
<ul>
<li>When multiplying a number by itself, a word beyond the number on the heap could be read (and ignored). This bug was extremely unlikely to actually cause a real problem.</li>
</ul>
<p>Own Id: OTP-15484
* 
Fix bug where doing <em>seq_trace:reset_trace()</em> while another process was doing a garbage collection could cause the run-time system to segfault.</p>
<p>Own Id: OTP-15490
* 
Fix reading of ancillary data from packet oriented sockets on old Linux kernel versions. Without this fix, getting the data would cause the port to enter an infinite loop.</p>
<p>Own Id: OTP-15494
* 
Fix bug where crash dumping or doing <em>erlang:system_info(procs)</em> while another process was doing a garbage collection could cause the run-time system to segfault.</p>
<p>Own Id: OTP-15527
* 
Fix <em>erlang:system_info(kernel_poll)</em> to return correct value. Before this fix, the call always returned <em>false</em> .</p>
<p>Own Id: OTP-15556
* 
Fix bug in <em>enif_make_map_from_arrays</em> that would produce broken maps when number of keys were 32. Bug exists since OTP 21.0.</p>
<p>Own Id: OTP-15567
* 
Fix a bug in <em>binary:encode_unsigned</em> that may cause a read of uninitialized memory.</p>
<p>The bug existed since the function was added (OTP R16B02).</p>
<p>Own Id: OTP-15583 Aux Id: PR-2118
* 
Fixed a bug that could cause <em>heart</em> to kill an exiting node before it had time to flush all buffered writes. If environment variable <em>HEART_KILL_SIGNAL=SIGABRT</em> was set a superfluous core dump could also be generated.</p>
<p>Own Id: OTP-15599 Aux Id: ERIERL-298
* 
Fix <em>enif_consume_timeslice</em> to be a no-op on dirty scheduler and not crash debug compiled emulator.</p>
<p>Own Id: OTP-15604
* 
Fixed macro redefinition warnings.</p>
<p>Own Id: OTP-15629
* 
<em>to_erl</em> fixed to not garble terminal input beyond 7-bit ASCII.</p>
<p>Own Id: OTP-15650 Aux Id: ERL-854, PR-2161
* 
Minor fixes for <em>make clean</em> .</p>
<p>Own Id: OTP-15657
* 
Fixed a bug in all *ets:select<strong> and *ets:match</strong> functions that could in some rare cases lead to very poor performance.</p>
<p>Own Id: OTP-15660 Aux Id: ERL-869</p>
<h2 id="improvements-and-new-features">Improvements and New Features</h2>
<ul>
<li>Add <em>erlang:system_flag(system_logger, Pid)</em> and <em>erlang:system_info(system_logger)</em> . This system_flag can be used to set the process that will receive the logging messages generated by ERTS.</li>
</ul>
<p>Own Id: OTP-15375
* 
<em>integer_to_list/2</em> and <em>integer_to_binary/2</em> are now implemented in C, improving their performance.</p>
<p>Own Id: OTP-15503 Aux Id: PR-2052
* 
Improved <em>term_to_binary</em> to do more fair reduction count and yielding when encoding large byte lists (strings).</p>
<p>Own Id: OTP-15514 Aux Id: ERL-774
* 
Made internal port drivers more robust against <em>erlang:port_control</em> with invalid arguments and added documentation warnings about such abuse.</p>
<p>Own Id: OTP-15555 Aux Id: ERIERL-231
* 
Fix bug on NetBSD where the <em>exit_status</em> from a port program would never be sent.</p>
<p>Own Id: OTP-15558 Aux Id: ERL-725
* 
There is a new function <em>persistent:term(Key, Default)</em> to allow specifying a default when looking up a persistent term.</p>
<p>Own Id: OTP-15576 Aux Id: ERL-843
* 
A transitory emulator option ' <em>+ztma true</em> ' has been added to allow running existing BEAM code that relies on "tuple calls" (dispatch on parameterized modules) which has been compiled under OTP 20 or earlier. This option will be removed in OTP 22, so such modules should eventually be recompiled with the <em>+tuple_calls</em> option.</p>
<p>Own Id: OTP-15580 Aux Id: PR-2113</p>
<h2 id="erts-1025">Erts 10.2.5</h2>
<h2 id="fixed-bugs-and-malfunctions_6">Fixed Bugs and Malfunctions</h2>
<ul>
<li>
<p>Fixes of install/release phase in build system.</p>
</li>
<li>
<p>The source tree was modified when installing/releasing and/or applying a patch.</p>
</li>
<li>Some files were installed with wrong access rights.</li>
<li>If applying a patch (using <em>otp_patch_apply</em> ) as another user (except root) than the user that built the source, the documentation was not properly updated.</li>
</ul>
<p>Own Id: OTP-15551
* 
Setting the <em>recbuf</em> size of an inet socket the <em>buffer</em> is also automatically increased. Fix a bug where the auto adjustment of inet buffer size would be triggered even if an explicit inet buffer size had already been set.</p>
<p>Own Id: OTP-15651 Aux Id: ERIERL-304
* 
Reading from UDP using active <em>true</em> or active <em>N</em> mode has been optimized when more packets than specified by <em>read_packets</em> are available on the socket.</p>
<p>Own Id: OTP-15652 Aux Id: ERIERL-304</p>
<h2 id="erts-1024">Erts 10.2.4</h2>
<h2 id="fixed-bugs-and-malfunctions_7">Fixed Bugs and Malfunctions</h2>
<ul>
<li>When using the <em>{linger,{true,T}}</em> option; <em>gen_tcp:listen/2</em> used the full linger time before returning for example <em>eaddrinuse</em> . This bug has now been corrected.</li>
</ul>
<p>Own Id: OTP-14728 Aux Id: ERIERL-303</p>
<h2 id="erts-1023">Erts 10.2.3</h2>
<h2 id="fixed-bugs-and-malfunctions_8">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix bug where doing a <em>gen_tcp:send</em> on a socket with <em>delay_send</em> set to true could cause a segfault if the other side closes the connection.</li>
</ul>
<p>Bug was introduced in erts-10.2 (OTP-21.2).</p>
<p>Own Id: OTP-15536 Aux Id: ERL-827
* 
Fix a race condition when a port program closes that could result in the next started port to hang during startup.</p>
<p>When this fault happens the following error is normally (but not always) logged:</p>
<p><em>=ERROR REPORT==== 14-Jan-2019::10:45:52.868246 ===</em>  <em>Bad input fd in erts_poll()! fd=11, port=#Port&lt;0.505&gt;, driver=spawn, name=/bin/sh -s unix:cmd</em></p>
<p>Bug was introduced in erts-10.0 (OTP-21.0).</p>
<p>Own Id: OTP-15537
* 
Fix a bug where polling for external events could be delayed for a very long time if all active schedulers were 100% loaded.</p>
<p>Bug was introduced in erts-10.2 (OTP-21.2).</p>
<p>Own Id: OTP-15538 Aux Id: ERIERL-229</p>
<h2 id="erts-1022">Erts 10.2.2</h2>
<h2 id="fixed-bugs-and-malfunctions_9">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a crash when dangling files were closed after <em>init:restart/0</em> .</li>
</ul>
<p>Own Id: OTP-15495 Aux Id: ERL-821
* 
A bug that could cause dirty schedulers to become unresponsive has been fixed.</p>
<p>Own Id: OTP-15509 Aux Id: PR-2027, PR-2093</p>
<h2 id="erts-1021">Erts 10.2.1</h2>
<h2 id="fixed-bugs-and-malfunctions_10">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug on big endian architectures when changing file permissions or ownership with <em>file:change_mode</em> , <em>change_owner</em> , <em>change_group</em> or <em>write_file_info</em> . Bug exists since OTP-21.0.</li>
</ul>
<p>Own Id: OTP-15485
* 
Fixed bug in <em>atomics</em> with option <em>{signed,false}</em> when returned values are <em>(1 bsl 63)</em> or larger. Could cause heap corruption leading to VM crash or other unpleasant symptoms. Bug exists since OTP-21.2 when module <em>atomics</em> was introduced.</p>
<p>Own Id: OTP-15486 Aux Id: PR-2061
* 
Fixed bug in operator <em>band</em> of two negative operands causing erroneous result if the absolute value of one of the operands have the lowest <em>N</em>W<em> bits as zero and the other absolute value is not larger than </em>N<em>W</em> bits. <em>N</em> is an integer of 1 or larger and <em>W</em> is 32 or 64 depending on word size.</p>
<p>Own Id: OTP-15487 Aux Id: ERL-804</p>
<h2 id="erts-102">Erts 10.2</h2>
<h2 id="fixed-bugs-and-malfunctions_11">Fixed Bugs and Malfunctions</h2>
<ul>
<li>When a process was waiting for a TCP socket send operation to complete, and another process closed the socket during that send, the sending process could hang. This bug has now been corrected.</li>
</ul>
<p>Own Id: OTP-12242 Aux Id: ERL-561
* 
Document <em>bit_size</em> in match specifications and allow it in <em>ets:fun2ms</em> .</p>
<p>Own Id: OTP-15343 Aux Id: PR-1962
* 
Fixed bug in <em>ets:select_replace</em> when called with a fully bound key could cause a following call to <em>ets:next</em> or <em>ets:prev</em> to crash the emulator or return invalid result.</p>
<p>Own Id: OTP-15346
* 
When a module has been purged from memory, any literals belonging to that module will be copied to all processes that hold references to them. The max heap size limit would be ignored in the garbage collection initiated when copying literals to a process. If the max heap size was exceeded, the process would typically be terminated in the following garbage collection. Corrected to terminate the process directly if copying a literal would exceed the max heap size.</p>
<p>Own Id: OTP-15360
* 
Fix compilation of run_erl on Solaris 11.4 and later.</p>
<p>Own Id: OTP-15389
* 
Fixed a bug where <em>lists:reverse/1-2</em> could use far too many reductions. This bug was introduced in <em>OTP 21.1</em> .</p>
<p>Own Id: OTP-15436
* 
Fixed a bug where a dirty scheduler could stay awake forever if a distribution entry was removed as part of a dirty GC.</p>
<p>Own Id: OTP-15446 Aux Id: PR-2024
* 
Fix microstate accounting handing in various places. Most importantly the GC states when the GC is run on a dirty scheduler are now managed correctly.</p>
<p>Own Id: OTP-15450 Aux Id: ERIERL-229
* 
Fixed bug in <em>file:sendfile</em> when the send operation failed. For sockets in <em>active</em> modes it could cause emulator crash or a hanging call. For sockets with <em>{active,false}</em> an unexpected <em>{inet_reply, <em>, </em>}</em> message could be sent to the calling process. The bug exists since OTP-21.0.</p>
<p>Own Id: OTP-15461 Aux Id: ERL-784
* 
The erts configure script has been updated to reject any CFLAGS that does not have <em>-O</em> . This in order to prevent the common mistake of forgetting to add <em>-O2</em> to custom CFLAGS.</p>
<p>Own Id: OTP-15465
* 
Fix reduction count in lists:member/2</p>
<p>Own Id: OTP-15474 Aux Id: ERIERL-229</p>
<h2 id="improvements-and-new-features_1">Improvements and New Features</h2>
<ul>
<li>New <em>counters</em> and <em>atomics</em> modules supplies access to highly efficient operations on mutable fixed word sized variables.</li>
</ul>
<p>Own Id: OTP-13468
* 
There is a new module <em>persistent_term</em> that implements a term storage suitable for terms that are frequently used but never or infrequently updated. Lookups are done in constant time without copying the terms.</p>
<p>Own Id: OTP-14669 Aux Id: PR-1989
* 
A function <em>inet:getifaddrs/1</em> that takes a list with a namespace option has been added, for platforms that support that feature, for example Linux (only?).</p>
<p>Own Id: OTP-15121 Aux Id: ERIERL-189, PR-1974
* 
Added the <em>nopush</em> option for TCP sockets, which corresponds to <em>TCP_NOPUSH</em> on *BSD and <em>TCP_CORK</em> on Linux.</p>
<p>This is also used internally in <em>file:sendfile</em> to reduce latency on subsequent send operations.</p>
<p>Own Id: OTP-15357 Aux Id: ERL-698
* 
List subtraction (The <em>--</em> operator) will now yield properly on large inputs.</p>
<p>Own Id: OTP-15371
* 
Optimize handling of send_delay for tcp sockes to better work with the new pollthread implementation introduced in OTP-21.</p>
<p>Own Id: OTP-15471 Aux Id: ERIERL-229
* 
Optimize driver_set_timer with a zero timeout to short-circuit and not create any timer structure, but instead schedule the timer immediately.</p>
<p>Own Id: OTP-15472 Aux Id: ERIERL-229
* 
Add <em>erl_xcomp_code_model_small</em> as a cross configure variable in order to let the emulator be build with the assumption that a small code model will be used on the target machine.</p>
<p>Own Id: OTP-15473 Aux Id: ERIERL-229
* 
Add a new pollset that is made to handle sockets that use <em>{active, true}</em> or <em>{active, N}</em> . The new pollset will not be polled by a pollthread, but instead polled by a normal scheduler.</p>
<p>This change was made because of the overhead associated with constantly having to re-apply the ONESHOT mechanism on fds that all input events were interesting.</p>
<p>The new pollset is only active on platforms that support concurrent kernel poll updates, i.e. Linux and BSD.</p>
<p>Own Id: OTP-15475 Aux Id: ERIERL-229
* 
Fix bug where emulator would segfault if a literal message was sent when sequence tracing was enabled.</p>
<p>Own Id: OTP-15478 Aux Id: ERL-741</p>
<h2 id="erts-1013">Erts 10.1.3</h2>
<h2 id="improvements-and-new-features_2">Improvements and New Features</h2>
<ul>
<li>Added an optional <em>./configure</em> flag to compile the emulator with spectre mitigation: <em>--with-spectre-mitigation</em></li>
</ul>
<p>Note that this requires a recent version of GCC with support for spectre mitigation and the <em>--mindirect-branch=thunk</em> flag, such as <em>8.1</em> .</p>
<p>Own Id: OTP-15430 Aux Id: ERIERL-237</p>
<h2 id="erts-1012">Erts 10.1.2</h2>
<h2 id="fixed-bugs-and-malfunctions_12">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a rare bug where files could be closed on a normal instead of an IO scheduler, resulting in system instability if the operation blocked.</li>
</ul>
<p>Own Id: OTP-15421</p>
<h2 id="erts-1011">Erts 10.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_13">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug where the socket option 'pktoptions' caused a read of uninitialized memory has been fixed. Would cause malfunction on FreeBSD.</li>
</ul>
<p>Own Id: OTP-14297 Aux Id: OTP-15141
* 
Fixed a memory leak on errors when reading files.</p>
<p>Own Id: OTP-15318
* 
File access through UNC paths works again on Windows. This regression was introduced in OTP 21.</p>
<p>Own Id: OTP-15333 Aux Id: ERL-737</p>
<h2 id="erts-101">Erts 10.1</h2>
<h2 id="fixed-bugs-and-malfunctions_14">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix the seq_trace token to not be cleared when a process receives messages sent by erts. Some examples of when this could happen is all port BIFs, i.e. <em>open_port</em> , <em>port_command</em> etc etc.</li>
</ul>
<p>Fix so that messages sent by nifs can be traced using normal and <em>seq_trace</em> tracing.</p>
<p>Own Id: OTP-15038 Aux Id: ERL-602
* 
Fixed specs and documentation for <em>process_info</em> item <em>monitored_by</em> to include port identifiers and nif resources as possible types.</p>
<p>Own Id: OTP-15180 Aux Id: ERL-648
* 
Fix bug in generation of erl_crash.dump, which could cause VM to crash.</p>
<p>Bug exist since erts-9.2 (OTP-20.2).</p>
<p>Own Id: OTP-15181
* 
Fix bug where ctrl-break or ctrl-c would not trigger the break mode properly on Windows. This bug was introduced in erts-10.0 (OTP-21).</p>
<p>Own Id: OTP-15205
* 
Fix a performance bug for reception of UDP packages, where a memory buffer would be reallocated when it should not have been.</p>
<p>Introduce a limit on the maximum automatic increase of the UDP user-space buffer to the theoretical max of the network PATH, i.e. 65535.</p>
<p>Own Id: OTP-15206
* 
Fix alignment of erts allocator state internally in erts. With the improper alignment the emulator would refuse to start when compiled with clang on 32-bit systems.</p>
<p>Own Id: OTP-15208 Aux Id: PR-1897 ERL-677
* 
Fix bug where too many concurrent calls to <em>erlang:open_port({spawn,"cmd"},...)</em> would result in the emulator terminating with the reason "Failed to write to erl_child_setup: ". After this fix the <em>open_port</em> call will throw an <em>emfile</em> exception instead.</p>
<p>Own Id: OTP-15210
* 
Upgraded the ERTS internal PCRE library from version 8.41 to version 8.42. See <a href="http://pcre.org/original/changelog.txt">http://pcre.org/original/changelog.txt</a> for information about changes made to PCRE. This library implements major parts of the <a href="./re">stdlib/re</a> regular expressions module.</p>
<p>Own Id: OTP-15217
* 
Fix <em>open_port({fd,X,Y}, ...)</em> to release the file descriptors from the pollset when closing the port. Without this fix the same file descriptor number could not be reused when doing multiple open_port and port_close sequences.</p>
<p>Own Id: OTP-15236 Aux Id: ERL-692
* 
Fixed bug in <em>float_to_list/2</em> and <em>float_to_binary/2</em> with options <em>[{decimals,0},compact]</em> causing totally wrong results. Bug exists since OTP-21.0.</p>
<p>Own Id: OTP-15276 Aux Id: PR-1920
* 
Fixed bug in <em>erlang:memory</em> causing <em>ets</em> to report too much. This small false memory leak (16 bytes each time) can only happen when a specific race condition occurs between scheduler threads on a table with option <em>write_concurrency</em> .</p>
<p>Own Id: OTP-15278
* 
Minor <em>configure</em> test fixes</p>
<p>Own Id: OTP-15282
* 
Improved robustness of distribution connection setup. In OTP-21.0 a truly asynchronous connection setup was introduced. This is further improvement on that work to make the emulator more robust and also be able to recover in cases when involved Erlang processes misbehave.</p>
<p>Own Id: OTP-15297 Aux Id: OTP-15279, OTP-15280</p>
<h2 id="improvements-and-new-features_3">Improvements and New Features</h2>
<ul>
<li>The socket options <em>recvtos</em> , <em>recvttl</em> , <em>recvtclass</em> and <em>pktoptions</em> have been implemented in the socket modules. See the documentation for the <em>gen_tcp</em> , <em>gen_udp</em> and <em>inet</em> modules. Note that support for these in the runtime system is platform dependent. Especially for <em>pktoptions</em> which is very Linux specific and obsoleted by the RFCs that defined it.</li>
</ul>
<p>Own Id: OTP-15145 Aux Id: ERIERL-187</p>
<h2 id="erts-1008">Erts 10.0.8</h2>
<h2 id="fixed-bugs-and-malfunctions_15">Fixed Bugs and Malfunctions</h2>
<ul>
<li>As of ERTS version 10.0 (OTP 21.0) the <em>erl_child_setup</em> program, which creates port programs, ignores <em>TERM</em> signals. This setting was unintentionally inherited by port programs. Handling of <em>TERM</em> signals in port programs has now been restored to the default behavior. That is, terminate the process.</li>
</ul>
<p>Own Id: OTP-15289 Aux Id: ERIERL-235, OTP-14943, ERL-576
* 
The fix made for OTP-15279 in erts-10.07 (OTP-21.0.8) was not complete. It could cause a new connection attempt to be incorrectly aborted in certain cases. This fix will amend that flaw.</p>
<p>Own Id: OTP-15296 Aux Id: OTP-15279, ERIERL-226</p>
<h2 id="erts-1007">Erts 10.0.7</h2>
<h2 id="fixed-bugs-and-malfunctions_16">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A process could get stuck in an infinite rescheduling loop between normal and dirty schedulers. This bug was introduced in ERTS version 10.0.</li>
</ul>
<p>Thanks to Maxim Fedorov for finding and fixing this issue.</p>
<p>Own Id: OTP-15275 Aux Id: PR-1943
* 
Garbage collection of a distribution entry could cause an emulator crash if <em>net_kernel</em> had not brought previous connection attempts on it down properly.</p>
<p>Own Id: OTP-15279 Aux Id: ERIERL-226</p>
<h2 id="erts-1006">Erts 10.0.6</h2>
<h2 id="fixed-bugs-and-malfunctions_17">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A race between termination of a process and resume of the same process via <em>erlang:resume_process/1</em> could cause the VM to crash. This bug was introduced in erts version 10.0 (OTP 21.0).</li>
</ul>
<p>Own Id: OTP-15237
* 
When tracing on <em>running</em> , <em>in</em> trace events could be lost when a process was rescheduled between a dirty and a normal scheduler.</p>
<p>Own Id: OTP-15269 Aux Id: ERL-713</p>
<h2 id="erts-1005">Erts 10.0.5</h2>
<h2 id="fixed-bugs-and-malfunctions_18">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug which caused an emulator crash when <em>enif_send()</em> was called by a NIF that executed on a dirty scheduler. The bug was either triggered when the NIF called <em>enif_send()</em> without a message environment, or when the process executing the NIF was <em>send</em> traced.</li>
</ul>
<p>Own Id: OTP-15223
* 
Fixed a bug causing some Erlang references to be inconsistently ordered. This could for example cause failure to look up certain elements with references as keys in search data structures. This bug was introduced in R13B02.</p>
<p>Thanks to Simon Cornish for finding the bug and supplying a fix.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-15225</p>
<h2 id="erts-1004">Erts 10.0.4</h2>
<h2 id="fixed-bugs-and-malfunctions_19">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug that prevented the <em>noshell</em> option from working correctly on Mac OS X and BSD.</li>
</ul>
<p>Own Id: OTP-15169
* 
Fixed a crash when matching directly against a literal map using a single key that had been saved on the stack.</p>
<p>Own Id: OTP-15184
* 
Fix node crash when passing a bad time option to <em>file:read_file_info/2</em> .</p>
<p>Own Id: OTP-15196</p>
<h2 id="erts-1003">Erts 10.0.3</h2>
<h2 id="fixed-bugs-and-malfunctions_20">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a scheduler bug that caused normal schedulers to run dirty code.</li>
</ul>
<p>Own Id: OTP-15154
* 
Fixed a bug in <em>erlang:trace_info/2</em> which caused the emulator to crash when a bad argument was passed. The bug was introduced in ERTS version 10.0.</p>
<p>Own Id: OTP-15183 Aux Id: ERL-670</p>
<h2 id="erts-1002">Erts 10.0.2</h2>
<h2 id="fixed-bugs-and-malfunctions_21">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a rare bug that could cause processes to be scheduled after they had been freed.</li>
</ul>
<p>Own Id: OTP-15067 Aux Id: ERL-573
* 
Fixed a race condition in the inet driver that could cause receive to hang when the emulator was compiled with gcc 8.</p>
<p>Own Id: OTP-15158 Aux Id: ERL-654</p>
<h2 id="erts-1001">Erts 10.0.1</h2>
<h2 id="fixed-bugs-and-malfunctions_22">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The keys used in <em>os:getenv</em> and <em>os:putenv</em> are case-insensitive again on Windows.</li>
</ul>
<p>Own Id: OTP-15147 Aux Id: ERL-644</p>
<h2 id="erts-100">Erts 10.0</h2>
<h2 id="fixed-bugs-and-malfunctions_23">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The type specifications for <em>file:posix/0</em> and <em>inet:posix/0</em> have been updated according to which errors file and socket operations should be able to return.</li>
</ul>
<p>Own Id: OTP-14019 Aux Id: ERL-550
* 
Fix error printout from run_erl and a bug that could cause unintended fds to be leaked into the started program.</p>
<p>Own Id: OTP-14537 Aux Id: PR1529
* 
File operations used to accept <a href="../kernel/file#type-name_all">filenames</a> containing null characters (integer value zero). This caused the name to be truncated and in some cases arguments to primitive operations to be mixed up. Filenames containing null characters inside the filename are now <strong>rejected</strong> and will cause primitive file operations to fail.</p>
<p>Also environment variable operations used to accept <a href="../kernel/os#type-env_var_name">names</a> and <a href="../kernel/os#type-env_var_value">values</a> of environment variables containing null characters (integer value zero). This caused operations to silently produce erroneous results. Environment variable names and values containing null characters inside the name or value are now <strong>rejected</strong> and will cause environment variable operations to fail.</p>
<p>Primitive environment variable operations also used to accept the <em>$=</em> character in environment variable names causing various problems. <em>$=</em> characters in environment variable names are now also <strong>rejected</strong> .</p>
<p>Also <a href="../kernel/os#cmd/1">kernel/os#cmd/1</a> now reject null characters inside its <a href="../kernel/os#type-os_command">command</a> .</p>
<p><a href="../erts/erlang#open_port/2">erts/erlang#open_port/2</a> will also reject null characters inside the port name from now on.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14543 Aux Id: ERL-370
* 
Fix bugs related to the bookkeeping of microstate accounting states.</p>
<p>Own Id: OTP-14652
* 
<em>os:putenv</em> and <em>os:getenv</em> no longer access the process environment directly and instead work on a thread-safe emulation. The only observable difference is that it's <strong>not</strong> kept in sync with libc <em>getenv(3)</em> / <em>putenv(3)</em> , so those who relied on that behavior in drivers or NIFs will need to add manual synchronization.</p>
<p>On Windows this means that you can no longer resolve DLL dependencies by modifying the <em>PATH</em> just before loading the driver/NIF. To make this less of a problem, the emulator now adds the target DLL's folder to the DLL search path.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14666
* 
Corrected <em>erlang:is_builtin(erlang, M, F)</em> to return <em>true</em> for <em>apply/2</em> and <em>yield/0</em> .</p>
<p>Own Id: OTP-14713 Aux Id: ERL-500
* 
Fixed a bug where the PATH environment variable wasn't updated correctly on a release downgrade, effectively keeping the PATH of the new release.</p>
<p>Own Id: OTP-14719
* 
A receive optimization that avoids scanning the entire message queue when receiving a message containing a freshly created reference could in rare circumstances (involving recursive calls to the functions that does the receive) cause the receive to hang. This has been corrected.</p>
<p>Own Id: OTP-14782 Aux Id: ERL-511
* 
Fix building of Erlang/OTP on platforms which have small data area with short addressing. For example the PowerPC/RTEMS platform.</p>
<p>Own Id: OTP-14909 Aux Id: PR-1692
* 
Fixed a crash when <em>enif_make_binary</em> is called with a binary produced by <em>enif_inspect_binary</em> in a different environment.</p>
<p>Own Id: OTP-14931
* 
Fixed a crash when <em>enif_make_binary</em> is called more than once with a binary that had previously been added to an <em>enif_ioq</em> .</p>
<p>Own Id: OTP-14932
* 
The erl_child_setup program now ignores SIGTERM signals.</p>
<p>Own Id: OTP-14943 Aux Id: ERL-576
* 
Force 64-bit alignment on pre-allocators on architectures which needs it.</p>
<p>Own Id: OTP-14977
* 
Fixed a bug where dirty scheduler picked up non-dirty work.</p>
<p>Own Id: OTP-14978
* 
Calls to <em>gen_tcp:send/2</em> on closed sockets now returns <em>{error, closed}</em> instead of <em>{error,enotconn}</em> .</p>
<p>Own Id: OTP-15001
* 
<em>erlang:monotonic_time/1</em> failed with <em>badarg</em> when passing the <em>perf_counter</em> time unit as argument.</p>
<p>Own Id: OTP-15008
* 
Fix bug where rapid <em>init:restart()</em> calls would sometimes crash because a code load request leaked in between the restarts.</p>
<p>Own Id: OTP-15013
* 
Improve <em>float_to_list(F, [{decimals,D}])</em> to closer conform with <em>io_lib:format("~.</em>f", [D,F])* .</p>
<p>There are however, still cases when <em>float_to_list</em> does not produce the exact same result as <em>io_lib:format</em> , especially for large values <em>F</em> and/or many decimals <em>D</em> .</p>
<p>Own Id: OTP-15015 Aux Id: OTP-14890
* 
Fixed a deadlock that would occur on certain allocators when a reallocation failed with <em>+ramv</em> enabled.</p>
<p>Own Id: OTP-15024
* 
Fix bug that made it impossible to use an erl_tracer as the seq_trace trace receiver.</p>
<p>Own Id: OTP-15029
* 
Fix bug where a large (&gt; 1 GB) emulator generated error logger message would cause the emulator to crash.</p>
<p>Own Id: OTP-15032
* 
The emulator will no longer crash when reading the file information of an ordinary file that has an NTFS reparse point, such as files stored in a OneDrive-mapped folder.</p>
<p>Own Id: OTP-15062 Aux Id: ERL-615
* 
Fixed bug in <em>enif_binary_to_term</em> which could cause memory corruption for immediate terms (atoms, small integers, pids, ports, empty lists).</p>
<p>Own Id: OTP-15080
* 
Fixed bug in <em>erlang:system_profile/2</em> that could cause superfluous <em>{profile,<em>,active,</em>,_}</em> messages for terminating processes.</p>
<p>Own Id: OTP-15085
* 
On OSs with per thread CPU time support, change <em>cpu_timestamp</em> in <a href="./erlang#trace/3">erlang:trace/3</a> to use it instead of per process CPU time. This makes this option useable on such OSs when running multiple schedulers.</p>
<p>Own Id: OTP-15090
* 
Fix segfault in abort_signal_task which could happen if a port terminated while there were outstanding port tasks that were not signals, for example a ready_input/ready_output event.</p>
<p>Own Id: OTP-15108 Aux Id: ERL-621
* 
Fixed bug in <em>ets</em> that could cause VM crash if process A terminates after fixating a table and process B deletes the table at "the same time". The table fixation could be done with <em>ets:safe_fixtable</em> or if process A terminates in the middle of a long running <em>select</em> or <em>match</em> call.</p>
<p>Own Id: OTP-15109
* 
Owner and group changes through <em>file:write_file_info</em> , <em>file:change_owner</em> , and <em>file:change_group</em> will no longer report success on permission errors.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-15118
* 
Fix a bug error reporting from escripts on windows where the error message would get garbled.</p>
<p>Own Id: OTP-15119 Aux Id: PR-1826
* 
Fix segfault when a process is interally re-scheduled while being traced for in out events. This bug was introduced in erts-8.0 (OTP-19.0).</p>
<p>Own Id: OTP-15125</p>
<h2 id="improvements-and-new-features_4">Improvements and New Features</h2>
<ul>
<li>It is now possible to open device files and FIFOs with <em>file:open/2</em> .</li>
</ul>
<p>Own Id: OTP-11462
* 
The <em>erlang:system_flag(scheduler_wall_time,Bool)</em> call is now reference counted and will be turned off if the (last) process that started the performance statistics dies. Thus it is no longer possible to start the statistics with <em>rpc:call(Node, erlang, system_flag, [scheduler_wall_time, true])</em> since it will be turned off directly afterwards when the rpc process dies.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11694
* 
A new logging API is added to Erlang/OTP, see the <a href="./logger">kernel/logger</a> manual page, and section <a href="./logger_chapter">Logging</a> in the Kernel User's Guide.</p>
<p>Calls to <em>error_logger</em> are automatically redirected to the new API, and legacy error logger event handlers can still be used. It is, however, recommended to use the Logger API directly when writing new code.</p>
<p>Notice the following potential incompatibilities:</p>
<ul>
<li>Kernel configuration parameters <em>error_logger</em> still works, but is overruled if the default handler's output destination is configured with Kernel configuration parameter <em>logger</em> .</li>
</ul>
<p>In general, parameters for configuring error logger are overwritten by new parameters for configuring Logger.
* 
The concept of SASL error logging is deprecated, meaning that by default the SASL application does not affect which log events are logged.</p>
<p>By default, supervisor reports and crash reports are logged by the default Logger handler started by Kernel, and end up at the same destination (terminal or file) as other standard log event from Erlang/OTP.</p>
<p>Progress reports are not logged by default, but can be enabled by setting the primary log level to info, for example with the Kernel configuration parameter <em>logger_level</em> .</p>
<p>To obtain backwards compatibility with the SASL error logging functionality from earlier releases, set Kernel configuration parameter <em>logger_sasl_compatible</em> to <em>true</em> . This prevents the default Logger handler from logging any supervisor-, crash-, or progress reports. Instead, SASL adds a separate Logger handler during application start, which takes care of these log events. The SASL configuration parameters <em>sasl_error_logger</em> and <em>sasl_errlog_type</em> specify the destination (terminal or file) and severity level to log for these events.</p>
<p>Since Logger is new in Erlang/OTP 21.0, we do reserve the right to introduce changes to the Logger API and functionality in patches following this release. These changes might or might not be backwards compatible with the initial version.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13295
* 
<em>gen_sctp:connect_init/4</em> or rather connect in <em>inet_drv.c</em> for SCTP has been fixed to not check the write file descriptor for writeability after a connect, since for SCTP (SOCK_SEQPACKET) that property does not seem to be any kind of indicator for when a connect has finished. This fixes connects that the OS returned as "in progress" that was misinterpreted by <em>gen_sctp:connect_init</em> as failed.</p>
<p>Own Id: OTP-13760 Aux Id: PR-1592
* 
The file driver has been rewritten as a NIF, decreasing the latency of file operations. Notable incompatibilities are:</p>
<ul>
<li>The <em>use_threads</em> option for <em>file:sendfile/5</em> no longer has any effect; we either use non-blocking <em>sendfile(2)</em> or fall back to <em>file:read</em> + <em>gen_tcp:send</em> .</li>
<li>The file-specific DTrace probes have been removed. The same effect can be achieved with normal tracing together with the <em>nif__entry</em> / <em>nif__return</em> probes to track scheduling.</li>
</ul>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14256
* 
The I/O polling functionality of erts has been re-written to better make use of the OSs polling mechanisms. This change means that erts will now always prefer to use a kernel-polling mechanism if possible. Also all of the I/O polling has been moved to dedicated threads instead of being placed in the scheduler loops.</p>
<p>As a result of this, the <em>erl</em> options <em>+K</em> and <em>+secio</em> have been removed. It is still possible to disable kernel-poll, but it has to be done at compile time through the configure option <em>--disable-kernel-poll</em> .</p>
<p>The new <em>erl</em> options <a href="./erl#+IOt">erl#+IOt</a> and <a href="./erl#+IOp">erl#+IOp</a> can be used to change how many IO poll threads and poll sets that erts should use. See their respective documentation for more details.</p>
<p>Own Id: OTP-14346
* 
Truly asynchronous auto-connect. Earlier, when <em>erlang:send</em> was aimed toward an unconnected node, the function would not return until the connection setup had completed (or failed). Now the function returns directly after the message has been enqueued and the connection setup started.</p>
<p>The same applies to all distributed operations that may trigger auto-connect, i.e. <em>'!'</em> , <em>send</em> , <em>link</em> , <em>monitor</em> , <em>monitor_node</em> , <em>exit/2</em> and <em>group_leader</em> .</p>
<p>The interface for all these functions are unchanged as they do not return connection failures. The only exception is <em>erlang:monitor</em> where a <strong>possible incompatibility</strong> is introduced: An attempt to monitor a process on a primitive node (such as erl_interface or jinterface), where remote process monitoring is not implemented, will no longer fail with <em>badarg</em> exception. Instead a monitor will be created, but it will only supervise the connection to the node.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14370
* 
Changed the default behaviour of <em>.erlang</em> loading: <em>.erlang</em> is no longer loaded from the current directory. <em>c:erlangrc(PathList)</em> can be used to search and load an <em>.erlang</em> file from user specified directories.</p>
<p><em>escript</em> , <em>erlc</em> , <em>dialyzer</em> and <em>typer</em> no longer load an <em>.erlang</em> at all.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14439
* 
New functionality for implementation of alternative carriers for the Erlang distribution has been introduced. This mainly consists of support for usage of distribution controller processes (previously only ports could be used as distribution controllers). For more information see <a href="../erts/alt_dist#distribution_module">ERTS User's Guide ➜ How to implement an Alternative Carrier for the Erlang Distribution ➜ Distribution Module</a> .</p>
<p>Own Id: OTP-14459
* 
Add support for the lcc compiler and in extension the Elbrus 2000 platform.</p>
<p>Own Id: OTP-14492
* 
Support for "tuple calls" have been removed from the run-time system. Tuple calls was an undocumented and unsupported feature which allowed the module argument for an apply operation to be a tuple: <em>Var = dict:new(), Var:size()</em> . This "feature" frequently caused confusion, especially when such call failed. The stacktrace would point out functions that don't exist in the source code.</p>
<p>For legacy code that need to use parameterized modules or tuple calls for some other reason, there is a new compiler option called <em>tuple_calls</em> . When this option is given, the compiler will generate extra code that emulates the old behavior for calls where the module is a variable.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14497
* 
Creation of small maps with literal keys has been optimized to be faster and potentially use less memory. The keys are combined into a literal key tuple which is put into the literal pool. The key tuple can be shared between many instances of maps having the same keys.</p>
<p>Own Id: OTP-14502
* 
When an exception is thrown, include the arguments of the call in the stacktrace for BIFs <em>band</em> , <em>bor</em> , <em>bsl</em> , <em>bsr</em> , <em>bxor</em> , <em>div</em> , <em>rem</em> and the operators <em>+</em> , <em>-</em> , *<em><em> and </em>/</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14508
* 
The non-smp emulators have been removed. This means that the configure options <em>--disable-threads</em> and <em>--enable-plain-emulator</em> have been removed and configure will now refuse to build Erlang/OTP on platforms without thread support.</p>
<p>In order to achieve a similar setup as the non-smp emulator, it is possible to start Erlang/OTP with the <em>+S 1</em> option.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14518
* 
Modules that use floating point constants compiled with R15 or earlier will need to be re-compiled before they can be loaded.</p>
<p>Own Id: OTP-14575
* 
Implementation of true asynchronous signaling between processes in order to improve scalability. Signals affected include exit, monitor, demonitor, monitor triggered, link, unlink, and group leader.</p>
<p>Own Id: OTP-14589
* 
Added a PGO (profile guided optimization) pass to the build step of erts. This can be disabled by passing --disable-pgo to configure.</p>
<p>Own Id: OTP-14604
* 
Improved the performance of <em>binary:split</em> and <em>binary:match</em> .</p>
<p>Own Id: OTP-14610 Aux Id: PR-1480
* 
It is not longer possible to disable dirty schedulers when building erlang.</p>
<p>Own Id: OTP-14613
* 
Loaded BEAM code in a 64-bit system requires less memory because of better packing of operands for instructions.</p>
<p>These memory savings were achieved by major improvements to the <em>beam_makeops</em> scripts used when building the run time system and BEAM compiler. There is also new for documentation for <em>beam_makeops</em> that describes how new BEAM instructions and loader transformations can be implemented. The documentation is found in here in a source directory or git repository: erts/emulator/internal_doc/beam_makeops.md. An online version can be found here: https://github.com/erlang/otp/blob/master/erts/emulator/internal_doc/beam_makeops.md</p>
<p>Own Id: OTP-14626
* 
<em>file:read_file</em> has been changed to read the content of files that report a size of 0 even when data can be read from them. An example of such a file is <em>/proc/cpuinfo</em> on Linux.</p>
<p>Own Id: OTP-14637 Aux Id: ERL-327 PR-1524
* 
It is no longer possible to disable the <em>temp_alloc</em> allocator. Disabling it caused serious performance degradations and was never what was wanted.</p>
<p>Own Id: OTP-14651
* 
The reduction cost of sending messages is now constant. It will no longer scale according to the length of the receiving process' message queue.</p>
<p>Own Id: OTP-14667
* 
Improved loading of modules with <em>-on_load</em> directive, to no longer block all schedulers when the load operation is completed.</p>
<p>Own Id: OTP-14680
* 
On platforms with real-time signals available, SIGRTMIN+1 is now used as the internal scheduler suspend signal instead of SIGUSR2.</p>
<p>Own Id: OTP-14682
* 
When the value returned from a ' <em>catch</em> ' expression is ignored, no stacktrace will be built if an exception is caught. That will save time and produce less garbage. There are also some minor optimizations of ' <em>try</em> / <em>catch</em> ' both in the compiler and run-time system.</p>
<p>Own Id: OTP-14683
* 
The guarantees and non-guarantees of <em>erlang:get_stacktrace/0</em> are now documented.</p>
<p>Own Id: OTP-14687
* 
There is a new syntax in ' <em>try/catch</em> ' for retrieving the stacktrace without calling ' <em>erlang:get_stacktrace/0</em> '. See the reference manual for a description of the new syntax. The ' <em>erlang:get_stacktrace/0</em> ' BIF is now deprecated.</p>
<p>Own Id: OTP-14692
* 
New 'used' option for <em>binary_to_term/2</em> that will also return number of bytes actually read from the binary. This enables easy access to any extra data in the binary located directly after the returned term.</p>
<p>Own Id: OTP-14780
* 
Added more statistics for <em>erlang:system_info({allocator,A})</em> in the <em>mbcs_pool</em> section.</p>
<p>Own Id: OTP-14795 Aux Id: ERL-88
* 
Added <em>enif_ioq_peek_head</em> to retrieve Erlang terms from NIF IO queues without having to resort to copying.</p>
<p>Own Id: OTP-14797
* 
There is a new option ' <em>makedep_side_effect</em> ' for the compiler and <em>-MMD</em> for ' <em>erlc</em> ' that generates dependencies and continues to compile as normal.</p>
<p>Own Id: OTP-14830
* 
Added <em>ets:whereis/1</em> for retrieving the table identifier of a named table.</p>
<p>Own Id: OTP-14884
* 
<em>seq_trace</em> labels may now be any erlang term.</p>
<p>Own Id: OTP-14899
* 
Optimized the common case of <em>monitor</em> followed by <em>send</em> to the same local process. The monitor signal is now delayed in order to be piggybacked with the sent message and thereby only get one lock operation on the message queue of the receiver. A delayed monitor signal is flushed if no <em>send</em> has been done at the latest when the process is scheduled out.</p>
<p>Own Id: OTP-14901
* 
Make hipe compiled code work on x86_64 (amd64) with OS security feature PIE, where executable code can be loaded into a random location. Old behavior, if hipe was enabled, was to disable PIE build options for the VM.</p>
<p>Own Id: OTP-14903
* 
The number of driver async threads will now default to 1 as the standard drivers do not use them anymore. Users that changed this value to tweak the file driver should replace <em>+A</em> with <em>+SDio</em> since it now uses dirty IO schedulers instead of async threads.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14928
* 
Optimize <em>==</em> and <em>/=</em> for binaries with different sizes to be constant in time instead of proportional to the size of their common prefix.</p>
<p>Own Id: OTP-14934 Aux Id: PR-1708
* 
Refactorings making some internal process flags available for other usage.</p>
<p>Own Id: OTP-14948
* 
Removed need for HiPE to allocate native executable memory in low 2GB address space on x86_64. Command line option <em>+MXscs</em> is thereby obsolete and ignored.</p>
<p>Own Id: OTP-14951
* 
Added <em>enif_make_map_from_arrays</em> for creating a populated map, analogous to <em>enif_make_list_from_array</em> .</p>
<p>Own Id: OTP-14954
* 
Added configuration switches for busy-wait and wake up thresholds for dirty schedulers, and changing these settings for normal schedulers will no longer affect dirty schedulers.</p>
<p>Refer to the documentation for details. The new switches are <a href="./erl#+sbwtdcpu">+sbwtdcpu</a> , <a href="./erl#+sbwtdio">+sbwtdio</a> , <a href="./erl#+swtdcpu">+swtdcpu</a> , and <a href="./erl#+swtdio">+swtdio</a> .</p>
<p>The default busy wait threshold for dirty scheduler threads has also been lowered to <em>short</em> .</p>
<p>Own Id: OTP-14959
* 
The list of "taints" now also includes dynamic loaded drivers in addition to NIF libraries. Statically linked drivers and NIF libraries that are part of erts are not included. The "taints" are returned by <em>system_info(taints)</em> and printed in the header of <em>erl_crash.dump</em> files.</p>
<p>Own Id: OTP-14960
* 
Added <em>instrument:allocations</em> and <em>instrument:carriers</em> for retrieving information about memory utilization and fragmentation.</p>
<p>The old <em>instrument</em> interface has been removed, as have the related options <em>+Mim</em> and <em>+Mis</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14961
* 
The process suspend functionality used by the <a href="./erlang#suspend_process/2">erlang:suspend_process/2</a> BIF has been reimplemented using the newly introduced true asynchronous signaling between processes. This mainly to reduce memory usage in the process control block of all processes, but also in order to simplify the implementation.</p>
<p>You can easily create deadlocks if processes suspends each other (directly or in circles). In ERTS versions prior to ERTS version 10.0, the runtime system prevented such deadlocks, but this prevention has now been removed due to performance reasons.</p>
<p>Other ERTS internal functionality that used the previous process suspend functionality have also been reimplemented to use asynchronous signaling instead.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14964 Aux Id: OTP-14589
* 
Added the <em>nifs</em> option to <em>?MODULE:module_info/1</em> for listing a module's installed NIF functions.</p>
<p>Own Id: OTP-14965
* 
New implementation of <em>erlang:process_info/[1,2]</em> .</p>
<p>In the general case when inspecting another process, the new implementation sends an asynchronous process-info request signal to the other process and waits for the result instead of locking the other process and reading the result directly. In some special cases where no conflicts occur, signal order wont be violated, and the amount of data requested is guaranteed to be small, the inspected process may be inspected directly.</p>
<p>Appropriate amount of reductions are now also bumped when inspecting a process.</p>
<p>Own Id: OTP-14966
* 
Removed process start time from crash dump in order to save memory in process control block.</p>
<p>Own Id: OTP-14975 Aux Id: PR-1597
* 
Optimize <em>erlang:put/2</em> when updating existing key with a new immediate value (atom, small integer, pid, port).</p>
<p>Own Id: OTP-14976
* 
<em>erlang:process_info/1</em> has been changed to no longer include <em>messages</em> by default. Instead <em>erlang:process_info/2</em> should be used.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14986 Aux Id: PR-1745
* 
New <em>erlang:system_info(ets_count)</em> to get total number of ets tables existing at the local node.</p>
<p>Own Id: OTP-14987
* 
New NIF functions: <em>enif_mutex_name</em> , <em>enif_cond_name</em> , <em>enif_rwlock_name</em> , <em>enif_thread_name</em> , <em>enif_vfprintf</em> , <em>enif_vsnprintf</em> .</p>
<p>Own Id: OTP-14994
* 
When <em>erlang:system_flag(backtrace_depth, 0)</em> has been called, all exceptions will now contain the entry for <strong>one</strong> function (despite the zero). It used to be that a hand-made stack backtrace passed to <em>erlang:raise/3</em> would be be truncated to an empty list.</p>
<p>Own Id: OTP-15026
* 
Fixed bug for named <em>ets</em> tables which could cause unexpected results from matchspec iteration functions ( <em>ets:select<strong> and *ets:match</strong> ) if the table was deleted and recreated with the same name during the iteration. The iteration could incorrectly continue through the recreated table. The expected correct behavior is now for the iteration call to fail with a </em>badarg* exception if the table is deleted before the iteration has completed.</p>
<p>Own Id: OTP-15031
* 
Two new guards BIFs operating on maps have been added: <em>map_get/2</em> and <em>is_map_key/2</em> . They do the same as <em>maps:get/2</em> and <em>maps:is_key/2</em> , respectively, except that they are allowed to be used in guards.</p>
<p>Own Id: OTP-15037 Aux Id: PR-1784, PR-1802
* 
Release run-queue lock while cleaning up terminated dirty process.</p>
<p>Own Id: OTP-15081
* 
The callback module passed as <em>-epmd_module</em> to erl has been expanded to be able to do name and port resolving.</p>
<p>Documentation has also been added in the <a href="./erl_epmd">kernel/erl_epmd</a> reference manual and ERTS User's Guide <a href="./alt_disco">How to Implement an Alternative Service Discovery for Erlang Distribution</a> .</p>
<p>Own Id: OTP-15086 Aux Id: PR-1694</p>
<h2 id="erts-93310">Erts 9.3.3.10</h2>
<h2 id="fixed-bugs-and-malfunctions_24">Fixed Bugs and Malfunctions</h2>
<ul>
<li>
<p>Fixes of install/release phase in build system.</p>
</li>
<li>
<p>The source tree was modified when installing/releasing and/or applying a patch.</p>
</li>
<li>Some files were installed with wrong access rights.</li>
<li>If applying a patch (using <em>otp_patch_apply</em> ) as another user (except root) than the user that built the source, the documentation was not properly updated.</li>
</ul>
<p>Own Id: OTP-15551
* 
Minor fixes for <em>make clean</em> .</p>
<p>Own Id: OTP-15657
* 
Fixed a bug in all *ets:select<strong> and *ets:match</strong> functions that could in some rare cases lead to very poor performance.</p>
<p>Own Id: OTP-15660 Aux Id: ERL-869
* 
Fix a possible deadlock when terminating the ERTS caused by a dirty scheduler not releasing it's run-queue lock when terminating.</p>
<p>Own Id: OTP-15690 Aux Id: PR-2172
* 
Add missing documentation of new external tags <em>NEW_PID</em> , <em>NEW_PORT</em> and <em>NEWER_REFERENCE</em> introduced in OTP 19.</p>
<p>These new tags are planned to be "activated" in OTP 23 when distribution capability flag <em>DFLAG_BIG_CREATION</em> becomes mandatory. Older nodes (&gt;= 19) are able to decode these new tags and send them back to the new node. Nodes older than OTP 23 will however never encode their own local pids, ports and references using the new tags.</p>
<p>Own Id: OTP-15766</p>
<h2 id="erts-9339">Erts 9.3.3.9</h2>
<h2 id="improvements-and-new-features_5">Improvements and New Features</h2>
<ul>
<li>Added an optional <em>./configure</em> flag to compile the emulator with spectre mitigation: <em>--with-spectre-mitigation</em></li>
</ul>
<p>Note that this requires a recent version of GCC with support for spectre mitigation and the <em>--mindirect-branch=thunk</em> flag, such as <em>8.1</em> .</p>
<p>Own Id: OTP-15430 Aux Id: ERIERL-237</p>
<h2 id="erts-9338">Erts 9.3.3.8</h2>
<h2 id="fixed-bugs-and-malfunctions_25">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug that could cause dirty schedulers to become unresponsive has been fixed.</li>
</ul>
<p>Own Id: OTP-15509 Aux Id: PR-2027, PR-2093</p>
<h2 id="erts-9337">Erts 9.3.3.7</h2>
<h2 id="fixed-bugs-and-malfunctions_26">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug in operator <em>band</em> of two negative operands causing erroneous result if the absolute value of one of the operands have the lowest <em>N</em>W<em> bits as zero and the other absolute value is not larger than </em>N<em>W</em> bits. <em>N</em> is an integer of 1 or larger and <em>W</em> is 32 or 64 depending on word size.</li>
</ul>
<p>Own Id: OTP-15487 Aux Id: ERL-804</p>
<h2 id="erts-9336">Erts 9.3.3.6</h2>
<h2 id="improvements-and-new-features_6">Improvements and New Features</h2>
<ul>
<li>List subtraction (The <em>--</em> operator) will now yield properly on large inputs.</li>
</ul>
<p>Own Id: OTP-15371</p>
<h2 id="erts-9335">Erts 9.3.3.5</h2>
<h2 id="fixed-bugs-and-malfunctions_27">Fixed Bugs and Malfunctions</h2>
<ul>
<li>ERTS internal trees of monitor structures could get into an inconsistent state. This could cause <em>'DOWN'</em> messages not to be delivered when they should, as well as delivery of <em>'DOWN'</em> messages that should not be delivered.</li>
</ul>
<p>This bug was introduced in ERTS version 9.0 (OTP 20.0) and was fixed in ERTS version 10.0 (OTP 21.0) due to a rewrite of the monitor code. That is, this bug only exist in the OTP 20 release.</p>
<p>Own Id: OTP-15399 Aux Id: ERL-751, ERIERL-262, OTP-14205</p>
<h2 id="erts-9334">Erts 9.3.3.4</h2>
<h2 id="fixed-bugs-and-malfunctions_28">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug in <em>ets:select_replace</em> when called with a fully bound key could cause a following call to <em>ets:next</em> or <em>ets:prev</em> to crash the emulator or return invalid result.</li>
</ul>
<p>Own Id: OTP-15346</p>
<h2 id="erts-9333">Erts 9.3.3.3</h2>
<h2 id="fixed-bugs-and-malfunctions_29">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug which caused an emulator crash when <em>enif_send()</em> was called by a NIF that executed on a dirty scheduler. The bug was either triggered when the NIF called <em>enif_send()</em> without a message environment, or when the process executing the NIF was <em>send</em> traced.</li>
</ul>
<p>Own Id: OTP-15223
* 
Fixed a bug causing some Erlang references to be inconsistently ordered. This could for example cause failure to look up certain elements with references as keys in search data structures. This bug was introduced in R13B02.</p>
<p>Thanks to Simon Cornish for finding the bug and supplying a fix.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-15225</p>
<h2 id="erts-9332">Erts 9.3.3.2</h2>
<h2 id="fixed-bugs-and-malfunctions_30">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a race condition in the inet driver that could cause receive to hang when the emulator was compiled with gcc 8.</li>
</ul>
<p>Own Id: OTP-15158 Aux Id: ERL-654
* 
Fix bug in generation of erl_crash.dump, which could cause VM to crash.</p>
<p>Bug exist since erts-9.2 (OTP-20.2).</p>
<p>Own Id: OTP-15181</p>
<h2 id="erts-9331">Erts 9.3.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_31">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a rare bug that could cause processes to be scheduled after they had been freed.</li>
</ul>
<p>Own Id: OTP-15067 Aux Id: ERL-573</p>
<h2 id="erts-933">Erts 9.3.3</h2>
<h2 id="fixed-bugs-and-malfunctions_32">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug in <em>ets</em> that could cause VM crash if process A terminates after fixating a table and process B deletes the table at "the same time". The table fixation could be done with <em>ets:safe_fixtable</em> or if process A terminates in the middle of a long running <em>select</em> or <em>match</em> call.</li>
</ul>
<p>Own Id: OTP-15109</p>
<h2 id="erts-932">Erts 9.3.2</h2>
<h2 id="fixed-bugs-and-malfunctions_33">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug in <em>enif_binary_to_term</em> which could cause memory corruption for immediate terms (atoms, small integers, pids, ports, empty lists).</li>
</ul>
<p>Own Id: OTP-15080
* 
Fixed bug in <em>erlang:system_profile/2</em> that could cause superfluous <em>{profile,<em>,active,</em>,_}</em> messages for terminating processes.</p>
<p>Own Id: OTP-15085</p>
<h2 id="erts-931">Erts 9.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_34">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a crash in <em>heart:get_cmd/0</em> when the stored command was too long.</li>
</ul>
<p>Own Id: OTP-15034</p>
<h2 id="erts-93">Erts 9.3</h2>
<h2 id="fixed-bugs-and-malfunctions_35">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a <em>configure</em> test for <em>libz</em> internals that unintentionally caused various native code in OTP to link against <em>libz</em> . Under certain circumstances this caused the build of OTP to fail.</li>
</ul>
<p>Own Id: OTP-14840 Aux Id: ERL-529
* 
File names containing unicode codepoints larger than 255 were not correctly encoded in stack traces.</p>
<p>Own Id: OTP-14847 Aux Id: ERL-544
* 
Fix HiPE bug for binary constructs like <em>&lt;<X/utf8>&gt;</em> which could in rare cases cause faulty results or VM crash.</p>
<p>This fix affects both the <em>hipe</em> compiler and <em>erts</em> runtime in an <strong>incompatible</strong> way. Old hipe compiled files need to be recompiled to load and run properly as native.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14850 Aux Id: PR-1664
* 
Fix <em>term_to_binary/2</em> spec for <em>minor_version</em> .</p>
<p>Own Id: OTP-14876 Aux Id: ERL-548
* 
Fix bug in erlang:binary_to_integer/2 where invalid characters were not detected for bases larger then 10. e.g. <em>binary_to_integer(&lt;&lt;":"&gt;&gt;, 16)</em> would return 3 and not badarg as it should.</p>
<p>Own Id: OTP-14879
* 
Fixed bug in <em>float_to_list/2</em> and <em>float_to_binary/2</em> with option <em>decimals</em> that caused a faulty rounding up of the last decimal digit for about 6% of floats with a fraction part.</p>
<p>For example, <em>float_to_list(0.145, [{decimals,1}])</em> returned <em>"0.2"</em> instead of <em>"0.1"</em> .</p>
<p>Own Id: OTP-14890
* 
Fix bug causing slow hipe execution in modules loaded early during boot or loaded by <em>code:atomic_load</em> or <em>code:finish_loading</em> .</p>
<p>Own Id: OTP-14891
* 
Fixed a buffer overflow in an internal string formatting function that could be hit if specifying a long floating-point format specifier to <em>erts_sprintf</em> or similar.</p>
<p>Own Id: OTP-14920
* 
<em>erlang:iolist_to_iovec/1</em> and <em>enif_inspect_iovec</em> will no longer fail when provided with binaries that have been matched-out on a non-byte boundary.</p>
<p>Own Id: OTP-14921
* 
<em>iolist_to_binary/1</em> and <em>erlang:iolist_to_iovec/1</em> will now badarg if supplied with a bitstring (without a list).</p>
<p>Own Id: OTP-14926
* 
Reject loading modules with names containing directory separators ('/' or '\' on Windows).</p>
<p>Own Id: OTP-14933 Aux Id: ERL-564, PR-1716
* 
Fix potential dead-lock when the tracer process dies while a the traced process is running on a dirty scheduler.</p>
<p>Own Id: OTP-14938</p>
<h2 id="improvements-and-new-features_7">Improvements and New Features</h2>
<ul>
<li>More crash dump info such as: process binary virtual heap stats, full info for process causing out-of-mem during GC, more port related info, and dirty scheduler info.</li>
</ul>
<p>Own Id: OTP-14820</p>
<h2 id="erts-921">Erts 9.2.1</h2>
<h2 id="improvements-and-new-features_8">Improvements and New Features</h2>
<ul>
<li>Improve search algorithm of abandoned memory carriers. Instead of limited linear search, each allocator instance maintain a balanced search tree of all its abandoned carriers for faster and more exhaustive search.</li>
</ul>
<p>Own Id: OTP-14915 Aux Id: ERIERL-88
* 
New erts_alloc command line options <em>+M_acnl</em> and <em>+M_acfml</em> to limit carrier abandonment.</p>
<p>Own Id: OTP-14916 Aux Id: ERIERL-88
* 
New family of <em>erts_alloc</em> strategies: Age Order First Fit. Similar to "address order", but instead the oldest possible carrier is always chosen for allocation.</p>
<p>Own Id: OTP-14917 Aux Id: ERIERL-88
* 
Add possibility to change allocator options at runtime with <em>system_info(erts_alloc, ...)</em> . Only option <em>sbct</em> (single block carrier threshold) is currently supported via this interface.</p>
<p>Own Id: OTP-14918 Aux Id: ERIERL-88</p>
<h2 id="erts-9201">Erts 9.2.0.1</h2>
<h2 id="improvements-and-new-features_9">Improvements and New Features</h2>
<ul>
<li>Extra internal consistency checks wrt communication with erl_child_setup process.</li>
</ul>
<p>Own Id: OTP-15488 Aux Id: ERIERL-231</p>
<h2 id="erts-92">Erts 9.2</h2>
<h2 id="fixed-bugs-and-malfunctions_36">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix a bug in tracing where the {caller} match spec function would be set to undefined incorrectly when used in conjunction with return_to or return_trace on some functions.</li>
</ul>
<p>The functions effected are: erlang:put/2, erlang:erase/1, erlang:process_info/1,2, erlang:nif_load/2, erts_internal:garbage_collection/1 and erts_internal:check_process_code/1.</p>
<p>Because of this bug, the analysis done by fprof could become incorrect when the functions above are the tail-call in a function.</p>
<p>Own Id: OTP-14677
* 
Fix emulator deadlock that would happen if <em>trap_exit</em> was set to true and a process sends an exit signal to itself using <em>exit(self(), Reason)</em> while receive tracing was enabled for that process.</p>
<p>Own Id: OTP-14678 Aux Id: ERL-495
* 
Writing of crash dumps is significantly faster.</p>
<p>Maps are now included in crash dumps.</p>
<p>Constants terms would only be shown in one process, while other processes referencing the same constant term would show a marker for incomplete heap.</p>
<p>Own Id: OTP-14685 Aux Id: OTP-14611, OTP-14603, OTP-14595
* 
The fallback home directory for windows has been changed to be the PROFILE directory instead of the WINDOWS directory. The fallback is used when the environment variables HOMEDRIVE and HOMEPATH have not been set.</p>
<p>Own Id: OTP-14691
* 
Fix bug for hipe compiled code using <em>&lt;<X/utf32>&gt;</em> binary construction that could cause faulty result or even VM crash.</p>
<p>On architectures other than x86_64, code need to be recompiled to benefit from this fix.</p>
<p>Own Id: OTP-14740
* 
Fixed bug in <em>erlang:garbage_collect/2</em> and <em>erlang:check_process_code/3</em> , when called with option <em>{async,ReqestId}</em> . Could cause VM crash or heap corruption if <em>RequestId</em> was an immediate term (like a pid, atom or small integer). Bug exists since OTP-17.0.</p>
<p>Own Id: OTP-14752
* 
ERL_NIF_MINOR_VERSION wasn't bumped with the addition of <em>enif_ioq_</em>* .</p>
<p>Own Id: OTP-14779
* 
Purging of loaded code that contained "fake literals" (for example the magic reference obtained from ' <em>ets:new/2</em> ') would crash the runtime system. Corrected.</p>
<p>Own Id: OTP-14791
* 
Setting the size of the atom table to a number near 2147483647 (using the ' <em>+t</em> ' option) would cause the emulator to exit with a failure to allocate a huge amount of memory. This has been corrected. Also the usage message for the ' <em>+t</em> ' option has been corrected to show the correct upper limit 2147483647 instead of 0.</p>
<p>Own Id: OTP-14796
* 
Fixed a bug that prevented registered process names from being resolved in lcnt results.</p>
<p>Own Id: OTP-14803
* 
Formatting bugs were fixed in several HiPE debug BIFs.</p>
<p>Own Id: OTP-14804</p>
<h2 id="improvements-and-new-features_10">Improvements and New Features</h2>
<ul>
<li>Binaries and some other data in crash dumps are now encoded in base64 (instead of in hex), which will reduce the size of crash dumps.</li>
</ul>
<p>A few bugs in the handling of sub binaries in <em>crashdump_viewer</em> have been fixed.</p>
<p>Own Id: OTP-14686
* 
Micro optimization for send operations of messages to other nodes. The local ack-message, which is otherwise sent back from TPC/IP port driver to sending client process, is now ignored earlier for distributed send operations.</p>
<p>Own Id: OTP-14689</p>
<h2 id="erts-915">Erts 9.1.5</h2>
<h2 id="fixed-bugs-and-malfunctions_37">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug in file closure on Unix; close(2) was retried on EINTR which could cause a different (recently opened) file to be closed as well.</li>
</ul>
<p>Own Id: OTP-14775
* 
A race-condition when tearing down a connection with active node monitors could cause the runtime system to crash.</p>
<p>This bug was introduced in ERTS version 8.0 (OTP 19.0).</p>
<p>Own Id: OTP-14781 Aux Id: OTP-13047</p>
<h2 id="erts-914">Erts 9.1.4</h2>
<h2 id="fixed-bugs-and-malfunctions_38">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Microstate accounting sometimes produced incorrect results for dirty schedulers.</li>
</ul>
<p>Own Id: OTP-14707
* 
Fixed a regression in <em>zlib:gunzip/1</em> that prevented it from working when the decompressed size was a perfect multiple of 16384. This regression was introduced in 20.1.1</p>
<p>Own Id: OTP-14730 Aux Id: ERL-507
* 
Fixed a memory corruption bug in <em>enif_inspect_iovec</em> ; writable binaries stayed writable after entering the iovec.</p>
<p>Own Id: OTP-14745
* 
Fixed a crash in <em>enif_inspect_iovec</em> on encountering empty binaries.</p>
<p>Own Id: OTP-14750
* 
<em>zlib:deflateParams/3</em> will no longer return <em>buf_error</em> when called after <em>zlib:deflate/2</em> with zlib <em>1.2.11</em> .</p>
<p>Own Id: OTP-14751</p>
<h2 id="erts-913">Erts 9.1.3</h2>
<h2 id="fixed-bugs-and-malfunctions_39">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Added zlib:set_controlling_process/2 to move a zstream() between processes.</li>
</ul>
<p>Own Id: OTP-14672 Aux Id: ERL-494
* 
Fix so that schedulers are bound correctly when the first available cpu is not the first detected cpu. e.g. when using "taskset -c X..Y" when X is not equal to 0.</p>
<p>Own Id: OTP-14694</p>
<h2 id="erts-912">Erts 9.1.2</h2>
<h2 id="fixed-bugs-and-malfunctions_40">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug that could cause a VM crash when a corrupt message is received on distribution channel from other node.</li>
</ul>
<p>Own Id: OTP-14661 Aux Id: ERIERL-80</p>
<h2 id="erts-911">Erts 9.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_41">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The new zlib module returned a data_error when inflating concatenated streams, which was incompatible with the old module's behavior of returning the uncompressed data up to the end of the first stream.</li>
</ul>
<p>Own Id: OTP-14648
* 
zlib:gunzip/1 will no longer stop at the end of the first stream when decompressing concatenated gzip files.</p>
<p>Own Id: OTP-14649</p>
<h2 id="erts-91">Erts 9.1</h2>
<h2 id="fixed-bugs-and-malfunctions_42">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Changed <em>erlang:apply/2</em> to raise a <em>badarg</em> exception if the second argument is not a proper list. Previous behavior was a misleading <em>undef</em> exception.</li>
</ul>
<p>Own Id: OTP-14490 Aux Id: ERL-432
* 
On macOS, <em>crypto</em> would crash if <em>observer</em> had been started before <em>crypto</em> . On the beta for macOS 10.13 (High Sierra), <em>crypto</em> would crash. Both of those bugs have been fixed.</p>
<p>Own Id: OTP-14499 Aux Id: ERL-251 ERL-439
* 
Fixed bug in enif_whereis_pid/port that could cause heap corruption in rare cases.</p>
<p>Own Id: OTP-14523
* 
Fix so that trace messages generated when in a dirty nif are flushed correctly when the dirty nif is done executing.</p>
<p>Own Id: OTP-14538
* 
Fix escape code handling when using ANSI color codes in the shell.</p>
<p>Own Id: OTP-14549 Aux Id: PR1536
* 
Upgraded the ERTS internal PCRE library from version 8.40 to version 8.41. See <a href="http://pcre.org/original/changelog.txt">http://pcre.org/original/changelog.txt</a> for information about changes made to PCRE. This library implements major parts of the <a href="./re">stdlib/re</a> regular expressions module.</p>
<p>Own Id: OTP-14574
* 
Fixed a bug causing <em>statistics(runtime)</em> to produce negative values and a bug in <em>statistics(wall_clock)</em> causing it to produce values one second too long.</p>
<p><em>statistics(runtime)</em> now also use <em>getrusage()</em> as source when available preventing the returned value from wrapping as frequent as before.</p>
<p>Own Id: OTP-14597 Aux Id: ERL-465
* 
Fixed small memory leak that could occur when sending to a terminating port.</p>
<p>Own Id: OTP-14609
* 
Fix bug causing VM crash when a module with <em>-on_load</em> directive is loaded while <em>erlang:trace(on_load, ...)</em> is enabled.</p>
<p>Own Id: OTP-14612
* 
A warning that the compiler may optimize away atoms have been added to the documentation of <em>list_to_existing_atom/1</em> and <em>binary_to_existing_atom/2</em> .</p>
<p>Own Id: OTP-14614 Aux Id: ERL-453</p>
<h2 id="improvements-and-new-features_11">Improvements and New Features</h2>
<ul>
<li>Lock counting can now be fully toggled at runtime in the lock counting emulator ( <em>-emu_type lcnt</em> ). Everything is enabled by default to match the old behavior, but specific categories can be toggled at will with minimal runtime overhead when disabled. Refer to the documentation on <em>lcnt:rt_mask/1</em> for details.</li>
</ul>
<p>Own Id: OTP-13170
* 
The <em>zlib</em> module has been refactored and all its operations will now yield appropriately, allowing them to be used freely in concurrent applications.</p>
<p>The following functions have been deprecated, but will not produce compiler warnings until OTP 21: <em>zlib:adler32</em> , <em>zlib:crc32</em> , <em>zlib:inflateChunk</em> , <em>zlib:getBufSize</em> , <em>zlib:setBufSize</em> .</p>
<p>The behavior of throwing an error when a dictionary is required for decompression has also been deprecated. Refer to the documentation on <em>inflateSetDictionary/2</em> for details.</p>
<p>Own Id: OTP-14185
* 
<em>lcnt:collect</em> and <em>lcnt:clear</em> will no longer block all other threads in the runtime system.</p>
<p>Own Id: OTP-14412
* 
Add <em>erlang:iolist_to_iovec/1</em> , which converts an iolist() to an erlang:iovec(), which suitable for use with <em>enif_inspect_iovec</em> .</p>
<p>Own Id: OTP-14520
* 
When provided with bad arguments, the <em>zlib</em> module will now raise named exceptions instead of just <em>badarg</em> . For example, <em>not_initialized</em> when using <em>zlib:inflate/2</em> with an uninitialized stream.</p>
<p>Own Id: OTP-14527
* 
<em>erlang:halt/2</em> allows any Unicode string as slogan for the crash dump.</p>
<p>Own Id: OTP-14553
* 
Add new nif API functions for managing an I/O Queue. The added functions are:</p>
<ul>
<li><a href="./erl_nif#enif_ioq_create">erl_nif#enif_ioq_create</a></li>
<li><a href="./erl_nif#enif_ioq_destroy">erl_nif#enif_ioq_destroy</a></li>
<li><a href="./erl_nif#enif_ioq_enq_binary">erl_nif#enif_ioq_enq_binary</a></li>
<li><a href="./erl_nif#enif_ioq_enqv">erl_nif#enif_ioq_enqv</a></li>
<li><a href="./erl_nif#enif_ioq_deq">erl_nif#enif_ioq_deq</a></li>
<li><a href="./erl_nif#enif_ioq_peek">erl_nif#enif_ioq_peek</a></li>
<li><a href="./erl_nif#enif_inspect_iovec">erl_nif#enif_inspect_iovec</a></li>
<li><a href="./erl_nif#enif_free_iovec">erl_nif#enif_free_iovec</a></li>
</ul>
<p>Own Id: OTP-14598</p>
<h2 id="erts-905">Erts 9.0.5</h2>
<h2 id="fixed-bugs-and-malfunctions_43">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug in <em>binary_to_term</em> and <em>binary_to_atom</em> that could cause VM crash. Typically happens when the last character of an UTF8 string is in the range 128 to 255, but truncated to only one byte. Bug exists in <em>binary_to_term</em> since ERTS version 5.10.2 (OTP_R16B01) and <em>binary_to_atom</em> since ERTS version 9.0 (OTP-20.0).</li>
</ul>
<p>Own Id: OTP-14590 Aux Id: ERL-474</p>
<h2 id="erts-904">Erts 9.0.4</h2>
<h2 id="fixed-bugs-and-malfunctions_44">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A timer internal bit-field used for storing scheduler id was too small. As a result, VM internal timer data structures could become inconsistent when using 1024 schedulers on the system. Note that systems with less than 1024 schedulers are not effected by this bug.</li>
</ul>
<p>This bug was introduced in ERTS version 7.0 (OTP 18.0).</p>
<p>Own Id: OTP-14548 Aux Id: OTP-11997, ERL-468
* 
Automatic cleanup of a BIF timer, when the owner process terminated, could race with the timeout of the timer. This could cause the VM internal data structures to become inconsistent which very likely caused a VM crash.</p>
<p>This bug was introduced in ERTS version 9.0 (OTP 20.0).</p>
<p>Own Id: OTP-14554 Aux Id: OTP-14356, ERL-468</p>
<h2 id="erts-903">Erts 9.0.3</h2>
<h2 id="fixed-bugs-and-malfunctions_45">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Binary append operations did not check for overflow, resulting in nonsensical results when huge binaries were appended.</li>
</ul>
<p>Own Id: OTP-14524</p>
<h2 id="erts-902">Erts 9.0.2</h2>
<h2 id="fixed-bugs-and-malfunctions_46">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Added missing release notes for OTP-14491 ("performance bug in pre-allocators") which was included in erts-9.0.1 (OTP-20.0.1).</li>
</ul>
<p>Own Id: OTP-14494
* 
Fixed a bug that prevented TCP sockets from being closed properly on send timeouts.</p>
<p>Own Id: OTP-14509
* 
Fixed bug in operator <em>bxor</em> causing erroneuos result when one operand is a big <strong>negative</strong> integer with the lowest <em>N</em>W<em> bits as zero and the other operand not larger than </em>N<em>W</em> bits. <em>N</em> is an integer of 1 or larger and <em>W</em> is 32 or 64 depending on word size.</p>
<p>Own Id: OTP-14514</p>
<h2 id="erts-901">Erts 9.0.1</h2>
<h2 id="fixed-bugs-and-malfunctions_47">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug in gen_tcp:send where it never returned when repeatedly called on a remotely closed TCP socket.</li>
</ul>
<p>Own Id: OTP-13939 Aux Id: ERL-193
* 
Fixed segfault that could happen during cleanup of aborted erlang:port_command/3 calls. A port_command is aborted if the port is closed at the same time as the port_command was issued. This bug was introduced in erts-8.0.</p>
<p>Own Id: OTP-14481
* 
Fixed implementation of <em>statistics(wall_clock)</em> and <em>statistics(runtime)</em> so that values do not unnecessarily wrap due to the emulator. Note that the values returned by <em>statistics(runtime)</em> may still wrap due to limitations in the underlying functionality provided by the operating system.</p>
<p>Own Id: OTP-14484
* 
Fix performance bug in pre-allocators that could cause them to permanently fall back on normal more expensive memory allocation. Pre-allocators are used for quick allocation of short lived meta data used by messages and other scheduled tasks. Bug exists since OTP_R15B02. [this release note was missing in erts-9.0.1]</p>
<p>Own Id: OTP-14491</p>
<h2 id="erts-90">Erts 9.0</h2>
<h2 id="fixed-bugs-and-malfunctions_48">Fixed Bugs and Malfunctions</h2>
<ul>
<li>
<p>Fix various bugs regarding loading, upgrade and purge of HiPE compiled code:</p>
</li>
<li>
<p>The native code memory for a purged module was never deallocated.</p>
</li>
<li>Wrong functions could in some cases be called after a module upgrade.</li>
<li><em>erlang:check_process_code</em> did not check for recursive calls made from native code.</li>
</ul>
<p>Own Id: OTP-13968
* 
Hipe optional LLVM backend does require LLVM version 3.9 or later as older versions forced strong dependencies on erts internals structures.</p>
<p>Own Id: OTP-14238
* 
When an exception such as ' <em>throw(HugeTerm)</em> ' was caught, <em>HugeTerm</em> term would be kept in the process until the next exception occurred, potentially increasing the heap size for the process. That has been corrected.</p>
<p>Own Id: OTP-14255 Aux Id: OTP-14400, OTP-14401
* 
Slogans in crash dumps have been extended to print more complex terms.</p>
<p>Own Id: OTP-14303
* 
Fixed bug when using <em>enif_inspect_binary</em> in combination with <em>enif_copy</em> . In some circumstances the inspected binary could be reallocated by the <em>enif_copy</em> call when it shouldn't have been.</p>
<p>Own Id: OTP-14304
* 
The address family <em>local</em> (AF_UNIX / AF_LOCAL) now does not ensure zero termination of Linux Abstract Addresses so they can use all bytes.</p>
<p>Own Id: OTP-14305
* 
Use <em>-fno-PIE</em> for Gentoo Hardened and others that don't accept linker flag <em>-no-pie</em> .</p>
<p>Own Id: OTP-14307 Aux Id: PR-1379
* 
Disable hipe for <em>ppc64le</em> architecture (little endian) as it is not, and has never been, supported. It was earlier equated with <em>ppc64</em> (big endian) which lead to broken build without <em>--disable-hipe</em> .</p>
<p>Own Id: OTP-14314 Aux Id: ERL-369, PR-1394
* 
Fix 'epmd -kill' to return a failure exit status code if epmd was not killed because of some error.</p>
<p>Own Id: OTP-14324
* 
Fixed the following dirty scheduler related bugs:</p>
<ul>
<li>the <em>+SDPcpu</em> command line argument could cause the amount of dirty CPU schedulers to be set to zero</li>
<li><em>erlang:system_flag(multi_scheduling, _)</em> failed when only one normal scheduler was used together with dirty scheduler support</li>
</ul>
<p>Own Id: OTP-14335
* 
Fix erlexec to handle mismatch in sysconf and proc fs when figuring out the cpu topology. This behaviour has been seen when using docker together with <em>--cpuset-cpus</em> .</p>
<p>Own Id: OTP-14352
* 
Fixed memory segment cache used for multiblock carriers. Huge (&gt; 2GB) memory segments could cause a VM crash. Creation of such huge memory segments used for multiblock carriers is however very uncommon.</p>
<p>Own Id: OTP-14360 Aux Id: ERL-401, PR-1417
* 
Fix bug causing <em>code:is_module_native</em> to falsely return true when <em>local</em> call trace is enabled for the module.</p>
<p>Own Id: OTP-14390
* 
Fix emulator crash when receive tracing on a <em>trace_delivered</em> message.</p>
<p>Own Id: OTP-14411
* 
Fix file:sendfile error handling on SunOS when a connection is closed during transmission.</p>
<p>Own Id: OTP-14424
* 
<em>escript</em> did not handle paths with spaces correct.</p>
<p>Own Id: OTP-14433
* 
Fix erroneous lock check assertion when <em>wx</em> is run on MacOS X.</p>
<p>Own Id: OTP-14437 Aux Id: ERL-360
* 
Active-mode TCP sockets are now cleaned up properly on send/shutdown errors.</p>
<p>Own Id: OTP-14441 Aux Id: ERL-430
* 
Fix compilation of hipe_mkliterals when the LIBS configure variable had to be set.</p>
<p>Own Id: OTP-14447</p>
<h2 id="improvements-and-new-features_12">Improvements and New Features</h2>
<ul>
<li>Added <em>erlang:garbage_collect/2</em> that takes an option list as the last argument that can be used to control whether a minor or a major garbage collection is to be done. Doing a minor collection only collects terms that have recently died, but is cheaper than a major collection.</li>
</ul>
<p>Own Id: OTP-11695
* 
Optimized test for tuples with an atom as first element.</p>
<p>Own Id: OTP-12148
* 
Erlang literals are no longer copied during process to process messaging.</p>
<p>Own Id: OTP-13529
* 
Add support in the <em>erl_nif</em> API for asynchronous message notifications when sockets or other file descriptors are ready to accept read or write operations. The following functions have been added:</p>
<ul>
<li>enif_select</li>
<li>enif_monitor_process</li>
<li>enif_demonitor_process</li>
<li>enif_compare_monitors</li>
<li>enif_open_resource_type_x</li>
</ul>
<p>Own Id: OTP-13684
* 
There are two new guard BIFs ' <em>floor/1</em> ' and ' <em>ceil/1</em> '. They both return integers. In the ' <em>math</em> ' module, there are two new BIFs with the same names that return floating point values.</p>
<p>Own Id: OTP-13692
* 
Remove deprecated <em>erlang:hash/2</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13827
* 
Replaced usage of deprecated symbolic <a href="../erts/erlang#type-time_unit">erts/erlang#type-time_unit</a> representations.</p>
<p>Own Id: OTP-13831 Aux Id: OTP-13735
* 
Added support in zlib for extraction of the inflation dictionary.</p>
<p>Own Id: OTP-13842
* 
The previously used purge strategy has been removed. The optional purge strategy introduced in ERTS version 8.1 is now the only strategy available.</p>
<p>The new purge strategy is slightly incompatible with the old strategy. Previously processes holding <em>fun</em> s that referred to the module being purged either failed a soft purge, or was killed during a hard purge. The new strategy completely ignores <em>fun</em> s. If <em>fun</em> s referring to the code being purged exist, and are used after a purge, an exception will be raised upon usage. That is, the behavior will be exactly the same as the case when a <em>fun</em> is received by a process after the purge.</p>
<p>For more information see the documentation of <a href="../erts/erlang#check_process_code/3">erts/erlang#check_process_code/3</a> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13844 Aux Id: OTP-13833
* 
Dirty schedulers are now enabled by default when the runtime system is built with SMP support.</p>
<p>Own Id: OTP-13860
* 
Improved ETS lookup/insert/delete speed for large <em>set</em> , <em>bag</em> and <em>duplicate_bag</em> by a significant reduction of the hash load factor. This speed improvement comes at the expense of less than one word per table entry. Tables with less than 256 entries are not affected at all.</p>
<p>Own Id: OTP-13903
* 
The NIF library <em>reload</em> feature is not supported anymore. It has been marked as deprecated since OTP R15B. This means that you are only allowed to do one successful call to <em>erlang:load_nif/2</em> for each module instance. A second call to <em>erlang:load_nif/2</em> will return <em>{error, {reload, _}}</em> even if the NIF library implements the <em>reload</em> callback.</p>
<p>Runtime upgrade of a NIF library is still supported by using the Erlang module upgrade mechanics with a current and an old module instance existing at the same time with their corresponding NIF libraries.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13908
* 
Add <em>erlang:system_info(atom_count)</em> and <em>erlang:system_info(atom_limit)</em> to provide a way to retrieve the current and maximum number of atoms.</p>
<p>Own Id: OTP-13976
* 
The function <em>fmod/2</em> has been added to the <em>math</em> module.</p>
<p>Own Id: OTP-14000
* 
<em>erlang:load_nif/2</em> returns new error type <em>notsup</em> when called for a HiPE compiled module, which is not supported.</p>
<p>Own Id: OTP-14002
* 
Add driver and nif lock instrumentation to lcnt</p>
<p>Own Id: OTP-14069
* 
Reduce memory pressure by converting sub-binaries to heap-binaries when possible. This is done during garbage collection.</p>
<p>Own Id: OTP-14149
* 
Dirty schedulers are now enabled and supported on Erlang runtime systems with SMP support.</p>
<p>Besides support for dirty NIFs also support for dirty BIFs and dirty garbage collection have been introduced. All garbage collections that potentially will take a long time to complete are now performed on dirty schedulers if enabled.</p>
<p><a href="../erts/erlang#statistics/1">erts/erlang#statistics/1</a> with arguments inspecting scheduler and run queue states have been changed due to the dirty scheduler support. Code using this functionality may have to be rewritten taking these incompatibilities into consideration. Examples of such uses are calls to <a href="../erts/erlang#statistics_scheduler_wall_time">erts/erlang#statistics_scheduler_wall_time</a> , <a href="../erts/erlang#statistics_total_run_queue_lengths">erts/erlang#statistics_total_run_queue_lengths</a> , <a href="../erts/erlang#statistics_total_active_tasks">erts/erlang#statistics_total_active_tasks</a> , etc.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14152
* 
Atoms may now contain arbitrary Unicode characters.</p>
<p>Own Id: OTP-14178
* 
Introduce an event manager in Erlang to handle OS signals. A subset of OS signals may be subscribed to and those are described in the Kernel application.</p>
<p>Own Id: OTP-14186
* 
The <em>escript</em> program now handles symbolic links to escripts.</p>
<p>This is useful for standalone systems with <em>escript</em> s residing on a bin directory not included in the execution path (as it may cause their <em>erl</em> program(s) to override the desired one). Instead the <em>escript</em> s can be referred to via symbolic links from a bin directory in the path.</p>
<p>Own Id: OTP-14201 Aux Id: PR-1293
* 
All uses of the magic binary kludge has been replaced by uses of erlang references.</p>
<p>A magic binary was presented as an empty binary, but actually referred other data internally in the Erlang VM. Since they were presented as empty binaries, different magic binaries compared as equal, and also lost their internal data when passed out of an erlang node.</p>
<p>The new usage of references has not got any of these strange semantic issues, and the usage of these references has been optimized to give the same performance benefits as well as memory usage benefits as magic binaries had.</p>
<p>A couple of examples of previous uses of magic binaries are match specifications and NIF resources.</p>
<p>Own Id: OTP-14205
* 
The non-smp emulators have been deprecated and are scheduled for removal in OTP-21.</p>
<p>In preparation for this, the threaded non-smp emulator is no longer built by default and has to be enabled using the --enable-plain-emulator to configure.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14272
* 
Allow HiPE to run on VM built with <em>--enable-m32-build</em> .</p>
<p>Own Id: OTP-14330 Aux Id: PR-1397
* 
Upgraded the OTP internal PCRE library from version 8.33 to version 8.40. This library is used for implementation of the <a href="./re">stdlib/re</a> regular expressions module.</p>
<p>Besides various bug fixes, the new version allows for better stack protection. In order to utilize this feature, the stack size of normal scheduler threads is now by default set to 128 kilo words on all platforms. The stack size of normal scheduler threads can be set upon system start by passing the <a href="../erts/erl#sched_thread_stack_size">erts/erl#sched_thread_stack_size</a> command line argument to the <a href="./erl">erts/erl</a> command.</p>
<p>See <a href="http://pcre.org/original/changelog.txt">http://pcre.org/original/changelog.txt</a> for information about changes made to PCRE between the versions 8.33 and 8.40.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-14331 Aux Id: ERL-208
* 
Remove generation of atoms in old latin1 external format in the distribution between erlang nodes, <em>erl_interface</em> , and <em>jinterface</em> . The new utf8 format for atoms was introduced in OTP R16. An OTP 20 node can therefore not connect to nodes older than R16.</p>
<p>Atoms that can be encoded using latin1 are still encoded by <em>term_to_binary()</em> using latin1 encoding. Note that all atoms will by default be encoded using utf8 in a future Erlang/OTP release. For more information see the documentation of <a href="../erts/erlang#term_to_binary/2">erts/erlang#term_to_binary/2</a> .</p>
<p>Own Id: OTP-14337
* 
Added function <em>re:version/0</em> which returns information about the OTP internal PCRE version used for implementation of the <em>re</em> module.</p>
<p>Own Id: OTP-14347 Aux Id: PR-1412
* 
Added new debug bif <em>erlang:list_to_port/1</em> .</p>
<p>Own Id: OTP-14348
* 
Various improvements of timer management internally in the VM. These improvements both reduced memory consumption of timer wheels as well as reduce the amount of work that has to be performed in order to handle timers.</p>
<p>Own Id: OTP-14356
* 
Sockets can now be bound to device (SO_BINDTODEVICE) on platforms where it is supported.</p>
<p>This has been implemented e.g to support VRF-Lite under Linux; see <a href="https://www.kernel.org/doc/Documentation/networking/vrf.txt">VRF</a> , and GitHub pull request <a href="https://github.com/erlang/otp/pull/1326">#1326</a> .</p>
<p>Own Id: OTP-14357 Aux Id: PR-1326
* 
Added the following <a href="erl">erl</a> command line arguments with which you can set suggested stack for dirty schedulers:
 <dl></p>
<dt> erl#dcpu_sched_thread_stack_size </dt>

<dd>

for dirty CPU schedulers
</dd>

<dt> erl#dio_sched_thread_stack_size </dt>

<dd>

for dirty IO schedulers
</dd>

<p></dl> 
The default suggested stack size for dirty schedulers is 40 kilo words.</p>
<p>Own Id: OTP-14380
* 
Changed erts startup program name, argv 0, to use the environment variable <em>ESCRIPT_NAME</em> so that <em>erlc</em> , <em>dialyzer</em> , <em>typer</em> , <em>ct_run</em> , or the escript name can be seen with external programs, such as ps and htop (depending on options), on unix.</p>
<p>Own Id: OTP-14381
* 
Improvements of <em>escript</em> documentation.</p>
<p>Own Id: OTP-14384 Aux Id: OTP-14201
* 
Add function <em>enif_hash</em> for NIFs to calculate hash values of arbitrary terms.</p>
<p>Own Id: OTP-14385 Aux Id: PR-1413
* 
' <em>./configure --enable-lock-counter</em> ' will enabling building of an additional emulator that has support for lock counting. (The option previously existed, but would turn on lock counting in the default emulator being built.) To start the lock-counting emulator, use ' <em>erl -emu_type lcnt</em> '.</p>
<p>On Windows, <em>erl</em> recognized the undocumented option <em>-debug</em> for starting a debug-compiled emulator. That option has been removed. Use ' <em>erl -emu_type debug</em> ' instead.</p>
<p>Own Id: OTP-14407
* 
Warnings have been added to the relevant documentation about not using un-secure distributed nodes in exposed environments.</p>
<p>Own Id: OTP-14425
* 
Improvement of the documentation of the environment variable <em>ERL_CRASH_DUMP_SECONDS</em> as well as the default behavior when it is not set.</p>
<p>Own Id: OTP-14434
* 
Enabled off-heap message queue for some system processes that might receive large amounts of messages.</p>
<p>Own Id: OTP-14438
* 
ETS lock indexes have been replaced with the table name in LCNT results.</p>
<p>Own Id: OTP-14442 Aux Id: ERIERL-22
* 
Introduced the new functions <a href="./erl_nif#enif_whereis_pid">erl_nif#enif_whereis_pid</a> and <a href="./erl_nif#enif_whereis_port">erl_nif#enif_whereis_port</a> .</p>
<p>Own Id: OTP-14453 Aux Id: PR-1400</p>
<h2 id="erts-8357">Erts 8.3.5.7</h2>
<h2 id="fixed-bugs-and-malfunctions_49">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed bug in operator <em>band</em> of two negative operands causing erroneous result if the absolute value of one of the operands have the lowest <em>N</em>W<em> bits as zero and the other absolute value is not larger than </em>N<em>W</em> bits. <em>N</em> is an integer of 1 or larger and <em>W</em> is 32 or 64 depending on word size.</li>
</ul>
<p>Own Id: OTP-15487 Aux Id: ERL-804</p>
<h2 id="improvements-and-new-features_13">Improvements and New Features</h2>
<ul>
<li>Added an optional <em>./configure</em> flag to compile the emulator with spectre mitigation: <em>--with-spectre-mitigation</em></li>
</ul>
<p>Note that this requires a recent version of GCC with support for spectre mitigation and the <em>--mindirect-branch=thunk</em> flag, such as <em>8.1</em> .</p>
<p>Own Id: OTP-15430 Aux Id: ERIERL-237</p>
<h2 id="erts-8356">Erts 8.3.5.6</h2>
<h2 id="fixed-bugs-and-malfunctions_50">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed small memory leak that could occur when sending to a terminating port.</li>
</ul>
<p>Own Id: OTP-14609 Aux Id: ERIERL-238</p>
<h2 id="erts-8355">Erts 8.3.5.5</h2>
<h2 id="fixed-bugs-and-malfunctions_51">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a race condition in the inet driver that could cause receive to hang when the emulator was compiled with gcc 8.</li>
</ul>
<p>Own Id: OTP-15158 Aux Id: ERL-654
* 
Fixed a bug causing some Erlang references to be inconsistently ordered. This could for example cause failure to look up certain elements with references as keys in search data structures. This bug was introduced in R13B02.</p>
<p>Thanks to Simon Cornish for finding the bug and supplying a fix.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-15225</p>
<h2 id="erts-8354">Erts 8.3.5.4</h2>
<h2 id="fixed-bugs-and-malfunctions_52">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug in file closure on Unix; close(2) was retried on EINTR which could cause a different (recently opened) file to be closed as well.</li>
</ul>
<p>Own Id: OTP-14775
* 
A race-condition when tearing down a connection with active node monitors could cause the runtime system to crash.</p>
<p>This bug was introduced in ERTS version 8.0 (OTP 19.0).</p>
<p>Own Id: OTP-14781 Aux Id: OTP-13047</p>
<h2 id="erts-8353">Erts 8.3.5.3</h2>
<h2 id="fixed-bugs-and-malfunctions_53">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A timer internal bit-field used for storing scheduler id was too small. As a result, VM internal timer data structures could become inconsistent when using 1024 schedulers on the system. Note that systems with less than 1024 schedulers are not effected by this bug.</li>
</ul>
<p>This bug was introduced in ERTS version 7.0 (OTP 18.0).</p>
<p>Own Id: OTP-14548 Aux Id: OTP-11997, ERL-468
* 
Fixed bug in <em>binary_to_term</em> and <em>binary_to_atom</em> that could cause VM crash. Typically happens when the last character of an UTF8 string is in the range 128 to 255, but truncated to only one byte. Bug exists in <em>binary_to_term</em> since ERTS version 5.10.2 (OTP_R16B01) and <em>binary_to_atom</em> since ERTS version 9.0 (OTP-20.0).</p>
<p>Own Id: OTP-14590 Aux Id: ERL-474
* 
Fix bug causing VM crash when a module with <em>-on_load</em> directive is loaded while <em>erlang:trace(on_load, ...)</em> is enabled.</p>
<p>Own Id: OTP-14612
* 
Fixed bug that could cause a VM crash when a corrupt message is received on distribution channel from other node.</p>
<p>Own Id: OTP-14661 Aux Id: ERIERL-80</p>
<h2 id="erts-8352">Erts 8.3.5.2</h2>
<h2 id="fixed-bugs-and-malfunctions_54">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix performance bug in pre-allocators that could cause them to permanently fall back on normal more expensive memory allocation. Pre-allocators are used for quick allocation of short lived meta data used by messages and other scheduled tasks. Bug exists since OTP_R15B02.</li>
</ul>
<p>Own Id: OTP-14491
* 
Fixed a bug that prevented TCP sockets from being closed properly on send timeouts.</p>
<p>Own Id: OTP-14509
* 
Fixed bug in operator <em>bxor</em> causing erroneuos result when one operand is a big <strong>negative</strong> integer with the lowest <em>N</em>W<em> bits as zero and the other operand not larger than </em>N<em>W</em> bits. <em>N</em> is an integer of 1 or larger and <em>W</em> is 32 or 64 depending on word size.</p>
<p>Own Id: OTP-14514</p>
<h2 id="erts-8351">Erts 8.3.5.1</h2>
<h2 id="fixed-bugs-and-malfunctions_55">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug in gen_tcp:send where it never returned when repeatedly called on a remotely closed TCP socket.</li>
</ul>
<p>Own Id: OTP-13939 Aux Id: ERL-193
* 
Fixed segfault that could happen during cleanup of aborted erlang:port_command/3 calls. A port_command is aborted if the port is closed at the same time as the port_command was issued. This bug was introduced in erts-8.0.</p>
<p>Own Id: OTP-14481
* 
Fixed implementation of <em>statistics(wall_clock)</em> and <em>statistics(runtime)</em> so that values do not unnecessarily wrap due to the emulator. Note that the values returned by <em>statistics(runtime)</em> may still wrap due to limitations in the underlying functionality provided by the operating system.</p>
<p>Own Id: OTP-14484</p>
<h2 id="erts-835">Erts 8.3.5</h2>
<h2 id="fixed-bugs-and-malfunctions_56">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Active-mode TCP sockets are now cleaned up properly on send/shutdown errors.</li>
</ul>
<p>Own Id: OTP-14441 Aux Id: ERL-430
* 
A code purge operation could under certain circumstances expand the size of hibernated processes.</p>
<p>Own Id: OTP-14444 Aux Id: ERIERL-24
* 
Fix so that the ERL_ZZ_SIGTERM_KILL introduced in erts-8.3.4 works.</p>
<p>Own Id: OTP-14451</p>
<h2 id="erts-834">Erts 8.3.4</h2>
<h2 id="fixed-bugs-and-malfunctions_57">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Add option to make SIGTERM trigger the OS default behaviour instead of doing a gracefull shutdown. To activate this bahviour the environment variable ERL_ZZ_SIGTERM_KILL should be set to "true". This option only works in OTP 19 as OTP 20 will have a different way to deal with SIGTERM.</li>
</ul>
<p>Own Id: OTP-14418 Aux Id: ERIERL-15</p>
<h2 id="erts-833">Erts 8.3.3</h2>
<h2 id="fixed-bugs-and-malfunctions_58">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed memory segment cache used for multiblock carriers. Huge (&gt; 2GB) memory segments could cause a VM crash. Creation of such huge memory segments used for multiblock carriers is however very uncommon.</li>
</ul>
<p>Own Id: OTP-14360 Aux Id: ERL-401, PR-1417
* 
Fix release note for OTP-14290 in ERTS version 8.3.1. It was erroneously placed under "Known Bugs and Problems".</p>
<p>Own Id: OTP-14363 Aux Id: OTP-14290</p>
<h2 id="erts-832">Erts 8.3.2</h2>
<h2 id="fixed-bugs-and-malfunctions_59">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The <em>+Bi</em> command line argument of <em>erl</em> erroneously caused <em>SIGTERM</em> to be ignored by the VM as well as of all its child processes. This bug was introduced in erts version 8.3.</li>
</ul>
<p>Own Id: OTP-14358 Aux Id: OTP-14085</p>
<h2 id="erts-831">Erts 8.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_60">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Invoking <em>init:stop/0</em> via the SIGTERM signal, in a non-SMP BEAM, could cause BEAM to terminate with fatal error. This has now been fixed and the BEAM will terminate normally when SIGTERM is received.</li>
</ul>
<p>Own Id: OTP-14290
* 
Trying to open a directory with file:read_file/1 on Unix leaked a file descriptor. This bug has now been fixed.</p>
<p>Own Id: OTP-14308 Aux Id: ERL-383</p>
<h2 id="erts-83">Erts 8.3</h2>
<h2 id="fixed-bugs-and-malfunctions_61">Fixed Bugs and Malfunctions</h2>
<ul>
<li>
<p>Fixed a number of bugs that caused faulty stack-traces to be generated. The faulty stack traces were generated either when applying the following functions or tracing the following functions:</p>
</li>
<li>
<p><em>erlang:error/1</em></p>
</li>
<li><em>erlang:error/2</em></li>
<li><em>erlang:exit/1</em></li>
<li><em>erlang:throw/1</em></li>
</ul>
<p>Own Id: OTP-14055
* 
Corrected documentation about memory footprint for maps.</p>
<p>Own Id: OTP-14118
* 
Fix <em>process_info(Pid, current_stacktrace)</em> to use stack depth limit set by <em>system_flag(backtrace_depth)</em> . The old behavior was a hard coded depth limit of 8.</p>
<p>Own Id: OTP-14119 Aux Id: PR-1263
* 
A process calling <a href="./erlang#system_flag_multi_scheduling">erlang#system_flag_multi_scheduling</a> could end up hanging forever in the call.</p>
<p>Own Id: OTP-14121
* 
Dirty scheduler bug fixes:</p>
<ul>
<li>Fixed call time tracing of process being scheduled on dirty scheduler.</li>
<li>GC info from dirty schedulers.</li>
<li>Multi scheduling block with dirty schedulers could crash the runtime system.</li>
<li>Process structures could be removed prematurely.</li>
<li>GC on dirty scheduler could crash the runtime system.</li>
<li>Termination of a process executing on a dirty scheduler could cause a runtime system crash.</li>
</ul>
<p>Own Id: OTP-14122
* 
Fixed crash that occurred when writing timer data to a crash dump.</p>
<p>Own Id: OTP-14133
* 
A literal area could be removed while still referred from processes.</p>
<p>Own Id: OTP-14134
* 
Fixed a bug in the garbage collector that could crash the runtime system.</p>
<p>Own Id: OTP-14135
* 
Fixed a bug in call-time trace for NIFs which caused tracing to erroneously be started multiple times for one call.</p>
<p>Own Id: OTP-14136
* 
Remove a debug printout and an unnecessary garbage collection when handling exceptions in hipe compiled code.</p>
<p>Own Id: OTP-14153
* 
Fix bug in tracing of garbage collection that could cause VM crash. Bug exists since OTP 19.0.</p>
<p>Own Id: OTP-14154
* 
Fix bug in <em>binary_to_term</em> for binaries created by <em>term_to_binary</em> with option <em>compressed</em> . The bug can cause <em>badarg</em> exception for a valid binary when Erlang VM is linked against a <em>zlib</em> library of version 1.2.9 or newer. Bug exists since OTP 17.0.</p>
<p>Own Id: OTP-14159 Aux Id: ERL-340
* 
Fix suspension of schedulers when generating a crashdump.</p>
<p>Own Id: OTP-14164
* 
NIF resources was not handled in a thread-safe manner in the runtime system without SMP support.</p>
<p>As a consequence of this fix, the following driver functions are now thread-safe also in the runtime system without SMP support:</p>
<ul>
<li><em>driver_free_binary()</em></li>
<li><em>driver_realloc_binary()</em></li>
<li><em>driver_binary_get_refc()</em></li>
<li><em>driver_binary_inc_refc()</em></li>
<li><em>driver_binary_dec_refc()</em></li>
</ul>
<p>Own Id: OTP-14202
* 
Fix <em>erlang:round/1</em> for large floating point numbers with an odd absolute value between <em>(1 bsl 52)</em> and <em>(1 bsl 53)</em> . The result was falsely calculated as the next higher even number even though all integer values up to <em>(1 bsl 53)</em> can be represented as floats with full precision.</p>
<p>Own Id: OTP-14227
* 
Add size of literals to module code size in crash dump and <em>(l)oaded</em> command in break menu like it used to be before OTP-19.0.</p>
<p>Own Id: OTP-14228
* 
Fix potential bug in <em>enif_send</em> when called without a process context and with argument <em>msg_env</em> as <em>NULL</em> .</p>
<p>Own Id: OTP-14229
* 
Fix bug where passing an appendable binary to <em>erlang:port_control()</em> could crash the emulator.</p>
<p>Own Id: OTP-14231
* 
Receive expressions with timeout in the Erlang shell could cause a VM crash.</p>
<p>Own Id: OTP-14241 Aux Id: ERL-365</p>
<h2 id="improvements-and-new-features_14">Improvements and New Features</h2>
<ul>
<li>A received SIGTERM signal to beam will generate a <em>'stop'</em> message to the <em>init</em> process and terminate the Erlang VM nicely. This is equivalent to calling <em>init:stop/0</em> .</li>
</ul>
<p>Own Id: OTP-14085
* 
Workaround for buggy Android implementation of <em>PTHREAD_STACK_MIN</em> causing build of runtime system to crash on undeclared <em>PAGE_SIZE</em> .</p>
<p>Own Id: OTP-14165 Aux Id: ERL-319
* 
Add configure option --without-thread-names that removes the naming of individual emulator threads.</p>
<p>Own Id: OTP-14234
* 
Add warning in documentation of <em>zlib:deflateInit/6</em> about option <em>WindowsBits</em> values 8 and -8.</p>
<p>Own Id: OTP-14254 Aux Id: ERL-362</p>
<h2 id="erts-822">Erts 8.2.2</h2>
<h2 id="fixed-bugs-and-malfunctions_62">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix bug in <em>binary_to_term</em> for binaries created by <em>term_to_binary</em> with option <em>compressed</em> . The bug can cause <em>badarg</em> exception for a valid binary when Erlang VM is linked against a <em>zlib</em> library of version 1.2.9 or newer. Bug exists since OTP 17.0.</li>
</ul>
<p>Own Id: OTP-14159 Aux Id: ERL-340
* 
The driver efile_drv when opening a file now use fstat() on the open file instead of stat() before opening, if fstat() exists. This avoids a race when the file happens to change between stat() and open().</p>
<p>Own Id: OTP-14184 Aux Id: seq-13266</p>
<h2 id="erts-821">Erts 8.2.1</h2>
<h2 id="fixed-bugs-and-malfunctions_63">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix a quite rare bug causing VM crash during code loading and the use of export funs (fun M:F/A) of not yet loaded modules. Requires a very specfic timing of concurrent scheduler threads. Has been seen on ARM but can probably also occure on other architectures. Bug has existed since OTP R16.</li>
</ul>
<p>Own Id: OTP-14144 Aux Id: seq13242</p>
<h2 id="erts-82">Erts 8.2</h2>
<h2 id="fixed-bugs-and-malfunctions_64">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed <em>configure</em> failures on MacOSX. Most important <em>clock_gettime()</em> was detected when building for MacOSX - El Capitan using XCode 8 despite it is not available until MacOSX - Sierra.</li>
</ul>
<p>Own Id: OTP-13904 Aux Id: ERL-256
* 
<em>code:add_pathsa/1</em> and command line option <em>-pa</em> both revert the given list of directories when adding it at the beginning of the code path. This is now documented.</p>
<p>Own Id: OTP-13920 Aux Id: ERL-267
* 
Fix a compilation error of erts in OpenBSD related to the usage of the __errno variable.</p>
<p>Own Id: OTP-13927
* 
Fixed so that when enabling tracing on a process that had an invalid tracer associated with it, the new tracer overwrites the old tracer. Before this fix, calling erlang:trace/3 would behave as if the tracer was still alive and not apply the new trace.</p>
<p>This fault was introduced in ERTS 8.0.</p>
<p>Own Id: OTP-13928
* 
Fix parsing of <em>-profile_boot 'true' | 'false'</em></p>
<p>Own Id: OTP-13955 Aux Id: ERL-280
* 
A slight improvement of <em>erlang:get_stacktrace/0</em> for exceptions raised in hipe compiled code. Beam compiled functions in such stack trace was earlier replaced by some unrelated function. They are now instead omitted. This is an attempt to reduce the confusion in the absence of a complete and correct stack trace for mixed beam and hipe functions.</p>
<p>Own Id: OTP-13992
* 
Correct type declaration of match specification head.</p>
<p>Own Id: OTP-13996
* 
HiPE code loading failed for x86_64 if gcc was configured with <em>--enable-default-pie</em> . Fixed by disabling PIE, if needed for HiPE, when building the VM.</p>
<p>Own Id: OTP-14031 Aux Id: ERL-294, PR-1239
* 
Faulty arguments could be presented on exception from a NIF that had rescheduled itself using <em>enif_schedule_nif()</em> .</p>
<p>Own Id: OTP-14048
* 
The runtime system could crash if a garbage collection on a process was performed immediately after a NIF had been rescheduled using <em>enif_schedule_nif()</em> .</p>
<p>Own Id: OTP-14049
* 
A reference to purged code could be left undetected by the purge operation if a process just had rescheduled a NIF call using <em>enif_schedule_nif()</em> when the process was checked. This could cause a runtime system crash.</p>
<p>Own Id: OTP-14050
* 
Fixed a number of dirty scheduler related bugs:</p>
<ul>
<li>Process priority was not handled correct when scheduling on a dirty scheduler.</li>
<li>The runtime system could crash when an exit signal with a compound exit reason was sent to a process executing on a dirty scheduler.</li>
<li>The runtime system crashed when call tracing a process executing on a dirty scheduler.</li>
<li>A code purge operation could end up hanging forever when a process executed on a dirty scheduler</li>
</ul>
<p>Own Id: OTP-14051</p>
<h2 id="improvements-and-new-features_15">Improvements and New Features</h2>
<ul>
<li>Fix minor soft purge race bug that could incorrectly trigger code_server to load new code for the module if the soft purge failed and no current version of the module existed.</li>
</ul>
<p>Own Id: OTP-13925
* 
To ease troubleshooting, <em>erlang:load_nif/2</em> now includes the return value from a failed call to load/reload/upgrade in the text part of the error tuple. The <em>crypto</em> NIF makes use of this feature by returning the source line where/if the initialization fails.</p>
<p>Own Id: OTP-13951
* 
New environment variable <em>ERL_CRASH_DUMP_BYTES</em> can be used to limit the size of crash dumps. If the limit is reached, crash dump generation is aborted and the generated file will be truncated.</p>
<p>Own Id: OTP-14046</p>
<h2 id="erts-8111">Erts 8.1.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_65">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A code purge operation could under certain circumstances expand the size of hibernated processes.</li>
</ul>
<p>Own Id: OTP-14444 Aux Id: ERIERL-24</p>
<h2 id="erts-811">Erts 8.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_66">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The emulator got a dynamic library dependency towards libsctp, which on Linux was not intended since the emulator there loads and resolves the needed sctp functions in runtime. This has been fixed and a configure switch --enable-sctp=lib has been added for those who want such a library dependency.</li>
</ul>
<p>Own Id: OTP-13956 Aux Id: ERL-262, ERL-133
* 
Fix SIGUSR1 crashdump generation</p>
<p>Do not generate a core when a crashdump is asked for.</p>
<p>Own Id: OTP-13997
* 
The new functions in <em>code</em> that allows loading of many modules at once had a performance problem. While executing a helper function in the <em>erl_prim_loader</em> process, garbage messages were produced. The garbages messages were ignored and ultimately discarded, but there would be a negative impact on performance and memory usage. The number of garbage message depended on both the number of modules to be loaded and the length of the code path.</p>
<p>The functions affected of this problem were: <em>atomic_load/1</em> , <em>ensure_modules_loaded/1</em> , and <em>prepare_loading/1</em> .</p>
<p>Own Id: OTP-14009</p>
<h2 id="erts-81">Erts 8.1</h2>
<h2 id="fixed-bugs-and-malfunctions_67">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix bug for calls from hipe code to BIFs that disable GC while yielding. Has been causing Dialyzer crashes on ARM (and presumably all other non-intel platforms).</li>
</ul>
<p>Own Id: OTP-13724 Aux Id: PR-1116
* 
Fix a bug where changing the current working directory of the VM would not change the current working directory of programs spawned using <em>erlang:open_port({spawn,""}, ...)</em> .</p>
<p>Own Id: OTP-13733 Aux Id: ERL-175
* 
Fix a bug where disabling tracing from a process that had return_to tracing enabled and was tracing on <em>erlang:trace/3</em> would cause a segmentation fault.</p>
<p>Own Id: OTP-13734
* 
Update all erts documentation to use simpler English, use consistent terminology and be easier to navigate.</p>
<p>Own Id: OTP-13740
* 
Add dirty schedulers to the microstate accounting statistics.</p>
<p>Own Id: OTP-13744
* 
Fixed dirty scheduler build support on 32-bit windows.</p>
<p>Own Id: OTP-13759
* 
inet:getstat(Socket) on an SCTP socket returned 0 for send stats. This bug has now been corrected. Reported by systra as issue ERL-102 on bugs.erlang.org.</p>
<p>Own Id: OTP-13773 Aux Id: ERL-102
* 
AF_UNSPEC and unknown address families were misread by UDP receive in prim_inet resulting in an exception. This bug has now been corrected.</p>
<p>Own Id: OTP-13775
* 
Sweep HiPE stack for literals during code purge.</p>
<p>Own Id: OTP-13777 Aux Id: PR-1122
* 
Fix bug in run_erl for OpenBSD that could cause it on rare occations to exit without starting the program (erl) at all.</p>
<p>Own Id: OTP-13795
* 
Update build scripts to not make assumtions about where env, cp and perl are located.</p>
<p>Own Id: OTP-13800
* 
Fixed a bug where init:stop could deadlock if a process with infinite shutdown timeout (e.g. a supervisor) attempted to load code while terminating.</p>
<p>Own Id: OTP-13802
* 
Fixed a segmentation fault on sparc CPUs when free'ing a tracer module's state.</p>
<p>Own Id: OTP-13803
* 
<em>fun</em> s was not properly handled during purge of a module. This could cause a crash of the VM after a purge of a module.</p>
<p>Own Id: OTP-13809
* 
Fixed a memory leak when the process monitoring a port crashed.</p>
<p>Own Id: OTP-13818
* 
Fixed multiple dirty scheduler related tracing bugs.</p>
<p>Own Id: OTP-13822
* 
Fix error handling in beam code runtime loader for a number of cases when index and size fields got corrupted (negative) values.</p>
<p>Own Id: OTP-13848 Aux Id: ERL-216
* 
Minor fix of dirty scheduler implementation.</p>
<p>Own Id: OTP-13852
* 
Calls to <em>erl_drv_send_term()</em> or <em>erl_drv_output_term()</em> from a non-scheduler thread while the corresponding port was invalid caused the emulator to enter an inconsistent state which eventually caused an emulator crash.</p>
<p>Own Id: OTP-13866
* 
Fix a rare race condition in <em>erlang:open_port({spawn, ""}, ...)</em> that would result in the erl_child_setup program aborting and cause the emulator to exit.</p>
<p>Own Id: OTP-13868
* 
Driver and NIF operations accessing processes or ports could cause an emulator crash when used from non-scheduler threads. Those operations are:</p>
<ul>
<li><em>erl_drv_send_term()</em></li>
<li><em>driver_send_term()</em></li>
<li><em>erl_drv_output_term()</em></li>
<li><em>driver_output_term()</em></li>
<li><em>enif_send()</em></li>
<li><em>enif_port_command()</em></li>
</ul>
<p>Own Id: OTP-13869
* 
Fix start scripts generation dependency in Makefile</p>
<p>Own Id: OTP-13871 Aux Id: ERL-241
* 
The VM could crash if <em>erlang:get_stacktrace()</em> was called after a rescheduled NIF had thrown an exception.</p>
<p>Own Id: OTP-13877
* 
Calling <em>code:delete/1</em> before a loading a module with an on_load function, the old code would be overwritten, causing a memory or a crash if NIFs were involved. (Thanks to vans163 for reporting this bug.)</p>
<p>Own Id: OTP-13893 Aux Id: ERL-240</p>
<h2 id="improvements-and-new-features_16">Improvements and New Features</h2>
<ul>
<li>Improved accuracy of timeouts on MacOS X. This by setting premature timeouts followed by a short actual timeout during scheduler wait.</li>
</ul>
<p>Own Id: OTP-13698
* 
Added the following symbolic time unit representations to the <a href="./erlang#type-time_unit">erlang#type-time_unit</a> type:</p>
<ul>
<li><em>second</em></li>
<li><em>millisecond</em></li>
<li><em>microsecond</em></li>
<li><em>nanosecond</em></li>
</ul>
<p>The following symbolic time unit representations are now <strong>deprecated</strong> , but still part of the <em>erlang:time_unit()</em> type:</p>
<ul>
<li><em>seconds</em></li>
<li><em>milli_seconds</em></li>
<li><em>micro_seconds</em></li>
<li><em>nano_seconds</em></li>
</ul>
<p>Own Id: OTP-13735
* 
Fix maps hashing entropy of maps with maps keys.</p>
<p>Own Id: OTP-13763 Aux Id: ERL-199
* 
Improved dirty scheduler support. A purge of a module can now be performed without having to wait for completion of all ongoing dirty NIF calls.</p>
<p>Note that when enabling support for dirty schedulers, a new purge strategy will as of ERTS version 8.1 be enabled. This new strategy is not fully backwards compatible with the strategy used by default. For more information see the documentation of <a href="../erts/erlang#check_process_code/3">erts/erlang#check_process_code/3</a> .</p>
<p>Own Id: OTP-13808 Aux Id: OTP-13833
* 
A new purge strategy has been introduced. The new strategy will by default be disabled during the OTP 19 release, but will be the only strategy available as of the OTP 20 release.</p>
<p>The new strategy is slightly incompatible with the strategy being used by default in OTP 19. Using the default strategy, processes holding <em>fun</em> s that refer to the module being purged either fail a soft purge, or will be killed during a hard purge. The new strategy completely ignores <em>fun</em> s. If <em>fun</em> s referring to the code being purged exist, and are used after a purge, an exception will be raised upon usage. That is, the behavior will be exactly the same as the case when a <em>fun</em> is received by a process after the purge.</p>
<p>The new strategy can optionally be enabled when building OTP during OTP 19, and will automatically be enabled if the runtime system is built with support for dirty schedulers.</p>
<p>For more information see the documentation of <a href="../erts/erlang#check_process_code/3">erts/erlang#check_process_code/3</a> .</p>
<p>Own Id: OTP-13833
* 
Fixed unnecessary overestimation of heap size need during garbage collection.</p>
<p>Own Id: OTP-13851</p>
<h2 id="erts-805">Erts 8.0.5</h2>
<h2 id="fixed-bugs-and-malfunctions_68">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a VM crash that occurred in a garbage collection of a process when it had received binaries. This bug was introduced in ERTS version 8.0 (OTP 19.0).</li>
</ul>
<p>Own Id: OTP-13890</p>
<h2 id="erts-804">Erts 8.0.4</h2>
<h2 id="fixed-bugs-and-malfunctions_69">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a VM crash that occurred in garbage collection of a process when it had received maps over the distribution. This bug was introduced in ERTS version 8.0 (OTP 19.0).</li>
</ul>
<p>Own Id: OTP-13889</p>
<h2 id="erts-803">Erts 8.0.3</h2>
<h2 id="fixed-bugs-and-malfunctions_70">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a race that could cause a lost wakeup of a process that timed out in a <em>receive ... after</em> . This bug was introduced in ERTS version 7.0.</li>
</ul>
<p>Own Id: OTP-13798 Aux Id: OTP-11997
* 
Fixed segfault after writing an erl crash dump.</p>
<p>Own Id: OTP-13799</p>
<h2 id="erts-802">Erts 8.0.2</h2>
<h2 id="fixed-bugs-and-malfunctions_71">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix scheduler deadlock bug in <em>ets:update_counter/4</em> when key is not found and inserting the default object causes the table to grow.</li>
</ul>
<p>Own Id: OTP-13731 Aux Id: ERL-188
* 
Fix VM abort "Overrun stack and heap" in garbage collection triggered by a <em>bsl</em> operation and some very specific heap conditions.</p>
<p>Own Id: OTP-13732 Aux Id: seq13142</p>
<h2 id="erts-801">Erts 8.0.1</h2>
<h2 id="fixed-bugs-and-malfunctions_72">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A memory allocation bug in <em>group_leader/2</em> could cause an emulator crash when garbage collecting a process that had been assigned a remote group leader. This bug was introduced in ERTS version 8.0.</li>
</ul>
<p>Own Id: OTP-13716</p>
<h2 id="erts-80">Erts 8.0</h2>
<h2 id="fixed-bugs-and-malfunctions_73">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The handling of <em>on_load</em> functions has been improved. The major improvement is that if a code upgrade fails because the <em>on_load</em> function fails, the previous version of the module will now be retained.</li>
</ul>
<p>Own Id: OTP-12593
* 
<em>is_builtin(erlang, apply, 3)</em> will now return <em>true</em> .</p>
<p>Own Id: OTP-13034
* 
Fix <em>enif_get_list_length</em> to return false if list is improper or have length larger than <em>UINT_MAX</em> (did return true and an incorrect length value).</p>
<p>Own Id: OTP-13288 Aux Id: PR913
* 
Cleanup hipe signal handling code for x86 and make it more portable.</p>
<p>Own Id: OTP-13341 Aux Id: PR951
* 
Make file:datasync use fsync instead of fdatasync on Mac OSX.</p>
<p>Own Id: OTP-13411
* 
Make sure to create a crash dump when running out of memory. This was accidentally removed in the erts-7.3 release.</p>
<p>Own Id: OTP-13419
* 
A bug has been fixed where if erlang was started +B on a unix platform it would be killed by a SIGUSR2 signal when creating a crash dump.</p>
<p>Own Id: OTP-13425
* 
Fix race between <em>process_flag(trap_exit,true)</em> and a received exit signal.</p>
<p>A process could terminate due to exit signal even though <em>process_flag(trap_exit,true)</em> had returned. A very specific timing between call to <em>process_flag/2</em> and exit signal from another scheduler was required for this to happen.</p>
<p>Own Id: OTP-13452
* 
Don't search for non-existing Map keys twice</p>
<p>For <em>maps:get/2,3</em> and <em>maps:find/2</em> , searching for an immediate key, e.g. an atom, in a small map, the search was performed twice if the key did not exist.</p>
<p>Own Id: OTP-13459
* 
When an abnormally large distribution message is about to be sent, the VM has been changed to create a crash dump instead of a core dump.</p>
<p>Own Id: OTP-13474
* 
Fix <em>erlang:process_info/2</em> type specification</p>
<p>Own Id: OTP-13485 Aux Id: ERL-123
* 
Fix bug in <em>open_port/2</em> with option <em>{args, List}</em> . A vm crash could be caused by an improper <em>List</em> .</p>
<p>Own Id: OTP-13489 Aux Id: ERL-127
* 
Fixed a race-condition bug where the emulator could crash when <em>erlang:system_profile/1,2</em> was enabled and a process had to be re-scheduled during termination.</p>
<p>Own Id: OTP-13494 Aux Id: ERL-126
* 
Fixed bugs where the reduction counter was not handled correct.</p>
<p>Own Id: OTP-13512
* 
Fixed typo in description of the <em>EPMD_DUMP_REQ</em> response.</p>
<p>Own Id: OTP-13517
* 
Fixed a bug where a process flagged as sensitive would sometimes record its save_calls when it shouldn't.</p>
<p>Own Id: OTP-13540
* 
Update configure scripts to not use hard-coded path for /bin/pwd and /bin/rm.</p>
<p>Own Id: OTP-13562
* 
When passing a larger binary than the outputv callback of a linked-in driver can handle in one io vector slot, the binary is now split into multiple slots in the io vector. This change only effects system where the max size of an io vector slot is smaller then the word size of the system (e.g. Windows).</p>
<p>This change means that it is now possible on Windows to send binaries that are larger than 4GB to port_command, which is what is used for file:write, gen_tcp:send etc.</p>
<p>Own Id: OTP-13628
* 
Workaround of Maps output in crashdumps. Currently the atom 'undefined' is generated instead of Map data if a Map type is encountered during crash.</p>
<p>Own Id: OTP-13657</p>
<h2 id="improvements-and-new-features_17">Improvements and New Features</h2>
<ul>
<li>The tracing support has been extended to allow a <a href="erl_tracer">tracer module</a> to be the trace event handler instead of a process or port. The <a href="erl_tracer">tracer module</a> makes it possible for trace tools to filter or manipulate trace event data without the trace event first having to be copied from the traced process or port.</li>
</ul>
<p>With the introduction of this feature, <em>erlang:trace(all|existing, <em>, </em>)</em> now also returns the tracer process as part of the number of processes on which tracing is enabled. The is incompatible with the previous releases.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10267
* 
Introduce LTTng tracing of Erlang Runtime System</p>
<p>For LTTng to be enabled OTP needs to be built with configure option <em>--with-dynamic-trace=lttng</em> .</p>
<p>This feature introduces tracepoints for schedulers, drivers, memory carriers, memory and async thread pool.</p>
<p>For a list of all tracepoints, see <a href="./LTTng">Runtime Tools User's Guide</a> .</p>
<p>Own Id: OTP-10282
* 
Make it possible to monitor/demonitor ports using the <a href="./erlang#monitor/2">erlang:monitor/2</a> API. The process and port information functions have also been updated to include information about monitors from processes to ports.</p>
<p>Own Id: OTP-11384
* 
Add microstate accounting</p>
<p>Microstate accounting is a way to track which state the different threads within ERTS are in. The main usage area is to pin point performance bottlenecks by checking which states the threads are in and then from there figuring out why and where to optimize.</p>
<p>Since checking whether microstate accounting is on or off is relatively expensive only a few of the states are enabled by default and more states can be enabled through configure.</p>
<p>There is a convenience module called msacc that has been added to runtime_tools that can assist in gathering and interpreting the data from Microstate accounting.</p>
<p>For more information see <a href="../erts/erlang#statistics_microstate_accounting">erlang:statistics(microstate_accounting, _)</a> and the <a href="./msacc">msacc</a> module in runtime_tools.</p>
<p>Own Id: OTP-12345
* 
The port of Erlang/OTP to the real-time operating system OSE has been removed.</p>
<p>Own Id: OTP-12573
* 
Sharing preserved copy for messages and exit signals</p>
<p>Enable sharing preserved copy with configure option <em>--enable-sharing-preserving</em> . This will preserve sharing, within the process, when communication with other processes in the Erlang node. There is a trade-off, the copy is more costly but this cost can be reclaimed if there is a lot of sharing in the message. In addition literals will not be copied in a send except during a purge phase of the module where the literals are located. This feature is considered experimental in 19.0.</p>
<p>Own Id: OTP-12590 Aux Id: OTP-10251
* 
Halfword BEAM has been removed.</p>
<p>Own Id: OTP-12883
* 
Added <a href="../kernel/os#perf_counter/1">os:perf_counter/1</a> .</p>
<p>The perf_counter is a very very cheap and high resolution timer that can be used to timestamp system events. It does not have monoticity guarantees, but should on most OS's expose a monotonous time.</p>
<p>Own Id: OTP-12908
* 
Support for a fragmented young heap generation. That is, the young heap generation can consist of multiple non continuous memory areas. The main reason for this change is to avoid extra copying of messages that could not be allocated directly on the receivers heap.</p>
<p>Own Id: OTP-13047
* 
Erlang linked-in driver can now force the call to open_port to block until a call to erl_drv_init_ack is made inside the driver. This is useful when you want to do some asynchronous initialization, for example getting configuration from a pipe, and you want the initial open_port call to fail if the configuration is incomplete or wrong. See the erl_driver documentation for more details on the API.</p>
<p>Own Id: OTP-13086
* 
Erlang linked-in drivers can now set their own pids as seen in <em>erlang:port_info/1</em> by using the <em>erl_drv_set_pid</em> function. For more details see the erl_driver documentation.</p>
<p>Own Id: OTP-13087
* 
The functionality behind <em>erlang:open_port/2</em> when called with spawn or spawn_executable has been redone so that the forking of the new program is done in a separate process called erl_child_setup. This allows for a much more robust implementation that uses less memory and does not block the entire emulator if the program to be started is on an un-accessible NFS. Benchmarks have shown this approach to be about 3-5 times as fast as the old approach where the fork/vfork was done by erts. This is a pure stability and performance fix, however some error messages may have changed, which is why it is marked as a backwards incompatible change.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13088
* 
Improved yielding strategy in the implementation of the following native functions:</p>
<ul>
<li><em>erlang:binary_to_list/1</em></li>
<li><em>erlang:binary_to_list/3</em></li>
<li><em>erlang:bitstring_to_list/1</em></li>
<li><em>erlang:list_to_binary/1</em></li>
<li><em>erlang:iolist_to_binary/1</em></li>
<li><em>erlang:list_to_bitstring/1</em></li>
<li><em>binary:list_to_bin/1</em></li>
</ul>
<p>This in order to improve performance of these functions.</p>
<p>Own Id: OTP-13096
* 
All garbage collections of processes now bump reductions. Also the amount of reductions bumped when garbage collecting has been adjusted. It now better corresponds to the amount of work performed. This in order to improve the real time characteristics of the system.</p>
<p>Own Id: OTP-13097
* 
New functions that can load multiple modules at once have been added to the ' <em>code</em> ' module. The functions are <em>code:atomic_load/1</em> , <em>code:prepare_loading/1</em> , <em>code:finish_loading/1</em> , and <em>code:ensure_modules_loaded/1</em> .</p>
<p>Own Id: OTP-13111
* 
The <em>-boot_var</em> option for <em>erl</em> now only supports a single key and single value (as documented). The option used to allow multiple key/value pairs, but that behavior was undocumented.</p>
<p>The function <em>erl_prim_loader:start/3</em> has been removed. Its documentation has also been removed.</p>
<p>The undocumented and unsupported function <em>erl_prim_loader:get_files/2</em> has been removed.</p>
<p>Own Id: OTP-13112
* 
Low level BIF <em>erlang:purge_module/1</em> is made more robust against incorrect use. Lingering processes that still refer the old code are now killed before the module is purged to prevent fatal VM behavior.</p>
<p>Own Id: OTP-13122
* 
Improved dirty scheduler implementation. For more information see the <a href="./erl_nif#dirty_nifs">NIF documentation</a> .</p>
<ul>
<li>The dirty scheduler support is still <strong>experimental</strong> .</li>
<li>The support for determining whether dirty NIF support exist or not at compile time using the C preprocessor macro <em>ERL_NIF_DIRTY_SCHEDULER_SUPPORT</em> has been removed.</li>
<li>The <em>enif_is_on_dirty_scheduler()</em> function has been removed. Use <a href="./erl_nif#enif_thread_type">erl_nif#enif_thread_type</a> instead.</li>
</ul>
<p>Own Id: OTP-13123
* 
Various optimizations done to process dictionary access.</p>
<p>Own Id: OTP-13167
* 
Added max_heap_size process flag. max_heap_size allows the user to limit the maximum heap used by a process. See <a href="./erlang#process_flag/2">erlang:process_flag</a> for more details.</p>
<p>Own Id: OTP-13174
* 
Allow dynamic drivers and NIF libraries to be built with gcc option <em>-fvisibility=hidden</em> for faster loading and more optimized code.</p>
<p>Own Id: OTP-13227
* 
Add <em>erlang:process_info(Pid, garbage_collection_info)</em> which returns extended garbage_collection information. For more details see the documentation.</p>
<p>Own Id: OTP-13265
* 
The functions <em>erlang:list_to_integer/1</em> and <em>string:to_integer/1</em> have been optimized for large inputs.</p>
<p>Own Id: OTP-13293
* 
Improved memory allocation strategy for hipe native code on x86_64 (amd64) architectures by reserving enough low virtual address space needed for the HiPE/AMD64 small code model. The default virtual address area for hipe code is set to 512Mb, but can be changed with emulator flag <em>+MXscs</em> .</p>
<p>Own Id: OTP-13359
* 
Introduction of configurable management of data referred to by the message queue of a process. Each process can be configured individually.</p>
<p>It is now possible to configure the message queue of a process, so that all data referred by it will be kept outside of the heap, and by this prevent this data from being part of garbage collections.</p>
<p>For more information see the documentation of <a href="./erlang#process_flag_message_queue_data">erlang#process_flag_message_queue_data</a> .</p>
<p>Own Id: OTP-13366 Aux Id: OTP-13047
* 
Processes now yield when scanning large message queues and not finding a matching message. This in order to improve real time characteristics.</p>
<p>Own Id: OTP-13401
* 
Optimized an erts internal function that is used to traverse erlang terms. The internal function was mainly used by term_to_binary and comparison of terms. Benchmarks have shown up to a 10% performance increase in those functions after the optimization.</p>
<p>Own Id: OTP-13440
* 
Add the following NIF API functions:</p>
<ul>
<li><a href="./erl_nif#enif_cpu_time">erl_nif#enif_cpu_time</a></li>
<li><a href="./erl_nif#enif_now_time">erl_nif#enif_now_time</a></li>
<li><a href="./erl_nif#enif_make_unique_integer">erl_nif#enif_make_unique_integer</a></li>
<li><a href="./erl_nif#enif_is_process_alive">erl_nif#enif_is_process_alive</a></li>
<li><a href="./erl_nif#enif_is_port_alive">erl_nif#enif_is_port_alive</a></li>
<li><a href="./erl_nif#enif_term_to_binary">erl_nif#enif_term_to_binary</a></li>
<li><a href="./erl_nif#enif_binary_to_term">erl_nif#enif_binary_to_term</a></li>
<li><a href="./erl_nif#enif_port_command">erl_nif#enif_port_command</a></li>
</ul>
<p>For details of what each function does, see the erl_nif documentation.</p>
<p>Own Id: OTP-13442
* 
Optimize <em>'++'</em> operator and <em>lists:append/2</em> by using a single pass to build a new list while checking for properness.</p>
<p>Own Id: OTP-13487
* 
Handle terms (pids,ports and refs) from nodes with a 'creation' value larger than 3. This is a preparation of the distribution protocol to allow OTP 19 nodes to correctly communicate with future nodes (20 or higher). The 'creation' value differentiates different incarnations of the same node (name).</p>
<p>Own Id: OTP-13488
* 
Don't send unasked for systemd notifications in epmd</p>
<p>Own Id: OTP-13493 Aux Id: PR-999
* 
The enif_send API has been extended to allow NULL to be used as the message environment. When used this way, a message environment is implicitly created and the given term is copied into that environment before sending. This can be an optimization if many small messages are being sent by the nif.</p>
<p>Own Id: OTP-13495
* 
The tracing support has been extended to allow tracing on ports. Ports can be traced on using the 'ports', 'send' and 'receive' trace flags.</p>
<p>The first argument of <a href="../erts/erlang#trace/3">erlang:trace/3</a> has been extended so that <em>'all'</em> , <em>'existing'</em> and <em>'new'</em> now include both processes and ports. New <em>Tracee</em> variants, <em>'all_processes'</em> , <em>'all_ports'</em> , <em>'existing_processes'</em> etc have been added to specify only processes or ports.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13496
* 
When the <em>'procs'</em> trace flag is enabled, a <em>'spawned'</em> trace event is now also generated by a newly created process. The previous event <em>'spawn'</em> remains, but as it is generated by the process that did the spawn, it is not guaranteed that it is ordered with other trace events from the newly spawned process. So when tracking the lifetime of a process this new event should be used as the creation event.</p>
<p>This new trace event is marked as an incompatibility because tools that expect certain trace events when enabling 'procs' will have to updated.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13497
* 
Add the <a href="../erts/erlang#match_spec_test/3">erlang:match_spec_test/3</a> function. The functions allows the testing of match specifications for both tracing and ets tables. It can be used to test that a match specification does the expected filtering on specific data. It also returns more verbose error reasons for incorrectly constructed match specifications.</p>
<p>Own Id: OTP-13501
* 
The erts internal tracing support has been changed to have much less overhead and be more scalable.</p>
<p>This rewrite does not break any backwards incompatibilities, but it does change the ordering of some trace messages when compared to previous releases. It should be noted that this only applies to trace messages sent to processes or ports, it does not apply to the new tracer module. However in future releases they may also be effected by this.</p>
<p>Trace messages are only guaranteed to be ordered from one traced process or port. In previous releases this was not visible as a <em>'send'</em> trace message would always arrive before the corresponding <em>'receive'</em> trace message that is no longer always the case. This also means that timestamped trace messages may seem to arrive out of order as the timestamp is taken when the event is triggered and not when it is put in the queue of the tracer.</p>
<p>Own Id: OTP-13503
* 
Add possibility to filter <em>send</em> and <em>receive</em> trace with match specifications.</p>
<p>Own Id: OTP-13507
* 
Add <em>maps:update_with/3,4</em> and <em>maps:take/2</em></p>
<p>Own Id: OTP-13522 Aux Id: PR-1025
* 
Introduce LTTng tracing via Erlang tracing.</p>
<p>For LTTng to be enabled OTP needs to be built with configure option <em>--with-dynamic-trace=lttng</em> .</p>
<p>The dynamic trace module <em>dyntrace</em> is now capable to be used as a LTTng sink for Erlang tracing. For a list of all tracepoints, see <a href="./LTTng">Runtime Tools User's Guide</a> .</p>
<p>This feature also introduces an incompatible change in trace tags. The trace tags <em>gc_start</em> and <em>gc_end</em> has been split into <em>gc_minor_start</em> , <em>gc_minor_end</em> and <em>gc_major_start</em> , <em>gc_major_end</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-13532
* 
Print heap pointers for garbing processes during crashdump</p>
<p>Own Id: OTP-13541 Aux Id: PR-1026
* 
Changed and improved low level memory statistics returned by <em>erlang:system_info/1</em> . The info for <em>erts_mmap</em> has been moved from <em>mseg_alloc</em> to its own section returned by <em>{allocator, erts_mmap}</em> .</p>
<p>Own Id: OTP-13560
* 
Add enif_snprintf to the NIF API</p>
<p>The function <em>enif_snprintf</em> is similar to <em>snprintf</em> call but can handle formatting of Erlang terms via <em>%T</em> format specifier.</p>
<p>Own Id: OTP-13580
* 
The warning in the documentation for <em>erlang:raise/3</em> has been removed. It is now officially perfectly fine to use raise/3 in production code.</p>
<p>Own Id: OTP-13599
* 
Fix bugs caused by the VM sometimes truncating object sizes or offsets to 32 bits on 64-bit hosts. These bugs were mainly found when working with large unicode strings and nifs environments.</p>
<p>Own Id: OTP-13606
* 
Add <em>-start_epmd</em> command line option, this lets you disable automatic starting of epmd when starting a distributed node.</p>
<p>Add <em>-epmd_module</em> command line option, this lets you specify a module to register and look-up node names in. The default module is <em>erl_epmd</em> .</p>
<p>Own Id: OTP-13627
* 
<em>erlang:halt</em> now truncates strings longer than 200 characters instead of failing with <em>badarg</em> .</p>
<p>Own Id: OTP-13630
* 
Fix possible race in poller wake up on windows</p>
<p>Own Id: OTP-13634</p>
<h2 id="erts-7316">Erts 7.3.1.6</h2>
<h2 id="improvements-and-new-features_18">Improvements and New Features</h2>
<ul>
<li>List subtraction (The <em>--</em> operator) will now yield properly on large inputs.</li>
</ul>
<p>Own Id: OTP-15371</p>
<h2 id="erts-7315">Erts 7.3.1.5</h2>
<h2 id="fixed-bugs-and-malfunctions_74">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed small memory leak that could occur when sending to a terminating port.</li>
</ul>
<p>Own Id: OTP-14609 Aux Id: ERIERL-238</p>
<h2 id="erts-7314">Erts 7.3.1.4</h2>
<h2 id="fixed-bugs-and-malfunctions_75">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix performance bug in pre-allocators that could cause them to permanently fall back on normal more expensive memory allocation. Pre-allocators are used for quick allocation of short lived meta data used by messages and other scheduled tasks. Bug exists since OTP_R15B02.</li>
</ul>
<p>Own Id: OTP-14491
* 
Fixed bug in operator <em>bxor</em> causing erroneuos result when one operand is a big <strong>negative</strong> integer with the lowest <em>N</em>W<em> bits as zero and the other operand not larger than </em>N<em>W</em> bits. <em>N</em> is an integer of 1 or larger and <em>W</em> is 32 or 64 depending on word size.</p>
<p>Own Id: OTP-14514
* 
A timer internal bit-field used for storing scheduler id was too small. As a result, VM internal timer data structures could become inconsistent when using 1024 schedulers on the system. Note that systems with less than 1024 schedulers are not effected by this bug.</p>
<p>This bug was introduced in ERTS version 7.0 (OTP 18.0).</p>
<p>Own Id: OTP-14548 Aux Id: OTP-11997, ERL-468
* 
Fixed bug in <em>binary_to_term</em> and <em>binary_to_atom</em> that could cause VM crash. Typically happens when the last character of an UTF8 string is in the range 128 to 255, but truncated to only one byte. Bug exists in <em>binary_to_term</em> since ERTS version 5.10.2 (OTP_R16B01) and <em>binary_to_atom</em> since ERTS version 9.0 (OTP-20.0).</p>
<p>Own Id: OTP-14590 Aux Id: ERL-474</p>
<h2 id="erts-7313">Erts 7.3.1.3</h2>
<h2 id="fixed-bugs-and-malfunctions_76">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug has been fixed where if erlang was started +B on a unix platform it would be killed by a SIGUSR2 signal when creating a crash dump.</li>
</ul>
<p>Own Id: OTP-13425 Aux Id: ERL-94
* 
Calls to <em>erl_drv_send_term()</em> or <em>erl_drv_output_term()</em> from a non-scheduler thread while the corresponding port was invalid caused the emulator to enter an inconsistent state which eventually caused an emulator crash.</p>
<p>Own Id: OTP-13866
* 
Driver and NIF operations accessing processes or ports could cause an emulator crash when used from non-scheduler threads. Those operations are:</p>
<ul>
<li><em>erl_drv_send_term()</em></li>
<li><em>driver_send_term()</em></li>
<li><em>erl_drv_output_term()</em></li>
<li><em>driver_output_term()</em></li>
<li><em>enif_send()</em></li>
<li><em>enif_port_command()</em></li>
</ul>
<p>Own Id: OTP-13869
* 
Fix bug in <em>binary_to_term</em> for binaries created by <em>term_to_binary</em> with option <em>compressed</em> . The bug can cause <em>badarg</em> exception for a valid binary when Erlang VM is linked against a <em>zlib</em> library of version 1.2.9 or newer. Bug exists since OTP 17.0.</p>
<p>Own Id: OTP-14159 Aux Id: ERL-340</p>
<h2 id="erts-7312">Erts 7.3.1.2</h2>
<h2 id="fixed-bugs-and-malfunctions_77">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a race that could cause a lost wakeup of a process that timed out in a <em>receive ... after</em> . This bug was introduced in ERTS version 7.0.</li>
</ul>
<p>Own Id: OTP-13798 Aux Id: OTP-11997
* 
Fixed segfault after writing an erl crash dump.</p>
<p>Own Id: OTP-13799</p>
<h2 id="erts-7311">Erts 7.3.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_78">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix scheduler deadlock bug in <em>ets:update_counter/4</em> when key is not found and inserting the default object causes the table to grow.</li>
</ul>
<p>Own Id: OTP-13731 Aux Id: ERL-188</p>
<h2 id="erts-731">Erts 7.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_79">Fixed Bugs and Malfunctions</h2>
<ul>
<li><em>process_info(Pid, last_calls)</em> did not work for <em>Pid /= self()</em> .</li>
</ul>
<p>Own Id: OTP-13418
* 
Make sure to create a crash dump when running out of memory. This was accidentally removed in the erts-7.3 release.</p>
<p>Own Id: OTP-13419
* 
Schedulers could be woken by a premature timeout on Linux. This premature wakeup was however harmless.</p>
<p>Own Id: OTP-13420
* 
A process communicating with a port via one of the <em>erlang:port_</em><em> BIFs could potentially end up in an inconsistent state if the port terminated during the communication. When this occurred the process could later block in a </em>receive* even though it had messages matching in its message queue.</p>
<p>This bug was introduced in erts version 5.10 (OTP R16A).</p>
<p>Own Id: OTP-13424 Aux Id: OTP-10336
* 
The reference count of a process structure could under rare circumstances be erroneously managed. When this happened invalid memory accesses occurred.</p>
<p>Own Id: OTP-13446
* 
Fix race between <em>process_flag(trap_exit,true)</em> and a received exit signal.</p>
<p>A process could terminate due to exit signal even though <em>process_flag(trap_exit,true)</em> had returned. A very specific timing between call to <em>process_flag/2</em> and exit signal from another scheduler was required for this to happen.</p>
<p>Own Id: OTP-13452</p>
<h2 id="erts-73">Erts 7.3</h2>
<h2 id="fixed-bugs-and-malfunctions_80">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The '-path' flag to 'erl' has been documented. This flag replaces the path specified in the boot script. It has always existed, but was earlier only documented in SASL (script).</li>
</ul>
<p>Own Id: OTP-13060
* 
The <em>call_time</em> tracing functionality internally used a time based on OS system time in order to measure call time which could cause erroneous results if OS system time was changed during tracing.</p>
<p>This functionality now use Erlang monotonic time in order to measure time. Besides fixing the erroneous results due to OS system time being used, the results are often also better since Erlang monotonic time often has better accuracy and precision.</p>
<p>Own Id: OTP-13216
* 
Fix behaviour of -delay_write command line switch of epmd, which is used for debugging - in some cases epmd was sleeping twice the requested amount of time.</p>
<p>Own Id: OTP-13220
* 
Fix race between timeout and exit signal that could cause a process to ignore the exit signal and continue execution. Bug exist since OTP 18.0.</p>
<p>Own Id: OTP-13245
* 
Fix bug in <em>erlang:halt/1,2</em> for large exit status values, causing either <em>badarg</em> (on 32-bit) or exit with a crash dump and/or core dump (on 64-bit). Make <em>erlang:halt/1,2</em> tolerate any non negative integer as exit status and truncate high order bits if the OS does not support it.</p>
<p>Own Id: OTP-13251 Aux Id: ERL-49
* 
<a href="../kernel/gen_tcp#accept/2">kernel/gen_tcp#accept/2</a> was not <a href="../erts/time_correction#Time_Warp_Safe_Code">time warp safe</a> . This since it used the same time as returned by <a href="../erts/erlang#now/0">erts/erlang#now/0</a> when calculating timeout. This has now been fixed.</p>
<p>Own Id: OTP-13254 Aux Id: OTP-11997, OTP-13222
* 
Fix faulty error handling when writing to a compressed file.</p>
<p>Own Id: OTP-13270
* 
Fix sendfile usage for large files on FreeBSD</p>
<p>Own Id: OTP-13271
* 
Fix bug that could cause <em>process_info(P,current_location)</em> to crash emulator for hipe compiled modules.</p>
<p>Own Id: OTP-13282 Aux Id: ERL-79
* 
Out of memory errors have been changed to cause an exit instead of abort.</p>
<p>Own Id: OTP-13292
* 
When calling <em>garbage_collect/[1,2]</em> or <em>check_process_code/[2,3]</em> from a process with a higher priority than the priority of the process operated on, the run queues could end up in an inconsistent state. This bug has now been fixed.</p>
<p>Own Id: OTP-13298 Aux Id: OTP-11388
* 
A workaround for an issue with older gcc versions (less than 5) and inline assembly on 32-bit x86 caused an emulator crash when it had been compiled with a newer gcc version. An improved <em>configure</em> test, run when building OTP, now detects whether the workaround should be used or not.</p>
<p>Own Id: OTP-13326 Aux Id: ERL-80</p>
<h2 id="improvements-and-new-features_19">Improvements and New Features</h2>
<ul>
<li>
<p>Introduced new statistics functionality in order to more efficiently retrieve information about run able and active processes and ports. For more information see:</p>
</li>
<li>
<p><a href="./erlang#statistics_total_run_queue_lengths">erlang#statistics_total_run_queue_lengths</a></p>
</li>
<li><a href="./erlang#statistics_run_queue_lengths">erlang#statistics_run_queue_lengths</a></li>
<li><a href="./erlang#statistics_total_active_tasks">erlang#statistics_total_active_tasks</a></li>
<li><a href="./erlang#statistics_active_tasks">erlang#statistics_active_tasks</a></li>
</ul>
<p>Own Id: OTP-13201
* 
Time warp safety improvements.</p>
<p>Introduced the options <em>monotonic_timestamp</em> , and <em>strict_monotonic_timestamp</em> to the trace, sequential trace, and system profile functionality. This since the already existing <em>timestamp</em> option is not time warp safe.</p>
<p>Introduced the option <em>safe_fixed_monotonic_time</em> to <em>ets:info/2</em> and <em>dets:info/2</em> . This since the already existing <em>safe_fixed</em> option is not time warp safe.</p>
<p>Own Id: OTP-13222 Aux Id: OTP-11997
* 
Fix a register race where down nodes goes undetected in epmd</p>
<p>Own Id: OTP-13301
* 
Improved the gcc inline assembly implementing double word atomic compare and exchange on x86/x86_64 so that it also can be used when compiling with clang.</p>
<p>Own Id: OTP-13336
* 
An optimization preventing a long wait for a scheduler thread looking up information about a process executing on another scheduler thread had unintentionally been lost in erts-5.10 (OTP R16A). This optimization has now been reintroduced.</p>
<p>Own Id: OTP-13365 Aux Id: OTP-9892</p>
<h2 id="erts-7211">Erts 7.2.1.1</h2>
<h2 id="improvements-and-new-features_20">Improvements and New Features</h2>
<ul>
<li>
<p>Introduced new statistics functionality in order to more efficiently retrieve information about run able and active processes and ports. For more information see:</p>
</li>
<li>
<p><a href="./erlang#statistics_total_run_queue_lengths">erlang#statistics_total_run_queue_lengths</a></p>
</li>
<li><a href="./erlang#statistics_run_queue_lengths">erlang#statistics_run_queue_lengths</a></li>
<li><a href="./erlang#statistics_total_active_tasks">erlang#statistics_total_active_tasks</a></li>
<li><a href="./erlang#statistics_active_tasks">erlang#statistics_active_tasks</a></li>
</ul>
<p>Own Id: OTP-13201</p>
<h2 id="erts-721">Erts 7.2.1</h2>
<h2 id="fixed-bugs-and-malfunctions_81">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Revert "Fix erroneous splitting of emulator path"</li>
</ul>
<p>Own Id: OTP-13202
* 
Fix HiPE enabled emulator for FreeBSD.</p>
<p>Own Id: OTP-13204 Aux Id: pr926</p>
<h2 id="erts-72">Erts 7.2</h2>
<h2 id="fixed-bugs-and-malfunctions_82">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Small documentation fixes</li>
</ul>
<p>Own Id: OTP-13017
* 
Fix memory corruption bug caused by disabling distribution and then re-enable distribution with a node name that has previously been used by a remote node.</p>
<p>Own Id: OTP-13076 Aux Id: seq12959
* 
Renamed variables with name bool as Visual Studio 2015 now treats this is a keyword.</p>
<p>Own Id: OTP-13079
* 
<em>erl_prim_loader</em> has not supported custom loaders for several releases. In the documentation for <em>erl_prim_loader</em> , all references to custom loaders have now been removed.</p>
<p>Own Id: OTP-13102
* 
Fixed compilation of erts together with libc versions that do not define __uint32_t.</p>
<p>Own Id: OTP-13105
* 
erl -make now returns non-zero exit codes on failure</p>
<p>Own Id: OTP-13107
* 
Fix crash on init:restart in embedded mode caused by on_load handler process not being relaunched leading to load failure for modules such as crypto and asn1rt_nif that need it to be present for correct NIF loading.</p>
<p>Own Id: OTP-13115
* 
Fix maps decode in erlang:binary_to_term/1</p>
<p>Decoding a term with a large (HAMT) map in an small (FLAT) map could cause a critical error if the external format was not produced by beam.</p>
<p>Own Id: OTP-13125
* 
Fix very rare bug in GC when big maps with a lot of hash collisions from a remote node are waiting in inner message queue.</p>
<p>Own Id: OTP-13146
* 
Fixed a bug that could cause a crash dump to become almost empty.</p>
<p>Own Id: OTP-13150</p>
<h2 id="improvements-and-new-features_21">Improvements and New Features</h2>
<ul>
<li>Updated the xmllint target to just check the xml files with real documentation content.  Corrected some errors and added some missing target in the DTD's.</li>
</ul>
<p>Own Id: OTP-13026
* 
Add function enif_getenv to read OS environment variables in a portable way from NIFs.</p>
<p>Own Id: OTP-13147</p>
<h2 id="erts-71">Erts 7.1</h2>
<h2 id="fixed-bugs-and-malfunctions_83">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix bug in ETS that could cause stray objects marked for deletion to occasionally be missed by the cleanup done by <em>safe_fixtable(_,false)</em> .</li>
</ul>
<p>Own Id: OTP-12870
* 
Fixed VM crash that could occur if a trace port was linked to a process, and the trace port terminated abnormally while handling a trace message. This bug has always existed in the runtime system with SMP support.</p>
<p>Own Id: OTP-12901
* 
Instead of aborting, the vm now creates a crash dump when a system process is terminated.</p>
<p>Own Id: OTP-12934
* 
Fixed a rare emulator dead lock that occurred when erlang:process_flag(priority,...) was called by a process that was also scheduled for an internal system activity.</p>
<p>Own Id: OTP-12943
* 
The runtime system on various posix platforms (except for Linux and Solaris) could crash when large amounts of file-descriptors were in use.</p>
<p>Own Id: OTP-12954
* 
A beam file compiled by hipe for an incompatible runtime system was sometimes not rejected by the loader, which could lead to vm crash. This fix will also allow the same hipe compiler to be used by both normal and debug-built vm.</p>
<p>Own Id: OTP-12962
* 
Fix bug in <em>maps:merge/2</em> when called by hipe compiled code that could cause vm crash. Bug exists since erts-7.0 (OTP 18.0).</p>
<p>Own Id: OTP-12965
* 
When tracing with <em>process_dump</em> option, the VM could abort if there was an ongoing binary match somewhere in the call stack of the traced process.</p>
<p>Own Id: OTP-12968
* 
Fixed possible output deadlock in tty driver when hitting "CTRL-C" in a non-smp emulator shell on unix.</p>
<p>Own Id: OTP-12987 Aux Id: Seq12947
* 
Fix <em>binary_to_integer</em> to throw badarg for "+" and "-" similar to <em>list_to_integer</em> .</p>
<p>Own Id: OTP-12988
* 
Suppress warning of unused argument when using macro enif_make_pid.</p>
<p>Own Id: OTP-12989</p>
<h2 id="improvements-and-new-features_22">Improvements and New Features</h2>
<ul>
<li>Changed default clock source used for OS system time on MacOS X to <em>gettimeofday()</em> in order to improve performance. The system can be configured during build to use the previously used higher resolution clock source by passing the switch <a href="../doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP_Configuring">doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP_Configuring</a> when configuring the build.</li>
</ul>
<p>Own Id: OTP-12945 Aux Id: OTP-12892
* 
Added the <em>configure</em> option <a href="../doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP_Configuring">doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP_Configuring</a> which disables saving of compile date and time in the emulator binary.</p>
<p>Own Id: OTP-12971</p>
<h2 id="erts-703">Erts 7.0.3</h2>
<h2 id="fixed-bugs-and-malfunctions_84">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a binary memory leak when printing to shell using the tty driver (i.e. not -oldshell).</li>
</ul>
<p>Own Id: OTP-12941
* 
Fix a bug where the standard error port sometimes crashes with eagain as the reason.</p>
<p>Own Id: OTP-12942
* 
When tracing with <em>process_dump</em> option, the VM could abort if there was an ongoing binary match somewhere in the call stack of the traced process./</p>
<p>Own Id: OTP-12968</p>
<h2 id="erts-702">Erts 7.0.2</h2>
<h2 id="fixed-bugs-and-malfunctions_85">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A process could end up in an inconsistent half exited state in the runtime system without SMP support. This could occur if the processes was traced by a port that it also was linked to, and the port terminated abnormally while handling a trace message for the process.</li>
</ul>
<p>This bug has always existed in the runtime system without SMP support, but never in the runtime system with SMP support.</p>
<p>Own Id: OTP-12889 Aux Id: seq12885
* 
Removed unnecessary copying of data when retrieving corrected Erlang monotonic time.</p>
<p>Own Id: OTP-12894
* 
Changed default OS monotonic clock source chosen at build time. This in order to improve performance. The behavior will now on most systems be that (both OS and Erlang) monotonic time stops when the system is suspended.</p>
<p>If you prefer that monotonic time elapse during suspend of the machine, you can pass the command line argument <em>--enable-prefer-elapsed-monotonic-time-during-suspend</em> to <em>configure</em> when building Erlang/OTP. The configuration stage will try to find such a clock source, but might not be able to find it. Note that there might be a performance penalty associated with such a clock source.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12895
* 
<em>erlang:system_info(end_time)</em> returned a faulty value on 32-bit architectures.</p>
<p>Own Id: OTP-12896</p>
<h2 id="improvements-and-new-features_23">Improvements and New Features</h2>
<ul>
<li>The <em>configure</em> command line argument <em>--enable-gettimeofday-as-os-system-time</em> has been added which force usage of <em>gettimeofday()</em> for OS system time. This will improve performance of <em>os:system_time()</em> and <em>os:timestamp()</em> on MacOS X, at the expense of worse accuracy, resolution and precision of Erlang monotonic time, Erlang system time, and OS system time.</li>
</ul>
<p>Own Id: OTP-12892</p>
<h2 id="erts-701">Erts 7.0.1</h2>
<h2 id="fixed-bugs-and-malfunctions_86">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix a rare hanging of the VM seen to happen just after emulator start. Bug exists since R14.</li>
</ul>
<p>Own Id: OTP-12859 Aux Id: seq12882</p>
<h2 id="erts-70">Erts 7.0</h2>
<h2 id="fixed-bugs-and-malfunctions_87">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix issuing with spaces and quoting in the arguments when using erlang:open_port spawn_executable on windows. The behavior now mimics how unix works. This change implies a backwards incompatibility for how spawn_executable works on windows.</li>
</ul>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11905
* 
Fix global call trace when hipe compiled code call beam compiled functions. Tracing of beam functions should now alway work regardless who the caller is.</p>
<p>Own Id: OTP-11939
* 
Correct cache alignment for ETS <em>write_concurrency</em> locks to improve performance by reduced false sharing. May increase memory footprint for tables with <em>write_concurrency</em> .</p>
<p>Own Id: OTP-11974
* 
All possibly blocking operations in the fd/spawn and terminal driver have been converted to non-blocking operations. Before this fix it was possible for the VM to be blocked for a long time if the entity consuming stdout/stderr did not consume it fast enough.</p>
<p>Own Id: OTP-12239
* 
Add missing overhead for offheap binaries created from external format. This fix can improve the garbage collection of large binaries originating from <em>binary_to_term</em> or messages from remote nodes.</p>
<p>Own Id: OTP-12554
* 
Ensure hashing of zero is consistent</p>
<p>Erlang treats positive and negative zero as equal:</p>
<p><em>true = 0.0 =:= 0.0/-1</em></p>
<p>However, Erlangs hash functions: hash, phash and phash2 did not reflect this behaviour. The hash values produced by the different hash functions would not be identical for positive and negative zero.</p>
<p>This change ensures that hash value of positive zero is always produced regardless of the signedness of the zero float, i.e.,</p>
<p><em>true = erlang:phash2(0.0) =:= erlang:phash2(0.0/-1)</em></p>
<p>Own Id: OTP-12641
* 
Ensure NIF term creation disallows illegal floating point values and too long atoms. Such values will cause a NIF to throw badarg exception when it returns.</p>
<p>Own Id: OTP-12655
* 
Fixed building of Map results from match_specs</p>
<p>A faulty "box-value" entered into the heap which could cause a segmentation fault in the garbage collector if it was written on a heap fragment.</p>
<p>Own Id: OTP-12656
* 
Fix hipe bug when matching a "writable" binary. The bug has been seen to sometimes cause a failed binary matching of a correct utf8 character, but other symptoms are also possible.</p>
<p>Own Id: OTP-12667
* 
Keep dirty schedulers from waking other schedulers.</p>
<p>Own Id: OTP-12685
* 
Disable floating point exceptions if the VM is compiled by clang/llvm. This is a known long-standing problem in clang/llvm.</p>
<p>Own Id: OTP-12717
* 
Fix bug in <em>file:sendfile</em> for FreeBSD causing not the entire file to be sent.</p>
<p>Own Id: OTP-12720
* 
Fix the broken Android support in erl_child_setup.c</p>
<p>Own Id: OTP-12751
* 
Faulty statistics reported by the <em>fix_alloc</em> allocator.</p>
<p>Own Id: OTP-12766
* 
Fix two erts_snprintf() calls to correct sizes.</p>
<ul>
<li>run_erl.c (ose): Use the size of the signal type, not its pointer. - erl_node_tables.c: Use the size of the _BUFFER in erts_snprintf() to make sure we can use the full space.</li>
</ul>
<p>Own Id: OTP-12771
* 
Delayed memory allocations could be delayed an unnecessarily long time.</p>
<p>Own Id: OTP-12812
* 
Make sure that timeouts on a pool of acceptors are released in the correct order.</p>
<p>Own Id: OTP-12817
* 
Fix segmentation fault in module_info for deleted modules</p>
<p>Own Id: OTP-12820
* 
Fix garbage collection of literals in code purge</p>
<p>During code purging and check_process_code, the checking of the binary reference embedded in the match binary state was omitted for the tracing tests. This would cause the binary match state to reference deallocated memory.</p>
<p>Own Id: OTP-12821
* 
A bug has been corrected for gen_tcp:close so when {linger,{true,0}} is in effect it does not wait for data in the driver queue to transfer out before closing the port. Bug fix by Rory Byrne.</p>
<p>Own Id: OTP-12840
* 
The documentation of the driver callback <a href="./driver_entry#start">driver_entry#start</a> erroneously stated that a return value of <em>ERL_DRV_ERROR_ERRNO</em> caused the error value to be passed via <em>erl_errno</em> when it should have been <em>errno</em> .</p>
<p>Own Id: OTP-12855</p>
<h2 id="improvements-and-new-features_24">Improvements and New Features</h2>
<ul>
<li>Add <em>md5</em> and <em>module</em> entries to <em>?MODULE:module_info/0/1</em> and remove obsolete entry 'import'.</li>
</ul>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11940
* 
Debug function <em>erlang:display/1</em> shows content of binaries and bitstrings, not only the length.</p>
<p>Own Id: OTP-11941
* 
The time functionality of Erlang has been extended. This both includes a <a href="./time_correction#The_New_Time_API">new API</a> for time, as well as <a href="./time_correction#Time_Warp_Modes">time warp modes</a> which alters the behavior of the system when system time changes. <strong>You are strongly encouraged to use the new API</strong> instead of the old API based on <a href="./erlang#now/0">erlang#now/0</a> . <em>erlang:now/0</em> has been deprecated since it is and forever will be a scalability bottleneck. For more information see the <a href="time_correction">Time and Time Correction</a> chapter of the ERTS User's Guide.</p>
<p>Besides the API changes and time warp modes a lot of scalability and performance improvements regarding time management has been made internally in the runtime system. Examples of such improvements are scheduler specific timer wheels, scheduler specific BIF timer management, parallel retrieval of monotonic time and system time on systems with primitives that are not buggy.</p>
<p>Own Id: OTP-11997
* 
<em>erlang:function_exported(M, F, A)</em> will now return <em>true</em> if <em>M:F/A</em> refers to a BIF.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12099
* 
New BIF: <em>erlang:get_keys/0</em> , lists all keys associated with the process dictionary. Note: <em>erlang:get_keys/0</em> is auto-imported.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12151 Aux Id: seq12521
* 
Make distributed send of large messages yield to improve real-time characteristics.</p>
<p>Own Id: OTP-12232
* 
Use high accuracy poll timeouts</p>
<p>Where available, use poll/select API's that can handle time resolutions less than 1ms. In the cases where such API's are not available the timeout is rounded up to the nearest ms.</p>
<p>Own Id: OTP-12236
* 
The internal group to user_drv protocol has been changed to be synchronous in order to guarantee that output sent to a process implementing the user_drv protocol is printed before replying. This protocol is used by the standard_output device and the ssh application when acting as a client.</p>
<p>This change changes the previous unlimited buffer when printing to standard_io and other devices that end up in user_drv to 1KB.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12240
* 
The previously introduced "eager check I/O" feature is now enabled by default.</p>
<p>Eager check I/O can be disabled using the <em>erl</em> command line argument: <em>+secio false</em></p>
<p>Characteristics impact compared to previous default:</p>
<ul>
<li>Lower latency and smoother management of externally triggered I/O operations.</li>
<li>A slightly reduced priority of externally triggered I/O operations.</li>
</ul>
<p>Own Id: OTP-12254 Aux Id: OTP-12117
* 
Properly support maps in match_specs</p>
<p>Own Id: OTP-12270
* 
The notice that a crashdump has been written has been moved to be printed before the crashdump is generated instead of afterwords. The wording of the notice has also been changed.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12292
* 
New function <em>ets:take/2</em> . Works the same as <em>ets:delete/2</em> but also returns the deleted object(s).</p>
<p>Own Id: OTP-12309
* 
Tracing with cpu_timestamp option has been enabled on Linux.</p>
<p>Own Id: OTP-12366
* 
ets:info/1,2 now contains information about whether write_concurrency or read_concurrency is enabled.</p>
<p>Own Id: OTP-12376
* 
Improved usage of <em>gcc</em> 's builtins for atomic memory access. These are used when no other implementation of atomic memory operations is available. For example, when compiling for ARM when <em>libatomic_ops</em> is not available.</p>
<p>The largest improvement will be seen when compiling with a <em>gcc</em> with support for the <em>__atomic_<strong> builtins (using a <em>gcc</em> of at least version 4.7), but also when only the legacy *__sync_</strong> builtins are available (using a </em>gcc* of at least version 4.1) an improvement can be seen.</p>
<p>For more information see the " <a href="../doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP_Configuring_Atomic-Memory-Operations-and-the-VM">Atomic Memory Operations and the VM</a> " section of <em>$ERL_TOP/HOWTO/INSTALL.md</em> .</p>
<p>Own Id: OTP-12383
* 
Introduce <em>math:log2/1</em> function to math module.</p>
<p>Own Id: OTP-12411
* 
The documentation of the Abstract Format (in the ERTS User's Guide) has been updated with types and specification. (Thanks to Anthony Ramine.)</p>
<p>The explicit representation of parentheses used in types of the abstract format has been removed. Instead the new functions <em>erl_parse:type_inop_prec()</em> and <em>erl_parse:type_preop_prec()</em> can be used for inserting parentheses where needed.</p>
<p>Own Id: OTP-12492
* 
Remove perfctr support</p>
<p>Development of perfctr in the linux kernel ceased in 2010. The perfctr support code in the Erlang VM is thus effectively dead code and therefor removed.</p>
<p>Own Id: OTP-12508
* 
<em>zlib:inflateChunk/2</em> has been added. It works like <em>zlib:inflate/2</em> , but decompresses no more data than will fit in the buffer configured by <em>zlib:setBufSize/2</em> .</p>
<p>Own Id: OTP-12548
* 
Use linear search for small select_val arrays</p>
<p>Own Id: OTP-12555
* 
New BIF ets:update_counter/4 with a default object as argument, which will be inserted in the table if the key was not found.</p>
<p>Own Id: OTP-12563
* 
Export missing types from zlib module</p>
<p>Own Id: OTP-12584
* 
Use persistent hashmaps for large Maps</p>
<p>Maps will use a persistent hashmap implementation when the number of pairs in a Map becomes sufficiently large. The change will occur when a Map reaches 33 pairs in size but this limit might change in the future.</p>
<p>The most significant impact for the user by this change is speed, and to a lesser degree memory consumption and introspection of Maps. Memory consumption size is probalistic but lesser than <em>gb_trees</em> or <em>dict</em> for instance. Any other impacts will be transparent for the user except for the following changes.</p>
<p>Semantics of Maps have changed in two incompatible ways compared to the experimental implementation in OTP 17:</p>
<ul>
<li>Hashing of maps is done different by <em>erlang:phash2/1,2</em> , <em>erlang:phash/1</em> and <em>erlang:hash/2</em> .</li>
<li>Comparing two maps with ==, /=, =&lt;, &lt;, &gt;= and &gt;, is done different if the keys contain floating point numbers.</li>
</ul>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12585
* 
Scalability improvement for <a href="./erlang#make_ref/0">erlang:make_ref/0</a> , and other functionality that create references. Each scheduler now manage its own set of references. By this no communication at all is needed when creating references.</p>
<p>Previous implementation generated a strictly monotonically increasing sequence of references corresponding to creation time on the runtime system instance. This is <strong>not</strong> the case with current implementation. You can only expect reference to be unique. The Erlang/OTP documentation has never mentioned anything else but the uniqueness property, so this change <strong>is</strong> fully compatible. The only reason we've marked this as a potential incompatibility is since an early draft for an Erlang specification mentions strict monotonicity as a property.</p>
<p>If you need to create data with a strict monotonicity property use <a href="./erlang#unique_integer/1">erlang:unique_integer([monotonic])</a> . Do <strong>not</strong> use the deprecated <a href="./erlang#now/0">erlang:now()</a> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12610
* 
Enable different abort signal from heart</p>
<p>By using environment variable HEART_KILL_SIGNAL, heart can now use a different signal to kill the old running Erlang.</p>
<p>By default the signal is SIGKILL but SIGABRT may also be used by setting environment variable: HEART_KILL_SIGNAL=SIGABRT</p>
<p>Own Id: OTP-12613 Aux Id: seq12826
* 
Update autconf to latest version 2015-03-04</p>
<p>Own Id: OTP-12646
* 
Optimization of timers internally in the VM. This include process timers ( <em>receive ... after</em> ), port timers ( <em>driver_set_timer()</em> ) as well as BIF timers ( <em>erlang:send_after()</em> / <em>erlang:start_timer()</em> ).</p>
<p>Each scheduler thread now has its own lock-free timer service instead of one locked central service. This dramatically improves performance of timer management on systems with a large amount of schedulers and timers.</p>
<p>The timer service internal data structure has also been optimized to be able to handle more timers than before. That is, each timer service is by its self able to handle more timers without dramatic performance loss than the old centralized timer service.</p>
<p>The API of BIF timers has also been extended. Timeout values are for example no longer limited to 32-bit integers. For more information see the documentation of <a href="./erlang#start_timer/4">erlang#start_timer/4</a> , <a href="./erlang#send_after/4">erlang#send_after/4</a> , <a href="./erlang#cancel_timer/2">erlang#cancel_timer/2</a> , and <a href="./erlang#read_timer/2">erlang#read_timer/2</a> .</p>
<p>Characteristics impact: Calls to the synchronous versions of <em>erlang:cancel_timer()</em> , and <em>erlang:read_timer()</em> may take substantially longer time to complete than before. This occur when the timer that is accessed is managed by a remote scheduler. You typically want to use the new asynchronous option in order to avoid blocking the calling process.</p>
<p>Own Id: OTP-12650 Aux Id: OTP-11997
* 
Specialize instructions from common assembler patterns</p>
<p>Specialize common instructions of <em>rem</em> , <em>band</em> , <em>minus</em> and <em>plus</em> in the beam loader. This will reduce the number of fetches and thus lessen the instruction dispatch pressure during runtime and speed up those operations in some common cases.</p>
<p>Specialize move patterns from x-registers to the stack with a new <em>move_window</em> instruction. This change will reduce instruction dispatch pressure.</p>
<p>Own Id: OTP-12690
* 
Fix cross compilation for Android.</p>
<p>Own Id: OTP-12693
* 
Fix incorrect use of autoconf macro AC_EGREP_CPP, which could cause faulty configuration if run from a path containing the string 'yes'.</p>
<p>Own Id: OTP-12706
* 
Minimal Java version is now 1.6</p>
<p>Own Id: OTP-12715
* 
Send format and args on process exit to error_logger</p>
<p>Previously, the emulator would generate a whole string with values and call the error_logger passing <em>"~s~n"</em> . This changes it to a format string containing <em>~p</em> with the respective values as arguments.</p>
<p>Own Id: OTP-12735
* 
Map error logger warnings to warning messages by default.</p>
<p>Own Id: OTP-12755
* 
Configure architecture ppc64le architecture as a ppc64</p>
<p>Own Id: OTP-12761
* 
Add function <em>enif_raise_exception</em> to allow a NIF to raise an error exception with any type of reason.</p>
<p>Own Id: OTP-12770
* 
Optimized node table statistics retrieval.</p>
<p>Own Id: OTP-12777
* 
Map beam error logger warnings to warning messages by default. Previously these messages were mapped to the error channel by default.</p>
<p>Own Id: OTP-12781
* 
gen_tcp:shutdown/2 is now asynchronous</p>
<p>This solves the following problems with the old implementation:</p>
<p>It doesn't block when the TCP peer is idle or slow. This is the expected behaviour when shutdown() is called: the caller needs to be able to continue reading from the socket, not be prevented from doing so.</p>
<p>It doesn't truncate the output. The current version of gen_tcp:shutdown/2 will truncate any outbound data in the driver queue after about 10 seconds if the TCP peer is idle of slow. Worse yet, it doesn't even inform anyone that the data has been truncated: 'ok' is returned to the caller; and a FIN rather than an RST is sent to the TCP peer.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12797
* 
Introduced delayed node table GC. This in order to avoid oscillation of entries in and out of the tables. The oscillation caused unnecessary lock contention on the table locks. The delay length can be set by passing the <a href="./erl#+zdntgc">erl#+zdntgc</a> command line argument.</p>
<p>Characteristics impact: The tables can grow to very large sizes with unused entries if the node is get huge amounts of short lived connections from other nodes. This problem can be alleviated by shortening the length of the delay using the <em>+zdntgc</em> command line argument.</p>
<p>Own Id: OTP-12802
* 
Improved implementation of <a href="./erlang#statistics/1">erlang#statistics/1</a> <em>(io)</em> in order to reduce contention between schedulers.</p>
<p>Characteristics impact: The actual call to <em>erlang:statistics(io)</em> takes longer time to complete, but the overall impact on the system is improved.</p>
<p>Own Id: OTP-12842
* 
There are many cases where user code needs to be able to distinguish between a socket that was closed normally and one that was aborted. Setting the option {show_econnreset, true} enables the user to receive ECONNRESET errors on both active and passive sockets.</p>
<p>Own Id: OTP-12843
* 
Do not preallocate too large event pool</p>
<p>A default pool size of 4000 is too excessive for the common case. This corresponds directly to the number of threads in the system. Change ERTS_TS_EV_ALLOC_DEFAULT_POOL_SIZE to 2048. Change ERTS_TS_EV_ALLOC_POOL_SIZE to 32.</p>
<p>Own Id: OTP-12849</p>
<h2 id="erts-6417">Erts 6.4.1.7</h2>
<h2 id="fixed-bugs-and-malfunctions_88">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A process communicating with a port via one of the <em>erlang:port_</em><em> BIFs could potentially end up in an inconsistent state if the port terminated during the communication. When this occurred the process could later block in a </em>receive* even though it had messages matching in its message queue.</li>
</ul>
<p>This bug was introduced in erts version 5.10 (OTP R16A).</p>
<p>Own Id: OTP-13424 Aux Id: OTP-10336
* 
Calls to <em>erl_drv_send_term()</em> or <em>erl_drv_output_term()</em> from a non-scheduler thread while the corresponding port was invalid caused the emulator to enter an inconsistent state which eventually caused an emulator crash.</p>
<p>Own Id: OTP-13866
* 
Driver and NIF operations accessing processes or ports could cause an emulator crash when used from non-scheduler threads. Those operations are:</p>
<ul>
<li><em>erl_drv_send_term()</em></li>
<li><em>driver_send_term()</em></li>
<li><em>erl_drv_output_term()</em></li>
<li><em>driver_output_term()</em></li>
<li><em>enif_send()</em></li>
<li><em>enif_port_command()</em></li>
</ul>
<p>Own Id: OTP-13869
* 
Fix bug in <em>binary_to_term</em> for binaries created by <em>term_to_binary</em> with option <em>compressed</em> . The bug can cause <em>badarg</em> exception for a valid binary when Erlang VM is linked against a <em>zlib</em> library of version 1.2.9 or newer. Bug exists since OTP 17.0.</p>
<p>Own Id: OTP-14159 Aux Id: ERL-340
* 
Fixed bug in operator <em>bxor</em> causing erroneuos result when one operand is a big <strong>negative</strong> integer with the lowest <em>N</em>W<em> bits as zero and the other operand not larger than </em>N<em>W</em> bits. <em>N</em> is an integer of 1 or larger and <em>W</em> is 32 or 64 depending on word size.</p>
<p>Own Id: OTP-14514
* 
Fixed bug in <em>binary_to_term</em> and <em>binary_to_atom</em> that could cause VM crash. Typically happens when the last character of an UTF8 string is in the range 128 to 255, but truncated to only one byte. Bug exists in <em>binary_to_term</em> since ERTS version 5.10.2 (OTP_R16B01) and <em>binary_to_atom</em> since ERTS version 9.0 (OTP-20.0).</p>
<p>Own Id: OTP-14590 Aux Id: ERL-474</p>
<h2 id="erts-6416">Erts 6.4.1.6</h2>
<h2 id="fixed-bugs-and-malfunctions_89">Fixed Bugs and Malfunctions</h2>
<ul>
<li>When calling <em>garbage_collect/[1,2]</em> or <em>check_process_code/[2,3]</em> from a process with a higher priority than the priority of the process operated on, the run queues could end up in an inconsistent state. This bug has now been fixed.</li>
</ul>
<p>Own Id: OTP-13298 Aux Id: OTP-11388</p>
<h2 id="erts-6415">Erts 6.4.1.5</h2>
<h2 id="fixed-bugs-and-malfunctions_90">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug that could cause a crash dump to become almost empty.</li>
</ul>
<p>Own Id: OTP-13150</p>
<h2 id="erts-6414">Erts 6.4.1.4</h2>
<h2 id="fixed-bugs-and-malfunctions_91">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The 'raw' socket option could not be used multiple times in one call to any e.g gen_tcp function because only one of the occurrences were used. This bug has been fixed, and also a small bug concerning propagating error codes from within inet:setopts/2.</li>
</ul>
<p>Own Id: OTP-11482 Aux Id: seq12872</p>
<h2 id="erts-641">Erts 6.4.1</h2>
<h2 id="fixed-bugs-and-malfunctions_92">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The VTS mode in Common Test has been modified to use a private version of the Webtool application (ct_webtool).</li>
</ul>
<p>Own Id: OTP-12704 Aux Id: OTP-10922</p>
<h2 id="erts-64">Erts 6.4</h2>
<h2 id="fixed-bugs-and-malfunctions_93">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix missing quotation in the <em>LM_FIND_EMU_CC</em> <em>autoconf</em> macro which could cause build failures.</li>
</ul>
<p>Own Id: OTP-12388
* 
Fix erroneous printout of monitors in crashdump file.</p>
<p>Own Id: OTP-12537
* 
The runtime system without SMP support could crash in the BIF <em>port_control/3</em> if the port that was being accessed died during the call to the BIF.</p>
<p>Own Id: OTP-12544 Aux Id: Seq12777
* 
Avoid corrupt oversized integer to be created from binary matching. Instead throw system_limit exception which is the correct behavior. A peculiar symptom of this bug was that bitwise operations (band, bor, bxor) on such oversized integers could return the empty list []. Credit: Mikael Pettersson, Nico Kruber</p>
<p>Own Id: OTP-12556
* 
A race condition when calling <em>port_info/1</em> could cause a memory fault has been fixed.</p>
<p>Own Id: OTP-12587
* 
Fix comparison of exact terms. An overflow that could cause faulty comparisons has been fixed. Comparison of exact terms is exclusively used within Maps.</p>
<p>Own Id: OTP-12623
* 
Fix bug in <em>list_to_integer/1</em> for very long lists that could cause VM crash.</p>
<p>Own Id: OTP-12624</p>
<h2 id="improvements-and-new-features_25">Improvements and New Features</h2>
<ul>
<li>Introduced a runtime system internal 64-bit API for atomic memory operations.</li>
</ul>
<p>Own Id: OTP-12351
* 
Add command line argument option for the initial size of process dictionaries.</p>
<p>Use '+hpds <size>' to set initial process dictionary size for spawned processes.</p>
<p>Own Id: OTP-12535 Aux Id: seq12809
* 
Fix documentation on $char for Unicode</p>
<p>Own Id: OTP-12545</p>
<h2 id="erts-631">Erts 6.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_94">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix getifaddrs realloc pointer error</li>
</ul>
<p>When a buffer was exhausted and subsequently reallocated, we could get an unsafe pointer pointing to faulty memory.</p>
<p>For this to occur we would need to have a large number of interfaces and a reallocation of memory to a lower addresses.</p>
<p>The symptom would be garbage returned from erlang:port_control(Port, 25, []) (prim_inet:getifaddrs(Port) resulting in a badarg) or a segmentation fault.</p>
<p>Own Id: OTP-12445
* 
Don't close all file descriptors twice in child_setup</p>
<p>The commit c2b4eab25c907f453a394d382c04cd04e6c06b49 introduced an error in which child_setup erroneously tried to close all file descriptors twice.</p>
<p>Use closefrom() if available when closing all file descriptors.</p>
<p>The function closefrom() was only used in the vfork() case before but is now also used in the fork() case if available.</p>
<p>Own Id: OTP-12446
* 
During a crashdump all file descriptors are closed to ensure the closing of the epmd port and to reserve a file descriptor for the crashdump file.</p>
<p>If a driver (third party library) cannot handle closing of sockets this could result in a segmentation fault in which case a crashdump would not be produced. This is now fixed by only closing inets sockets via an emergency close callback to the driver and thus closing the epmd socket.</p>
<p>Own Id: OTP-12447</p>
<h2 id="erts-63">Erts 6.3</h2>
<h2 id="fixed-bugs-and-malfunctions_95">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix HiPE debug lock checking on OS X 64bit</li>
</ul>
<p>Position-independent code is mandatory on OS X. We use r11 as an intermediate register to fill BIF_P-&gt;hipe.bif_callee. This fixes the following error when doing <code>make debug FLAVOR=smp</code>:</p>
<p>clang -cc1as: fatal error: error in backend: 32-bit absolute addressing is not supported in 64-bit mode</p>
<p>Own Id: OTP-12188
* 
Fix race bug that could cause VM crash in <em>erlang:port_get_data/1</em> if the port was closed by a concurrent process. Also fix fatal bug if <em>port_set_data/2</em> is called with a non-immediate data term. Both bugs exist since R16B01.</p>
<p>Own Id: OTP-12208
* 
Correct make variable SSL_DED_LD_RUNTIME_LIBRARY_PATH when erl_xcomp_sysroot ends with a slash.</p>
<p>Own Id: OTP-12216 Aux Id: seq12700
* 
Fix two cases of unreachable code caused by false use of assigment operators.</p>
<p>Own Id: OTP-12222
* 
Fix bug when hipe compiled code makes tail call to a BIF that disables GC while trapping (sush as binary_to_list, list_to_binary, binary_to_term, term_to_binary).</p>
<p>Own Id: OTP-12231
* 
Fix bug when a migrated empty memory carrier is reused just before it should be destroyed by the thread that created it.</p>
<p>Own Id: OTP-12249
* 
Prevents compile-time errors in NIFs, when the compiler is instructed to treat missing field initializers as errors, by adding an initializer for the new options field which was added to ErlNifEntry for 17.3.</p>
<p>Own Id: OTP-12266
* 
Fixed CPU topology detection on FreeBSD systems where Erlang/OTP is compiled by new C compilers (including, but possibly not limited to, gcc 4.9 and clang).</p>
<p>Own Id: OTP-12267
* 
Use C99 function isfinite() instead of finite() when available on non GCC compilers.</p>
<p>Own Id: OTP-12268
* 
Fix bug on windows where an incorrect number of links could be returned when doing file:read_file_info on a directory.</p>
<p>Own Id: OTP-12269
* 
Fix rare bug when purging module on VM started with +Meamin.</p>
<p>Own Id: OTP-12273
* 
Repair run_erl terminal window size adjustment sent from to_erl. This was broken in OTP 17.0 which could lead to strange cursor behaviour in the to_erl shell.</p>
<p>Own Id: OTP-12275 Aux Id: seq12739
* 
Fixed bug on windows causing gen_tcp/udp to return an error when given an fd to work with.</p>
<p>Own Id: OTP-12289
* 
Fix various internal erts issues where negating a signed integer in C would trigger undefined behavior. This fixes issues when dividing with bignums and list_to_integer.</p>
<p>Own Id: OTP-12290
* 
When flushing output to stdout on windows, the emulator could sometimes hang indefinitely waiting for the flush to complete. This has been fixed.</p>
<p>Own Id: OTP-12291
* 
Fix so that non-smp emulators with dirty scheduler support shows the correct number of dirty schedulers when calling erlang:system_info(system_version).</p>
<p>Own Id: OTP-12295
* 
Add <em>nif_version</em> to <em>erlang:system_info/1</em> in order to get the NIF API version of the runtime system in a way similar to <em>driver_version</em> .</p>
<p>Own Id: OTP-12298
* 
Fix bug that could cause the return value from dirty NIF with zero arity to be treated as garbage, leading to VM crash.</p>
<p>Own Id: OTP-12300
* 
Improve allocation carrier migration search logic. This will reduce the risk of failed migrations that could lead to excess memory consumption. It will also improve smp performance due to reduced memory contention on the migration pool.</p>
<p>Own Id: OTP-12323</p>
<h2 id="improvements-and-new-features_26">Improvements and New Features</h2>
<ul>
<li>Introduced support for eager check I/O.</li>
</ul>
<p>By default eager check I/O will be disabled, but this will most likely be changed in OTP 18. When eager check I/O is enabled, schedulers will more frequently check for I/O work. Outstanding I/O operations will however not be prioritized to the same extent as when eager check I/O is disabled.</p>
<p>Eager check I/O can be enabled using the <em>erl</em> command line argument: <em>+secio true</em></p>
<p>Characteristics impact when enabled:</p>
<ul>
<li>Lower latency and smoother management of externally triggered I/O operations.</li>
<li>A slightly reduced priority of externally triggered I/O operations.</li>
</ul>
<p>Own Id: OTP-12117
* 
Fix erts .app-file</p>
<p>Own Id: OTP-12189
* 
Add configure option --with-ssl-incl=PATH to support OpenSSL installations with headers and libraries at different places.</p>
<p>Own Id: OTP-12215 Aux Id: seq12700
* 
Optimization of atomic memory operations with release barrier semantics on 32-bit PowerPC when using the implementation included in OTP.</p>
<p>Own Id: OTP-12250
* 
Minor adjustment of scheduler activation code making sure that an activation of a scheduler is not prevented by its run-queue being non-empty. (Thanks to Songlu Cai)</p>
<p>Own Id: OTP-12287
* 
Improved support for atomic memory operations provided by the <a href="https://github.com/ivmai/libatomic_ops/">libatomic_ops</a> library. Most importantly support for use of native double word atomics when implemented by <em>libatomic_ops</em> (for example, implemented for ARM).</p>
<p>The <a href="../doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP_Configuring_Atomic-Memory-Operations-and-the-VM">doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP_Configuring_Atomic-Memory-Operations-and-the-VM</a> document now also more clearly describes when you want to build together with a <em>libatomic_ops</em> installation.</p>
<p>Own Id: OTP-12302
* 
Add configure option --with-ssl-rpath to control which runtime library path to use for dynamic linkage toward OpenSSL.</p>
<p>Own Id: OTP-12316 Aux Id: seq12753
* 
Added systemd notify support to epmd</p>
<p>Own Id: OTP-12321</p>
<h2 id="erts-621">Erts 6.2.1</h2>
<h2 id="fixed-bugs-and-malfunctions_96">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix bug when an migrated empty memory carrier is reused just before it should be destroyed by the thread that created it.</li>
</ul>
<p>Own Id: OTP-12249
* 
Repair run_erl terminal window size adjustment sent from to_erl. This was broken in OTP 17.0 which could lead to strange cursor behaviour in the to_erl shell.</p>
<p>Own Id: OTP-12275 Aux Id: seq12739</p>
<h2 id="erts-62">Erts 6.2</h2>
<h2 id="fixed-bugs-and-malfunctions_97">Fixed Bugs and Malfunctions</h2>
<ul>
<li>General documentation updates.</li>
</ul>
<p>Own Id: OTP-12052
* 
A bug in the VM code implementing sending of signals to ports could cause the receiving port queue to remain in a busy state forever. When this state had been reached, processes sending command signals to the port either got suspended forever, or, if the <em>nosuspend</em> feature was used, always failed to send to the port. This bug was introduced in ERTS version 5.10.</p>
<p>In order for this bug to be triggered on a port, one had to at least once utilize the <em>nosuspend</em> functionality when passing a signal to the port. This by either calling</p>
<ul>
<li><a href="./erlang#port_command/3">erlang#port_command/3</a> ,</li>
<li><a href="./erlang#send/3">erlang#send/3</a> ,</li>
<li><a href="./erlang#send_nosuspend/2">erlang#send_nosuspend/2</a> , or</li>
<li><a href="./erlang#send_nosuspend/3">erlang#send_nosuspend/3</a> .</li>
</ul>
<p>Thanks Vasily Demidenok for reporting the issue, and Sergey Kudryashov for providing a testcase.</p>
<p>Own Id: OTP-12082 Aux Id: OTP-10336
* 
Fix size overflow bug at memory allocation. A memory allocation call, with an insane size close to the entire address space, could return successfully as if it had allocated just a few bytes. (Thanks to Don A. Bailey for reporting)</p>
<p>Own Id: OTP-12091
* 
Fix various issues where negating a signed integer would trigger undefined behaviour. This fixes issues in the enif_make_int64 interface and some edge cases inside the erlang runtime system.</p>
<p>Own Id: OTP-12097
* 
The documentation erroneously listed the <a href="./erl#+swct">erl#+swct</a> command line argument under <em>+sws</em> .</p>
<p>Own Id: OTP-12102 Aux Id: OTP-10994
* 
Profiling messages could be delivered out of order when profiling on <em>runnable_procs</em> and/or <em>runnable_ports</em> using <a href="./erlang#system_profile/2">erlang#system_profile/2</a> . This bug was introduced in ERTS version 5.10.</p>
<p>Own Id: OTP-12105 Aux Id: OTP-10336
* 
Various logging fixes, including: Add run queue index to the process dump in crash dumps.  Add thread index to enomem slogan when crashing.  Remove error logger message for sending messages to old instances of the same node.</p>
<p>Own Id: OTP-12115
* 
Fix compiler warnings reported by LLVM</p>
<p>Own Id: OTP-12138
* 
Correct conversion of <em>MIN_SMALL</em> by <em>list_to_integer/1</em> and <em>binary_to_integer/1</em> . The bug produced an unnormalized bignum which can cause strange behavior such as comparing different to a correct <em>MIN_SMALL</em> integer. The value <em>MIN_SMALL</em> is <em>-(1 bsl 27) = -134217728</em> on a 32-bit VM and <em>-(1 bsl 59) = -576460752303423488</em> on a 64-bit VM. (Thanks to Jesper Louis Andersen, Mikael Pettersson and Anthony Ramine for report, patch and optimization suggestion)</p>
<p>Own Id: OTP-12140
* 
Fix bug in <em>term_to_binary</em> that reallocates binary with inconsistent size information. Bug has never been confirmed to be the cause of any faulty behavior.</p>
<p>Own Id: OTP-12141
* 
Real_path method used while prim loading archive files was not taking into account the fact that windows directory symlinks can be across different drives.</p>
<p>Own Id: OTP-12155</p>
<h2 id="improvements-and-new-features_27">Improvements and New Features</h2>
<ul>
<li>Add log2 histogram to lcnt for lock wait time</li>
</ul>
<p>Own Id: OTP-12059
* 
Introduced <a href="./erl_nif#enif_schedule_nif">erl_nif#enif_schedule_nif</a> to the NIF API.</p>
<p>The <em>enif_schedule_nif()</em> function allows a long-running NIF to be broken into separate NIF invocations without the help of a wrapper function written in Erlang. The NIF first executes part of the long-running task, then calls <em>enif_schedule_nif()</em> to schedule a NIF for later execution to continue the task. Any number of NIFs can be scheduled in this manner, one after another. Since the emulator regains control between invocations, this helps avoid problems caused by native code tying up scheduler threads for too long.</p>
<p>The <em>enif_schedule_nif()</em> function also replaces the <em>enif_schedule_dirty_nif()</em> in the experimental dirty NIF API. Note that the only incompatible changes made are in the experimental dirty NIF API.</p>
<p>See the <a href="erl_nif">NIF documentation</a> for more information.</p>
<p>Thanks to Steve Vinoski.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-12128</p>
<h2 id="erts-612">Erts 6.1.2</h2>
<h2 id="fixed-bugs-and-malfunctions_98">Fixed Bugs and Malfunctions</h2>
<ul>
<li>OTP-11850 fixed filelib:wildcard/1 to work with broken symlinks. This correction, however, introduced problems since symlinks were no longer followed for functions like filelib:ensure_dir/1, filelib:is_dir/1, filelib:file_size/1, etc. This is now corrected.</li>
</ul>
<p>Own Id: OTP-12054 Aux Id: seq12660</p>
<h2 id="erts-611">Erts 6.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_99">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed ETHR_FORCE_INLINE which caused the build to break on some platforms without adequate thread support (VxWorks).</li>
</ul>
<p>Own Id: OTP-12010</p>
<h2 id="erts-61">Erts 6.1</h2>
<h2 id="fixed-bugs-and-malfunctions_100">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The documentation for <em>spawn_opt/5</em> now has a note mentioning that the <em>monitor</em> option is not supported.</li>
</ul>
<p>Own Id: OTP-11849
* 
Fix broken system monitoring of <em>large_heap</em> for non-smp VM. No message for <em>large_heap</em> was ever sent on non-smp VM. Bug exist since R16B.</p>
<p>Own Id: OTP-11852
* 
The emulator without SMP support crashed when passing a message to a process without enough heap space for the message. This bug was introduced in <em>erts-6.0</em> .</p>
<p>Own Id: OTP-11887 Aux Id: OTP-11388
* 
Fix race between ETS table deletion and unfixation that could cause VM crash. The race could happen between a terminating process that does not own the table but has a fixation on it and another process that deletes the table (maybe the owner terminating) at the same time. Bug existed since R15B02.</p>
<p>Own Id: OTP-11892
* 
The string following the <em>-eval</em> option when invoking <em>erl</em> would not be properly translated from UTF-8 to a list of Unicode characters (as would the arguments for <em>-run</em> ).</p>
<p>That bug would cause the build of Erlang/OTP to fail when building in a directory whose pathname contained non-US ASCII characters encoded in UTF-8. (Thanks to Eric Pailleau for reporting this bug.)</p>
<p>Own Id: OTP-11916
* 
Fix erts_debug:size/1 to handle Map sizes</p>
<p>Own Id: OTP-11923
* 
Removed <em>erlang:bitstr_to_list/1</em> and <em>erlang:list_to_bitstr/1</em> . They were added by mistake, and have always raised an <em>undefined</em> exception when called.</p>
<p>Own Id: OTP-11942
* 
Fixed compilation using mingw-w64 on Windows.</p>
<p>Thanks to Jani Hakala.</p>
<p>Own Id: OTP-11945
* 
The git sha is no longer printed in the shell start header when erlang is built from a tagged git release.</p>
<p>Own Id: OTP-11961
* 
Fixed a bug where <em>send</em> trace events were erroneously dropped when the send was done to a registered process. This bug was introduced in R16B.</p>
<p>Own Id: OTP-11968</p>
<h2 id="improvements-and-new-features_28">Improvements and New Features</h2>
<ul>
<li>
<p>The following native functions now bump an appropriate amount of reductions and yield when out of reductions:</p>
</li>
<li>
<p><em>erlang:binary_to_list/1</em></p>
</li>
<li><em>erlang:binary_to_list/3</em></li>
<li><em>erlang:bitstring_to_list/1</em></li>
<li><em>erlang:list_to_binary/1</em></li>
<li><em>erlang:iolist_to_binary/1</em></li>
<li><em>erlang:list_to_bitstring/1</em></li>
<li><em>binary:list_to_bin/1</em></li>
</ul>
<p>Characteristics impact:
 <dl></p>
<dt> Performance </dt>

<dd>
The functions converting from lists got a performance loss for very small lists, and a performance gain for very large lists.
</dd>

<dt> Priority </dt>

<dd>
Previously a process executing one of these functions effectively got an unfair priority boost. This priority boost depended on the input size. The larger the input was, the larger the priority boost got. This unfair priority boost is now lost.
</dd>

<p></dl> 
Own Id: OTP-11888
* 
The systemd features of epmd have been removed from epmd by default. To enable them you have to build erlang with the configure option --enable-systemd.</p>
<p>Own Id: OTP-11921
* 
Removed Erlang wrapper code used when calling <em>binary_to_term/1</em> , and <em>binary_to_term/2</em> . This improves the performance of these BIFs especially when they are called with small binaries as input.</p>
<p>Own Id: OTP-11931
* 
Add erlang:system_info(tolerant_timeofday), an API to check whether compensation for sudden changes of system time is enabled or not.</p>
<p>Own Id: OTP-11970</p>
<h2 id="erts-601">Erts 6.0.1</h2>
<h2 id="fixed-bugs-and-malfunctions_101">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix broken system monitoring of <em>large_heap</em> for non-smp VM. No message for <em>large_heap</em> was ever sent on non-smp VM. Bug exist since R16B.</li>
</ul>
<p>Own Id: OTP-11852
* 
Fixed type spec of <em>erlang:system_info/1</em> .</p>
<p>Own Id: OTP-11859 Aux Id: OTP-11615</p>
<h2 id="erts-60">Erts 6.0</h2>
<h2 id="fixed-bugs-and-malfunctions_102">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The option dupnames did not work as intended in re. When looking for names with {capture, [Name, ...]}, re:run returned a random instance of the match for that name, instead of the leftmost matching instance, which was what the documentation stated. This is now corrected to adhere to the documentation. The option {capture,all_names} along with a re:inspect/2 function is also added to further help in using named subpatterns.</li>
</ul>
<p>Own Id: OTP-11205
* 
Allow loading of NIF library with unicode path name</p>
<p>Own Id: OTP-11408
* 
Allow loading of driver with unicode path name</p>
<p>Own Id: OTP-11549
* 
Fixed a bug where starting Erlang without having an open stdin on fd 0 would sometimes deadlock the emulator when terminating.</p>
<p>Own Id: OTP-11558
* 
The option '-names' in epmd now works on Windows (Thanks to Johannes Weißl)</p>
<p>Own Id: OTP-11565
* 
Correction of the examples in escript documentation. (Thanks to Pierre Fenoll).</p>
<p>Own Id: OTP-11577
* 
Fix bs_get_integer instruction</p>
<p>The instruction bs_get_integer could unnecessarily trigger a garbage collection in failure cases which is unwanted or outright dangerous.</p>
<p>Ex:</p>
<p>&lt;<X:Sz,_/bits>&gt; = &lt;&lt;"some binary"&gt;&gt;</p>
<p>Previously, if Sz induced X to a bignum it would reserved memory size this on the heap via a garbage collection before checking if the size could actually match.</p>
<p>It will now check the binary size before triggering a collection.</p>
<p>Own Id: OTP-11581
* 
Remove heap space overestimation in <em>binary_to_term</em> (and remote message reception) for integers in the intervals [-2147483648,-1] and [256,2147483647] on 64-bit emulators.</p>
<p>Own Id: OTP-11585
* 
Add support for detecting the separate tinfo library from ncurses (Thanks to Dirkjan Ochtman)</p>
<p>Own Id: OTP-11590
* 
Deprecation warning for system_flag(cpu_topology) has been extended for removal in OTP 18 (Thanks to Steve Vinoski for the update)</p>
<p>Own Id: OTP-11602
* 
Documentation improvement regarding some awkward wording around the +spp flag. (Thanks to Brian L. Troutwine )</p>
<p>Own Id: OTP-11607
* 
Fixed bug where sendfile would return the wrong error code for a remotely closed socket if the socket was in passive mode. (Thanks to Vincent Siliakus for reporting the bug.)</p>
<p>Own Id: OTP-11614
* 
Increase garbage collection tenure rate</p>
<p>The garbage collector tries to maintain the previous heap block size during a minor gc, i.e. 'need' is not utilized in determining the size of the new heap, instead it relies on tenure and garbage to be sufficiently large.</p>
<p>In instances during intense growing with exclusively live data on the heap coupled with delayed tenure, fullsweeps would be triggered directly after a minor gc to make room for 'need' since the new heap would be full.</p>
<p>To remedy this, the tenure of terms on the minor heap will always happen (if it is below the high watermark) instead of every other minor gc.</p>
<p>Characteristics Impact: Reduced CPU-time spent in garbage collection but may infer delays in collecting garbage from the heap. Tweak 'fullsweep_after' options to increase gc pressure if needed.</p>
<p>Own Id: OTP-11617
* 
Fix bug when comparing integers with floats larger than 2^992. The bug could potentially cause memory corruption on 32-bit emulators.</p>
<p>Own Id: OTP-11618
* 
Cross-compilation fixes for TileraMDE-3.0.1.125620</p>
<p>Own Id: OTP-11635
* 
sendfile no longer uses async threads by default</p>
<p>This has been done because a slow client attack is possible if the async thread pool is used. The scenario is:</p>
<p>Client does a request for a file and then slowly receives the file one byte at a time. This will eventually fill the async thread pool with blocking sendfile operations and thus starving the vm of all file operations.</p>
<p>If you still want to use the async threads pool for sendfile an option to enable it has been introduced.</p>
<p>Thanks to Christopher Faulet for identifying this vulnerability.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11639
* 
Do proper rollback of calls to <em>enif_open_resource_type</em> when load/upgrade callbacks of NIF library return failure.</p>
<p>Own Id: OTP-11722
* 
Changed the default configuration when configuring with <em>$ERL_TOP/configure</em> to be the same as when configuring with <em>$ERL_TOP/otp_build configure</em> .</p>
<p>Previously floating point exceptions got enabled by default on Linux when HiPE was enabled when configuring with <em>$ERL_TOP/configure</em> , but not when configuring with <em>$ERL_TOP/otp_build configure</em> . The default is now in both cases not to use floating point exceptions since there still exist unresolved issues with floating point exceptions on Linux.</p>
<p>For more information see <a href="./INSTALL">doc/installation_guide/INSTALL</a> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11723
* 
A comment in erl_db_tree.c no longer differ from the code. (Thanks to Cobus Carstens)</p>
<p>Own Id: OTP-11793
* 
Fix epmd debug functionality for VxWorks (Thanks to Jay True)</p>
<p>Own Id: OTP-11808
* 
Use closefrom/2 when available in child_setup (Thanks to Rick Reed and Anthony Ramine)</p>
<p>Own Id: OTP-11809
* 
Fix dtrace/systemtap bug where the probe arguments would be concatenated due to faulty length calculation.</p>
<p>Thanks to Michal Ptaszek and Scott Lystig Fritchie</p>
<p>Own Id: OTP-11816
* 
It is now better documented that the <em>+fn</em><em> flags to </em>erl* also affect how command line parameters and environment variables are read. (Thanks to Vlad Dumitrescu)</p>
<p>Own Id: OTP-11818</p>
<h2 id="improvements-and-new-features_29">Improvements and New Features</h2>
<ul>
<li>Options to set match_limit and match_limit_recursion are added to re:run. The option report_errors is also added to get more information when re:run fails due to limits or compilation errors.</li>
</ul>
<p>Own Id: OTP-10285
* 
Dialyzer's <em>unmatched_return</em> warnings have been corrected.</p>
<p>Own Id: OTP-10908
* 
A common case is to wrap an argument to <em>list_to_binary/1</em> in a list to ensure conversion can happen even though the argument may already be a binary. Take special care of this case and do not copy binary.</p>
<p>Impact: May cause incompatibility since a single binary is no longer copied. Use <em>binary:copy/1,2</em> instead.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11082
* 
Make erlang:open_port/2 spawn and spawn_executable handle unicode.</p>
<p>Own Id: OTP-11105
* 
Handle unicode (widestring) in erl, erlc, heart, etc on windows.</p>
<p>Own Id: OTP-11135
* 
The version of the PCRE library Used by Erlang's re module is raised to 8.33 from 7.6. This means, among other things, better Unicode and Unicode Character Properties support. New options connected to PCRE 8.33 are also added to the re module (ucd, notempty_atstart, no_start_optimize). PCRE has extended the regular expression syntax between 7.6 and 8.33, why this imposes a potential incompatibility. Only very complicated regular expressions may be affected, but if you know you are using obscure features, please test run your regular expressions and verify that their behavior has not changed.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11204
* 
Filenames containing UTF-8 encoded characters can now be handled by erlc.</p>
<p>If you have set the <em>ERLC_EMULATOR</em> environment variable, note that <em>erlc</em> in OTP 17 will only work with <em>erl</em> in OTP 17 since the protocol between the <em>erlc</em> program and the <em>erl_compile</em> module has changed.</p>
<p>Own Id: OTP-11248
* 
By giving --enable-static-{nifs,drivers} to configure it is now possible to statically linking of nifs and drivers to the main Erlang VM binary. At the moment only the asn1 and crypto nifs of the Erlang/OTP nifs and drivers have been prepared to be statically linked. For more details see the Installation Guide in the System documentation.</p>
<p>Own Id: OTP-11258
* 
Erlang/OTP has been ported to the realtime operating system OSE. The port supports both smp and non-smp emulator. For details around the port and how to started see the User's Guide in the <strong>ose</strong> application.</p>
<p>Note that not all parts of Erlang/OTP has been ported.</p>
<p>Notable things that work are: non-smp and smp emulators, OSE signal interaction, crypto, asn1, run_erl/to_erl, tcp, epmd, distribution and most if not all non-os specific functionality of Erlang.</p>
<p>Notable things that does not work are: udp/sctp, os_mon, erl_interface, binding of schedulers.</p>
<p>Own Id: OTP-11334
* 
Add the {active,N} socket option for TCP, UDP, and SCTP, where N is an integer in the range -32768..32767, to allow a caller to specify the number of data messages to be delivered to the controlling process. Once the socket's delivered message count either reaches 0 or is explicitly set to 0 with inet:setopts/2 or by including {active,0} as an option when the socket is created, the socket transitions to passive ({active, false}) mode and the socket's controlling process receives a message to inform it of the transition. TCP sockets receive {tcp_passive,Socket}, UDP sockets receive {udp_passive,Socket} and SCTP sockets receive {sctp_passive,Socket}.</p>
<p>The socket's delivered message counter defaults to 0, but it can be set using {active,N} via any gen_tcp, gen_udp, or gen_sctp function that takes socket options as arguments, or via inet:setopts/2. New N values are added to the socket's current counter value, and negative numbers can be used to reduce the counter value. Specifying a number that would cause the socket's counter value to go above 32767 causes an einval error. If a negative number is specified such that the counter value would become negative, the socket's counter value is set to 0 and the socket transitions to passive mode. If the counter value is already 0 and inet:setopts(Socket, [{active,0}]) is specified, the counter value remains at 0 but the appropriate passive mode transition message is generated for the socket.</p>
<p>Thanks to Steve Vinoski</p>
<p>Own Id: OTP-11368
* 
A new optional scheduler utilization balancing mechanism has been introduced. For more information see the <a href="./erl#+sub">erl#+sub</a> command line argument.</p>
<p>Characteristics impact: None, when not enabled. When enabled, changed timing in the system, normally a small overhead due to measuring of utilization and calculating balancing information. On some systems, such as old Windows systems, the overhead can be quite substantial. This time measurement overhead highly depend on the underlying primitives provided by the OS.</p>
<p>Own Id: OTP-11385
* 
A call to either the <em>garbage_collect/1</em> BIF or the <em>check_process_code/2</em> BIF may trigger garbage collection of another processes than the process calling the BIF. The previous implementations performed these kinds of garbage collections without considering the internal state of the process being garbage collected. In order to be able to more easily and more efficiently implement yielding native code, these types of garbage collections have been rewritten. A garbage collection like this is now triggered by an asynchronous request signal, the actual garbage collection is performed by the process being garbage collected itself, and finalized by a reply signal to the process issuing the request. Using this approach processes can disable garbage collection and yield without having to set up the heap in a state that can be garbage collected.</p>
<p>The <a href="../erts/erlang#garbage_collect/2">erts/erlang#garbage_collect/2</a> , and <a href="../erts/erlang#check_process_code/3">erts/erlang#check_process_code/3</a> BIFs have been introduced. Both taking an option list as last argument. Using these, one can issue asynchronous requests.</p>
<p><em>code:purge/1</em> and <em>code:soft_purge/1</em> have been rewritten to utilize asynchronous <em>check_process_code</em> requests in order to parallelize work.</p>
<p>Characteristics impact: A call to the <em>garbage_collect/1</em> BIF or the <em>check_process_code/2</em> BIF will normally take longer time to complete while the system as a whole wont be as much negatively effected by the operation as before. A call to <em>code:purge/1</em> and <em>code:soft_purge/1</em> may complete faster or slower depending on the state of the system while the system as a whole wont be as much negatively effected by the operation as before.</p>
<p>Own Id: OTP-11388 Aux Id: OTP-11535, OTP-11648
* 
Cleanup 'Buckets' and 'Time left' fields in crashdump to ease parsing.</p>
<p>Own Id: OTP-11419
* 
Add sync option to file:open/2.</p>
<p>The sync option adds the POSIX O_SYNC flag to the open system call on platforms that support the flag or its equivalent, e.g., FILE_FLAG_WRITE_THROUGH on Windows. For platforms that don't support it, file:open/2 returns {error, enotsup} if the sync option is passed in. Thank to Steve Vinoski and Joseph Blomstedt</p>
<p>Own Id: OTP-11498
* 
erlang:binary_to_term will now cost an appropriate amount of reductions and will interrupt (yield) for reschedule if the term is big. This avoids too long schedules when binary_to_term is used. (Thanks to Svante Karlsson for the original patch)</p>
<p>Impact: Programs running binary_to_term on large binaries will run more smoothly, but rescheduling will impact the single process performance of the BIF. Single threaded benchmarks might show degraded performance of the BIF, while general system behaviour will be improved.</p>
<p>Own Id: OTP-11535 Aux Id: OTP-11388
* 
Added high resolution icon for windows. (Thanks to Daniel Goertz for the inspiration.)</p>
<p>Own Id: OTP-11560
* 
Migration of memory carriers has been enabled by default on all ERTS internal memory allocators based on the <a href="./erts_alloc#alloc_util">erts_alloc#alloc_util</a> framework except for <em>temp_alloc</em> . That is, <a href="./erts_alloc#M_acul">erts_alloc#M_acul</a> is default for these allocators. Note that this also implies changed allocation strategies for all of these allocators. They will all now use the "address order first fit carrier best fit" strategy.</p>
<p>By passing <em>+Muacul 0</em> on the command line, all configuration changes made by this change will be reverted.</p>
<p>Characteristics impact: Improved memory characteristics with a smaller memory footprint at the expense of a quite small performance cost.</p>
<p>Own Id: OTP-11604 Aux Id: OTP-10279
* 
A clarification has been added to the documentation of <em>-on_load()</em> in the Reference Manual that it is only recommended for loading NIF libraries.</p>
<p>Own Id: OTP-11611
* 
<em>+fnaw</em> is now default when starting the emulator; it used to be <em>+fnl</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11612
* 
EEP43: New data type - Maps</p>
<p>With Maps you may for instance:
 <dl></p>
<dt>  </dt>

<dd> M0 = #{ a => 1, b => 2}, % create associations </dd>

<dt>  </dt>

<dd> M1 = M0#{ a := 10 }, % update values </dd>

<dt>  </dt>

<dd> M2 = M1#{ "hi" => "hello"}, % add new associations </dd>

<dt>  </dt>

<dd>
#{ "hi" := V1, a := V2, b := V3} = M2. % match keys with values
</dd>

<p></dl> 
For information on how to use Maps please see Map Expressions in the <a href="../doc/reference_manual/expressions#map_expressions">Reference Manual</a> .</p>
<p>The current implementation is without the following features:
 <dl></p>
<dt>  </dt>

<dd> No variable keys </dd>

<dt>  </dt>

<dd> No single value access </dd>

<dt>  </dt>

<dd> No map comprehensions </dd>

<p></dl> 
Note that Maps is <strong>experimental</strong> during OTP 17.0.</p>
<p>Own Id: OTP-11616
* 
The previously deprecated driver API function <em>driver_async_cancel()</em> has been removed. Due to this, the driver API version has been bumped to 3.0.</p>
<p>Thanks to Steve Vinoski.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11628
* 
Experimental "dirty scheduler" functionality has been introduced. In order to try the functionality out, you need to pass the command line argument <em>--enable-dirty-schedulers</em> to <em>configure</em> when building the system.</p>
<p>Dirty schedulers can currently only be used by NIFs on a system with SMP support. More information can be found in the <a href="./erl_nif#dirty_nifs">erl_nif#dirty_nifs</a> documentation, the <a href="erl">erl</a> documentation, and in the git commit comment of commit 'c1c03ae4ee50e58b7669ea88ec4d29c6b2b67c7b'.</p>
<p>Note that the functionality is <strong>experimental</strong> , and <strong>not supported</strong> . This functionality <strong>will</strong> be subject to backward incompatible changes. You should <strong>not</strong> enable the dirty scheduler functionality on production systems. It is only provided for testing.</p>
<p>Thanks to Steve Vinoski.</p>
<p>Own Id: OTP-11629
* 
Improve reduction cost and yielding of <em>term_to_binary</em> . The reduction cost is increased and garbage collection is disabled during yield.</p>
<p>Impact: Improves system responsiveness when <em>term_to_binary</em> is called with large terms without significant degradation of single threaded performance.</p>
<p>Own Id: OTP-11648 Aux Id: OTP-11388
* 
By default, the system's version of zlib will be used, provided its version is 1.2.4 or higher; otherwise the built-in zlib will be used. The built-in version of zlib has been bumped to 1.2.8. (Use the <em>--enable-builtin-zlib</em> option to <em>configure</em> to force the use of the built-in zlib.)</p>
<p>Own Id: OTP-11669
* 
The default float encoding in binary_to_term and external_size has been changed to use minor_mode 1 instead of 0.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11738
* 
Introduced the <em>configure</em> option <em>--with-assumed-cache-line-size=SIZE</em> . For more information see <a href="./INSTALL">doc/installation_guide/INSTALL</a> .</p>
<p>Own Id: OTP-11742
* 
Halfword emulator is marked as deprecated. It still works as before but is planned to be removed in a future major release.</p>
<p>Own Id: OTP-11777
* 
The external format for Maps has changed in a way that is not compatible with the format used in OTP 17.0-rc1 and OTP 17.0-rc2.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11782
* 
Fixed faulty make dependency that would make some make versions fail while building gen_git_version.mk.</p>
<p>Own Id: OTP-11784
* 
Introduced functionality for allowing old drivers and NIF libraries to be loaded during a transition period. For more information see <a href="../erts/erl_driver#version_management">the version management section in the documentation</a> and <a href="../erts/erl_nif#version_management">the version management section in the documentation</a> .</p>
<p>Own Id: OTP-11799
* 
Support file paths longer than 259 characters on Windows. Long absolute paths are automatically converted to UNC format with a *\?* prefix which is the only way to represent long paths. The 259 character limit still applies for individual file names, relative paths and the current working directory.</p>
<p>Own Id: OTP-11813
* 
Document that escript:create/2 also accepts a 3-elements tuple containing files and zip:create/3 options to build a zip file.</p>
<p>Thanks to Pierre Fenoll</p>
<p>Own Id: OTP-11827
* 
Add systemd socket activation for epmd.</p>
<p>Thanks to Matwey V. Kornilov</p>
<p>Own Id: OTP-11829</p>
<h2 id="erts-51041">Erts 5.10.4.1</h2>
<h2 id="known-bugs-and-problems">Known Bugs and Problems</h2>
<ul>
<li>When using gen_tcp:connect and the <em>fd</em> option with <em>port</em> and/or <em>ip</em> , the <em>port</em> and <em>ip</em> options were ignored. This has been fixed so that if <em>port</em> and/or <em>ip</em> is specified together with <em>fd</em> a bind is requested for that <em>fd</em> . If <em>port</em> and/or <em>ip</em> is not specified bind will not be called.</li>
</ul>
<p>Own Id: OTP-12061</p>
<h2 id="erts-5104">Erts 5.10.4</h2>
<h2 id="fixed-bugs-and-malfunctions_103">Fixed Bugs and Malfunctions</h2>
<ul>
<li>When normalizing paths, erl_prim_loader would always convert backslash to forward slash. This is correct on Windows, but not on other operating systems. erl_prim_loader now checks which OS is running before performing this conversion.</li>
</ul>
<p>Own Id: OTP-11170
* 
Fixed syslog defines and defined LOG_ERR for systems without syslog.h. Thanks to Matt Lewandowsky.</p>
<p>Own Id: OTP-11349
* 
Check all pattern arguments passed to binary:matches/2. Thanks to Mike Sassak.</p>
<p>Own Id: OTP-11350
* 
Fix two small silent rules omissions. Thanks to Anthony Ramine.</p>
<p>Own Id: OTP-11351
* 
Teach configure to detect if posix_memalign cannot align to more than the system page size.</p>
<p>For cross-compiled systems a new environment variable called erl_xcomp_posix_memalign has been introduced to indicate whether posix_memalign should be used.</p>
<p>Own Id: OTP-11371
* 
Fix bsr bug occurring when shifting a huge number a huge number of bits to the right. Thanks to Lars Hesel Christensen.</p>
<p>Own Id: OTP-11381
* 
Fix memory leak for distributed monitors</p>
<p>Own Id: OTP-11410
* 
Fix various typos in erts, kernel and ssh. Thanks to Martin Hässler.</p>
<p>Own Id: OTP-11414
* 
Crashdumps initiated by out-of-memory on process spawn could cause the beam to segfault during crashdump writing due to invalid pointers.</p>
<p>The pointers are invalid since the process creation never finished. This fix removes these processes from the printouts. Reported by Richard Carlsson.</p>
<p>Own Id: OTP-11420
* 
Crash dumps from 64-bit Erlang machines would have all memory addresses truncated to 32 bits, which could cause trouble inspecting processes message queues and stacks in the crashdump viewer.</p>
<p>Own Id: OTP-11450
* 
Threads other than schedulers threads could make thread unsafe accesses when support for migration of memory carriers had been enabled, i.e., when the <a href="./erts_alloc#M_acul">erts_alloc#M_acul</a> command line flag had been passed to <a href="erl">erl</a> . This could cause corruption of the VMs internal state.</p>
<p>This bug was introduced in erts-5.10.2 when the support for migration of memory carriers was introduced.</p>
<p>Own Id: OTP-11456 Aux Id: OTP-10279
* 
Fix bug in <em>binary_to_term</em> for invalid bitstrings and very large binaries (&gt;2Gb).</p>
<p>Own Id: OTP-11479
* 
Under rare circumstances a process calling <a href="../kernel/inet#close/1">kernel/inet#close/1</a> , <a href="../kernel/gen_tcp#close/1">kernel/gen_tcp#close/1</a> , <a href="../kernel/gen_udp#close/1">kernel/gen_udp#close/1</a> , or <a href="../kernel/gen_sctp#close/1">kernel/gen_sctp#close/1</a> could hang in the call indefinitely.</p>
<p>Own Id: OTP-11491
* 
Fix bug that could cause a 32-bit emulator to always crash at start (since R16B01) depending on the alignment of static data in the beam executable.</p>
<p>Own Id: OTP-11496
* 
Fix benign bugs regarding bitstring compare. Only a nuisance for debug and valgrind VM.</p>
<p>Own Id: OTP-11501
* 
Silence warnings (Thanks to Anthony Ramine)</p>
<p>Own Id: OTP-11517
* 
The default wordsize of the emulator (beam) is now determined by compiler default on Mac OSX (Darwin). This was previously forced to 32bits by the configure script unless otherwise specified.</p>
<p>Own Id: OTP-11521</p>
<h2 id="improvements-and-new-features_30">Improvements and New Features</h2>
<ul>
<li>A new memory allocation feature called "super carrier" has been introduced. The super carrier feature can be used in different ways. It can for example be used for pre-allocation of all memory that the runtime system should be able to use.</li>
</ul>
<p>By default the super carrier is disabled. It is enabled by passing the <a href="../erts/erts_alloc#MMscs">erts/erts_alloc#MMscs</a> command line argument. For more information see the documentation of the <a href="../erts/erts_alloc#MMsco">erts/erts_alloc#MMsco</a> , <a href="../erts/erts_alloc#MMscrfsd">erts/erts_alloc#MMscrfsd</a> , <a href="../erts/erts_alloc#MMscrpm">erts/erts_alloc#MMscrpm</a> , <a href="../erts/erts_alloc#MMscs">erts/erts_alloc#MMscs</a> , <a href="../erts/erts_alloc#Musac">erts/erts_alloc#Musac</a> , and, <a href="../erts/erts_alloc#Mlpm">erts/erts_alloc#Mlpm</a> command line arguments in the <a href="./erts_alloc">erts/erts_alloc</a> documentation.</p>
<p>Since it is disabled by default there should be no impact on system characteristics if not used.</p>
<p>This change has been marked as a potential incompatibility since the returned list when calling <a href="../erts/erlang#system_info_allocator_tuple">erts/erlang#system_info_allocator_tuple</a> now also include an <em>{erts_mmap, _}</em> tuple as one element in the list.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11149
* 
Added erlang:system_info(ets_limit) to provide a way to retrieve the runtime's maximum number of ETS tables. Thanks to Steve Vinoski</p>
<p>Own Id: OTP-11362
* 
Add new BIF os:unsetenv/1 which deletes an environment variable. Thanks to Martin Hässler.</p>
<p>Own Id: OTP-11446
* 
Introduced a new guarantee regarding exit signals from ports:</p>
<p>If the process calling one of the synchronous port BIFs listed below is linked to the port identified by the first argument, and the port exits before sending the result of the port operation, the exit signal issued due to this link will be received by the processes before the BIF returns, or fail with an exception due to the port not being open.</p>
<p>The synchronous port BIFs are:</p>
<ul>
<li><a href="./erlang#port_close/1">erlang#port_close/1</a></li>
<li><a href="./erlang#port_command/2">erlang#port_command/2</a></li>
<li><a href="./erlang#port_command/3">erlang#port_command/3</a></li>
<li><a href="./erlang#port_connect/2">erlang#port_connect/2</a></li>
<li><a href="./erlang#port_control/3">erlang#port_control/3</a></li>
<li><a href="./erlang#port_call/3">erlang#port_call/3</a></li>
<li><a href="./erlang#port_info/1">erlang#port_info/1</a></li>
<li><a href="./erlang#port_info/2">erlang#port_info/2</a></li>
</ul>
<p>Note that some ports under certain circumstances unlink themselves from the calling process before exiting, i.e. even though the process linked itself to the port there might be no link triggering an exit signal.</p>
<p>Characteristics impact: The return or exception from the synchronous port BIF will be delayed if the port simultaneously exit due to some issue unrelated to the outstanding synchronous port BIF call. In all other cases characteristics are unchanged.</p>
<p>Own Id: OTP-11489</p>
<h2 id="erts-51031">Erts 5.10.3.1</h2>
<h2 id="improvements-and-new-features_31">Improvements and New Features</h2>
<ul>
<li>Memory allocators will be able to create <em>sys_alloc</em> carriers as fallback, if <em>mseg_alloc</em> cannot create more carriers, on systems with <em>posix_memalign()</em> support. This is similar to how it worked in pre-R16 releases.</li>
</ul>
<p>Windows systems will create carriers using <em>_aligned_malloc()</em> and can by this use the new optimized allocator header scheme introduced in R16 on other platforms.</p>
<p>Own Id: OTP-11318</p>
<h2 id="erts-5103">Erts 5.10.3</h2>
<h2 id="fixed-bugs-and-malfunctions_104">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The documentation of predefined types and built-in types has been corrected.</li>
</ul>
<p>Own Id: OTP-11090
* 
Fix changing terminal parameters in to_erl</p>
<p>Change the behaviour of to_erl to use TCSADRAIN instead of TCSANOW when changing terminal parameters. This makes the serial driver wait for the output queues to be empty before applying the terminal parameter change. Thanks to Stefan Zegenhagen.</p>
<p>Own Id: OTP-11206
* 
The default value of {flush, boolean()} in erlang:halt/2 is documented to be 'true' if the status is an integer. The implementation behaviour was reversed. The Implementation is now corrected to adhere to the documentation. Thanks to Jose Valim for reporting the error.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11218
* 
Fix serious race bug in R16B01 that could cause PID mix-ups when a lot of processes were spawned and terminated in a very rapid pace on an SMP emulator with at least two scheduler threads.</p>
<p>Own Id: OTP-11225
* 
Validating a trace pattern with the option silent no longer incorrectly enables/disables the silent option of the calling process.</p>
<p>Own Id: OTP-11232
* 
Fixed a bug where GCC 4.8 and later use a more aggressive loop optimization algorithm that broke some previously working code in the efile driver. Thanks to Tomas Abrahamsson for reporting this issue.</p>
<p>Own Id: OTP-11246
* 
Fixed bug when printing memory allocator acul option in crash dump.</p>
<p>Own Id: OTP-11264
* 
Opening a new compressed file on Windows could in rare (random) cases result in {error,eisdir} or other error codes although it should have succeeded. This is now corrected.</p>
<p>Own Id: OTP-11265
* 
Fixed a race condition when closing a trace port that would cause the emulator to crash.</p>
<p>Own Id: OTP-11290</p>
<h2 id="improvements-and-new-features_32">Improvements and New Features</h2>
<ul>
<li>There is a new somewhat experimental socket option 'netns' that can set the network namespace for a socket on Linux:es where it is supported. See the documentation.</li>
</ul>
<p>Own Id: OTP-11157
* 
New allocator strategy <em>aoffcbf</em> (address order first fit carrier best fit). Supports carrier migration but with better CPU performance than <em>aoffcaobf</em> .</p>
<p>Own Id: OTP-11174
* 
Introduced functionality for inspection of system and build configuration.</p>
<p>Own Id: OTP-11196
* 
Fix matching of floating point middle-endian machines. Thanks to Johannes Weissl.</p>
<p>Own Id: OTP-11201
* 
Fix compile error on ARM and GCC versions greater than 4.1.0. Thanks to Johannes Weissl.</p>
<p>Own Id: OTP-11214
* 
run_erl: Redirect standard streams to /dev/null. Thanks to Johannes Weissl.</p>
<p>Own Id: OTP-11215
* 
Misc. corrections in documentation for erl_driver. Thanks to Giacomo Olgeni.</p>
<p>Own Id: OTP-11227
* 
Fix documentation regarding binary_part.</p>
<p>Own Id: OTP-11239
* 
Make edlin understand a few important control keys. Thanks to Stefan Zegenhagen.</p>
<p>Own Id: OTP-11251
* 
Export type zlib:zstream/0. Thanks to Loic Hoguin.</p>
<p>Own Id: OTP-11278
* 
Add erl option to set schedulers by percentages.</p>
<p>For applications where measurements show enhanced performance from the use of a non-default number of emulator scheduler threads, having to accurately set the right number of scheduler threads across multiple hosts each with different numbers of logical processors is difficult because the erl +S option requires absolute numbers of scheduler threads and scheduler threads online to be specified.</p>
<p>To address this issue, add a +SP option to erl, similar to the existing +S option but allowing the number of scheduler threads and scheduler threads online to be set as percentages of logical processors configured and logical processors available, respectively. For example, "+SP 50:25" sets the number of scheduler threads to 50% of the logical processors configured, and the number of scheduler threads online to 25% of the logical processors available. The +SP option also interacts with any settings specified with the +S option, such that the combination of options "+S 4:4 +SP 50:50" (in either order) results in 2 scheduler threads and 2 scheduler threads online.</p>
<p>Thanks to Steve Vinoski</p>
<p>Own Id: OTP-11282
* 
Extend erl_driver interface with lock names</p>
<p>Lock and thread names are already a feature in the driver interface. This extension will let developers read these names which eases debugging.</p>
<p>Own Id: OTP-11303
* 
Fix incorrect values returned by integer_to_binary/2. Thanks to Juan Jose Comellas.</p>
<p>Own Id: OTP-11311
* 
Fix system_flag scheduling_statistics - disable . Thanks to Steve Vinoski.</p>
<p>Own Id: OTP-11317
* 
The documentation of predefined types has been corrected Thanks to Kostis Sagonas.</p>
<p>Own Id: OTP-11321</p>
<h2 id="erts-5102">Erts 5.10.2</h2>
<h2 id="fixed-bugs-and-malfunctions_105">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug in prim_inet has been corrected. If the port owner was killed at a bad time while closing the socket port the port could become orphaned hence causing port and socket leaking. Reported by Fred Herbert, Dmitry Belyaev and others.</li>
</ul>
<p>Own Id: OTP-10497 Aux Id: OTP-10562
* 
Compilation fixes for NetBSD. Thanks to YAMAMOTO Takashi.</p>
<p>Own Id: OTP-10941
* 
Fixed a race condition when using delayed_write when writing to a file which would cause the same data to be written multiple times.</p>
<p>Own Id: OTP-10984
* 
Fix small memory leak from tracing with option <em>meta</em> .</p>
<p>Own Id: OTP-10997
* 
Correct typo in erlsrv usage. Thanks to Bryan Hunter</p>
<p>Own Id: OTP-11002
* 
ct_run: delete unused function. Thanks to Tuncer Ayaz.</p>
<p>Own Id: OTP-11003
* 
Corrections to run_erl/to_erl handshake behaviour.</p>
<p>Own Id: OTP-11012
* 
Fix typo in type: erlang:process_info_item(). Thanks to Andrew Tunnell-Jones.</p>
<p>Own Id: OTP-11024
* 
Fix src/dest overlap issue in ttsl driver. Thanks to Steve Vinoski.</p>
<p>Own Id: OTP-11064
* 
When sending to a port using <em>erlang:send(Port, Msg, [nosuspend])</em> , the send operation was performed synchronously. This bug has now been fixed.</p>
<p>Own Id: OTP-11076 Aux Id: OTP-10336
* 
When converting a faulty binary to a list with unicode:characters_to_list, the error return value could contain a faulty "rest", i.e. the io_list of characters that could not be converted was wrong. This happened only if input was a sub binary and conversion was from utf8. This is now corrected.</p>
<p>Own Id: OTP-11080
* 
Runtime system could crash when reporting stale <em>driver_select()</em> .</p>
<p>Own Id: OTP-11084
* 
Fix lock order violation for memory instrumentation (+Mim, +Mis, +Mit).</p>
<p>Own Id: OTP-11085
* 
Fixed some compilation warnings on miscellaneous platforms. Thanks to Anthony Ramine.</p>
<p>Own Id: OTP-11086
* 
Fixed issue when flushing i/o during shutdown on windows where the Erlang VM would sometime hang due to a race condition.</p>
<p>Own Id: OTP-11096
* 
Fixed issue where repeated calls to erlang:nodes() could cause unnecessary contention in the dist_table lock.</p>
<p>Own Id: OTP-11097
* 
Properly guard WIDE_TAG use with HAVE_WCWIDTH in ttsl_drv. Thanks to Anthony Ramine</p>
<p>Own Id: OTP-11106
* 
Fix some Makefile rules that didn't support silent rules. Thanks to Anthony Ramine.</p>
<p>Own Id: OTP-11111
* 
Fix receive support in erl_eval with a BEAM module. Thanks to Anthony Ramine.</p>
<p>Own Id: OTP-11137
* 
erlang:now() could suddenly jump ~24 days into the future on Windows. This is now corrected. Thanks to Garret Smith for reporting and testing fixes.</p>
<p>Own Id: OTP-11146
* 
erlang:term_to_binary will now cost an appropriate amount of reductions and will interrupt (yield) for reschedule if the term is big. This avoids too long schedules when term_to_binary is used.</p>
<p>Impact: Programs running term_to_binary on large terms will run more smothly, but rescheduling will impact the single process performance of the BIF. Single threaded benchmarks will show degraded performance of the BIF when called with very large terms, while general system behaviour will be improved. The overhead for allowing restart and reduction counting also degrades local performance of the BIF with between 5% and 10% even for small terms.</p>
<p>Own Id: OTP-11163</p>
<h2 id="improvements-and-new-features_33">Improvements and New Features</h2>
<ul>
<li>Replaced the lock protecting gathering of garbage collection statistics with a lock-free solution.</li>
</ul>
<p>Own Id: OTP-10271 Aux Id: kunagi-108 [04c5410f-9cc4-4696-8639-36bf98686c7a-7]
* 
Support for migration of memory carriers between memory allocator instances has been introduced.</p>
<p>By default this feature is not enabled and do not effect the characteristics of the system. When enabled it has the following impact on the characteristics of the system:</p>
<ul>
<li>Reduced memory footprint when the memory load is unevenly distributed between scheduler specific allocator instances.</li>
<li>Depending on the default allocaton strategy used on a specific allocator there might or might not be a slight performance loss.</li>
<li>When enabled on the <em>fix_alloc</em> allocator, a different strategy for management of fix blocks will be used.</li>
<li>The information returned from <a href="./erlang#system_info_allocator_tuple">erlang#system_info_allocator_tuple</a> , and <a href="./erlang#system_info_allocator_sizes">erlang#system_info_allocator_sizes</a> will be slightly different when this feature has been enabled. An <em>mbcs_pool</em> tuple will be present giving information about abandoned carriers, and in the <em>fix_alloc</em> case no <em>fix_types</em> tuple will be present.</li>
</ul>
<p>For more information, see the documentation of the <a href="./erts_alloc#M_acul">erts_alloc#M_acul</a> command line argument.</p>
<p>Own Id: OTP-10279
* 
Change specs for spawn_opt to use the process_level() type declaration instead of re-defining it in various places. Thanks to Kostis Sagonas.</p>
<p>Own Id: OTP-11008
* 
Postscript files no longer needed for the generation of PDF files have been removed.</p>
<p>Own Id: OTP-11016
* 
Erlang source files with non-ASCII characters are now encoded in UTF-8 (instead of latin1).</p>
<p>Own Id: OTP-11041 Aux Id: OTP-10907
* 
Optimization of simultaneous <em>inet_db</em> operations on the same socket by using a lock free implementation.</p>
<p>Impact on the characteristics of the system: Improved performance.</p>
<p>Own Id: OTP-11074
* 
The <em>high_msgq_watermark</em> and <em>low_msgq_watermark</em> <em>inet</em> socket options introduced in OTP-R16A could only be set on TCP sockets. These options are now generic and can be set on all types of sockets.</p>
<p>Own Id: OTP-11075 Aux Id: OTP-10336
* 
A new better algorithm for management of the process, and port tables has been introduced.</p>
<p>Impact on the characteristics of the system:</p>
<ul>
<li>The new algorithm ensures that both insert and delete operations can be made in O(1) time complexity. Previously used algorithm either caused insert or delete to be O(N).</li>
<li>The new algorithm will also ensure that reuse of identifiers will be less frequent than when the old algorithm was used.</li>
<li>Previously used algorithm ensured that the latest created identifier compared as the largest when comparing two identifiers of the same type that had been created on the same node as long as no identifiers had been reused. Since identifiers can be reused quite fast, one has never been able to rely on this property. Due to the introduction of this new algorithm this property will not hold even if no identifiers has been reused yet. This could be considered as an incompatibility.</li>
</ul>
<p>Due to the above mensioned potential incompatibility, it will still be possible to enable the old algorithm for some time. The command line argument <a href="./erl#+P">erl#+P</a> will enable the old algorithm on the process table, and <a href="./erl#+Q">erl#+Q</a> will do the same for the port table. These command line arguments are however deprecated as of their introduction and have been scheduled for removal in OTP-R18.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-11077
* 
Support wide characters in the shell through wcwidth(). Thanks to Anthony Ramine. Reported by Loïc Hoguin.</p>
<p>Own Id: OTP-11088
* 
Added total used memory for each process in erlang crash dumps.</p>
<p>Own Id: OTP-11098
* 
Added support for hipe on Raspberry Pi (armv6l). Thanks to Klaus Alfert.</p>
<p>Own Id: OTP-11125
* 
Remove 'query' from the list of reserved words in docs. Thanks to Matthias Endler and Loïc Hoguin.</p>
<p>Own Id: OTP-11158
* 
Lift static limitation (FD_SETSIZE) for file descriptors on Mac OS X. (Thanks to Anthony Ramine)</p>
<p>Own Id: OTP-11159</p>
<h2 id="known-bugs-and-problems_1">Known Bugs and Problems</h2>
<ul>
<li>Miscellaneous native code in OTP misbehave either due to lengthy execution, or due to not bumping reductions properly. Problems typically occur when passing huge sets of data to a misbehaving BIF. Fixing this has high priority and is being worked on, but there will remain issues like this for some time.</li>
</ul>
<p>In order to alleviate problems with scheduling which might occur when executing misbehaving native code, the command line argument <a href="./erl#+sfwi">+sfwi</a> has been introduced.</p>
<p>By default this feature is disabled and you are advised not to enable it if you do not encounter problems with misbehaving native code.</p>
<p>When enabled it has the following impact on the characteristics of the system:</p>
<ul>
<li>Work will always be distributed between schedulers even when executing misbehaving native code.</li>
<li>It may cause an increased amount of processes and/or ports bouncing between schedulers which in turn will cause a performance loss.</li>
<li>It may cause reduced performance due to reduced or lost work compaction when all schedulers do not execute under full load.</li>
<li>An increased contention on run queue locks.</li>
</ul>
<p>Own Id: OTP-11164</p>
<h2 id="erts-51012">Erts 5.10.1.2</h2>
<h2 id="fixed-bugs-and-malfunctions_106">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug in the implementation of offline schedulers has been fixed. The bug was introduced in OTP-R16A/ERTS-5.10, and caused work-stealing between schedulers to fail. This in turn, caused work to accumulate in some run-queues. The bug was only triggered when there were offline schedulers in the system, i.e., when the amount of online schedulers was less than the total amount of schedulers. The effect of the bug got more severe the larger amount of offline schedulers the system had.</li>
</ul>
<p>Own Id: OTP-11022 Aux Id: OTP-9892</p>
<h2 id="erts-51011">Erts 5.10.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_107">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The BIF <a href="./erlang#is_process_alive/1">erlang#is_process_alive/1</a> could prematurely return <em>false</em> while the process being inspected was terminating. This bug was introduced in ERTS-5.10.</li>
</ul>
<p>Own Id: OTP-10926
* 
Fix a problem in <em>erlang:delete_element/2</em> where the call could corrupt one word of stack if the heap and stack met during call.</p>
<p>Own Id: OTP-10932
* 
The <a href="./erl#+sws">erl#+sws</a> and <a href="./erl#+swt">erl#+swt</a> system flags failed if no white space were passed between the parameter and value parts of the flags. Upon failure, the runtime system refused to start.</p>
<p>Own Id: OTP-11000</p>
<h2 id="improvements-and-new-features_34">Improvements and New Features</h2>
<ul>
<li>Scheduler threads will now by default be less eager requesting wakeup due to certain cleanup operations. This can also be controlled using the <a href="./erl#+swct">erl#+swct</a> command line argument of <a href="erl">erl</a> .</li>
</ul>
<p>Own Id: OTP-10994</p>
<h2 id="erts-5101">Erts 5.10.1</h2>
<h2 id="fixed-bugs-and-malfunctions_108">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Threads created internally in the runtime system by vanilla, fd, and spawn drivers on Windows systems could make thread unsafe calls to <em>driver_select()</em> .</li>
</ul>
<p>Own Id: OTP-10802
* 
Threads created internally in the runtime system by the vanilla, fd, and spawn drivers on Windows systems could make unsafe memory accesses to driver data after port had terminated.</p>
<p>Own Id: OTP-10803
* 
The runtime system could crash when flushing data to standard out or standard error on Windows.</p>
<p>Own Id: OTP-10807
* 
Bugs due to the port optimizations introduced in erts-5.10/OTP-R16A have been fixed:</p>
<ul>
<li>Memory leak when terminating ports</li>
<li>Memory leak when reaching the system limit of maximum amount of concurrently existing ports</li>
<li>Crashs due to missing, or late test of bad port handle</li>
<li>The newly introduced driver API function <em>erl_drv_busy_msgq_limits()</em> could not be used by dynamically linked in drivers on Windows</li>
</ul>
<p>Own Id: OTP-10809 Aux Id: OTP-10336
* 
Fix <em>{packet,httph}</em> header capitalization for unrecognized header fields longer than 20 charachters such as <em>Sec-Websocket-Version</em> . The limit is simply raised from 20 to 50 characters with the hope that valid headers longer than 50 are not used.</p>
<p>Own Id: OTP-10824
* 
Fix rounding issues in float_to_list/1,2. Thanks to Serge Aleynikov</p>
<p>Own Id: OTP-10837
* 
Fix memory leak in file driver introduced in R16A.</p>
<p>Own Id: OTP-10841
* 
A bug in an ERTS internal queue implementation could cause the loss of a wake up signal to a consumer thread. This has now been fixed.</p>
<p>The effect of this bug, when triggered, was often only a small or even no delay of certain operations. This since, threads often are woken due to other unrelated reasons. However, if the consumer thread was not woken due to other reasons when the bug was triggered, these operations could be left hanging, potentially for ever. Such effects seems to have been very rare, but we have on at least one occasion gotten a report about such an issue.</p>
<p>Operations potentially effected by this bug:
 <dl></p>
<dt> Inspection of memory allocation status </dt>

<dd>
The Erlang process calling erlang:memory/[0,1] , or erlang:system_info({allocator|allocator_sizes, _}) could potentially hang waiting for responses from involved threads.
</dd>

<dt> Async thread pool jobs </dt>

<dd>
An async thread pool job request and/or reply could potentially be left hanging. In OTP this only effected file operations, but user implemented drivers using the async thread pool were also effected. In the file operation case, this would typically translate into an Erlang process potentially hanging on the file operation.
</dd>

<dt> Shutting down the runtime system </dt>

<dd>
Due to the issue with the async thread pool mentioned above, flushing of I/O while terminating the runtime system could also potentially hang.
</dd>

<dt> ETS memory deallocation </dt>

<dd>
Scheduled jobs handling deallocation of the main structure of an ETS table could potentially hang. This more or less only translates into minor memory leaks.
</dd>

<dt> Shutting down distribution </dt>

<dd>
The distribution shutdown phase used when manually shutting down the distribution, i.e., when calling net_kernel:stop() , could potentially hang.
</dd>

<p></dl> 
Own Id: OTP-10854
* 
OS X Snow Leopard now only uses write, as writev does not work properly on very large files.</p>
<p>Own Id: OTP-10858
* 
Fixed a bug where line oriented file I/O using read_ahead was very slow for files with very large difference in line length.</p>
<p>Own Id: OTP-10859
* 
In erts-5.10 (R16A) faulty hashvalues were produced for non-ASCII atoms (characters in byte-range 128..255). This has now been fixed and hashvalues conforms to previous OTP releases.</p>
<p>Own Id: OTP-10860
* 
Fixes of memory accesses that might be thread unsafe when the runtime system has been linked against third-party libraries for atomic memory operations during the build. Most builds are uneffected by this bug. If triggered, the runtime system will most likely crash more or less immediately.</p>
<p>Own Id: OTP-10875 Aux Id: OTP-10854
* 
Fixed a bug where it was longer possible to give the +sws proposal flag to non-smp emulators.</p>
<p>Own Id: OTP-10881 Aux Id: seq12258
* 
Faulty type to bytes read for ReadFile on Windows. This could cause windows systems to misbehave. The correct type is now used.</p>
<p>Own Id: OTP-10890
* 
Change default max ports for Windows to 8192. Having a too large value caused Windows to not be able to recover properly. If you want to use another value, pass <em>+Q Value</em> to erl or werl.</p>
<p>Own Id: OTP-10892
* 
Fix rare crash on halfword vm during code loading.</p>
<p>Own Id: OTP-10896</p>
<h2 id="improvements-and-new-features_35">Improvements and New Features</h2>
<ul>
<li>Tuple funs (deprecated in R15B) are no longer supported.</li>
</ul>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10170
* 
Added four new bifs, <em>erlang:binary_to_integer/1,2</em> , <em>erlang:integer_to_binary/1</em> , <em>erlang:binary_to_float/1</em> and <em>erlang:float_to_binary/1,2</em> . These bifs work similarly to how their list counterparts work, except they operate on binaries. In most cases converting from and to binaries is faster than converting from and to lists.</p>
<p>These bifs are auto-imported into erlang source files and can therefore be used without the <em>erlang</em> prefix.</p>
<p>Own Id: OTP-10300 Aux Id: kunagi-74 [74]
* 
The experimental support for packages has been removed.</p>
<p>Own Id: OTP-10348 Aux Id: kunagi-316 [227]
* 
The driver API function <a href="./erl_driver#erl_drv_consume_timeslice">erl_driver#erl_drv_consume_timeslice</a> , and the NIF API function <a href="./erl_nif#enif_consume_timeslice">erl_nif#enif_consume_timeslice</a> have been introduced.</p>
<p>These functions are provided in order to better support co-operative scheduling, improve system responsiveness, and to make it easier to prevent misbehaviors of the VM due to a process or port monopolizing a scheduler thread. They can be used when dividing lengthy work into a number of repeated calls without the need to use threads.</p>
<p>Own Id: OTP-10810
* 
The list_to_integer/2 bif has been optimized when used with bases other than 10.</p>
<p>Own Id: OTP-10834 Aux Id: kunagi-74 [74]
* 
The git commit sha of the HEAD commit is now added to the Erlang shell when compiling a non-released Erlang version.</p>
<p>Own Id: OTP-10838
* 
Change caching policy for memory segment allocator. For instance, prefer sbc segments over mbc segments, caching policy is time-arrow aware, evicting older cached segments to store newer segments.</p>
<p>The default number of cachable segment has been increased from five to ten segments. This can be modified, same as before, with the command line option <em>+MMmcs 5</em></p>
<p>Impact: Increased speed for processing on larger objects, e.g. binaries. Slight increase of mapped and resident memory. Tune your system with memory options to <em>erl</em> for best performance.</p>
<p>Own Id: OTP-10840
* 
Updated config.sub and config.guess to latest version from gnu.org</p>
<p>Own Id: OTP-10848
* 
Add an xcomp file for Blue Gene/Q. Thanks to Kostis Sagonas.</p>
<p>Own Id: OTP-10849
* 
Cleanup of documentation of the type language. Thanks to Kostis Sagonas.</p>
<p>Own Id: OTP-10850
* 
Change the return value of hipe_bifs:remove_refs_from/1. Thanks to Kostis Sagonas.</p>
<p>Own Id: OTP-10851
* 
As of ERTS-5.10/OTP-R16A node names passed in the EPMD protocol are required to be encoded in UTF-8. Since EPMD previously accepted latin1 encoded node names this is an incompatibility. However, since Erlang nodes always have required characters in node names to be 7-bit ASCII characters (and still do require this), this incompatibility should not effect anyone using EPMD as an Erlang Port Mapper Daemon.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10872 Aux Id: OTP-10753
* 
The +pc flag to erl can be used to set the range of characters considered printable. This affects how the shell and io:format("~tp",...) functionality does heuristic string detection. More can be read in STDLIB users guide.</p>
<p>Own Id: OTP-10884
* 
Fix a number of type cast errors related to formatted printing on Win64 that can potentially cause problem when the Erlang VM exceeds 4 GB of ram. (Thanks to Blaine Whittle for the original patch)</p>
<p>Own Id: OTP-10887
* 
The effect of the deprecated environment variable ERL_MAX_PORTS had been removed premeturely. It has now been readded. Note that this is still scheduled to be released in R17B.</p>
<p>Own Id: OTP-10895</p>
<h2 id="erts-510">Erts 5.10</h2>
<h2 id="fixed-bugs-and-malfunctions_109">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Set new peeled off SCTP socket to nonblocking socket (Thanks to Jonas Falkevik)</li>
</ul>
<p>Own Id: OTP-10491
* 
Fix various typos (thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-10611
* 
Fix fd leak when using async thread pool</p>
<p>When using the async thread pool, if an erlang process asks to open a file and it gets shutdown/killed while the file:open/2 call hasn't returned, it's possible to leak a file descriptor against the target file. This has now been fixed. (Thanks to Filipe David Manana)</p>
<p>Own Id: OTP-10677
* 
Use sys/types.h instead of string.h to pull ssize_t definition to erl_driver.h. This fixes build issue on NetBSD. (Thanks to Yamamoto Takashi).</p>
<p>Own Id: OTP-10699
* 
Arguments given with the -run or -s flags to erl are now translated according to the file name encoding mode of the runtime system.</p>
<p>Own Id: OTP-10702
* 
The octet counters in the gen_tcp/inet interface could behave in unexpected ways on 64bit platforms. The behaviour is now as expected.</p>
<p>Own Id: OTP-10746
* 
Certain linux kernels, most notably in redhat and CentOS distribution, had a bug in writev which generated an infinite loop in the tcp code of the VM. The bug is now worked around.</p>
<p>Own Id: OTP-10747
* 
A process that got killed (got an exit signal) while operating on a compresseed file, could cause a segmentation fault in the VM. This is now corrected. Thanks to Filipe David Manana for identifying the problem and submitting a solution.</p>
<p>Own Id: OTP-10748
* 
Windows previously used three digit exponent in formatting which caused difference between platforms, as can be seen by float_to_list/1. This has now been fixed.</p>
<p>Own Id: OTP-10751</p>
<h2 id="improvements-and-new-features_36">Improvements and New Features</h2>
<ul>
<li>A boolean socket option 'ipv6_v6only' for IPv6 sockets has been added. The default value of the option is OS dependent, so applications aiming to be portable should consider using <em>{ipv6_v6only,true}</em> when creating an <em>inet6</em> listening/destination socket, and if necessary also create an <em>inet</em> socket on the same port for IPv4 traffic. See the documentation.</li>
</ul>
<p>Own Id: OTP-8928 Aux Id: kunagi-193 [104]
* 
It is now allowed to define stubs for BIFs, to allow type specs to be written for BIFs. For example, if there is BIF called <em>lists:member/2</em> , a dummy definition of <em>lists:member/2</em> is now allowed.</p>
<p>Own Id: OTP-9861
* 
Process optimizations. The most notable:</p>
<ul>
<li>New internal process table implementation allowing for both parallel reads as well as writes. Especially read operations have become really cheap. This reduce contention in various situations. For example when, spawning processes, terminating processes, sending messages, etc.</li>
<li>Optimizations of run queue management reducing contention.</li>
<li>Optimizations of process internal state changes reducing contention.</li>
</ul>
<p>These changes imply changes of the characteristics the system. Most notable: changed timing in the system.</p>
<p>Own Id: OTP-9892 Aux Id: OTP-10167
* 
Non-blocking code loading. Earlier when an Erlang module was loaded, all other execution in the VM were halted while the load operation was carried out in single threaded mode. Now modules are loaded without blocking the VM. Processes may continue executing undisturbed in parallel during the entire load operation. The load operation is completed by making the loaded code visible to all processes in a consistent way with one single atomic instruction. Non-blocking code loading will improve realtime characteristics when modules are loaded/upgraded on a running SMP system.</p>
<p>Own Id: OTP-9974
* 
In the SMP emulator, turning on and off tracing will no longer take down the system to single-scheduling.</p>
<p>Own Id: OTP-10122
* 
Remove VxWorks support</p>
<p>Own Id: OTP-10146
* 
Added a general framework for executing benchmarks of Erlang/OTP. Benchmarks for the Erlang VM and mnesia have been incorporated in the framework.</p>
<p>For details about how to add more benchmarks see $ERL_TOP/HOWTO/BENCHMARKS.md in the source distribution.</p>
<p>Own Id: OTP-10156
* 
Optimized deletion of ETS-tables which significantly improves performance when large amounts of temporary tables are used.</p>
<p>This change imply changes of the characteristics the system. Most notable: changed timing in the system.</p>
<p>Own Id: OTP-10167 Aux Id: OTP-9892
* 
Tuple funs (deprecated in R15B) are no longer supported.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10170
* 
New internal header scheme for allocators</p>
<p>Impact: Reduces size on object allocated in multiblock carriers by one word</p>
<p>Own Id: OTP-10273 Aux Id: kunagi-20 [20]
* 
Major port improvements. The most notable:</p>
<ul>
<li>New internal port table implementation allowing for both parallel reads as well as writes. Especially read operations have become really cheap.This reduce contention in various situations. For example when, creating ports, terminating ports, etc.</li>
<li>Dynamic allocation of port structures. This allow for a much larger maximum amount of ports allowed as a default. The previous default of 1024 has been raised to 65536. Maximum amount of ports can be set using the <a href="../erts/erl#+Q">+Q</a> command line flag of <a href="./erl">erl(1)</a> . The previously used environment variable <em>ERL_MAX_PORTS</em> has been deprecated and scheduled for removal in OTP-R17.</li>
<li>Major rewrite of scheduling of port tasks. Major benefits of the rewrite are reduced contention on run queue locks, and reduced amount of memory allocation operations needed. The rewrite was also necessary in order to make it possible to schedule signals from processes to ports.</li>
<li>Improved internal thread progress functionality for easy management of unmanaged threads. This improvement was necessary for the rewrite of the port task scheduling.</li>
<li>Rewrite of all process to port signal implementations in order to make it possible to schedule those operations. All port operations can now be scheduled which allows for reduced lock contention on the port lock as well as truly asynchronous communication with ports.</li>
<li>Optimized lookup of port handles from drivers.</li>
<li>Optimized driver lookup when creating ports.</li>
<li>Preemptable <a href="../erts/erlang#ports-0">erlang:ports/0</a> BIF.</li>
<li>Improving responsiveness by bumping reductions for a process calling a driver callback directly.</li>
</ul>
<p>These changes imply changes of the characteristics of the system. The most notable:
 <dl></p>
<dt> Order of signal delivery </dt>

<dd>
The previous implementation of the VM has delivered signals from processes to ports in a synchronous stricter fashion than required by the language. As of ERTS version 5.10, signals are truly asynchronously delivered. The order of signal delivery still adheres to the requirements of the language, but only to the requirements. That is, some signal sequences that previously always were delivered in one specific order may now from time to time be delivered in different orders. This may cause Erlang programs that have made false assumptions about signal delivery order to fail even though they previously succeeded. For more information about signal ordering guarantees, see the chapter on communication in the ERTS user's guide. The +n command line flag of erl(1) can be helpful when trying to find signaling order bugs in Erlang code that have been exposed by these changes.
</dd>

<dt> Latency of signals sent from processes to ports </dt>

<dd>
Signals from processes to ports where previously always delivered immediately. This kept latency for such communication to a minimum, but it could cause lock contention which was very expensive for the system as a whole. In order to keep this latency low also in the future, most signals from processes to ports are by default still delivered immediately as long as no conflicts occur. Such conflicts include not being able to acquire the port lock, but also include other conflicts. When a conflict occur, the signal will be scheduled for delivery at a later time. A scheduled signal delivery may cause a higher latency for this specific communication, but improves the overall performance of the system since it reduce lock contention between schedulers. The default behavior of only scheduling delivery of these signals on conflict can be changed by passing the +spp command line flag to erl(1) . The behavior can also be changed on port basis using the parallelism option of the open_port/2 BIF.
</dd>

<dt> Execution time of the erlang:ports/0 BIF </dt>

<dd>
Since erlang:ports/0 now can be preempted, the responsiveness of the system as a whole has been improved. A call to erlang:ports/0 may, however, take a much longer time to complete than before. How much longer time heavily depends on the system load.
</dd>

<dt> Reduction cost of calling driver callbacks </dt>

<dd>
Calling a driver callback is quite costly. This was previously not reflected in reduction cost at all. Since the reduction cost now has increased, a process performing lots of direct driver calls will be scheduled out more frequently than before.
</dd>

<p></dl> 
<strong>Potential incompatibilities</strong> :</p>
<ul>
<li><em>driver_send_term()</em> has been deprecated and has been scheduled for removal in OTP-R17. Replace usage of <em>driver_send_term()</em> with usage of <a href="../erts/erl_driver#erl_drv_send_term">erl_drv_send_term()</a> .</li>
<li><em>driver_output_term()</em> has been deprecated and has been scheduled for removal in OTP-R17. Replace usage of <em>driver_output_term()</em> with usage of <a href="../erts/erl_driver#erl_drv_output_term">erl_drv_output_term()</a> .</li>
<li>The new function <a href="../erts/erl_driver#erl_drv_busy_msgq_limits">erl_drv_busy_msgq_limits()</a> has been added in order to able to control management of port queues.</li>
</ul>
<p>The <a href="../erts/erl_driver#version_management">driver API version</a> has been bumped to 2.1 from 2.0 due to the above changes in the driver API.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10336 Aux Id: OTP-9892
* 
The experimental support for packages has been removed.</p>
<p>Own Id: OTP-10348 Aux Id: kunagi-316 [227]
* 
Wrong parameters when setting seq_trace-tokens from within a trace-pattern could crash the VM. This is now corrected.</p>
<p>Own Id: OTP-10522
* 
Erlang specification 4.7.3 defines max tuple size to 65535 elements It is now enforced to no more than 16777215 elements (arity 24 bits)</p>
<p>Previous edge cases (28 bits) were not validated and could cause undefined behaviour.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10633
* 
Add insert_element/3 and delete_element/2</p>
<p>Own Id: OTP-10643
* 
The previous default of a maximum of 32768 simultaneous processes has been raised to 262144. This value can be changed using the the <a href="./erl#+P">+P</a> command line flag of <a href="erl">erl(1)</a> . Note that the value passed now is considered as a hint, and that actual value chosen in most cases will be a power of two.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10647 Aux Id: OTP-9892, OTP-10336
* 
The previously (in R15) proposed scheduler wakeup strategy is now used by default. This strategy is not as quick to forget about previous overload as the previous strategy.</p>
<p>This change imply changes of the characteristics the system. Most notable: When a small overload comes and then disappears repeatedly, the system will for a bit longer time be willing to wake up schedulers than before. Timing in the system will due to this also change.</p>
<p>The previous strategy can still be enabled by passing the <a href="./erl#+sws">+sws legacy</a> command line flag to <em>erl</em> .</p>
<p>Own Id: OTP-10661 Aux Id: OTP-10033
* 
The <a href="./erl#+stbt">+stbt</a> command line argument of <em>erl</em> was added. This argument can be used for trying to set scheduler bind type. Upon failure unbound schedulers will be used.</p>
<p>Own Id: OTP-10668
* 
Support ANSI in console</p>
<p>Unix platforms will no longer filter control sequences to the ttsl driver thus enabling ANSI and colors in console. (Thanks to Pedram Nimreezi)</p>
<p>Own Id: OTP-10678
* 
Add file:allocate/3 operation</p>
<p>This operation allows pre-allocation of space for files. It succeeds only on systems that support such operation. (Thanks to Filipe David Manana)</p>
<p>Own Id: OTP-10680
* 
Treat <em>-Wreturn-type</em> warnings as error when using GCC (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-10683
* 
Implement ./otp_build configure --enable-silent-rules</p>
<p>With silent rules, the output of make is less verbose and compilation warnings are easier to spot. Silent rules are disabled by default and can be disabled or enabled at will by make V=0 and make V=1. (Thanks to Anthony Ramine)</p>
<p>Own Id: OTP-10726
* 
Use share flags for all file operations on Windows. Thanks to Filipe David Borba Manana.</p>
<p>Own Id: OTP-10727
* 
Make/fakefop adjustments. Thanks to Tuncer Ayaz and Sebastian Rasmussen.</p>
<p>Own Id: OTP-10733
* 
The runtime system will now by default use 10 async threads if thread support has been enabled when building the runtime system.</p>
<p>This will prevent long blocking file-operations from blocking scheduler threads for long periods of time, which can be harmful. Apart from file-operations, it also effects other operations scheduled on the async thread pool by user implemented drivers.</p>
<p>The amount of async threads can be controlled by using the <a href="./erl#async_thread_pool_size">erl#async_thread_pool_size</a> command line argument of <em>erl(1)</em> . When running some offline tools you <strong>might</strong> want to disable async threads, but you are advised <strong>not</strong> to in the general case. Instead, you might want to increase the amount of async threads used.</p>
<p>This change imply changes of the characteristics the system compared to the previous default. The responsiveness of the system as a whole will be improved. Operations scheduled on the async thread pool will get an increased latency. The throughput of these operations may increase, or decrease depending on the type of the operations and how they get scheduled. In the case of file operations, the throughput very much depends on how the Erlang application access files. Multiple concurrent accesses to different files have the potential of an increased throughput.</p>
<p>Own Id: OTP-10736
* 
The default reader group limit has been increased to 64 from 8. This limit can be set using the <em>+rg</em> command line argument of <em>erl(1)</em> .</p>
<p>This change of default value will reduce lock contention on ETS tables using the <em>read_concurrency</em> option at the expense of memory consumption when the amount of schedulers and logical processors are between 8 and 64. For more information, see documentation of the <em>+rg</em> command line argument of <em>erl(1)</em> .</p>
<p>Own Id: OTP-10737
* 
New BIF float_to_list/2 which solves a problem of float_to_list/1 that doesn't allow specifying the number of digits after the decimal point when formatting floats (Thanks to Serge Aleynikov).</p>
<p>Own Id: OTP-10752
* 
Limited support for unicode atoms in the external format and in the internal representation of the vm. This is a preparative feature in order to support communication with future releases of Erlang/OTP that may create unicode atoms.</p>
<p>Own Id: OTP-10753
* 
Increased potential concurrency in ETS for <em>write_concurrency</em> option. The number of internal table locks has increased from 16 to 64. This makes it four times less likely that two concurrent processes writing to the same table would collide and thereby serialized. The cost is an increased constant memory footprint for tables using write_concurrency. The memory consumption per inserted record is not affected. The increased footprint can be particularly large if <em>write_concurrency</em> is combined with <em>read_concurrency</em> .</p>
<p>Own Id: OTP-10787</p>
<h2 id="erts-5931">Erts 5.9.3.1</h2>
<h2 id="known-bugs-and-problems_2">Known Bugs and Problems</h2>
<ul>
<li>Create an erl_crash.dump if no heart exists and no ERL_CRASH_DUMP_SECONDS is set (behaviour changed).</li>
</ul>
<p>Don't create an erl_crash.dump if heart do exists and no ERL_CRASH_DUMP_SECONDS is set (behaviour not changed).</p>
<p>This changes the behaviour back to the R15B02 default considering if a beam was running with no heart.</p>
<p>Own Id: OTP-10602</p>
<h2 id="erts-593">Erts 5.9.3</h2>
<h2 id="fixed-bugs-and-malfunctions_110">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix linking in OpenBSD. (Thanks to Matthew Dempsky)</li>
</ul>
<p>Own Id: OTP-10395
* 
Fix bug causing fallback atomics to be used even though healthy gcc atomics or libatomic_ops was detected.</p>
<p>Own Id: OTP-10418
* 
Ensure 'erl_crash.dump' when asked for it. This will change erl_crash.dump behaviour.</p>
<p>* Not setting ERL_CRASH_DUMP_SECONDS will now terminate beam immediately on a crash without writing a crash dump file.</p>
<p>* Setting ERL_CRASH_DUMP_SECONDS to 0 will also terminate beam immediately on a crash without writing a crash dump file, i.e. same as not setting ERL_CRASH_DUMP_SECONDS environment variable.</p>
<p>* Setting ERL_CRASH_DUMP_SECONDS to a negative value will let the beam wait indefinitely on the crash dump file being written.</p>
<p>* Setting ERL_CRASH_DUMP_SECONDS to a positive value will let the beam wait that many seconds on the crash dump file being written.</p>
<p>A positive value will set an alarm/timeout for restart both in beam and in heart if heart is running.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-10422 Aux Id: kunagi-250 [161]
* 
Fix bug where MSVRT100.dll was not included in the windows installer.</p>
<p>Own Id: OTP-10481
* 
In the expression <em>&lt;<Bin/binary,...>&gt;</em> , if <em>Bin</em> was a bitstring with a size not a multiple of 8, either no exception was generated or an incorrect exception was generated. (Thanks to Adam Rutkowski for reporting this bug.)</p>
<p>Own Id: OTP-10524
* 
The runtime system could crash while scheduling a port task. The port task was scheduled either due to an external I/O event being triggered, a driver timeout being triggered, or data being sent over a distribution channel.</p>
<p>Own Id: OTP-10556
* 
<em>erlang:memory(ets)</em> erroneously included the size of each ETS-table main structure twice.</p>
<p>Own Id: OTP-10558
* 
Fix compile error in generated file hipe_amd64_bifs.S for Solaris.</p>
<p>Own Id: OTP-10577
* 
A faulty spec for process_info/2 could cause false dialyzer warnings. The spec is corrected.</p>
<p>Own Id: OTP-10584
* 
In very rare cases, the VM could crash if a garbage collector was called while executing an appending bit syntax instruction. The symptom was a core when reallocating memory in the function erts_bs_append. The garbage collector bug is now corrected.</p>
<p>Own Id: OTP-10590</p>
<h2 id="improvements-and-new-features_37">Improvements and New Features</h2>
<ul>
<li>Improve support for building and testing in embedded ppc environments.</li>
</ul>
<p>Own Id: OTP-10265 Aux Id: kunagi-159 [daf97f67-5724-4812-a5b6-7e86990133d2-1]
* 
Due to a race condition on Windows, sometimes when printing to standard output and then immediately terminating erlang all data would not be printed. The emulator now waits for all data to be printed before exiting.</p>
<p>Own Id: OTP-10325 Aux Id: kunagi-166 [dd72d0e2-3e76-4a51-8b56-7564e24eecae]
* 
The frequency with which sleeping schedulers are woken due to outstanding memory deallocation jobs has been reduced.</p>
<p>Own Id: OTP-10476 Aux Id: OTP-10162
* 
Clearer warnings about the dangers of misuse of <a href="./erl_nif#WARNING">native functions</a> and <a href="./erl_driver#WARNING">drivers</a> have been added to the documentation.</p>
<p>Own Id: OTP-10557</p>
<h2 id="erts-592">Erts 5.9.2</h2>
<h2 id="fixed-bugs-and-malfunctions_111">Fixed Bugs and Malfunctions</h2>
<ul>
<li>
<p>Fix erl_prim_loader errors in handling of primary archive. The following errors have been corrected:</p>
</li>
<li>
<p>If primary archive was named "xxx", then a file in the same directory named "xxxyyy" would be interpreted as a file named "yyy" inside the archive.</p>
</li>
<li>erl_prim_loader did not correctly create and normalize absolute paths for primary archive and files inside it, so unless given with exact same path files inside the archive would not be found. E.g. if escript was started as /full/path/to/xxx then "./xxx/file" would not be found since erl_prim_loader would try to match /full/path/to/xxx with /full/path/to/./xxx. Same problem with ../.</li>
<li>Depending on how the primary archive was built, erl_prim_loader:list_dir/1 would sometimes return an empty string inside the file list. This was a virtual element representing the top directory of the archive. This has been removed.</li>
</ul>
<p>Thanks to Tuncer Ayaz and Shunichi Shinohara for reporting and co-authoring corrections.</p>
<p>Own Id: OTP-10071
* 
Fix: Add port-I/O statistics for active once and true and not only active false.</p>
<p>Own Id: OTP-10073
* 
The 64-bit windows installer did not look in the right directories for 64-bit version of Microsoft Visual C++ 2010 Redistibutable Package and hence took the wrong decision about having to install the redistributable package if the 32-bit version was installed but not the 64-bit and vice versa. This bug has now been fixed Furthermore the sub-installer for the redistributable package is now run in silent mode if the erlang installer is.</p>
<p>Own Id: OTP-10096
* 
epmd would fail to start automatically when starting a distributed erlang node installed in a location with a whitespace in the path.</p>
<p>Own Id: OTP-10106
* 
A more or less harmless bug that sometimes caused memory deallocations to be delayed longer than intended has been fixed.</p>
<p>Own Id: OTP-10116
* 
Fix bug causing emulator crash when running HiPE on ARM. Bug has existed since R15B.</p>
<p>Own Id: OTP-10137
* 
A bug regarding spaces in C function prototypes has been fixed. (Thanks to Richard O'Keefe.)</p>
<p>Own Id: OTP-10138
* 
Corrected dtrace pid length in message related probes. (Thanks to Zheng Siyao)</p>
<p>Own Id: OTP-10142
* 
Correct formating in exit error messages</p>
<p>Ensure displayed sizes are not negative. (Thanks to Michael Santos)</p>
<p>Own Id: OTP-10148
* 
fix escript/primary archive reloading</p>
<p>If the mtime of an escript/primary archive file changes after being added to the code path, correctly reload the archive and update the cache. (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-10151
* 
Doc fix: link from erlang:now/0 to os:timestamp/0</p>
<p>Sometimes os:timestamp/0 is more appropriate than erlang:now/0. The documentation for the former has a link to the latter; this patch adds a link in the other direction to make os:timestamp/0 more visible. Thanks to Magnus Henoch</p>
<p>Own Id: OTP-10180
* 
The caret in the werl window (on Windows) could appear at the wrong place after regaining focus. This is now corrected.</p>
<p>Own Id: OTP-10181
* 
Fix bug that in some cases could cause corrupted binaries in ETS tables with <em>compressed</em> option.</p>
<p>Own Id: OTP-10182
* 
Fix use of "clever" mktime</p>
<p>Commit 1eef765 introduced regression (conditional <em>always</em> evaluates to true) in which erlang:localtime_to_universaltime/2 stopped working on systems configured with timezone without DST (i.e. UTC) on *BSD platforms: 1&gt; erlang:localtime_to_universaltime({{2012,1,1},{0,0,0}}, true). ** exception error: bad argument Thanks to Piotr Sikora</p>
<p>Own Id: OTP-10187
* 
Relocate bodies of DTrace probes to the statically-linked VM.</p>
<p>Due to various operating systems (in both the DTrace and SystemTap worlds) not fully supporting DTrace probes (or SystemTap-compatibility mode probes) in shared libraries, we relocate those probes to the statically-linked virtual machine. This could be seen as pollution of the pristine VM by a (yet) experimental feature. However:</p>
<ol>
<li>This code can be eliminated completely by the C preprocessor. 2. Leaving the probes in the dyntrace NIF shared library simply does not work correctly on too many platforms. *Many* thanks to Macneil Shonle at Basho for assisting when my RSI-injured fingers gave out. (note: Solaris 10 and FreeBSD 9.0-RELEASE can take a long time to compile)</li>
</ol>
<p>Own Id: OTP-10189
* 
Fix bug in <em>ets:test_ms/2</em> that could cause emulator crash when using <em>'$_'</em> in match spec.</p>
<p>Own Id: OTP-10190
* 
Supplying a filename longer than the operating system MAX_PATH to file:read_link/1 would cause a crash (Segemntation fault/Critical Error) on all platforms. This is now corrected.</p>
<p>Own Id: OTP-10200
* 
If Perl was configured to interpret files as being encoded in UTF-8, the build would crash in <em>make_preload</em> . (Thanks to Aaron Harnly for noticing this issue.)</p>
<p>Own Id: OTP-10201
* 
Fix the erlc -MP flag</p>
<p>Because of a copy-and-paste error in erlc.c, the -MP flag had the same effect as -MG. As a workaround, you had to pass +makedep_phony to enable the MP option. This patch makes -MP work as intended.</p>
<p>Own Id: OTP-10211
* 
Allow mixed IPv4 and IPv6 addresses to sctp_bindx</p>
<p>Also allow mixed address families to bind, since the first address on a multihomed sctp socket must be bound with bind, while the rest are to be bound using sctp_bindx. At least Linux supports adding address of mixing families. Make inet_set_faddress function available also when HAVE_SCTP is not defined, since we use it to find an address for bind to be able to mix ipv4 and ipv6 addresses. Thanks to Tomas Abrahamsson</p>
<p>Own Id: OTP-10217
* 
Fix support for leap seconds-aware timezones</p>
<p>erlang:universaltime_to_localtime is leap seconds-aware (since 2008), however erlang:localtime_to_universaltime is not, which gives surprising results on systems configured with leap seconds-aware timezones: 1&gt; erlang:universaltime_to_localtime({{2012,1,1},{0,0,0}}). {{2012,1,1},{0,0,0}} 2&gt; erlang:localtime_to_universaltime({{2012,1,1},{0,0,0}}). {{2012,1,1},{0,0,24}} and completely breaks calendar:local_time_to_universal_time_dst: 3&gt; calendar:local_time_to_universal_time_dst({{2011,1,1},{0,0,0}}). [] Thanks to Piotr Sikora</p>
<p>Own Id: OTP-10227
* 
erlsrv: gracefully stop emulator on Windows shutdown</p>
<p>Windows will send the SERVICE_CONTROL_SHUTDOWN event to the service control handler when shutting down the system. Instead of ignoring the event, erlsrv will now invoke the stop action. Likewise, the Erlang emulator (and it's po drivers) must not quit upon reception of the CTRL_SHUTDOWN_EVENT event in th console control handler. Thanks to Jan Kloetzke</p>
<p>Own Id: OTP-10228
* 
Fix dtrace bug in file rename operation.</p>
<p>Own Id: OTP-10234
* 
Fix bug in memory management of driver port data locks (PDL). In some cases PDLs could be deallocated before <em>ready_async</em> or <em>async_free</em> callback was called.</p>
<p>Own Id: OTP-10249</p>
<h2 id="improvements-and-new-features_38">Improvements and New Features</h2>
<ul>
<li>Add port and suspend options to lock-counter profiling. (Thanks to Rick Reed)</li>
</ul>
<p>Own Id: OTP-10051
* 
Latency when using the active_once option in gen_tcp communication is reduced.</p>
<p>Own Id: OTP-10055 Aux Id: sto139
* 
Remove bit8 option support from inet</p>
<p>Own Id: OTP-10056
* 
The OS Pid of a port program is now available by calling erlang:port_info(Port,os_pid), Thanks to Matthias Lang for the original patch.</p>
<p>Own Id: OTP-10057
* 
Fix openpty usage in run_erl.</p>
<p>Reopening a slave file descriptor which was closed earlier could lead to a misbehaving connection. This has now been remedied.</p>
<p>Own Id: OTP-10076
* 
Remove all code, documentation, options and diagnostic functions which were related to the experimental hybrid heap implementation.</p>
<p>Own Id: OTP-10105
* 
Optimizations of memory deallocations.</p>
<p>Own Id: OTP-10162 Aux Id: OTP-7775
* 
Optimization of process locking.</p>
<p>Own Id: OTP-10163
* 
Added a xcomp example file for powerpc-dso-linux-gnu</p>
<p>Own Id: OTP-10198
* 
Detect when middle endian doubles are used by a platform and account for it when decoding floats. (Thanks to Mike Sperber)</p>
<p>Own Id: OTP-10209</p>
<h2 id="erts-5912">Erts 5.9.1.2</h2>
<h2 id="fixed-bugs-and-malfunctions_112">Fixed Bugs and Malfunctions</h2>
<ul>
<li>On Linux systems using heart (erl -heart) and a HEAR_BEAT_TIMEOUT less than default, heart could fire even though Erlang was running fine after approx 298 to 497 days (depending on kernel config). This was due to the behaviour of the times(2) system call. Usage of times(2) is now replaced with clock_gettime(2) and the CLOCK_MONOTONIC clock, resulting in a more stable solution. The Erlang VM itself has used clock_gettime(2) on linux since before R12B, so this only affects the heart program.</li>
</ul>
<p>Own Id: OTP-10111 Aux Id: seq12075</p>
<h2 id="erts-5911">Erts 5.9.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_113">Fixed Bugs and Malfunctions</h2>
<ul>
<li>If threads support for the runtime system had been disabled at compile time ( <em>--disable-threads</em> had been passed to <em>configure</em> ), and the <em>+A</em> command line argument of <em>erl</em> was passed when starting the runtime system, <a href="./erl_driver#driver_system_info">driver_system_info()</a> erroneously claimed that the runtime system had async threads even though it had not.</li>
</ul>
<p>Due to this bug the file driver did not split tasks into smaller chunks, but instead completed the whole task at once, i.e., the scheduler got occupied with I/O for a longer time than intended.</p>
<p>Own Id: OTP-10059</p>
<h2 id="improvements-and-new-features_39">Improvements and New Features</h2>
<ul>
<li>A proposal for a new scheduler wakeup strategy has been implemented. For more information see the documentation of the <a href="./erl#+sws">+sws</a> command line argument of <em>erl</em> .</li>
</ul>
<p>Own Id: OTP-10033 Aux Id: Seq12025
* 
A switch for configuration of busy wait length for scheduler threads has been added. For more information see the documentation of the <a href="./erl#+sbwt">+sbwt</a> command line argument of <em>erl</em> .</p>
<p>Own Id: OTP-10044 Aux Id: Seq11976
* 
The extra memory barriers introduced by bug-fix OTP-9281 were unnecessarily used also on tables without the <em>write_concurrency</em> option enabled. This could unnecessarily degrade performance of ETS tables without <em>write_concurrency</em> on some hardware (e.g. PowerPC) while not effecting performance at all on other hardware (e.g. x86/x86_64).</p>
<p>OTP-9281 (R14B03): ETS tables using the <em>write_concurrency</em> option could potentially get into an internally inconsistent state.</p>
<p>Own Id: OTP-10048 Aux Id: OTP-9281</p>
<h2 id="erts-591">Erts 5.9.1</h2>
<h2 id="fixed-bugs-and-malfunctions_114">Fixed Bugs and Malfunctions</h2>
<ul>
<li><em>erlang:system_profile</em> errorneous profiled the profiler process when observing runnable processes. This has been corrected.</li>
</ul>
<p>Own Id: OTP-9849
* 
Calling trace_info/2 asking for information about a function that had native could could crash the run-time system.</p>
<p>Own Id: OTP-9886
* 
reduce smp locking time range in erts_garbage_collect (thanks to Jovi Zhang)</p>
<p>Own Id: OTP-9912
* 
Fix typo in supervisor behaviour doc (Thanks to Ricardo Catalinas Jiménez)</p>
<p>Own Id: OTP-9924
* 
Correct spelling of registered (Thanks to Richard Carlsson)</p>
<p>Own Id: OTP-9925
* 
erts: Remove unused variable (Thanks to Jovi Zhang)</p>
<p>Own Id: OTP-9926
* 
Fix bug in ETS with <em>compressed</em> option and insertion of term containing large integers (&gt;2G) on 64-bit machines. Seen to cause emulator crash. (Thanks to Diego Llarrull for excellent bug report)</p>
<p>Own Id: OTP-9932
* 
Handle Linux OS where /sys/devices/system/node is only readable by root. Fallback to /sys/devices/system/cpu for topology info.</p>
<p>Own Id: OTP-9978
* 
When an escript ends now all printout to standard output and standard error gets out on the terminal. This bug has been corrected by changing the behaviour of erlang:halt/0,1, which should fix the same problem for other escript-like applications, i.e that data stored in the output port driver buffers got lost when printing on a TTY and exiting through erlang:halt/0,1.</p>
<p>The BIF:s erlang:halt/0,1 has gotten improved semantics and there is a new BIF erlang:halt/2 to accomplish something like the old semantics. See the documentation.</p>
<p>Now erlang:halt/0 and erlang:halt/1 with an integer argument will close all ports and allow all pending async threads operations to finish before exiting the emulator. Previously erlang:halt/0 and erlang:halt(0) would just wait for pending async threads operations but not close ports. And erlang:halt/1 with a non-zero integer argument would not even wait for pending async threads operations.</p>
<p>To roughly the old behaviour, to not wait for ports and async threads operations when you exit the emulator, you use erlang:halt/2 with an integer first argument and an option list containing {flush,false} as the second argument. Note that now is flushing not dependant of the exit code, and you cannot only flush async threads operations which we deemed as a strange behaviour anyway.</p>
<p>Also, erlang:halt/1,2 has gotten a new feature: If the first argument is the atom 'abort' the emulator is aborted producing a core dump, if the operating system so allows.</p>
<p>Own Id: OTP-9985
* 
Added check to inet driver to avoid building on operating systems that do not yet have IPv6 compatible socket API. (Thanks to Peer Stritzinger)</p>
<p>Own Id: OTP-9996
* 
Fix bug when the number of CPUs actually found is lower than the configured value. (Thanks to Benjamin Herrenschmidt)</p>
<p>Own Id: OTP-10004
* 
The runtime system without SMP support and without thread support erroneously busy waited when no work was present. This bug first appeared in <em>erts-5.9</em> .</p>
<p>Own Id: OTP-10019
* 
Various typographical errors corrected in documentation for common_test, driver, erl_driver and windows installation instructions. (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-10037
* 
Fix memory leak caused by race on exiting process</p>
<p>Own Id: OTP-10041</p>
<h2 id="improvements-and-new-features_40">Improvements and New Features</h2>
<ul>
<li>Add <em>erlang:statistics(scheduler_wall_time)</em> to ensure correct determination of scheduler utilization. Measuring scheduler utilization is strongly preferred over CPU utilization, since CPU utilization gives very poor indications of actual scheduler/vm usage.</li>
</ul>
<p>Own Id: OTP-9858
* 
ERTS internal API improvements. In some cases the amount of atomic read operations needed have been reduced due to this.</p>
<p>Own Id: OTP-9922
* 
The DTrace source patch from Scott Lystig Fritchie is integrated in the source tree. Using an emulator with dtrace probe is still not supported for production use, but may be a valuable debugging tool. Configure with --with-dynamic-trace=dtrace (or --with-dynamic-trace=systemtap) to create a build with dtrace probes enabled. See runtime_tools for documentation and examples.</p>
<p>Own Id: OTP-10017</p>
<h2 id="known-bugs-and-problems_3">Known Bugs and Problems</h2>
<ul>
<li>enif_make_copy may invalidate enif_inspect_binary.</li>
</ul>
<p>Own Id: OTP-9828</p>
<h2 id="erts-5901">Erts 5.9.0.1</h2>
<h2 id="fixed-bugs-and-malfunctions_115">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A feature test for the <em>lwsync</em> instruction performed on PowerPC hardware at runtime system startup got into an eternal loop if the instruction was not supported. This bug was introduced in erts-5.9/OTP-R15B.</li>
</ul>
<p>Own Id: OTP-9843
* 
I/O events could potentially be delayed for ever when enabling kernel-poll on a non-SMP runtime system executing on Solaris. When also combined with async-threads the runtime system hung before completing the boot phase. This bug was introduced in erts-5.9/OTP-R15B.</p>
<p>Own Id: OTP-9844</p>
<h2 id="erts-59">Erts 5.9</h2>
<h2 id="fixed-bugs-and-malfunctions_116">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Honor option <em>packet_size</em> for http packet parsing by both TCP socket and <em>erlang:decode_packet</em> . This gives the ability to accept HTTP headers larger than the default setting, but also avoid DoS attacks by accepting lines only up to whatever length you wish to allow. For consistency, packet type <em>line</em> also honor option <em>packet_size</em> . (Thanks to Steve Vinoski)</li>
</ul>
<p>Own Id: OTP-9389
* 
A few contracts in the <em>lists</em> module have been corrected.</p>
<p>Own Id: OTP-9616
* 
The Unicode noncharacter code points 16#FFFE and 16#FFFE were not allowed to be encoded or decoded using the <em>unicode</em> module or bit syntax. That was inconsistent with the other noncharacters 16#FDD0 to 16#FDEF that could be encoded/decoded. To resolve the inconsistency, 16#FFFE and 16#FFFE can now be encoded and decoded. (Thanks to Alisdair Sullivan.)</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9624
* 
Make epp search directory of current file first when including another file This completes a partial fix in R11 that only worked for include_lib(). (Thanks to Richard Carlsson)</p>
<p>Own Id: OTP-9645
* 
Fixed memory leak in <em>enif_inspect_io_list_as_binary</em> when applied on a process independent environment.</p>
<p>Own Id: OTP-9668
* 
The number of beam catches allowed in code are no longer statically defined and will grow according to its need.</p>
<p>Own Id: OTP-9692
* 
Add missing parenthesis in heart doc.</p>
<p>Add missing spaces in the Reference Manual distributed section.</p>
<p>In the HTML version of the doc those spaces are necessary to separate those words.</p>
<p>Own Id: OTP-9693
* 
Fixes module erlang doc style: option description (Thanks to Ricardo Catalinas Jiménez)</p>
<p>Own Id: OTP-9697
* 
Specifying a scope to binary:match/3 when using multiple searchstrings resulted in faulty return values. This is now corrected.</p>
<p>Own Id: OTP-9701
* 
The runtime system crashed if more than one thread tried to exit the runtime system at the same time.</p>
<p>Own Id: OTP-9705
* 
Fix documentation for erlang:process_flag/2</p>
<p>For the subsection about process_flag(save_calls, N) there's an unrelated paragraph about process priorities which was copied from the preceding subsection regarding process_flag(priority, Level). (Thanks to Filipe David Manana)</p>
<p>Own Id: OTP-9714
* 
Calls to <em>erlang:system_flag(schedulers_online, N)</em> and/or <em>erlang:system_flag(multi_scheduling, block|unblock)</em> could cause internal data used by this functionality to get into an inconsistent state. When this happened various problems occurred. This bug was quite hard to trigger, so hopefully no-one has been effected by it.</p>
<p>A spinlock used by the run-queue management sometimes got heavily contended. This code has now been rewritten, and the spinlock has been removed.</p>
<p>Own Id: OTP-9727
* 
Use libdlpi to get physical address (Thanks to Trond Norbye)</p>
<p>Own Id: OTP-9818</p>
<h2 id="improvements-and-new-features_41">Improvements and New Features</h2>
<ul>
<li>An option list argument can now be passed to <em>file:read_file_info/2, file:read_link_info/2</em> and <em>file:write_file_info/3</em> and set time type information in the call. Valid options are <em>{time, local}, {time, universal}</em> and <em>{time, posix}</em> . In the case of <em>posix</em> time no conversions are made which makes the operation a bit faster.</li>
</ul>
<p>Own Id: OTP-7687
* 
A number of memory allocation optimizations have been implemented. Most optimizations reduce contention caused by synchronization between threads during allocation and deallocation of memory. Most notably:</p>
<ul>
<li>Synchronization of memory management in scheduler specific allocator instances has been rewritten to use lock-free synchronization.</li>
<li>Synchronization of memory management in scheduler specific pre-allocators has been rewritten to use lock-free synchronization.</li>
<li>The 'mseg_alloc' memory segment allocator now use scheduler specific instances instead of one instance. Apart from reducing contention this also ensures that memory allocators always create memory segments on the local NUMA node on a NUMA system.</li>
</ul>
<p>Own Id: OTP-7775
* 
The ethread atomic memory operations API used by the runtime system has been extended and improved.</p>
<p>The ethread library now also performs runtime tests for presence of hardware features, such as for example SSE2 instructions, instead of requiring this to be determined at compile time.</p>
<p>All uses of the old deprecated atomic API in the runtime system have been replaced with the use of the new atomic API. In a lot of places this change imply a relaxation of memory barriers used.</p>
<p>Own Id: OTP-9014
* 
gen_sctp:open/0-2 may now return {error,eprotonosupport} if SCTP is not supported</p>
<p>gen_sctp:peeloff/1 has been implemented and creates a one-to-one socket which also are supported now</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9239
* 
Sendfile has been added to the file module's API. sendfile/2 is used to read data from a file and send it to a tcp socket using a zero copying mechanism if available on that OS.</p>
<p>Thanks to Tuncer Ayaz and Steve Vinovski for original implementation</p>
<p>Own Id: OTP-9240
* 
enif_get_reverse_list function added to nif API. This function should be used to reverse small lists which are deep within other structures making it impractical to do the reverse in Erlang.</p>
<p>Own Id: OTP-9392
* 
The deprecated concat_binary/1 BIF has been removed. Use <em>list_to_binary</em> or <em>iolist_to_binary/1</em> instead.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9421
* 
Erlang/OTP can now be built using parallel make if you limit the number of jobs, for instance using ' <em>make -j6</em> ' or ' <em>make -j10</em> '. ' <em>make -j</em> ' does not work at the moment because of some missing dependencies.</p>
<p>Own Id: OTP-9451
* 
Line number and filename information are now included in exception backtraces as a fourth element in the MFA tuple. The information will be pretty-printed by the shell and used by <em>common_test</em> to provide better indication of where a test case.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9468
* 
All binary constants used to be handled as heap binaries (i.e. the entire binary would be copied when sent to another process). Binary constants larger than 64 bytes are now refc binaries (i.e. the actual data in the binary will not be copied when sent to another process).</p>
<p>Own Id: OTP-9486
* 
If a float and an integer is compared, the integer is only converted to a float if the float datatype can contain it. Otherwise the float is converted to an integer.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9497
* 
Add NIF function enif_is_number</p>
<p>This function allows for easily determining if a term represents or not a number (integer, float, small or big).(Thanks to Filipe David Manana)</p>
<p>Own Id: OTP-9629
* 
The ERTS internal system block functionality has been replaced by new functionality for blocking the system. The old system block functionality had contention issues and complexity issues. The new functionality piggy-backs on thread progress tracking functionality needed by newly introduced lock-free synchronization in the runtime system. When the functionality for blocking the system isn't used, there is more or less no overhead at all. This since the functionality for tracking thread progress is there and needed anyway.</p>
<p>Own Id: OTP-9631
* 
An ERTS internal, generic, many to one, lock-free queue for communication between threads has been introduced. The many to one scenario is very common in ERTS, so it can be used in a lot of places in the future. Currently it is used by scheduling of certain jobs, and the async thread pool, but more uses are planned for the future.</p>
<p>Drivers using the driver_async functionality are not automatically locked to the system anymore, and can be unloaded as any dynamically linked in driver.</p>
<p>Scheduling of ready async jobs is now also interleaved in between other jobs. Previously all ready async jobs were performed at once.</p>
<p>Own Id: OTP-9632
* 
Tuple funs (a two-element tuple with a module name and a function) are now officially deprecated and will be removed in R16. Use ' <em>fun M:F/A</em> ' instead. To make you aware that your system uses tuple funs, the very first time a tuple fun is applied, a warning will be sent to the error logger.</p>
<p>Own Id: OTP-9649
* 
Changed the internal BIF calling convention. Will make simpler faster code and allow BIFs with an arbitrary arity.</p>
<p>Own Id: OTP-9662
* 
Windows native critical sections are now used internally in the runtime system on Windows as mutex implementation. This since they perform better under extreme contention than our own implementation.</p>
<p>Own Id: OTP-9671
* 
Convert some erl_nif macros into inline functions. Allow for better compile time type checking. (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9675
* 
The <em>+scl</em> command line flag has been added. It can be used for disabling compaction of scheduler load. For more information see the <em>erl(1)</em> documentation.</p>
<p>Own Id: OTP-9695
* 
The build system has been updated so that Erlang/OTP can be built on Mac OS X Lion systems without a GCC compiler. The INSTALL guide has been updated with instructions on how to install a GCC compiler and build Erlang/OTP with it, in order to get a run-time system with better performance.</p>
<p>Own Id: OTP-9712
* 
When loading a module, the system use to run on a single scheduler during the entire loading process. This has been changed to only take down the system just before inserting the loaded code into the system tables, resulting in a much shorter disruption if a module is loaded in a busy system. (Suggested by Bob Ippolito.)</p>
<p>Own Id: OTP-9720
* 
Possible to run HiPE without floating point exceptions (FPE). Useful on platforms that lack reliable FPE. Slower float operations compared to HiPE with FPE.</p>
<p>Own Id: OTP-9724
* 
As of ERTS version 5.9 (OTP-R15B) the runtime system will by default <strong>not</strong> bind schedulers to logical processors.</p>
<p>If the Erlang runtime system is the only operating system process that binds threads to logical processors, this improves the performance of the runtime system. However, if other operating system processes (as for example another Erlang runtime system) also bind threads to logical processors, there might be a performance penalty instead. In some cases this performance penalty might be severe. Due to this, we change the default so that the user must make an active decision in order to bind schedulers.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9726
* 
The use of <em>erlang:system_flag(scheduler_bind_type, _)</em> and <em>erlang:system_flag(cpu_topology, _)</em> have been deprecated and scheduled for removal in erts-5.10/OTP-R16. For more information see the documentation of <em>erlang:system_flag/2</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9749
* 
An ancient workaround for a Windows bug was removed from the open_port code, open_port({spawn,...}...) is now faster. Thanks to Daniel Goertzen.</p>
<p>Own Id: OTP-9766
* 
The use of deprecated 32bit time_t on 32bit Windows is removed.</p>
<p>Own Id: OTP-9767
* 
The NIF <em>reload</em> mechanism is deprecated. Do not use it as an upgrade method for live production systems. It might be removed in future releases. It can still serve as a development feature but a warning message will be logged each time it is used.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9771
* 
The driver interface has been changed to enable 64-bit aware drivers. Most importantly the return types for ErlDrvEntry callbacks 'call' and 'control' has ben enlarged which require drivers to be changed or they will cause emulator crashes. See <a href="./erl_driver#rewrites_for_64_bits">Rewrites for 64-bit driver interface</a> in the driver manual.</p>
<p>Due to this driver <a href="./erl_driver#version_management">version management</a> is now mandatory. A driver that is not written with version management or a driver that was compiled with the wrong major version will be not be loaded by the emulator.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-9795
* 
Eliminate use of deprecated regexp module</p>
<p>Own Id: OTP-9810</p>
<h2 id="erts-585">Erts 5.8.5</h2>
<h2 id="fixed-bugs-and-malfunctions_117">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Several bugs concerning constant binary constructions such as &lt;&lt;0:4294967295&gt;&gt; have been corrected. Depending on the actual size of the binary and the type of run-time system (32-bit, halfword, 64-bit), such expression could either crash the run-time system or make the loader refuse loading of the module.</li>
</ul>
<p>Own Id: OTP-9284
* 
The Erlsrv utility failed to stop the erlang machine if no StopAction was defined when the service was stopped. This is now corrected.</p>
<p>Own Id: OTP-9344
* 
Due to a bug in glibc the runtime system could abort while trying to destroy a mutex. A fix for this was introduced in R14B02. This fix did, however, not solve the problem. The runtime system will now issue a warning instead of aborting.</p>
<p>Own Id: OTP-9373 Aux Id: OTP-9009
* 
Replace atom in DRV macro in prim_file with string</p>
<p>An experimental version of Dialyzer discovered that the atom that replaced the DRV macro in prim_file ends up in calls to erlang:open_port({spawn, Driver}, Portopts) as the Driver argument. The documentation states that this call requires a string there.</p>
<p>This change is also consistent with the one introduced in commit 0f03b1e9d2bef3bc830c31a369261af4c5234727 by Kostis Sagonas.</p>
<p>Own Id: OTP-9377
* 
Fix typos in the epmd documentation (Thanks to Holger Weiß )</p>
<p>Own Id: OTP-9387
* 
Fix faulty integer terms created by NIF API from 64-bit integers on halfword emulator. (Thanks to Paolo Negri and Paul Davis)</p>
<p>Own Id: OTP-9394
* 
Fix <em>epmd</em> crash on vxworks caused by faulty argument to select() system call.</p>
<p>Own Id: OTP-9427 Aux Id: seq11855
* 
The ets:test_ms function could in rare cases truncate the error messages. This is now corrected.</p>
<p>Own Id: OTP-9435
* 
Fix bug related to hibernate and HiPE (clear F_HIBERNATE_SCHED flag)</p>
<p>F_HIBERNATE_SCHED flag that was introduced in b7ecdcd1ae9e11b8f75e must be cleared in hipe_mode_switch as well. Otherwise, processes running HiPE code that hibernate, wake up and then trap into a BIF will not be rescheduled.(Thanks to Paul Guyot)</p>
<p>Own Id: OTP-9452
* 
Fix bug in FreeBSD topology detection code (Thanks to Paul Guyot)</p>
<p>Own Id: OTP-9453
* 
Fix use of logical operator &amp;&amp; with constant operand instead of bitwise &amp; (Thanks to Cristian Greco)</p>
<p>Own Id: OTP-9454
* 
inet: error if fd does not match socket domain</p>
<p>If an IPv4 fd is opened as an IPv6 socket, unexpected behaviour can occur. For example, if an IPv4 UDP socket is opened and passed into Erlang as an IPv6 socket, the first 3 bytes (corresponding to 1 byte representing the protocol family, 2 bytes set to the port) are stripped from the payload. The cause of the UDP payload truncation happens in inet_drv.c:packet_inet_input when a call to inet_get_address fails silently because the family is set to PF_INET6 but the buffer len is the size of an IPv4 struct sockaddr_in.</p>
<p>(Thanks to Andrew Tunnell-Jones for finding the bug and the test case!)</p>
<p>Own Id: OTP-9455
* 
erts: use a union to avoid strict aliasing issues</p>
<p>Use a union for pointer type conversion to avoid compiler warnings about strict-aliasing violations with gcc-4.1. gcc &gt;= 4.2 does not emit the warning. erts: adapt matrix_nif to R14 erl_nif API changes (Thanks To Tuncer Ayaz)</p>
<p>Own Id: OTP-9487
* 
fix 64-bit issues in the garbage collection (Thanks to Richard Carlsson)</p>
<p>Own Id: OTP-9488
* 
epmd: fix compiler warnings</p>
<p>Suppress compiler warnings about ignored return values. (Thanks to Michael Santos )</p>
<p>Own Id: OTP-9500
* 
Fix non-existing function (erlang:disconnect/1) in distributed reference manual (Thanks to Fabian Król)</p>
<p>Own Id: OTP-9504
* 
Document fdatasync -lrt requirement (SunOS &lt;= 5.10) (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9512
* 
Let epmd ignore empty ERL_EPMD_ADDRESS</p>
<p>If the environment variable ERL_EPMD_ADDRESS is set to the empty string, empd now behaves like it does by default when ERL_EPMD_ADDRESS is unset. That is, in this case, epmd now listens on all available interfaces instead of using only the loopback interface, which happened because epmd added the loopback address to the (in this case empty) list of addresses specified via ERL_EPMD_ADDRESS.</p>
<p>Also, epmd now ignores ERL_EPMD_ADDRESS if it contains only separator characters (comma and space).</p>
<p>The same applies to epmd's -address option.(Thanks to Holger Weiß)</p>
<p>Own Id: OTP-9525
* 
Remove dead code in erl_compile (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9527
* 
Add erlang:external_size/2 BIF</p>
<p>This BIF's second parameter is a list of options. Currently the only allowed option is {minor_version, Version} where version is either 0 (default) or 1. (Thanks to Filipe David Manana )</p>
<p>Own Id: OTP-9528
* 
Fix enif_compare on 64bits machines</p>
<p>In 64bits machines the Sint type has a size of 8 bytes, while on 32bits machines it has a 4 bytes size. enif_compare was ignoring this and therefore returning incorrect values when the result of the CMP function (which returns a Sint value) doesn't fit in 4 bytes. (Thanks to Filipe David Manana)</p>
<p>Own Id: OTP-9533
* 
Implement or fix -Werror option</p>
<p>If -Werror is enabled and there are warnings no output file is written. Also make sure that error/warning reporting is consistent. (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9536
* 
In some rare cases we did not have a run queue when scheduling misc ops. This is now fixed.</p>
<p>Own Id: OTP-9537
* 
Remove misc. compiler warnings</p>
<p>Own Id: OTP-9542
* 
Two bugs in gen_sctp has been corrected: getopts/setopts hence also send could only be called from socket owner, and options 'linger', 'rcvbuf' and 'sndbuf' was read from wrong protocol layer hence read wrong values by getopts.</p>
<p>Own Id: OTP-9544
* 
Erlang/OTP can now be built on MacOS X Lion.</p>
<p>Own Id: OTP-9547
* 
XML files have been corrected.</p>
<p>Own Id: OTP-9550 Aux Id: OTP-9541
* 
Fix potential errors inspired by running cppcheck(1) (Thanks to Christian von Roques)</p>
<p>Own Id: OTP-9557
* 
When auxiliary work was enqueued on a scheduler, the wakeup of the scheduler in order to handle this work could be lost. Wakeups in order to handle ordinary work were not effected by this bug. The bug only effected runtime systems with SMP support as follows:</p>
<ul>
<li>Deallocation of some ETS data structures could be delayed.</li>
<li>On Linux systems not using the NPTL thread library (typically ancient systems with kernel versions prior to 2.6) and Windows systems, the <em>{Port, {exit_status, Status}}</em> message from a terminating port program could be delayed. That is, it only effected port programs which had been started by passing <em>exit_status</em> as an option to <em>open_port/2</em> .</li>
</ul>
<p>Own Id: OTP-9567
* 
Handle rare race in the crypto key server functionality</p>
<p>Own Id: OTP-9586</p>
<h2 id="improvements-and-new-features_42">Improvements and New Features</h2>
<ul>
<li>Types and specifications have been added.</li>
</ul>
<p>Own Id: OTP-9356
* 
New allocator strategy "address order first fit". May ease the emptying of memory carriers and thereby real release of memory back to the OS.</p>
<p>Own Id: OTP-9424
* 
The new <em>erlang:check_old_code/1</em> BIF checks whether a module has old code.</p>
<p>Own Id: OTP-9495
* 
Update documentation and specifications of some of the zlib functions.</p>
<p>Own Id: OTP-9506
* 
Detect the available CPUs on IRIX</p>
<p>Add support for querying the number of configured and online processors on SGI systems running IRIX.(Thanks to Holger Weiß)</p>
<p>Own Id: OTP-9531</p>
<h2 id="erts-584">Erts 5.8.4</h2>
<h2 id="fixed-bugs-and-malfunctions_118">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix binary and iolist overflow problems. Typically problems arose in length calculation where the result would exceed (1 bsl 32 - 1).</li>
</ul>
<p>Own Id: OTP-9118
* 
Using the old erlang shell (i.e. erl instead on werl) on windows and doing several init:restart's would eventually hang the VM. That is no longer the case.</p>
<p>Own Id: OTP-9139
* 
Removed recursive C code when printing Erlang terms to buffers, avoiding stack overflows that could cause VM to crash.</p>
<p>Own Id: OTP-9140
* 
The send_timeout option in gen_tcp did not work properly in active mode or with {active,once} options. This is now corrected.</p>
<p>Own Id: OTP-9145
* 
Fixed various typos across the documentation (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9154
* 
Remove duplicate stack entries which could occur after calling certain BIFs.</p>
<p>Own Id: OTP-9163
* 
A race when starting two nodes simultaneously using run_erl has been removed.</p>
<p>Own Id: OTP-9164
* 
Add documentation on .erlang processing back again (Thanks to Gabor Liptak)</p>
<p>Own Id: OTP-9189
* 
Remove gratuitous paren in driver_entry(Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9192
* 
Fix some wrong pointer dereferences (Thanks to Cristian Greco)</p>
<p>Own Id: OTP-9194
* 
erts: Remove unused variables (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9205
* 
The documentation for <em>init:get_args/0</em> has been removed. <em>init:get_args/0</em> itself was deprecated in R9C and removed in R12B. (Thanks to Eric Pailleau.)</p>
<p>Own Id: OTP-9209
* 
Allow user to specify the IP address epmd binds to</p>
<p>The IP address(es) epmd binds to can now be specified by the user, either via epmd's new "-address" option or (if that's not used) by setting the environment variable ERL_EPMD_ADDRESS. Multiple addresses may be specified using a comma-separated list. If the loopback address is not in this list, it will be added implicitly, so that the daemon can be queried by an interactive epmd process.(Thanks to Holger Weiß)</p>
<p>Own Id: OTP-9213
* 
epmd: include host address in local access check</p>
<p>In FreeBSD jails, the source and destination address of connections to localhost are changed to be the IP address of the jail. Consider connections from the host's IP address to itself (e.g., the source and destination address match) to be local for the access control checks. (Thanks to Michal Santos and Tom at diogunix.com)</p>
<p>Own Id: OTP-9214
* 
Fix list returned by net_kernel:epmd_module</p>
<p>Function epmd_module of net_kernel returns a list instead of an atom, when the epmd_module-flag is used. (Thanks to Markus Knofe)</p>
<p>Own Id: OTP-9215
* 
Fix epmd's dbg_perror() output</p>
<p>The dbg_perror() function now hands the current errno value over to dbg_gen_printf(). This fixes the problem that errno had been reset to zero by the time it was used (to print the corresponding error message) in the dbg_gen_printf() function. (Thanks to Holger Weiß)</p>
<p>Own Id: OTP-9223
* 
heart: remove garbage appended to heart command</p>
<p>heart:get_cmd/0 is documented to return an empty string if the command is cleared. get_cmd/0 returns 2 extra bytes: 1 byte for the trailing null, 1 byte from the op (the op is an unsigned char and 2 bytes are allocated for it in the returned buffer). (Thanks to Michael Santos)</p>
<p>Own Id: OTP-9224
* 
file: fix hang reading compressed files</p>
<p>The gzio driver goes into an infinite loop when reading past the end of a compressed file. Reported-By: Alex Morarash (Thanks to Michael Santos)</p>
<p>Own Id: OTP-9245
* 
Eliminate alias warnings from gcc 4.5.2</p>
<p>Own Id: OTP-9250
* 
Unsigned integer may overflow in error message (Thanks to Michael Santos)</p>
<p>Own Id: OTP-9251
* 
Driver names should be strings, not atoms</p>
<p>Own Id: OTP-9253
* 
driver_entry: Remove gratuitous paren and fix typo (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9254
* 
Fix format specifiers in erl_exit messages</p>
<p>Fix an error message by using an unsigned integer specifier as seen in a tweet by @metabrew: #erlang VM crashed with "no next heap size found: -2090496108, offset 0", suddenly allocated all available RAM</p>
<p>Also correct mis-typed string formats in bif.c.(Thanks to Michael Santos)</p>
<p>Own Id: OTP-9262
* 
net_drv: remove unused tcp request id inet_drv: remove gratuitous assignment (Thanks to Tuncer Ayaz)</p>
<p>Own Id: OTP-9263
* 
Teach run_erl RUN_ERL_DISABLE_FLOWCNTRL for disabling flow control</p>
<p>Flow control can cause unwanted behaviour of the beam process, if accidentally hit Ctrl-S (instead of Ctrl-D to detach) the entire beam may be blocked.</p>
<p>Fix this problem by making it possible to turn off flow control by setting the environment variable RUN_ERL_DISABLE_FLOWCNTRL. (Thanks to Jonas Faklkevik)</p>
<p>Own Id: OTP-9270
* 
The following bugs due to missing memory barriers have been fixed:</p>
<ul>
<li>ETS tables using the <em>write_concurrency</em> option could potentially get into an internally inconsistent state.</li>
<li>ETS tables using the <em>ordered_set</em> option could potentially get into an internally inconsistent state.</li>
<li>
<p>A number of memory barriers have been added when building with the <em>libatomic_ops</em> API (i.e. when passing <em>--with-libatomic_ops=PATH</em> to <em>configure</em> ) and the tilera atomics API (i.e. when building for the tilera chip). Note that these bugs were due to erroneous usage of the APIs, and not in the implementations of the APIs. When using these APIs the following bugs where present:</p>
</li>
<li>
<p>The BIF <em>erlang:ports/0</em> could return an erroneous result.</p>
</li>
<li>A thread blocking other threads during code loading, or setup of tracing could potentially read invalid data.</li>
<li>Fixation of ETS tables could potentially get into an internally inconsistent state.</li>
</ul>
<p>Own Id: OTP-9281
* 
Fix halfword bug for ETS ordered_set when doing <em>select/match</em> with partly bound key.</p>
<p>Own Id: OTP-9292
* 
Fix bug in <em>code:is_module_native</em> that caused crash for deleted modules.</p>
<p>Own Id: OTP-9298
* 
Calling <em>driver_async_cancel()</em> could cause a scheduler thread to enter an eternal loop doing no useful work. (Thanks to Anders Ramsell)</p>
<p>Own Id: OTP-9302</p>
<h2 id="improvements-and-new-features_43">Improvements and New Features</h2>
<ul>
<li>New <em>enif_is_exception function</em> to allow NIFs to determine whether an <em>ERL_NIF_TERM</em> represents an exception. (Thanks to Steve Vinoski)</li>
</ul>
<p>Own Id: OTP-9150
* 
A process being garbage collected by another process could be scheduled on another scheduler. This prevented this scheduler from doing any useful work until the garbage collection was done. This either occurred due to a explicit call to the <em>garbage_collect/1</em> BIF, or due to a garbage collection part of code loading. A process being garbage collected like this will now not be scheduled until the garbage collection has completed.</p>
<p>Own Id: OTP-9211
* 
Remove unnecessary validation copy in prim_file:drv_command/3 (Thanks to Tony Rogvall)</p>
<p>Own Id: OTP-9276
* 
Symbolic link handling on windows have been slightly updated to map error conditions more consequently and correctly read directory links created outside of the Erlang environment.</p>
<p>Own Id: OTP-9279
* 
Due to standard library DLL mismatches between versions of OpenSSL and Erlang/OTP, OpenSSL is now linked statically to the crypto driver on Windows. This fixes problems starting crypto when running Erlang as a service on all Windows versions.</p>
<p>Own Id: OTP-9280
* 
Halfword emulator memory handling improvements:</p>
<ul>
<li>Much more of internal memory structures have been made able to use "high" memory and are no longer restricted to the 4Gb limit that still applies for all process heap data.</li>
<li>Fixed faulty values from <em>erlang:memory()</em> caused by 32-bit counter overflow.</li>
<li>New counter <em>low</em> in <em>erlang:memory()</em> that sums up all memory restricted by 4Gb limit.</li>
</ul>
<p>Own Id: OTP-9291 Aux Id: seq11841
* 
The value set in the undocumented and unsupported ERL_version_FLAGS (e.g. ERL_R14B03_FLAGS) environment variable can now be overridden by the command line (similar to ERL_AFLAGS).</p>
<p>Own Id: OTP-9297</p>
<h2 id="erts-5832">Erts 5.8.3.2</h2>
<h2 id="known-bugs-and-problems_4">Known Bugs and Problems</h2>
<ul>
<li>Fix halfword emulator bug in <em>ets:select_delete</em> for <em>ordered_set</em> that caused emulator to crash.</li>
</ul>
<p>Own Id: OTP-9258 Aux Id: seq11836</p>
<h2 id="erts-5831">Erts 5.8.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_119">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Ets table type ordered_set could order large integer keys wrongly on pure 64bit platforms. This is now corrected.</li>
</ul>
<p>Own Id: OTP-9181
* 
The status of a process was unnecessarily set to waiting before a process was enqueued in a run queue. This bug was harmless up until OTP-R14B01. In OTP-R14B02 <em>erlang:hibernate/3</em> was fixed (OTP-9125). After the introduction of OTP-9125, the previously harmless process status bug sometimes caused erroneous badarg exceptions from <em>process_info()</em> .</p>
<p>OTP-9125 also introduced a thread unsafe access to the status field of a process which now also have been fixed.</p>
<p>*** INCOMPATIBILITY with noxs ***</p>
<p>Own Id: OTP-9197</p>
<h2 id="erts-583">Erts 5.8.3</h2>
<h2 id="fixed-bugs-and-malfunctions_120">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The scroll wheel now scrolls the werl window on Windows.</li>
</ul>
<p>Own Id: OTP-8985
* 
Some malformed distribution messages could cause VM to crash, this is now corrected.</p>
<p>Own Id: OTP-8993
* 
The OS function getifaddrs() can return NULL in some address fields for e.g PPP and tunnel devices which caused the emulator to segfault. This bug has now been corrected.</p>
<p>Own Id: OTP-8996
* 
The expression &lt;<A:0>&gt; would always produce an empty binary, even if <em>A</em> was not an integer. Corrected to cause a <em>badarg</em> exception if the type of <em>A</em> is invalid. (Thanks to Zvi.)</p>
<p>Own Id: OTP-8997
* 
A bug that potentially could cause an emulator crash when deleting an ETS-table has been fixed. A resource leak when hitting the maximum amount of ETS-tables allowed has also been fixed.</p>
<p>Own Id: OTP-8999
* 
A bug in the <em>exit/2</em> BIF could potentially cause an emulator crash.</p>
<p>Own Id: OTP-9005
* 
Due to a bug in glibc the runtime system could abort while trying to destroy a mutex. The runtime system will now issue a warning instead of aborting.</p>
<p>Own Id: OTP-9009
* 
A bug in epmd could create strange behaviour when listen() calls failed. This is now corrected thanks to Steve Vinoski.</p>
<p>Own Id: OTP-9024
* 
When setting file_info the win32_driver will now correctly set access and modified time. Previously these entities were swapped.</p>
<p>Own Id: OTP-9046
* 
Setting scheduler bind type to <em>unbound</em> failed if binding of schedulers wasn't supported, or if CPU topology wasn't present. This even though the documentation stated that it is possible to set the bind type to <em>unbound</em> .</p>
<p>Own Id: OTP-9056 Aux Id: Seq11779
* 
Two problems were fixed in crash dump: The time left for timers are now shown as unsigned integers and the contents of ordered_set ETS tables is no longer included.</p>
<p>Own Id: OTP-9057
* 
The VM could fail to set IP_TOS and SO_PRIORITY in certain situations, either because sockets were supplied as open file descriptors, or because SO_PRIORITY by default was set higher than the user can explicitly set it to. Those situations are now handled.</p>
<p>Own Id: OTP-9069
* 
Wx on MacOS X generated complains on stderr about certain cocoa functions not being called from the "Main thread". This is now corrected.</p>
<p>Own Id: OTP-9081
* 
Fix a couple typos in driver_entry(3) (thanks to Tuncer Ayaz).</p>
<p>Own Id: OTP-9085
* 
Mention that "-detached" implies "-noinput"</p>
<p>Clarify that specifying "-noinput" is unnecessary if the "-detached" flag is given. (thanks to Holger Weiß)</p>
<p>Own Id: OTP-9086
* 
A potential problem (found by code inspection) when calling a fun whose code was not loaded has been fixed.</p>
<p>Own Id: OTP-9095
* 
The emulator could get into a state where it didn't check for I/O.</p>
<p>Own Id: OTP-9105 Aux Id: Seq11798
* 
Attempting to create binaries exceeding 2Gb (using for example <em>term_to_binary/1</em> ) would crash the emulator with an attempt to allocate huge amounts of memory. (Thanks to Jon Meredith.)</p>
<p>Own Id: OTP-9117
* 
Fix erlang:hibernate/3 on HiPE enabled emulator (Thanks to Paul Guyot)</p>
<p>Own Id: OTP-9125</p>
<h2 id="improvements-and-new-features_44">Improvements and New Features</h2>
<ul>
<li>From this release, the previously experimental halfword emulator is now official. It can be enabled by giving the <em>--enable-halfword-emulator</em> option to the <em>configure</em> script.</li>
</ul>
<p>The halfword emulator is a 64-bit application, but uses halfwords (32-bit words) for all data in Erlang processes, therefore using less memory and being faster than the standard 64-bit emulator. The total size of all BEAM code and all process data for all processes is limited to 4Gb, but ETS tables and off-heap binaries are only limited by the amount of available memory.</p>
<p>Own Id: OTP-8941
* 
32-bit atomic memory operations have been introduced internally in the run time system, and are now used where appropriate. There were previously only atomic memory operations of word size available. The 32-bit atomic memory operations slightly reduce memory consumption, and slightly improve performance on 64-bit runtime systems.</p>
<p>Own Id: OTP-8974
* 
Performance enhancements for looking up timer-entries and removing timers from the wheel.</p>
<p>Own Id: OTP-8990
* 
Write accesses to ETS tables have been optimized by reducing the amount of atomic memory operations needed during a write access.</p>
<p>Own Id: OTP-9000
* 
Strange C coding in the VM made the -D_FORTIFY_SOURCE option to gcc-4.5 react badly. The code is now cleaned up so that it's accepted by gcc-4.5.</p>
<p>Own Id: OTP-9025
* 
The memory footprint for loaded code has been somewhat reduced (especially in the 64-bit BEAM machine).</p>
<p>Own Id: OTP-9030
* 
The maximum number of allowed arguments for an Erlang function has been lowered from 256 to 255, so that the number of arguments can now fit in a byte.</p>
<p>Own Id: OTP-9049
* 
Dependency generation for Makefiles has been added to the compiler and erlc. See the manual pages for <em>compile</em> and <em>erlc</em> . (Thanks to Jean-Sebastien Pedron.)</p>
<p>Own Id: OTP-9065</p>
<h2 id="erts-582">Erts 5.8.2</h2>
<h2 id="fixed-bugs-and-malfunctions_121">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix format_man_pages so it handles all man sections and remove warnings/errors in various man pages.</li>
</ul>
<p>Own Id: OTP-8600
* 
The <em>configure</em> command line argument <a href="../doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP">--enable-ethread-pre-pentium4-compatibility</a> had no effect. This option is now also automatically enabled if required on the build machine.</p>
<p>Own Id: OTP-8847
* 
Windows 2003 and Windows XP pre SP3 would sometimes not start the Erlang R14B VM at all due to a bug in the cpu topology detection. The bug affects Windows only, no other platform is even remotely affected. The bug is now corrected.</p>
<p>Own Id: OTP-8876
* 
The HiPE run-time in the 64-bit emulator could do a 64-bit write to a 32-bit struct field. It happened to be harmless on Intel/AMD processors. Corrected. (Thanks to Mikael Pettersson.)</p>
<p>Own Id: OTP-8877
* 
A bug in <a href="./erl_driver#erl_drv_tsd_get">erl_drv_tsd_get()</a> and <a href="./erl_nif#enif_tsd_get">enif_tsd_get()</a> could cause an emulator crash. These functions are currently not used in OTP. That is, the crash only occur on systems with user implemented NIF libraries, or drivers that use one of these functions.</p>
<p>Own Id: OTP-8889
* 
Calling <em>erlang:system_info({cpu_topology, CpuTopologyType})</em> with another <em>CpuTopologyType</em> element than one of the documented atoms <em>defined</em> , <em>detected</em> , or <em>used</em> caused an emulator crash. (Thanks to Paul Guyot)</p>
<p>Own Id: OTP-8914
* 
The ERTS internal rwlock implementation could get into an inconsistent state. This bug was very seldom triggered, but could be during heavy contention. The bug was introduced in R14B (erts-5.8.1).</p>
<p>The bug was most likely to be triggered when using the <em>read_concurrency</em> option on an ETS table that was frequently accessed from multiple processes doing lots of writes and reads. That is, in a situation where you typically don't want to use the <em>read_concurrency</em> option in the first place.</p>
<p>Own Id: OTP-8925 Aux Id: OTP-8544
* 
Tracing to port could cause an emulator crash when unloading the trace driver.</p>
<p>Own Id: OTP-8932
* 
Removed use of CancelIoEx on Windows that had been shown to cause problems with some drivers.</p>
<p>Own Id: OTP-8937
* 
The fallback implementation used when no native atomic implementation was found did not compile. (Thanks to Patrick Baggett, and Tuncer Ayaz)</p>
<p>Own Id: OTP-8944
* 
Some integer values used during load balancing could under rare circumstances wrap causing a load unbalance between schedulers.</p>
<p>Own Id: OTP-8950
* 
The windows VM now correctly handles appending to large files (&gt; 4GB).</p>
<p>Own Id: OTP-8958
* 
Name resolving of IPv6 addresses has been implemented for Windows versions that support it. The use of ancient resolver flags (AI_V4MAPPED | AI_ADDRCONFIG) to the getaddrinfo() function has been removed since e.g FreeBSD regard mapped IPv4 addresses to be a security problem and the semantics of the address configured flag is uncertain.</p>
<p>Own Id: OTP-8969</p>
<h2 id="improvements-and-new-features_45">Improvements and New Features</h2>
<ul>
<li>The help texts produced by the <em>configure</em> scripts in the top directory and in the erts directory have been aligned and cleaned up.</li>
</ul>
<p>Own Id: OTP-8859
* 
When the runtime system had fewer schedulers than logical processors, the system could get an unnecessarily large amount reader groups.</p>
<p>Own Id: OTP-8861
* 
<em>run_rel</em> has been updated to support Solaris's /dev/ptmx device and to load the necessary STREAMS modules so that <em>to_erl</em> can provide terminal echo of keyboard input. (Thanks to Ryan Tilder.)</p>
<p>Own Id: OTP-8878
* 
The Erlang VM now supports Unicode filenames. The feature is turned on by default on systems where Unicode filenames are mandatory (Windows and MacOSX), but can be enabled on other systems with the '+fnu' emulator option. Enabling the Unicode filename feature on systems where it is not default is however considered experimental and not to be used for production. Together with the Unicode file name support, the concept of "raw filenames" is introduced, which means filenames provided without implicit unicode encoding translation. Raw filenames are provided as binaries, not lists. For further information, see stdlib users guide and the chapter about using Unicode in Erlang. Also see the file module manual page.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8887
* 
Buffer overflows have been prevented in <em>erlc</em> , <em>dialyzer</em> , <em>typer</em> , <em>run_test</em> , <em>heart</em> , <em>escript</em> , and <em>erlexec</em> .
 (Thanks to Michael Santos.) 
Own Id: OTP-8892
* 
The runtime system is now less eager to suspend processes sending messages over the distribution. The default value of the distribution buffer busy limit has also been increased from 128 KB to 1 MB. This in order to improve throughput.</p>
<p>Own Id: OTP-8901
* 
The distribution buffer busy limit can now be configured at system startup. For more information see the documentation of the <em>erl</em> <a href="./erl#+zdbbl">+zdbbl</a> command line flag. (Thanks to Scott Lystig Fritchie)</p>
<p>Own Id: OTP-8912
* 
The inet driver internal buffer stack implementation has been rewritten in order to reduce lock contention.</p>
<p>Own Id: OTP-8916
* 
New ETS option <em>compressed</em> , to enable a more compact storage format at the expence of heavier table operations. For test and evaluation, <em>erl +ec</em> can be used to force compression on all ETS tables.</p>
<p>Own Id: OTP-8922 Aux Id: seq11658
* 
There is now a new function inet:getifaddrs/0 modeled after C library function getifaddrs() on BSD and LInux that reports existing interfaces and their addresses on the host. This replaces the undocumented and unsupported inet:getiflist/0 and inet:ifget/2.</p>
<p>Own Id: OTP-8926
* 
Support for detection of CPU topology and binding of schedulers on FreeBSD 8 have been added. (Thanks to Paul Guyot)</p>
<p>Own Id: OTP-8939
* 
Several bugs related to hibernate/3 and HiPE have been corrected. (Thanks to Paul Guyot.)</p>
<p>Own Id: OTP-8952
* 
Support for soft and hard links on Windows versions and filesystems that support them is added.</p>
<p>Own Id: OTP-8955
* 
The win32 virtual machine is now linked large address aware. his allows the Erlang VM to use up to 3 gigs of address space on Windows instead of the default of 2 gigs.</p>
<p>Own Id: OTP-8956</p>
<h2 id="erts-5812">Erts 5.8.1.2</h2>
<h2 id="fixed-bugs-and-malfunctions_122">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix that the documentation top index generator can handle an Ericsson internal application group.</li>
</ul>
<p>Own Id: OTP-8875
* 
In embedded mode, on_load handlers that called <em>code:priv_dir/1</em> or other functions in <em>code</em> would hang the system. Since the <em>crypto</em> application now contains an on_loader handler that calls <em>code:priv_dir/1</em> , including the <em>crypto</em> application in the boot file would prevent the system from starting.</p>
<p>Also extended the <em>-init_debug</em> option to print information about on_load handlers being run to facilitate debugging.</p>
<p>Own Id: OTP-8902 Aux Id: seq11703</p>
<h2 id="erts-5811">Erts 5.8.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_123">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Windows 2003 and Windows XP pre SP3 would sometimes not start the Erlang R14B VM at all due to a bug in the cpu topology detection. The bug affects Windows only, no other platform is even remotely affected. The bug is now corrected.</li>
</ul>
<p>Own Id: OTP-8876</p>
<h2 id="erts-581">Erts 5.8.1</h2>
<h2 id="fixed-bugs-and-malfunctions_124">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Very small floating point numbers generated errors when converting from list to float in some versions of the VM, this is now corrected so that i.e. list_to_float("1.0e-324"). returns 0.0 in all versions of Erlang.</li>
</ul>
<p>Own Id: OTP-7178
* 
Windows Vista and Windows 7 file system virtualization, which makes "old style" windows programs execute in a file system sandbox, was previously unintentionally turned on for the Erlang VM. This is now corrected so that i.e. writes to C:\Program Files. without administrator privileges will fail.</p>
<p>Own Id: OTP-7405
* 
Fix faulty 64-bit integer term output from drivers. Large 64-bits integers did not generate correct bignums and could even cause emulator crash. Only affects drivers using ERL_DRV_INT64 or ERL_DRV_UINT64, introduced in R13B03.</p>
<p>Own Id: OTP-8716
* 
Fixed: inet:setopts(S, [{linger,{true,2}}]) returned {error,einval} for SCTP sockets. The inet_drv had a bug when checking the option size.</p>
<p>Own Id: OTP-8726 Aux Id: seq11617
* 
Fix libm linking with --as-needed flag</p>
<p>When building with "--as-needed" linker flags on Linux the build will fail. This has now been fixed.</p>
<p>(Thanks to Christian Faulhammer)</p>
<p>Own Id: OTP-8728
* 
gen_udp:connect/3 was broken for SCTP enabled builds. It did not detect remote end errors as it should.</p>
<p>Own Id: OTP-8729
* 
Reduce the risk of integer wrapping in bin vheap size counting.</p>
<p>The vheap size series will now use the golden ratio instead of doubling and fibonacci sequences.</p>
<p>Own Id: OTP-8730
* 
ETS ordered_set containing <em>[]</em> as key could cause strange thing to happen, like an infinite hanging <em>ets:select</em> .</p>
<p>Own Id: OTP-8732
* 
reference() has been substituted for ref() in the documentation.</p>
<p>Own Id: OTP-8733
* 
When a native compiled module called a not loaded non-native compiled module that had an on_load function, the export entries were trashed after code loading so on the next call from the native compiled module to the non-native compiled the emulator crashed. This bug has now been fixed.</p>
<p>Own Id: OTP-8736
* 
HiPE-enabled Erlang VMs running on BSD systems sometimes generated messages like "Yikes! erts_alloc() returned misaligned address 0x8016a512c". Fixed. (Thanks to Mikael Pettersson.)</p>
<p>Own Id: OTP-8769
* 
A race condition in <em>erts_poll()</em> could cause delay of poll for I/O.</p>
<p>Own Id: OTP-8773
* 
Removed some potential vulnerabilities from the Erlang Port Mapper Daemon (epmd) and straightened up access control. Also removed hazardous interfaces allowing anyone on a machine to forcefully unregister other nodes. This means that the ei_unregister/erl_unregister interfaces in erl_interface is rendered not only error prone and mystifying as before, but totally ineffective. The old behaviour of unchecked node unregistering can be restored if needed, see epmd documentation for details.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8780
* 
Building in a source tree without prebuilt platform independent build results failed on the SSL examples when:</p>
<ul>
<li>cross building. This has been solved by not building the SSL examples during a cross build.</li>
<li>building on Windows.</li>
</ul>
<p>Own Id: OTP-8791
* 
inet:getsockopt for SCTP sctp_default_send_param had a bug to not initialize required feilds causing random answers. It is now corrected.</p>
<p>Own Id: OTP-8795 Aux Id: seq11655
* 
The hipe_bifs:get_hrvtime/0 BIF now always returns a real value even if the "perfctr" Linux kernel extension is not available. It used to return a dummy value. (Thanks to Mikael Pettersson.)</p>
<p>Own Id: OTP-8798
* 
Calling a native-code compiled module with an <em>on_load</em> function could cause a crash. (Thanks to Mikael Pettersson.)</p>
<p>Own Id: OTP-8799
* 
The emulator could crash while writing a crash dump if native-compiled modules had been loaded. (Thanks to Paul Guyot.)</p>
<p>Own Id: OTP-8801
* 
The garbage collector could crash if invoked from native-compiled code after a call to a BIF. (Thanks to Paul Guyot.)</p>
<p>Own Id: OTP-8821
* 
A rare memory leak in binary:matches is removed</p>
<p>Own Id: OTP-8823
* 
For a socket in the HTTP packet mode, the return value from <em>gen_tcp:recv/2,3</em> if there is an error in the header will be <em>{ok,{http_error,String}}</em> instead of <em>{error,{http_error,String}}</em> to be consistent with <em>ssl:recv/2,3</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8831</p>
<h2 id="improvements-and-new-features_46">Improvements and New Features</h2>
<ul>
<li>ets:select_reverse/{1,2,3} are now documented.</li>
</ul>
<p>Own Id: OTP-7863
* 
External format of integers changed to make full use of all 32 bits of INTEGER_EXT. This is a compatible change as old code can read full 32-bit integers but only produce 28-bit integers as INTEGER_EXT.</p>
<p>Own Id: OTP-8540 Aux Id: seq11534
* 
Large parts of the <em>ethread</em> library have been rewritten. The <em>ethread</em> library is an Erlang runtime system internal, portable thread library used by the runtime system itself.</p>
<p>Most notable improvement is a reader optimized rwlock implementation which dramatically improve the performance of read-lock/read-unlock operations on multi processor systems by avoiding ping-ponging of the rwlock cache lines. The reader optimized rwlock implementation is used by miscellaneous rwlocks in the runtime system that are known to be read-locked frequently, and can be enabled on ETS tables by passing the <a href="../stdlib/ets#new_2_read_concurrency">{read_concurrency, true}</a> option upon table creation. See the documentation of <a href="../stdlib/ets#new/2">ets:new/2</a> for more information. The reader optimized rwlock implementation can be fine tuned when starting the runtime system. For more information, see the documentation of the <a href="../erts/erl#+rg">+rg</a> command line argument of <em>erl</em> .</p>
<p>There is also a new implementation of rwlocks that is not optimized for readers. Both implementations interleaves readers and writers during contention as opposed to, e.g., the NPTL (Linux) pthread rwlock implementation which use either a reader or writer preferred strategy. The reader/writer preferred strategy is problematic since it starves threads doing the non-preferred operation.</p>
<p>The new rwlock implementations in general performs better in ERTS than common pthread implementations. However, in some extremely heavily contended cases this is not the case. Such heavy contention can more or less only appear on ETS tables. This when multiple processes do very large amounts of write locked operations simultaneously on the same table. Such use of ETS is bad regardless of rwlock implementation, will never scale, and is something we strongly advise against.</p>
<p>The new rwlock implementations depend on atomic operations. If no native atomic implementation is found, a fallback solution will be used. Using the fallback implies a performance degradation. That is, it is more important now than before to build OTP with a native atomic implementation.</p>
<p>The <em>ethread</em> library contains native atomic implementations for, x86 (32 and 64 bit), powerpc (32 bit), sparc V9 (32 and 64 bit), and tilera (32 bit). On other hardware gcc's builtin support for atomic memory access will be used if such exists. If no such support is found, <em>configure</em> will warn about no atomic implementation available.</p>
<p>The <em>ethread</em> library can now also use the <em>libatomic_ops</em> library for atomic memory accesses. This makes it possible for the Erlang runtime system to utilize optimized native atomic operations on more platforms than before. If <em>configure</em> warns about no atomic implementation available, try using the <em>libatomic_ops</em> library. Use the <a href="../doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP">--with-libatomic_ops=PATH</a> <em>configure</em> command line argument when specifying where the <em>libatomic_ops</em> installation is located. The <em>libatomic_ops</em> library can be downloaded from: <a href="http://www.hpl.hp.com/research/linux/atomic_ops/">http://www.hpl.hp.com/research/linux/atomic_ops/</a></p>
<p>The changed API of the <em>ethread</em> library has also caused modifications in the Erlang runtime system. Preparations for the to come "delayed deallocation" feature has also been done since it depends on the <em>ethread</em> library.</p>
<p><strong>Note</strong> : When building for x86, the <em>ethread</em> library will now use instructions that first appeared on the pentium 4 processor. If you want the runtime system to be compatible with older processors (back to 486) you need to pass the <a href="../doc/installation_guide/INSTALL#Advanced-configuration-and-build-of-ErlangOTP">--enable-ethread-pre-pentium4-compatibility</a> <em>configure</em> command line argument when configuring the system.</p>
<p>Own Id: OTP-8544
* 
erlang:localtime_to_universaltime({{2008, 8, 1}, {0, 0, 0}},true) when TZ=UTC now behaves consistently on all Unix platforms.</p>
<p>The problem fixed was originally reported by Paul Guyot on erlang-bugs mailing list:</p>
<p>http://www.erlang.org/pipermail/erlang-bugs/2008-November/001077.html</p>
<p>Own Id: OTP-8580
* 
Optimization reducing memory consumption by two words per ETS object.</p>
<p>Own Id: OTP-8737
* 
Fixes for unsupported halfword-emulator</p>
<p>Own Id: OTP-8745
* 
NIF 64-bit integer support; <em>enif_get_int64</em> , <em>enif_get_uint64</em> , <em>enif_make_int64</em> , <em>enif_make_uint64</em> .</p>
<p>Own Id: OTP-8746
* 
Alignment of trailing data in messages has been adjusted. This in order to be able to pass data of any type as trailing data in the future.</p>
<p>Own Id: OTP-8754
* 
The obsolete/driver.h header file has been removed. It has been obsolete and deprecated since R8B. Drivers that still include obsolete/driver.h must be updated to include erl_driver.h.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8758
* 
Added erlang:system_info(build_type) which makes it easier to chose drivers, NIF libraries, etc based on build type of the runtime system.</p>
<p>The NIF library for crypto can now be built for valgrind and/or debug as separate NIF libraries that will be automatically loaded if the runtime system has been built with a matching build type.</p>
<p>Own Id: OTP-8760
* 
Further lessened the memory requirements of ETS objects.</p>
<p>Own Id: OTP-8762
* 
The broken elib_malloc alternate memory allocator has been removed. <em>erlang:system_info(elib_malloc)</em> will always return <em>false</em> , and in R15, <em>erlang:system_info(elib_malloc)</em> will fail with a <em>badarg</em> exception.</p>
<p>Own Id: OTP-8764
* 
Calling <em>erlang:system_info/1</em> with the new argument <em>update_cpu_info</em> will make the runtime system reread and update the internally stored CPU information. For more information see the documentation of <a href="./erlang#system_info_update_cpu_info">erlang:system_info(update_cpu_info)</a> .</p>
<p>The CPU topology is now automatically detected on Windows systems with less than 33 logical processors. The runtime system will now, also on Windows, by default bind schedulers to logical processors using the <em>default_bind</em> bind type if the amount of schedulers is at least equal to the amount of logical processors configured, binding of schedulers is supported, and a CPU topology is available at startup.</p>
<p>Own Id: OTP-8765
* 
The SMP ERTS internal child waiter thread used on Linux system with NPTL was unintentionally disabled during cross compilation rewrites (OTP-8323 in R13B03). It has now been re-enabled. Enabling it again gives a slight performance improvement.</p>
<p>Own Id: OTP-8774
* 
<em>epmd</em> used to generate a message to the syslog when it started up, which could be annoying. This has been changed to only generate the message if the debug swith is given. (Thanks to Michael Santos.)</p>
<p>Own Id: OTP-8775
* 
The scheduler wakeup threshold is now possible to adjust at system boot. For more information see the <a href="./erl#+swt">+swt</a> command line argument of <em>erl</em> .</p>
<p>Own Id: OTP-8811
* 
The undocumented function inet:ifget/2 has been improved to return interface hardware address (MAC) on platforms supporting getaddrinfo() (such as BSD unixes). Note it still does not work on all platforms for example not Windows nor Solaris, so the function is still undocumented.</p>
<p>Buffer overflow and field init bugs for inet:ifget/2 and inet:getservbyname/2 has also been fixed.</p>
<p>Thanks to Michael Santos.</p>
<p>Own Id: OTP-8816
* 
Optimizations for MIPS when using gcc atomics. (Thanks to Steve Vinoski)</p>
<p>Own Id: OTP-8834
* 
Lock optimization in timer functionality.</p>
<p>Own Id: OTP-8835</p>
<h2 id="known-bugs-and-problems_5">Known Bugs and Problems</h2>
<ul>
<li>Fix epmd and build environment to build on VxWorks</li>
</ul>
<p>Own Id: OTP-8838</p>
<h2 id="erts-58">Erts 5.8</h2>
<h2 id="fixed-bugs-and-malfunctions_125">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Driver threads, such as async threads, using <a href="./erl_driver#ErlDrvPDL">port data locks</a> peeked at the port status field without proper locking when looking up the driver queue.</li>
</ul>
<p>Own Id: OTP-8475
* 
The use of <em>mmap()</em> was unnecessarily disabled when cross compiling.</p>
<p>The <em>configure</em> arguments <em>--with-ssl</em> , and <em>--with-odbc</em> refused to accept libraries outside of <em>$erl_xcomp_sysroot</em> when cross compiling for no good reason.</p>
<p>The <em>configure</em> argument <em>--with-odbc</em> didn't handle the value <em>yes</em> correct.</p>
<p>The <em>configure</em> arguments <em>--with-odbc</em> , and <em>--without-odbc</em> have also been added to the configure help.</p>
<p>(Thanks to Steve Vinoski for reporting these issues)</p>
<p>Own Id: OTP-8484
* 
A call to the BIF <em>unregister(RegName)</em> when a port had the name <em>RegName</em> registered in the runtime system without SMP support caused a runtime system crash. (Thanks to Per Hedeland for the bugfix and test case.)</p>
<p>Own Id: OTP-8487
* 
The runtime system crashed if fewer logical processors were found than reported by <em>sysconf( SC_NPROCESSORS_CONF)</em> .</p>
<p>Own Id: OTP-8549
* 
Fix memory management bug causing crash of non-SMP emulator with async threads enabled. The bug did first appear in R13B03.</p>
<p>Own Id: OTP-8591 Aux Id: seq11554
* 
Port locks could be prematurely destroyed.</p>
<p>Own Id: OTP-8612
* 
The <em>empd</em> program could loop and consume 100% CPU time if an unexpected error occurred in <em>listen()</em> or <em>accept()</em> . Now <em>epmd</em> will terminate if a non-recoverable error occurs. (Thanks to Michael Santos.)</p>
<p>Own Id: OTP-8618
* 
When kernel poll has been enabled, a livelock could in rare circumstances occur. Problem reported by Chetan Ahuja, fix by Mikael Pettersson.</p>
<p>Own Id: OTP-8632
* 
Windows: Closing port of program that stalled without reading all data could deadlock scheduler thread.</p>
<p>Own Id: OTP-8641
* 
On some combination of Montavista Linux on Cavium Octeon processors, some socket-related system calls returned other numbers than -1 for errors. This caused a core dump in inet_drv.c. Now the code works around this problem.</p>
<p>Own Id: OTP-8654
* 
Missing memory barriers in <em>erts_poll()</em> could cause the runtime system to hang indefinitely.</p>
<p>Own Id: OTP-8658
* 
<em>ethr_rwmutex_tryrlock()</em> acquired and refused to acquire a lock with inverted logic. The lock was however never acquired in a thread unsafe manner. (Thanks to JR Zhang for noting this issue)</p>
<p>Own Id: OTP-8662
* 
Extreme combinations of register/unregister in a highly parallell SMP application could crash the VM. The error is corrected.</p>
<p>Own Id: OTP-8663
* 
On Windows, files are now opened with FILE_SHARE_DELETE to get closer to Unix semantics.</p>
<p>Own Id: OTP-8667
* 
<em>erlang:system_info(multi_scheduling)</em> sometimes erroneously returned <em>enabled</em> when it should have returned <em>blocked</em> .</p>
<p>Own Id: OTP-8675
* 
Fix bug causing <em>erlang:decode_packet</em> and <em>enif_make_string</em> to generate faulty strings with negative character values for ascii values larger than 127. (Thanks to Paul Guyot)</p>
<p>Own Id: OTP-8685
* 
<em>open_port/2</em> with the <em>spawn</em> and <em>spawn_executable</em> options can include an <em>{env,Env}</em> option. In some cases unsetting variables would not work on Unix (typically if more variables were unset than were actually present in the environment).</p>
<p>Own Id: OTP-8701
* 
A user defined CPU topology set via a call to <a href="./erlang#system_flag_cpu_topology">erlang:system_flag(cpu_topology, CPUTopology)</a> was not properly verified, and could in worst case cause an emulator crash. The emulator crash could only occur when a user defined CPU topology already existed and was redefined.</p>
<p>Own Id: OTP-8710</p>
<h2 id="improvements-and-new-features_47">Improvements and New Features</h2>
<ul>
<li>The grammar for match specifications in ERTS users guide only described the tracing dialect of match specifications. An informal grammar for the ETS dialect is added.</li>
</ul>
<p>Own Id: OTP-8086 Aux Id: seq11333
* 
The module binary from EEP31 (and EEP9) is implemented.</p>
<p>Own Id: OTP-8217
* 
New NIF API function <em>enif_make_new_binary</em></p>
<p>Own Id: OTP-8474
* 
The guard BIF <em>is_boolean/1</em> (introduced in R10B) has now been included in the lists of BIFs allowed in guards in the Reference Manual.</p>
<p>Own Id: OTP-8477
* 
Added function <em>zip:foldl/3</em> to iterate over zip archives.</p>
<p>Added functions to create and extract escripts. See <em>escript:create/2</em> and <em>escript:extract/2</em> .</p>
<p>The undocumented function <em>escript:foldl/3</em> has been removed. The same functionality can be achieved with the more flexible functions <em>escript:extract/2</em> and <em>zip:foldl/3</em> .</p>
<p>Record fields has been annotated with type info. Source files as been adapted to fit within 80 chars and trailing whitespace has been removed.</p>
<p>Own Id: OTP-8521
* 
A regular expression with many levels of parenthesis could cause a buffer overflow. That has been corrected. (Thanks to Michael Santos.)</p>
<p>Own Id: OTP-8539
* 
<em>erlang:decode_packet(httph_bin,..)</em> could return corrupt header strings or even crash the VM. This has been fixed. It only happened on 32-bit VM if the header name was unknown and between 16 and 20 characters long. Sockets with simular <em>packet</em> option did not suffer from this bug.</p>
<p>Own Id: OTP-8548
* 
New NIF features:</p>
<ul>
<li>Send messages from a NIF, or from thread created by NIF, to any local process ( <em>enif_send</em> )</li>
<li>Store terms between NIF calls ( <em>enif_alloc_env</em> , <em>enif_make_copy</em> )</li>
<li>Create binary terms with user defined memory management ( <em>enif_make_resource_binary</em> )</li>
</ul>
<p>And some incompatible changes made to the API. For more information see the warning text in <a href="erl_nif">erl_nif(3)</a> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8555
* 
If the ' <em>fop</em> ' program (needed for building PDF files) cannot not be found, it is now possible to build the HTML and man pages anyway (there will also be dummy PDF files with no real content created). (Thanks to Tuncer Ayaz.)</p>
<p>Own Id: OTP-8559
* 
When defining macros the closing right parenthesis before the dot is now mandatory.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8562
* 
Local and imported functions now override the auto-imported BIFs when the names clash. The pre R14 behaviour was that auto-imported BIFs would override local functions. To avoid that old programs change behaviour, the following will generate an error:</p>
<ul>
<li>Doing a call without explicit module name to a local function having a name clashing with the name of an auto-imported BIF that was present (and auto-imported) before OTP R14A</li>
<li>Explicitly importing a function having a name clashing with the name of an autoimported BIF that was present (and autoimported) before OTP R14A</li>
<li>Using any form of the old compiler directive <em>nowarn_bif_clash</em></li>
</ul>
<p>If the BIF was added or auto-imported in OTP R14A or later, overriding it with an import or a local function will only result in a warning,</p>
<p>To resolve clashes, you can either use the explicit module name <em>erlang</em> to call the BIF, or you can remove the auto-import of that specific BIF by using the new compiler directive <em>-compile({no_auto_import,[F/A]}).</em> , which makes all calls to the local or imported function without explicit module name pass without warnings or errors.</p>
<p>The change makes it possible to add auto-imported BIFs without breaking or silently changing old code in the future. However some current code ingeniously utilizing the old behaviour or the <em>nowarn_bif_clash</em> compiler directive, might need changing to be accepted by the compiler.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8579
* 
A bug in re that could cause certain regular expression matches never to terminate is corrected. (Thanks to Michael Santos and Gordon Guthrie.)</p>
<p>Own Id: OTP-8589
* 
The erlang:open_port spawn and spawn_executable directives can include an <em>{env,Env}</em> directive to set up environment variables for the spawned process. A bug prevented applications from using <em>{env,Env}</em> to set an environment variable whose value ended with a ' <em>=</em> ' (equal sign) character; the trailing equal sign was mistaken as an indication that an environment variable was to be cleared from the environment of the spawned process. (Thanks to Steve Vinoski.)</p>
<p>Own Id: OTP-8614
* 
<em>receive</em> statements that can only read out a newly created reference are now specially optimized so that it will execute in constant time regardless of the number of messages in the receive queue for the process. That optimization will benefit calls to <em>gen_server:call()</em> . (See <em>gen:do_call/4</em> for an example of a receive statement that will be optimized.)</p>
<p>Own Id: OTP-8623
* 
The functions file:advise/4 and file:datasync/1 have been added. (Thanks to Filipe David Manana.)</p>
<p>Own Id: OTP-8637
* 
New NIF API functions: <em>enif_make_atom_len</em> , <em>enif_make_existing_atom_len</em> , <em>enif_make_string_len</em> , <em>enif_get_atom_length</em> , <em>enif_get_list_length</em> , <em>enif_is_list</em> , <em>enif_is_tuple</em> (by Tuncer Ayaz)</p>
<p>Own Id: OTP-8640
* 
Support for using gcc's built-in functions for atomic memory access has been added. This functionallity will be used if available and no other native atomic implementation in ERTS is available.</p>
<p>Own Id: OTP-8659
* 
The number of spinlocks used when implementing atomic fall-backs when no native atomic implementation is available has been increased from 16 to 1024.</p>
<p>Own Id: OTP-8660
* 
Writer preferred pthread read/write locks has been enabled on Linux.</p>
<p>Own Id: OTP-8661
* 
The runtime system will by default bind schedulers to logical processors using the <em>default_bind</em> bind type if the amount of schedulers are at least equal to the amount of logical processors configured, binding of schedulers is supported, and a CPU topology is available at startup.</p>
<p><strong>NOTE:</strong> If the Erlang runtime system is the only operating system process that binds threads to logical processors, this improves the performance of the runtime system. However, if other operating system processes (as for example another Erlang runtime system) also bind threads to logical processors, there might be a performance penalty instead. If this is the case you, are are advised to unbind the schedulers using the <a href="./erl#+sbt">+sbtu</a> command line argument, or by invoking <a href="./erlang#system_flag_scheduler_bind_type">erlang:system_flag(scheduler_bind_type, unbound)</a> .</p>
<p>Own Id: OTP-8666
* 
The recently added BIFs erlang:min/2, erlang:max/2 and erlang:port_command/3 are now auto-imported (as they were originally intended to be). Due to the recent compiler change (OTP-8579), the only impact on old code defining it's own min/2, max/2 or port_command/3 functions will be a warning, the local functions will still be used. The warning can be removed by using -compile({no_auto_import,[min/2,max/2,port_command/3]}). in the source file.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8669 Aux Id: OTP-8579
* 
There is a new option 'exclusive' to file:open/2 that uses the OS O_EXCL flag where supported to open the file in exclusive mode.</p>
<p>Own Id: OTP-8670
* 
Now, binary_to_term/2 is auto-imported. This will cause a compile warning if and only if a module has got a local function with that name.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8671
* 
Alignment of scheduler data and run queues were adjusted.</p>
<p>Own Id: OTP-8673
* 
Call time breakpoint tracing</p>
<ul>
<li>Introduce a <em>call_time</em> option to <em>erlang:trace_pattern/3</em> .This option enables call time breakpoint tracing on code that is executed by processes with call tracing enabled. Call time tracing stores the number of calls and the time spent of each function with this trace pattern enabled. The information can be retrieved with <em>erlang:trace_info/2</em></li>
<li>Add a scheduler array for BpData. To solve the issue of multiple schedulers constantly updating the head pointer to the bp data wheel, each scheduler now has its own entrypoint to the wheel. This head pointer can be updated without a locking being taken.</li>
</ul>
<p>Teach call count tracing to use atomics</p>
<ul>
<li>Call count previously used a global lock for accessing and writing its counter in the breakpoint. This is now changed to atomics instead.</li>
<li>The change will let call count tracing and cprof to scale better when increasing the number of schedulers.</li>
</ul>
<p>Own Id: OTP-8677
* 
<em>eprof</em> has been reimplemented with support in the Erlang virtual machine and is now both faster (i.e. slows down the code being measured less) and scales much better. In measurements we saw speed-ups compared to the old eprof ranging from 6 times (for sequential code that only uses one scheduler/core) up to 84 times (for parallel code that uses 8 cores).</p>
<p>Note: The API for the <em>eprof</em> has been cleaned up and extended. See the documentation.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8706</p>
<h2 id="erts-5752">Erts 5.7.5.2</h2>
<h2 id="known-bugs-and-problems_6">Known Bugs and Problems</h2>
<ul>
<li>Two bugs in gen_sctp has been corrected: getopts/setopts hence also send could only be called from socket owner, and options 'linger', 'rcvbuf' and 'sndbuf' was read from wrong protocol layer hence read wrong values by getopts.</li>
</ul>
<p>Own Id: OTP-9544</p>
<h2 id="erts-5751">Erts 5.7.5.1</h2>
<h2 id="fixed-bugs-and-malfunctions_126">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Driver threads, such as async threads, using <a href="./erl_driver#ErlDrvPDL">port data locks</a> peeked at the port status field without proper locking when looking up the driver queue.</li>
</ul>
<p>Own Id: OTP-8475
* 
A call to the BIF <em>unregister(RegName)</em> when a port had the name <em>RegName</em> registered in the runtime system without SMP support caused a runtime system crash. (Thanks to Per Hedeland for the bugfix and test case.)</p>
<p>Own Id: OTP-8487
* 
Fix memory management bug causing crash of non-SMP emulator with async threads enabled. The bug did first appear in R13B03.</p>
<p>Own Id: OTP-8591 Aux Id: seq11554</p>
<h2 id="erts-575">Erts 5.7.5</h2>
<h2 id="fixed-bugs-and-malfunctions_127">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fix <em>binary_to_term</em> crash on compressed term with corrupt size field.</li>
</ul>
<p>Own Id: OTP-8336
* 
Processes and/or ports could get stuck on a blocked scheduler when <em>erlang:system_flag(multi_scheduling, block)</em> was used.</p>
<p>Processes and/or ports could get stuck on an offline scheduler when schedulers online were reduced using <em>erlang:system_flag(schedulers_online, SchedulersOnline)</em> .</p>
<p>Own Id: OTP-8342
* 
Building on Windows will now work if the paths to <em>mc.exe</em> and <em>rc.exe</em> contain spaces. The README.win32 file has been updated with some information about building using Visual Studio 2008. (Thanks to Andrew Thompson.)</p>
<p>Own Id: OTP-8345
* 
EPMD now correctly handles the extra data field which can be given in the ALIVE2_REQ request and retrieved in the PORT2_RESP response. (Thanks to Klas Johansson.)</p>
<p>Own Id: OTP-8361
* 
The configure test for reliable floating point exceptions has been update to work on modern versions of Mac OS X. (Thanks to Trannie Carter.)</p>
<p>Own Id: OTP-8368
* 
ERTS makefiles used to detect the use of a gcc C compiler by checking if CC equaled gcc. That is, the makefiles failed to detect gcc C compilers with other command line names than gcc. `configure' now substitute GCC into the makefiles. If CC is a gcc C compiler, GCC will have the value yes. (Thanks to Jean-Sébastien Pédron)</p>
<p>Own Id: OTP-8373
* 
ETS bug causing the <em>memory</em> counter from <em>ets:info</em> for ordered_set's to sometimes get out of synch and absurdly high.</p>
<p>Own Id: OTP-8377 Aux Id: seq11442
* 
Immediately repeated multi-scheduling block/unblock cycles using <em>erlang:system_flag(multi_scheduling, block | unblock)</em> could deadlock the runtime system.</p>
<p>Own Id: OTP-8386
* 
A number of bugs concerning re and unicode are corrected:</p>
<p>re:compile no longer loses unicode option, which also fixes bug in re:split.</p>
<p>re:replace now handles unicode charlist replacement argument</p>
<p>re:replace now handles unicode RE charlist argument correctly</p>
<p>re:replace now handles binary unicode output correctly when nothing is replaced.</p>
<p>Most code, testcases and error isolation done by Rory Byrne.</p>
<p>Own Id: OTP-8394
* 
The loading of native code was not properly atomic in the SMP emulator, which could cause crashes. Also a per-MFA information table for the native code has now been protected with a lock since it turns that it could be accessed concurrently in the SMP emulator. (Thanks to Mikael Pettersson.)</p>
<p>Own Id: OTP-8397
* 
Fix processes in exiting status that are about to be scheduled, to not be allowed to garbage collect.</p>
<p>Own Id: OTP-8420
* 
Removed bogus "\011" character sequence in documentation.</p>
<p>Own Id: OTP-8422
* 
The resolver routines failed to look up the own node name as hostname, if the OS native resolver was erroneously configured, bug reported by Yogish Baliga, now fixed.</p>
<p>The resolver routines now tries to parse the hostname as an IP string as most OS resolvers do, unless the native resolver is used.</p>
<p>The DNS resolver inet_res and file resolver inet_hosts now do not read OS configuration files until they are needed. Since the native resolver is default, in most cases they are never needed.</p>
<p>The DNS resolver's automatic updating of OS configuration file data (/etc/resolv.conf) now uses the 'domain' keyword as default search domain if there is no 'search' keyword.</p>
<p>Own Id: OTP-8426 Aux Id: OTP-8381
* 
The re module: A regular expression with an option change at the start of a pattern that had top-level alternatives could cause overwriting and/or a crash. (Thanks to Michael Santos.)</p>
<p>Own Id: OTP-8438
* 
Harmless buffer overflow by one byte in asn1 and ram_file_drv.</p>
<p>Own Id: OTP-8451</p>
<h2 id="improvements-and-new-features_48">Improvements and New Features</h2>
<ul>
<li>Improved GC performance after BIF/NIF call when a lot of heap fragments was created. This will mainly benefit NIFs that return large compound terms.</li>
</ul>
<p>Own Id: OTP-8240
* 
Incompatible changes in the experimental NIF feature.</p>
<ul>
<li>Changed the NIF function prototypes in order to allow more than 3 function arguments.</li>
<li><em>enif_get_data</em> renamed as <em>enif_priv_data</em> .</li>
<li><em>enif_make_string</em> got a third argument for character encoding.</li>
<li>The return value of <em>erlang:load_nif/2</em> on error changed.</li>
</ul>
<p>Read more in the documentation of <em>erl_nif</em> and <em>erlang:load_nif/2</em>
 . 
*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8304
* 
Cross compilation improvements and other build system improvements.</p>
<p>Most notable:</p>
<ul>
<li>Lots of cross compilation improvements. The old cross compilation support was more or less non-existing as well as broken. Please, note that the cross compilation support should still be considered as experimental. Also note that old cross compilation configurations cannot be used without modifications. For more information on cross compiling Erlang/OTP see the <em>$ERL_TOP/INSTALL-CROSS.md</em> file.</li>
<li>Support for staged install using <a href="http://www.gnu.org/prep/standards/html_node/DESTDIR.html">DESTDIR</a> . The old broken <em>INSTALL_PREFIX</em> has also been fixed. For more information see the <em>$ERL_TOP/INSTALL.md</em> file.</li>
<li>Documentation of the <em>release</em> target of the top <em>Makefile</em> . For more information see the <em>$ERL_TOP/INSTALL.md</em> file.</li>
<li><em>make install</em> now by default creates relative symbolic links instead of absolute ones. For more information see the <em>$ERL_TOP/INSTALL.md</em> file.</li>
<li><em>$ERL_TOP/configure --help=recursive</em> now works and prints help for all applications with <em>configure</em> scripts.</li>
<li>Doing <em>make install</em> , or <em>make release</em> directly after <em>make all</em> no longer triggers miscellaneous rebuilds.</li>
<li>Existing bootstrap system is now used when doing <em>make install</em> , or <em>make release</em> without a preceding <em>make all</em> .</li>
<li>The <em>crypto</em> and <em>ssl</em> applications use the same runtime library path when dynamically linking against <em>libssl.so</em> and <em>libcrypto.so</em> . The runtime library search path has also been extended.</li>
<li>The <em>configure</em> scripts of Erl_interface and ODBC now search for thread libraries and thread library quirks the same way as ERTS do.</li>
<li>The <em>configure</em> script of the <em>odbc</em> application now also looks for odbc libraries in <em>lib64</em> and <em>lib/64</em> directories when building on a 64-bit system.</li>
<li>The <em>config.h.in</em> file in the <em>erl_interface</em> application is now automatically generated in instead of statically updated which reduces the risk of <em>configure</em> tests without any effect.</li>
</ul>
<p>(Thanks to Henrik Riomar for suggestions and testing)</p>
<p>(Thanks to Winston Smith for the AVR32-Linux cross configuration and testing)</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-8323
* 
NIF improvements:</p>
<ul>
<li>Driver API for multi-threading made available for NIFs.</li>
<li>Support for mempory managed (garbage collected) resource objects. A way to pass "pointers" to native data structures between C and Erlang in a safe way.</li>
<li>Support for references, floats and term comparison.</li>
<li>Various new functions, like <em>enif_inspect_iolist_as_binary</em> , <em>enif_make_sub_binary</em> , <em>enif_get_string</em> , <em>enif_get_atom</em> , <em>enif_make_tuple_from_array</em> , <em>enif_make_list_from_array</em> , <em>enif_make_existing_atom</em> .</li>
</ul>
<p>Own Id: OTP-8335
* 
Minor alignment adjustments of scheduler specific data.</p>
<p>Own Id: OTP-8341
* 
The documentation is now possible to build in an open source environment after a number of bugs are fixed and some features are added in the documentation build process.</p>
<ul>
<li>
<p>The arity calculation is updated.</p>
</li>
<li>
<p>The module prefix used in the function names for bif's are removed in the generated links so the links will look like "http://www.erlang.org/doc/man/erlang.html#append_element-2" instead of "http://www.erlang.org/doc/man/erlang.html#erlang:append_element-2".</p>
</li>
<li>
<p>Enhanced the menu positioning in the html documentation when a new page is loaded.</p>
</li>
<li>
<p>A number of corrections in the generation of man pages (thanks to Sergei Golovan)</p>
</li>
<li>
<p>The legal notice is taken from the xml book file so OTP's build process can be used for non OTP applications.</p>
</li>
</ul>
<p>Own Id: OTP-8343
* 
There is new <em>erlang:binary_to_term/2</em> BIF that takes an option list. The option <em>safe</em> can be used to prevent creation of resources that are not garbage collected (such as atoms). (Thanks to Jayson Vantuyl.)</p>
<p>Own Id: OTP-8367
* 
The default settings for garbage collection of binaries has been adjusted to be less aggressive than in R13B03. It is now also possible configure the settings for binary GC. See the documentation for <em>spawn_opt/2-5</em> , <em>erlang:system_info/1</em> , <em>erlang:system_flag/2</em> , <em>process_flag/2-3</em> , <em>erlang:trace/3</em> , and the documenation for <em>erl</em> for the new command line options <em>+hms</em> and <em>+hmbs</em> .</p>
<p>Own Id: OTP-8370
* 
A bug causing memory corruption in re:run() has been corrected. (Thanks to Yamashina Hio.)</p>
<p>Own Id: OTP-8375
* 
The <em>-Werror</em> option for <em>erlc</em> and the compiler option <em>warnings_as_errors</em> will cause warnings to be treated as errors. (Thanks to Christopher Faulet.)</p>
<p>Own Id: OTP-8382
* 
Explicit top directories in archive files are now optional.</p>
<p>For example, if an archive (app-vsn.ez) just contains an app-vsn/ebin/mod.beam file, the file info for the app-vsn and app-vsn/ebin directories are faked using the file info from the archive file as origin. The virtual direcories can also be listed. For short, the top directories are virtual if they does not exist.</p>
<p>Own Id: OTP-8387
* 
An unnecessary lock operation in os:timestamp/0 has been eliminated, making it slightly more efficient. (Thanks to Jonas Falkevik and Tuncer Ayaz.)</p>
<p>Own Id: OTP-8390
* 
There is a new <em>+t</em> emulator option for changing the maximum number of atoms. (Thanks to Julien Barbot.)</p>
<p>Own Id: OTP-8405
* 
Fixed numerous compiler warnings generated by gcc 4.4.1 and tile-cc 2.0.1.78377 when compiling the runtime system.</p>
<p>Own Id: OTP-8412
* 
<em>configure</em> learned the option <em>--enable-m32-build</em> to force the building of a 32-bit run-time on systems where the default C compiler generates 64-bit executables by default.</p>
<p>Own Id: OTP-8415
* 
HiPE now works in the 64-bit emulator on Mac OS X. (Thanks to Geoff Cant.)</p>
<p>Own Id: OTP-8416
* 
Improved handling of symbolic links to escripts</p>
<p>Own Id: OTP-8417
* 
Add lock profiling tool.</p>
<p>The Lock profiling tool, lcnt, can make use of the internal lock statistics when the runtime system is built with this feature enabled.</p>
<p>This provides a mechanism to examine potential lock bottlenecks within the runtime itself.</p>
<ul>
<li>
<p>Add erts_debug:lock_counters({copy_save, bool()}). This option enables or disables statistics saving for destroyed processes and ets-tables. Enabling this might consume a lot of memory.</p>
</li>
<li>
<p>Add id-numbering for lock classes which is otherwise undefined.</p>
</li>
</ul>
<p>Own Id: OTP-8424
* 
Removed spurious options to the emulator from escript.</p>
<p>Own Id: OTP-8427
* 
Minor documentation fixes. Mainly anchor adjustments.</p>
<p>Own Id: OTP-8457</p>
<h2 id="erts-574">Erts 5.7.4</h2>
<h2 id="fixed-bugs-and-malfunctions_128">Fixed Bugs and Malfunctions</h2>
<ul>
<li>An insufficient stack allocation was made when reading CPU information on BSD operating systems. (Thanks Michael Turner and Akira Kitada)</li>
</ul>
<p>Own Id: OTP-8207
* 
A bug when supplying an argument without a dash directly after the program name when starting erlang could prevent distribution to start. This is now corrected.</p>
<p>Own Id: OTP-8209
* 
A ticker process could potentially be blocked indefinitely trying to send a tick to a node not responding. If this happened, the connection would not be brought down as it should.</p>
<p>Own Id: OTP-8218
* 
Using certain firewalls (i.e. MS IAS Client and certain versions of COMODO) could expose an undocumented behaviour in the Win32 socket interface causing the name resolution calls to hang infinitely. This is now worked around by adding possibilities for port programs under Windows to use overlapped I/O on their standard input/output file handles.</p>
<p>Own Id: OTP-8230
* 
Fixed bug on ETS tables with <em>write_concurrency</em> . The emulator could crash when doing a <em>select</em> or <em>match</em> with a bound key without finding any object.</p>
<p>Own Id: OTP-8242
* 
The <em>information-request</em> / <em>information-response</em> , and <em>group-leader-change-request</em> / <em>group-leader-changed-response</em> signal pairs described below did not always adhere to the signal order guarantees of Erlang's signal model in the runtime system with SMP support. These signals could for example sometimes pass exit signals.</p>
<p>The following BIFs behaviors can be modeled as if an asynchronous <em>information-request</em> signal is sent to <em>Pid</em> . If <em>Pid</em> is alive, it responds with an asynchronous <em>information-response</em> signal; otherwise, the runtime system responds with a <em>no-such-process</em> signal. When the response is received, the caller transforms it into the result of the BIF.</p>
<ul>
<li><em>is_process_alive(Pid)</em></li>
<li><em>erlang:process_display(Pid, Type)</em></li>
<li><em>process_info(Pid)</em></li>
<li><em>process_info(Pid, ItemSpec)</em></li>
</ul>
<p>When <em>Pid</em> resides on the same node as the caller of <em>group_leader(GroupLeader, Pid)</em> , the <em>group_leader/2</em> BIFs behavior can be modeled as if an asynchronous <em>group-leader-change-request</em> signal is sent to <em>Pid</em> . If <em>Pid</em> is alive, it responds with an asynchronous <em>group-leader-changed-response</em> signal; otherwise, the runtime system responds with a <em>no-such-process</em> signal. When the response is received, the caller transforms it into the result of the BIF. The distributed case which only consists of an asynchronous <em>group-leader-change-request</em> signal and no response is not effected.</p>
<p>Own Id: OTP-8245
* 
Errors in the <em>system_profile</em> documentation has been corrected.</p>
<p>Own Id: OTP-8257
* 
Low watermark socket option modified high watermark instead of low watermark in the inet_driver. (Thanks to Feng Yu and Tuncer Ayaz)</p>
<p>Own Id: OTP-8279
* 
A race condition could cause the runtime system with SMP support to end up in a completely unresponsive state.</p>
<p>Own Id: OTP-8297</p>
<h2 id="improvements-and-new-features_49">Improvements and New Features</h2>
<ul>
<li>The use of <em>pthread_cond_timedwait()</em> have been completely removed from the runtime system. This since its behavior is unpredictable when the system clock is suddenly changed. The previous use of it was harmless.</li>
</ul>
<p>Own Id: OTP-8193
* 
The documentation is now built with open source tools (xsltproc and fop) that exists on most platforms. One visible change is that the frames are removed.</p>
<p>Own Id: OTP-8201
* 
A new garbage collecting strategy for binaries which is more aggressive than the previous implementation. Binaries now has a virtual binary heap tied to each process. When binaries are created or received to a process it will check if the heap limit has been reached and if a reclaim should be done. This imitates the behavior of ordinary Erlang terms. The virtual heaps are grown and shrunk like ordinary heaps. This will lessen the memory footprint of binaries in a system.</p>
<p>Own Id: OTP-8202
* 
The <em>ErlDrvTermData</em> term types used by <em>driver_output_term()</em> and <em>driver_send_term()</em> have been extended with the term types <em>ERL_DRV_INT64</em> , and <em>ERL_DRV_UINT64</em> for passing 64-bit integers. Also the 64-bit integer data types <em>ErlDrvSInt64</em> and <em>ErlDrvUInt64</em> have been introduced.</p>
<p>For more information see the <a href="erl_driver">erl_driver(3)</a> documentation.</p>
<p>Own Id: OTP-8205
* 
[escript] The restriction that the first line in escripts must begin with <em>#!</em> has been removed.</p>
<p>[escript] Some command line options to the escript executable has now been documented. For example you can run an escript in the debugger by just adding a command line option.</p>
<p>[escript] The documentation of the escript header syntax has been clarified. For example the header is optional. This means that it is possible to directly "execute" <em>.erl</em> , <em>.beam</em> and <em>.zip</em> files.</p>
<p>Own Id: OTP-8215
* 
The instruction for building OTP on Windows was outdated and incomplete, the document is updated.</p>
<p>Also the otp_build script required windows drives to show up in Cygwin using the /cygdrive prefix. That requirement is now removed.</p>
<p>Own Id: OTP-8219
* 
A module can have native implemented functions (NIFs) that are dynamically loaded by calling <em>erlang:load_nif/2</em> . This is an experimental feature that is not yet intended for production systems. It is released with intention to get some early feedback on the interfaces before they are carved in stone.</p>
<p>Own Id: OTP-8220
* 
The <em>float/1</em> BIF would always force a garbage collection. The BIFs <em>size/1</em> , <em>byte_size/1</em> , <em>bit_size/1</em> , <em>abs/1</em> , and <em>round/1</em> would force a garbage-collection if the result was not a sufficiently small integer.</p>
<p>Own Id: OTP-8221
* 
The <a href="./erlang#port_command/3">erlang:port_command/3</a> BIF has been added. <em>erlang:port_command/3</em> is currently not auto imported, but it is planned to be auto imported in OTP R14. For more information see the <a href="erlang">erlang(3)</a> documentation.</p>
<p>Own Id: OTP-8225
* 
' <em>configure --enable-darwin-64bit</em> ' would fail if Snow Leopard had been booted with the 64-bit kernel. (Thanks to Ryan M. Graham.)</p>
<p>Own Id: OTP-8236</p>
<h2 id="erts-573">Erts 5.7.3</h2>
<h2 id="fixed-bugs-and-malfunctions_129">Fixed Bugs and Malfunctions</h2>
<ul>
<li>On Windows, open_port({spawn,Command},Opts) could not run executables with spaces in the path or filename, regardless of quoting efforts. While open_port({spawn_executable,Exec},Opts) can run any executable, it was still impossible to use 'spawn' to do the same thing. This is now corrected.</li>
</ul>
<p>Own Id: OTP-8055
* 
The scheduler bind type <em>processor_spread</em> spread schedulers too much on large NUMA systems.</p>
<p>The new scheduler bind type <em>spread</em> spreads schedulers as much as possible, and behaves as <em>processor_spread</em> previously did. For more information see the documentation of the <em>+sbt</em> command line argument in the <em>erl(1)</em> documentation, and the documentation of <em>erlang:system_flag(scheduler_bind_type, SchedulerBindType)</em> .</p>
<p>Own Id: OTP-8063
* 
Automatically detected CPU topology on Linux system could erroneously contain logical processors with <em>-1</em> as identifiers. This happened when <em>sysconf(_SC_NPROCESSORS_CONF)</em> returned a value larger than the amount of logical processors found.</p>
<p>Own Id: OTP-8064
* 
When the minimal term [] (end of list) was sent as the complete message to a process on another node, and received there, it could not be decoded. This bug is now corrected. Fortunately [] is uncommon as the complete message in real applications but it is a serious bug anyway.</p>
<p>Own Id: OTP-8092
* 
A bug when the floating point exception pointer was not initialized has been corrected. It manifested itself on CentOS 5.1 sometimes when a floating point value was sent to a remote node. Bug reported and patch suggested by David Reiss, confirmed by Mikael Pettersson.</p>
<p>Some build problems on IRIX was also corrected. Problem reported by Patrick Baggett, patch by Mikael Pettersson.</p>
<p>Own Id: OTP-8095
* 
A terminating process could erroneously unregister a name for another process. This could occur under the following conditions: The name of the terminating process was unregistered and then registered for another process simultaneously as the process that first had the name was terminating.</p>
<p>Own Id: OTP-8099 Aux Id: seq11344
* 
Running erlc in a very deep directory (with a path length of more 256 or more characters) would cause the emulator to crash in a call to <em>list_to_atom/1</em> . (Thanks to Chris Newcombe.)</p>
<p>Own Id: OTP-8124
* 
A deadlock of the runtime system could occur when unregistering the name of a port.</p>
<p>Own Id: OTP-8145
* 
<em>Makefile.in</em> has been updated to use the LDFLAGS environment variable (if set). (Thanks to Davide Pesavento.)</p>
<p>Own Id: OTP-8157
* 
The pthread rwlock implemention on Linux could cause starvation of writers. We, therefore, now use our own rwlock implementation on Linux.</p>
<p>Own Id: OTP-8158
* 
Open source Erlang builds are updated to work well on Snow Leopard (MacOS X 10.6)</p>
<p>Own Id: OTP-8168
* 
A call to <em>erlang:system_info(schedulers_online)</em> could end up in an infinite loop. This happened if the amount of schedulers was larger than one, the amount of schedulers online was one, and someone was blocking multi-scheduling.</p>
<p>Own Id: OTP-8169
* 
An error in erlang:system_profile/2 could cause timestamped messages to arrive out of order in the SMP case. This has now been fixed.</p>
<p>Own Id: OTP-8171
* 
<em>binary_to_atom/2</em> and <em>binary_to_existing_atom/2</em> would leak memory if the binary contained unaligned data.</p>
<p>Own Id: OTP-8192
* 
The async thread pool in the runtime system without SMP support used a memory allocator that was not thread safe for async jobs.</p>
<p>Own Id: OTP-8194</p>
<h2 id="improvements-and-new-features_50">Improvements and New Features</h2>
<ul>
<li>Processor internal NUMA nodes are now supported in the ERTS internal CPU topology representation. For more information see the documentation of the <em>+sct</em> command line argument in the <em>erl(1)</em> documentation, and the documentation of <em>erlang:system_info(cpu_topology)</em> .</li>
</ul>
<p>Own Id: OTP-8041
* 
Documentation for ets improved about concurrency.</p>
<p>Own Id: OTP-8050
* 
Emulator flags in an escript were earlier inherited to emulators started from from the emulator running the escript. For example when an escript invoked <em>os:cmd("erl")</em> , the new emulator were given erroneous emulator flags. This bug has now been fixed</p>
<p>Escript filenames may now contain dots.</p>
<p>Own Id: OTP-8060
* 
Made some BIFs non-recursive (relational operators,hash and phash) to limit internal stack usage.</p>
<p>Own Id: OTP-8065
* 
Fixed Windows specific bug in erl_prim_loader. Now it handles the root directory (e.g. c:/) better. This bug affected the directory listing in the debugger.</p>
<p>Own Id: OTP-8080
* 
A TCP socket with option <em>{packet,4}</em> could crash the emulator if it received a packet header with a very large size value (&gt;2Gb). The same bug caused <em>erlang:decode_packet/3</em> to return faulty values. (Thanks to Georgos Seganos.)</p>
<p>Own Id: OTP-8102
* 
The maximum size of the export table has been raised from 65536 to 524288 entries.</p>
<p>Own Id: OTP-8104 Aux Id: seq11345
* 
The file module has now a read_line/1 function similar to the io:get_line/2, but with byte oriented semantics. The function file:read_line/1 works for raw files as well, but for good performance it is recommended to use it together with the 'read_ahead' option for raw file access.</p>
<p>Own Id: OTP-8108
* 
Fixed bug causing emulator crash when reading a term in external format containing a corrupt list with a negative length.</p>
<p>Own Id: OTP-8117
* 
New emulator flag <em>+sss</em> , to set stack size of scheduler threads.</p>
<p>Own Id: OTP-8119
* 
The Windows utility Erlsrv, run in interactive mode now accepts options for registering internal service name and description field of Windows registry database.</p>
<p>Own Id: OTP-8132
* 
<em>erlang:demonitor(Mon, [flush])</em> has been optimized. Previously it always searched the message queue of the caller for a <em>'DOWN'</em> message. Current implementation only search the message queue when necessary. It is quite common that the search is not necessary.</p>
<p>A new option <em>info</em> has been added to <em>erlang:demonitor/2</em> . For more information see the <em>erlang(3)</em> documentation.</p>
<p>Own Id: OTP-8143
* 
I/O tasks could unnecessarily be rescheduled. This was harmless, but not useful work.</p>
<p>Own Id: OTP-8148
* 
Minor improvements of <em>erlang:memory/[1,2]</em> .</p>
<p>Own Id: OTP-8152
* 
New configuration option to enable use of shared zlib.</p>
<p>Own Id: OTP-8155
* 
Fixed smp bug in ETS that could cause emulator crash when table with more than 1000 objects accessed by several processes, including calls to variants of <em>select</em> or <em>match</em> combined with concurrent object deletion.</p>
<p>Own Id: OTP-8166 Aux Id: seq11392
* 
The code path interpretation is now more relaxed. The flag -code_path_choice now defaults to relaxed instead of strict. See the documentation of code and init for more info.</p>
<p>Own Id: OTP-8170
* 
Load balancing of run queues and check for I/O are triggered more often than before in situations where processes are scheduled often but are doing very little work each time they execute.</p>
<p>Own Id: OTP-8172
* 
Call tracing binary comprehensions would cause an emulator crash. (Thanks to Paul Mineiro.)</p>
<p>Own Id: OTP-8179
* 
<em>binary_to_term/1</em> would crash the emulator instead of generating a <em>badarg</em> exception when given certain invalid terms. (Thanks to Scott Lystig Fritchie.)</p>
<p>Own Id: OTP-8180</p>
<h2 id="erts-572">Erts 5.7.2</h2>
<h2 id="fixed-bugs-and-malfunctions_130">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Crash dumps should now cause less problems for the crashdump_viewer application. (For processes where arity was non-zero, the arguments are now longer printed - they used to be printed in a format that was not parseable.)</li>
</ul>
<p>Own Id: OTP-7472 Aux Id: seq11019, 11292
* 
Processes could potentially get stuck on an offline scheduler.</p>
<p>Own Id: OTP-7990
* 
<em>binary_to_atom/2</em> and <em>binary_to_existing_atom/2</em> could leak memory if they caused a <em>badarg</em> exception.</p>
<p>Own Id: OTP-7997
* 
A process could under very rare circumstances erroneously be resumed.</p>
<p>Own Id: OTP-8000
* 
Load balancing between schedulers could under rare circumstances cause an emulator crash.</p>
<p>Own Id: OTP-8008
* 
<em>erlang:memory(processes_used)</em> always returned <em>0</em> instead of the correct value. (Thanks to Geoff Cant)</p>
<p>Own Id: OTP-8022</p>
<h2 id="improvements-and-new-features_51">Improvements and New Features</h2>
<ul>
<li>Major improvements of the Erlang distribution for Erlang runtime systems with SMP support. Previously distribution port locks were heavily contended, and all encoding and decoding for a specific distribution channel had to be done in sequence. Lock contention due to the distribution is now negligible and both encoding and decoding of Erlang messages can be done in parallel.</li>
</ul>
<p>The old atom cache protocol used by the Erlang distribution has been dropped since it effectively prevented all parallel encoding and decoding of messages passed over the same distribution channel.</p>
<p>A new atom cache protocol has been introduced which isolates atom cache accesses and makes parallel encoding and decoding of messages passed over the same distribution channel possible. The new atom cache protocol also use an atom cache size 8 times larger than before. The new atom cache protocol is documented in the ERTS users guide.</p>
<p>Erlang messages received via the distribution are now decoded by the receiving Erlang processes without holding any distribution channel specific locks. Erlang messages and signals sent over the distribution are as before encoded by the sending Erlang process, but now without holding any distribution channel specific locks during the encoding. That is, both encoding and decoding can be and are done in parallel regardless of distribution channel used.</p>
<p>The part that cannot be parallelized is the atom cache updates. Atom cache updates are therefore now scheduled on the distribution port. Since it is only one entity per distribution channel doing this work there is no lock contention due to the atom cache updates.</p>
<p>The new runtime system does not understand the old atom cache protocol. New and old runtime systems can however still communicate, but no atom cache will be used.</p>
<p>Own Id: OTP-7774
* 
Fixed a bug that caused error logging from <em>driver_select</em> sometimes with additional symptoms such as failing IP communications or even an emulator crash.</p>
<p>Own Id: OTP-7898 Aux Id: seq11304
* 
Improved SMP concurrency for ETS tables. Several mutating operations can now be performed truly concurrent on different records of the same table. To support this, the table has to be created with option <em>write_concurrency</em> , as it is achieved at the expense of some execution and memory overhead. <em>ets:select</em> and <em>select_count</em> has also been improved for all tables to not acquire exclusive table lock during the iteration.</p>
<p>Own Id: OTP-7922
* 
erl (that is erl.exe and dyn_erl) and erlexec has been made more dynamic so no hard coded paths needs to added at installation time to erl (that is erl.ini and erl). Reltool will make use of this in a future release.</p>
<p>Own Id: OTP-7952
* 
Added functionality to get higher resolution timestamp from system. The erlang:now function returns a timestamp that's not always consistent with the actual operating system time (due to resilience against large time changes in the operating system). The function os:timestamp/0 is added to get a similar timestamp as the one being returned by erlang:now, but untouched by Erlangs time correcting and smoothing algorithms. The timestamp returned by os:timestamp is always consistent with the operating systems view of time, like the calendar functions for getting wall clock time, but with higher resolution. Example of usage can be found in the os manual page.</p>
<p>Own Id: OTP-7971
* 
Two new options are added to open_port - spawn_executable which runs external executables in a controlled way, and spawn_driver which only opens port to loaded Erlang drivers. See the erlang manual page for details.</p>
<p>Own Id: OTP-7995
* 
New functionality in ETS to transfer the ownership of a table. A table can either change owner be declaring an "heir", another process that will inherit the table if the owner terminates. A table can also change owner by calling a new function <em>ets:give_away</em> .</p>
<p>Own Id: OTP-8006
* 
Updates to Tilera build environment.</p>
<p>Own Id: OTP-8009
* 
A stack trace was unnecessarily saved during process termination.</p>
<p>Own Id: OTP-8014
* 
User defined CPU topology and scheduler bind type can now be set from the command line when starting an emulator. For more information see the documentation of the <em>+sct</em> , and the <em>+sbt</em> emulator flags in the <em>erl(1)</em> documentation.</p>
<p>The CPU topologies returned from <em>erlang:system_info/1</em> and <em>erlang:system_flag/2</em> now always contain the <em>processor</em> level, also when not strictly necessary.</p>
<p>Own Id: OTP-8030
* 
Various fixes in ETS: <em>ets:first</em> could return a deleted key in a fixated table. <em>ets:lookup</em> could return objects out of order if a deleted object was re-inserted into a fixed bag. <em>ets:delete_object</em> could fail to delete duplicate objects in a duplicate_bag.</p>
<p>Own Id: OTP-8040</p>
<h2 id="erts-571">Erts 5.7.1</h2>
<h2 id="fixed-bugs-and-malfunctions_131">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a bug on Windows that could make <em>gen_tcp:send</em> hang trying to send an iolist of more than 16 binaries.</li>
</ul>
<p>Own Id: OTP-7816
* 
The runtime system could under rare circumstances crash during load balancing.</p>
<p>Own Id: OTP-7908 Aux Id: otp-7500
* 
<em>run_erl</em> uses fallback if Unix98 pseudo-terminal is not present on host.</p>
<p>Own Id: OTP-7916 Aux Id: seq11249
* 
A message buffer memory leak in the runtime system without smp support has been fixed.</p>
<p>Own Id: OTP-7941
* 
Attempting to append a binary of 16Mb or greater to another binary using the bit syntax would cause a <em>system_limit</em> exception. There was also several cases when constructing binaries when a <em>badarg</em> exception was generated when it should have been <em>system_limit</em> .</p>
<p>Own Id: OTP-7942
* 
The runtime system with SMP support failed to terminate the caller of <em>link(RemotePid)</em> properly, if <em>RemotePid</em> was the pid of a process on an unreachable node. The calling process was in this case marked as exiting, but never terminated.</p>
<p>Own Id: OTP-7946</p>
<h2 id="improvements-and-new-features_52">Improvements and New Features</h2>
<ul>
<li>Rudimentary support for cross compiling is added to the source release. The support is still in its infancy and has only been used to cross compile on Linux for a different cpu architecture and a different Linux version, but should be extendible to support other platforms as well. The cross configuration files with examples are placed in $ERL_TOP/xcomp/. View README.xcomp and run $ERL_TOP/otp_build -help for further information.</li>
</ul>
<p>Own Id: OTP-7854
* 
The escape sequence <em>{</em> which was given a new interpretation in R13A has retained its old meaning (the ASCII code for <em>{</em> ), which means that codes greater than 255 have to be stated using hexadecimal characters (for example, <em>\x{AAA}</em> ). The escape sequence <em>\xH</em> where H is a hexadecimal character followed by something else but a hexadecimal character is no longer valid (incompatibility with R13A). Character codes less than 256 can be stated using two hexadecimal characters (for example, <em>\x0D</em> ).</p>
<p>Own Id: OTP-7891 Aux Id: OTP-7855
* 
The <em>term_to_binary/1</em> BIF used to be implemented with recursive C code, which could cause the Erlang emulator to terminate because of a stack overflow.</p>
<p>Also fixed some minor issues in <em>term_to_binary/1</em> and <em>binary_to_term/1</em> pointed out by Matthew Dempsky.</p>
<p>Own Id: OTP-7894
* 
Several glitches and performance issues in the Unicode and I/O-system implementation of R13A have been corrected.</p>
<p>Own Id: OTP-7896 Aux Id: OTP-7648 OTP-7887
* 
Minor documentation improvements of the <em>scheduler_bind_type</em> argument of <em>erlang:system_flag/2</em> , and the <em>scheduler_bind_type</em> , and the <em>scheduler_bindings</em> arguments of <em>erlang:system_info/1</em> .</p>
<p>Own Id: OTP-7901 Aux Id: OTP-7777
* 
There is a new BIF <em>erlang:make_tuple/3</em> .</p>
<p>Own Id: OTP-7913</p>
<h2 id="erts-57">Erts 5.7</h2>
<h2 id="fixed-bugs-and-malfunctions_132">Fixed Bugs and Malfunctions</h2>
<ul>
<li><strong>OpenSource:</strong></li>
</ul>
<p>FreeBSD leap-seconds are handled according to patch submitted by OpenSource user Kenji Rikitake. No test case covers this functionality (unsupported platform).</p>
<p>Own Id: OTP-7609
* 
A corrected bug in ETS for <em>bag</em> and <em>duplicate_bag</em> . A <em>delete/2</em> or <em>lookup_element/3</em> could miss objects in a fixed table if one or more objects with the same key had already been deleted.</p>
<p>Own Id: OTP-7665
* 
A new driver call-back <em>stop_select</em> is introduced to allow drivers to de-select and then close a file descriptor in a safe way in a SMP emulator. The old way was not strictly according to posix standard and could in some rare cases lead to unexpected behavior. A new flag <em>ERL_DRV_USE</em> can be passed to <em>driver_select()</em> to tell it that the descriptor should be closed. <em>stop_select</em> is then called when it is safe to do so. Old drivers will however still work as before.</p>
<p>Own Id: OTP-7670
* 
A bug fixed for TCP sockets with option <em>{packet,http}</em> . An HTTP request with an absolute URI was returned with a corrupt path string. This bug did only exist in R12B-4 and R12B-5.</p>
<p>Own Id: OTP-7682 Aux Id: OTP-7647
* 
run_erl did in some cases fail to extract control sequences from to_erl (like: winsize=X,Y) and did instead send them to be interpreted by the erlang shell.</p>
<p>Own Id: OTP-7688
* 
A bug in the installer on Windows not updating file associations properly is now corrected.</p>
<p>Own Id: OTP-7746
* 
More space than necessary could be allocated in binaries when appending to a binary (also in a binary comprehension) and the data appended did not consist of wholes bytes (e.g. 13 bits).</p>
<p>Own Id: OTP-7747
* 
The gen_sctp option sctp_peer_addr_params, #sctp_paddrparams{address={IP,Port} was erroneously decoded in the inet driver. This bug has now been corrected.</p>
<p>Own Id: OTP-7755
* 
Outstanding async driver jobs leaked memory if the issuing port died before the async jobs completed.</p>
<p>Own Id: OTP-7784
* 
A bug in the dynamic library loading affecting, among others, OpenSolaris is now corrected. (Thanks to Paul Fisher.)</p>
<p>Own Id: OTP-7796
* 
run_erl compile errors fixed for FreeBSD</p>
<p>Own Id: OTP-7817
* 
A bug in the inet driver for SCTP on Solaris showing for e.g gen_sctp:abort/1 and gen_sctp:eof/1 has been corrected. Patch suggestion by Simon Cornish.</p>
<p>Own Id: OTP-7866</p>
<h2 id="improvements-and-new-features_53">Improvements and New Features</h2>
<ul>
<li>The order of objects visited in select for ordered_set is now documented.</li>
</ul>
<p>Own Id: OTP-7339
* 
The runtime system with SMP support now uses multiple, scheduler specific run queues, instead of one globally shared run queue.</p>
<p>The lock protecting the shared run queue was heavily contended, and the shared run queue also caused Erlang processes to randomly migrate between schedulers with negative cache effects as a result.</p>
<p>With the current scheduler specific run queue solution, lock contention due to run queue protection has been reduced, and Erlang processes are only migrated when needed to balance the load between the schedulers. The reduced amount of migration also reduce lock contention on locks protecting the scheduler specific instances of the erts internal memory allocators.</p>
<p>The scheduler specific run queues are also a necessity for a lot of future planned NUMA (Non-Uniform Memory Access) specific optimizations.</p>
<p>Own Id: OTP-7500
* 
Support for Unicode is implemented as described in EEP10. Formatting and reading of unicode data both from terminals and files is supported by the io and io_lib modules. Files can be opened in modes with automatic translation to and from different unicode formats. The module 'unicode' contains functions for conversion between external and internal unicode formats and the re module has support for unicode data. There is also language syntax for specifying string and character data beyond the ISO-latin-1 range.</p>
<p>The interactive shell will support input and output of unicode characters when the terminal and operating system supports it.</p>
<p>Please see the EEP and the io/io_lib manual pages as well as the stdlib users guide for details.</p>
<p><strong>I/O-protocol incompatibilities:</strong></p>
<p>The io_protocol between io_Server and client is updated to handle protocol data in unicode formats. The updated protocol is now documented. The specification resides in the stdlib <strong>users manual</strong> , which is a new part of the manual.</p>
<p><strong>io module incompatibilities:</strong></p>
<p>The io:put_chars, io:get_chars and io:get_line all handle and return unicode data. In the case where binaries can be provided (as to io:put_chars), they shall be encoded in UTF-8. When binaries are returned (as by io:get_line/get_chars when the io_server is set in <strong>binary mode</strong> ) the returned data is also <strong>always</strong> encoded as UTF-8. The file module however still returns byte-oriented data, why file:read can be used instead of io:get_chars to read binary data in ISO-latin-1.</p>
<p><strong>io_lib module incompatibilities:</strong></p>
<p>io_lib:format can, given new format directives (i.e "~ts" and "~tc"), return lists containing integers larger than 255.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7648 Aux Id: OTP-7580 OTP-7514 OTP-7494 OTP-7443 OTP-7181 EEP10 EEP11
* 
The format of the string returned by <em>erlang:system_info(system_version)</em> (as well as the first message when Erlang is started) has changed. The string now contains the both the OTP version number as well as the erts version number.</p>
<p>Own Id: OTP-7649
* 
Message passing has been further optimized for parallel execution. Serial message passing is slightly more expensive than before, but parallel send to a common receiver is much cheaper.</p>
<p>Own Id: OTP-7659
* 
Lock contention on the atom table lock when decoding Erlang terms on the external format has been drastically reduced.</p>
<p>Own Id: OTP-7660
* 
The undocumented, unsupported, and deprecated guard BIF <em>is_constant/1</em> has been removed.</p>
<p>*** INCOMPATIBILITY with R12B ***</p>
<p>Own Id: OTP-7673
* 
The Erlang process lock implementation has been improved by Mat Hostetter at Tilera Corporation.</p>
<p>Own Id: OTP-7692
* 
A <em>{nodedown, Node}</em> message passed by the <em>net_kernel:monitor_nodes/X</em> functionality is now guaranteed to be sent after <em>Node</em> has been removed from the result returned by <em>erlang:nodes/Y</em> .</p>
<p>Own Id: OTP-7725
* 
The short-circuit operators <em>andalso</em> and <em>orelse</em> no longer guarantees that their second argument is either <em>true</em> or <em>false</em> . As a consequence, <em>andalso</em> / <em>orelse</em> are now tail-recursive.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7748
* 
A new BIF, <em>lists:keyfind/3</em> , has been added. It works like <em>lists:keysearch/3</em> except that it does not wrap the returned tuple in a <em>value</em> tuple in case of success. (Thanks to James Hague for suggesting this function.)</p>
<p>Own Id: OTP-7752
* 
Optimization for drivers by creating small binaries direct on process heap.</p>
<p>Own Id: OTP-7762
* 
<em>I bsl N</em> could cause the Erlang virtual machine to run of memory instead generating a <em>system_limit</em> if N was absurdly huge. (Thanks to Daniel Hedlund.)</p>
<p>There would always be a garbage collection when evaluating <em>I bsl N</em> or <em>I bsr N</em> if <em>I</em> was a bignum.</p>
<p>If <em>I</em> is an integer and <em>N</em> a bignum, <em>I bsl N</em> will now cause the correct <em>system_limit</em> exception instead of <em>bad_arith</em> as in earlier releases.</p>
<p>If <em>I</em> is an integer and <em>N</em> a bignum, <em>I bsr N</em> will return either 0 or -1 depending on the sign of <em>I</em> instead of causing a <em>bad_arith</em> exception as in earlier releases.</p>
<p>Own Id: OTP-7764
* 
Scheduler threads can now be bound to logical processors on newer Linux and Solaris systems. More systems will be supported in the future.</p>
<p>In some cases performance has increased drastically when binding schedulers. Schedulers are not bound by default, though. This since it might cause a performance degradation if multiple programs have bound to processors, e.g. multiple Erlang runtime systems. For more information see the documentation of <em>erlang:system_flag/2</em> .</p>
<p>In order to bind scheduler threads the CPU topology need to be known. On some newer Linux and Solaris systems the runtime system automatically detects the CPU topology. If the emulator isn't able to automatically detect the CPU topology, the CPU topology can be defined. For more information see the documentation of <em>erlang:system_flag/2</em> .</p>
<p>Own Id: OTP-7777
* 
The compiler will refuse to a compile file where the module name in the file differs from the output file name.</p>
<p>When compiling using <em>erlc</em> , the current working directory will no be included in the code path (unless explicitly added using "-pa .").</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7793
* 
The BIFs <em>atom_to_binary/2</em> , <em>binary_to_atom/2</em> , and <em>binary_to_existing_atom/2</em> have been added.</p>
<p>Own Id: OTP-7804
* 
The amount of schedulers online can now be changed during operation. The amount of schedulers online defaults to the same amount as available logical processors. For more information see the documentation of <em>erlang:system_flag/2</em> and <em>erl</em> .</p>
<p>Own Id: OTP-7811
* 
The deprecated functions <em>erlang:fault/1</em> , <em>erlang:fault/2</em> , and <em>file:rawopen/2</em> have been removed.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7812
* 
Erts internal dynamically allocated process and port specific data for rarely used data. This is used to reduce memory usage of processes and ports that do not use specific functionality. More functionality will be moved to process and port specific data in future releases.</p>
<p>Own Id: OTP-7818
* 
New packet type <em>http_bin</em> for gen_tcp sockets and <em>erlang:decode_packet</em> . It works like <em>http</em> except that strings are returned as binaries instead of lists.</p>
<p>Own Id: OTP-7821
* 
The obsolete wd_keeper program for embedded Solaris systems has been removed.</p>
<p>Own Id: OTP-7822
* 
Nodes belonging to different independent clusters can now co-exist on the same host with the help of a new environment variable setting ERL_EPMD_PORT.</p>
<p>Own Id: OTP-7826
* 
There are new functions <em>erlang:min/2</em> and <em>erlang:max/2</em> to calculate the minimum and maximum of two terms, respectively. Note that the functions are not auto-imported, so they need to be imported explicitly or the <em>erlang</em> prefix must be used when calling them.</p>
<p>Own Id: OTP-7841
* 
The copyright notices have been updated.</p>
<p>Own Id: OTP-7851
* 
Enhanced build environment for cross compilation to Tilera Tile architecture.</p>
<p>Support for native ethread atomics on Tilera Tile64/TilePro (Thanks to Tilera Corporation).</p>
<p>Own Id: OTP-7852
* 
The escape sequences <em>\x</em> and <em>{</em> have been assigned new interpretations (they used to return the ASCII code for <em>x</em> and <em>{</em> respectively). One or more octal characters inside curly brackets after a leading backslash is from now on an alternative to the existing syntax <em>\NNN</em> , but can also be used for codes greater than 255. In a similar fashion, one or more hexadecimal characters can be put inside curly brackets after a leading <em>\x</em> . Furthermore, the escape sequences <em>\xH</em> and <em>\xHH</em> , where N is a hexadecimal character, can be used for codes less than 256.</p>
<p>NOTE: These new escape sequences are still considered experimental and may be changed in the R13B release.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7855
* 
The PCRE library's exported function names are now prefixed with erts_ in the erlang emulator to avoid clashes with dynamically loaded drivers.</p>
<p>Own Id: OTP-7861
* 
A runtime system with SMP support will now be built by default on most platforms if a usable posix thread library or native windows threads are found.</p>
<p>For more information see the top README file.</p>
<p>Own Id: OTP-7872</p>
<h2 id="erts-5651">Erts 5.6.5.1</h2>
<h2 id="fixed-bugs-and-malfunctions_133">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A corrected bug in ETS for <em>bag</em> and <em>duplicate_bag</em> . A <em>delete/2</em> or <em>lookup_element/3</em> could miss objects in a fixed table if one or more objects with the same key had already been deleted.</li>
</ul>
<p>Own Id: OTP-7665
* 
A bug fixed for TCP sockets with option <em>{packet,http}</em> . An HTTP request with an absolute URI was returned with a corrupt path string. This bug did only exist in R12B-4 and R12B-5.</p>
<p>Own Id: OTP-7682 Aux Id: OTP-7647
* 
Calling <em>gen_tcp:send()</em> from several processes on socket with option <em>send_timeout</em> could lead to much longer timeout than specified. The solution is a new socket option <em>{send_timeout_close,true}</em> that will do automatic close on timeout. Subsequent calls to send will then immediately fail due to the closed connection.</p>
<p>Own Id: OTP-7731 Aux Id: seq11161
* 
A process being garbage collected via the <em>garbage_collect/1</em> BIF or the <em>check_process_code/2</em> BIF didn't handle message receive and resume correctly during the garbage collect. When this occurred, the process returned to the state it had before the garbage collect instead of entering the new state.</p>
<p>Own Id: OTP-7738</p>
<h2 id="erts-565">Erts 5.6.5</h2>
<h2 id="fixed-bugs-and-malfunctions_134">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug in inet_drv concerning gen_tcp:connect has been corrected. A connect towards a non-open port through open firewalls could sometimes erroneously be successful. Any subsequent operation would fail, though.</li>
</ul>
<p>Own Id: OTP-6542
* 
Floating point arithmetics in drivers could cause a runtime system crash and/or unexpected results on runtime systems with floating point exceptions enabled. Floating point exceptions are disabled unless explicitly enabled or if hipe is enabled.</p>
<p>Own Id: OTP-7237
* 
A bug when many sockets got signalled simultaneously causing the emulator to panic with the message "Inconsistent, why isnt io reported?" is now corrected.</p>
<p>Own Id: OTP-7420
* 
Starting erl with option "-detached" now disconnects correctly from terminal session on Unix.</p>
<p>Own Id: OTP-7461
* 
Mended gdb etp-commands for ETS access.</p>
<p>Own Id: OTP-7538
* 
<em>erlang:decode_packet/3</em> allows white space between HTTP header tag and colon according to RFC2616.</p>
<p>Own Id: OTP-7543
* 
An emulator compiled for SCTP now starts even if the dynamic libraries are not present. The SCTP driver is then of course not loaded.</p>
<p>Own Id: OTP-7551
* 
To build on Mac OS X, 10.3.0 or later is now required because of fixes for two problems:</p>
<p>There would be a resource leak when <em>erl_ddl</em> attempted to unload a driver. This problem has been corrected by using <em>dlopen()</em> (which works on all modern Unix-like platforms) instead of the Mac OS X specific API calls.</p>
<p>Signal handling in the run-time system for HiPE has been updated to work on later versions of Mac OS X than 10.2.x. Therefore, <em>--enable-hipe</em> now works on Mac OS X with Intel CPUs.</p>
<p>Thanks to Geoff Cant for the patches.</p>
<p>Own Id: OTP-7562
* 
Corrected some information about the protocol between EPMD and Erlang nodes. (Thanks to Michael Regen.)</p>
<p>Own Id: OTP-7594
* 
When using <em>erlang:system_monitor(Pid,{long_gc,Time})</em> , and the GC time exceeded 1 second, it sometimes erroneously showed up as about 4300 seconds. (This bug was corrected in R9C, but re-introduced in R12B.) (Thanks to Chris Newcombe.)</p>
<p>Own Id: OTP-7622 Aux Id: OTP-4903, seq8379</p>
<h2 id="improvements-and-new-features_54">Improvements and New Features</h2>
<ul>
<li>The driver entry of a dynamically loaded driver is now copied when loaded which enables some internal optimizations. Note that drivers that modify the driver entry during execution will not work anymore. Such a miss-use of the driver interface is however not supported.</li>
</ul>
<p>Own Id: OTP-6900
* 
The split function is now added to the re library. Exceptions and errors from both run, replace and split are made more consistent.</p>
<p>Own Id: OTP-7514 Aux Id: OTP-7494
* 
Fixed harmless compiler warnings when building the emulator and minor build changes in order to avoid unnecessary rebuilds.</p>
<p>Own Id: OTP-7530
* 
There is now experimental support for loading of code from archive files. See the documentation of <em>code</em> , <em>init</em> , <em>erl_prim_loader</em> and <em>escript</em> for more info.</p>
<p>The error handling of <em>escripts</em> has been improved.</p>
<p>An <em>escript</em> may now set explicit arguments to the emulator, such as <em>-smp enabled</em> .</p>
<p>An <em>escript</em> may now contain a precompiled beam file.</p>
<p>An <em>escript</em> may now contain an archive file containing one or more applications (experimental).</p>
<p>The internal module <em>code_aux</em> has been removed.</p>
<p>Own Id: OTP-7548 Aux Id: otp-6622
* 
The reallocation functionality part of the ERTS internal memory allocators, now consider current block in combination with surrounding free blocks as an alternative location for a reallocation.</p>
<p>Own Id: OTP-7555
* 
There could remain false references from a process to a module that has been called earlier, so that the process would be killed if the module was reloaded. (Thanks to Richard Carlsson.)</p>
<p>Also, the fix for this bug also made it possible to make stack backtraces (as returned from <em>erlang:get_stacktrace/0</em> and other functions) more correct in that the immediate caller is always included in the stack backtrace (it could sometimes be missing).</p>
<p>Own Id: OTP-7559
* 
Improved locking in IO-handling for better smp performance.</p>
<p>Own Id: OTP-7560
* 
Improved BIF rescheduling functionality.</p>
<p>Own Id: OTP-7587
* 
Loading a module compiled with Erlang/OTP R9C and calling <em>module_info/0</em> in the module would crash the emulator. The emulator now refuses to load any module compiled with R9C or earlier. (Note: only trivial modules compiled with R10B or earlier could be loaded anyway.) (Thanks to Martin Kjellin.)</p>
<p>Own Id: OTP-7590</p>
<h2 id="erts-5642">Erts 5.6.4.2</h2>
<h2 id="fixed-bugs-and-malfunctions_135">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A process calling one of the following BIFs could under very rare conditions deadlock in the runtime system with SMP support: <em>check_process_code/2</em> , <em>garbage_collect/1</em> , <em>process_info/[1,2]</em> , <em>system_flag/2</em> , and <em>erlang:suspend_process/[1,2]</em> .</li>
</ul>
<p>Own Id: OTP-7582
* 
A couple of statistics variables were not managed in a thread safe manner in the runtime system with SMP support.</p>
<p>Own Id: OTP-7583
* 
An extremely rare race condition when terminating a process could potentially cause a runtime system crash.</p>
<p>Own Id: OTP-7584
* 
Under certain conditions and when using run_erl/to_erl, the terminal Erlang driver (ttsl_drv) could crash the emulator by doing a division by zero due to incorrect handling of terminals reporting a zero width. For terminals reporting zero width, the driver now fallbacks to a default width of 80 and a default height of 24 (vt100), as a fallback behaviour. This fixes the crashes and also makes output on "dumb" terminals much more readable.</p>
<p>Own Id: OTP-7592 Aux Id: seq11073</p>
<h2 id="erts-5641">Erts 5.6.4.1</h2>
<h2 id="improvements-and-new-features_55">Improvements and New Features</h2>
<ul>
<li>A new <em>erts_alloc</em> parameter <em>+M<S>rmbcmt</em> (relative multiblock carrier move threshold) has been added. It determines when to force a moving realloc in a multiblock carrier when a block is shrunk. For more information see the <em>erts_alloc(3)</em> documentation.</li>
</ul>
<p>Own Id: OTP-7540
* 
The new option <em>+d</em> can be given to <em>erl</em> to suppress the crash dump generation if an internal error is detected. As a result, a more useful core dump is produced.</p>
<p>Own Id: OTP-7578 Aux Id: seq11052</p>
<h2 id="erts-564">Erts 5.6.4</h2>
<h2 id="fixed-bugs-and-malfunctions_136">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Double backslashes in format string passed to the erts internal printf implementation produced erroneous results. No such format strings were passed to the erts internal printf implementation, i.e., the bug was therefore completely harmless. (Thanks to Perry Smith.)</li>
</ul>
<p>Own Id: OTP-7408
* 
Large files are now handled on Windows, where the filesystem supports it.</p>
<p>Own Id: OTP-7410
* 
Bug fixed for <em>{packet,http}</em> when space follows http headers.</p>
<p>Own Id: OTP-7458
* 
The trace option <em>running</em> could cause an emulator crash if the current function couldn't be determined.</p>
<p>Own Id: OTP-7484
* 
Using 16#ffffFFFF as a timeout value in receive...after would often cause a timeout almost at once due to an 32-bit integer overflow. (Thanks to Serge Aleynikov and Matthias Lang.)</p>
<p>Own Id: OTP-7493
* 
For the process that an escript runs in, the <em>trap_exit</em> process flag is now <em>false</em> instead of <em>true</em> (as in previous releases). Scripts that depend on the previous (counter-intuitive) behaviour might not work. (Thanks to Bengt Kleberg.)</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7517
* 
A bug in the <em>string:to_integer/1</em> builtin made the emulator unstable. This is now corrected. (Thanks to Lev Walkin.)</p>
<p>Own Id: OTP-7526</p>
<h2 id="improvements-and-new-features_56">Improvements and New Features</h2>
<ul>
<li>Performance for ETS intensive applications should now be better in the SMP emulator. Also, ETS table identifiers (as returned by <em>ets:new/2</em> ) are now spread out in wider range than before (using 28 bits in a 32-bit emulator) to make sure that the table identifier for a deleted table will not be quickly re-used.</li>
</ul>
<p>NOTE: Table identifiers can now be negative integers. Programs that (incorrectly) assume that table identifiers can only be positive integers might stop to work. (The type of a table identifier is intentionally not documented, and may change in a future release.)</p>
<p>Own Id: OTP-7348
* 
New BIF <em>erlang:decode_packet/3</em> that extracts a protocol packet from a binary. Similar to the socket option <em>{packet, Type}</em> . Also documented the socket packet type <em>http</em> and made it official. <strong>NOTE</strong> : The tuple format for <em>http</em> packets sent from an active socket has been changed in an incompatible way.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7404
* 
The source code for the documentation for some applications (erts, kernel, stdlib, and several others) are now included in the source tar ball. There is currently no Makefile support for building HTML files from the source (such support will be included in a future release).</p>
<p>Own Id: OTP-7406
* 
A lot of frequently accessed memory counters (erts internal) have been removed. This since they hurt performance on the runtime system with SMP support. As a result <em>erlang:memory/[0,1]</em> will only deliver a result if all <em>erts_alloc(3)</em> allocators are enabled (default). The result delivered when all <em>erts_alloc(3)</em> allocators are enabled are both more accurate and less accurate than before. More memory than before are included in the result, but the different parts that are summed are not gathered atomically. A call to <em>erlang:memory/[0,1]</em> is much cheaper for the system than before. This since the information isn't gathered atomically anymore which was very expensive.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7468
* 
Pre-allocators used for, for example, timers, and messages have been rewritten to be scheduler specific. That is, different schedulers will now allocate from different pools which reduces lock contention.</p>
<p>Own Id: OTP-7470
* 
On Mac OS X, file:sync/1 now guarantees that all filesystem buffers are written to the disk by using the fcntl() with F_FULLFSYNC option. Previously, file:sync/1 called fsync(), which only guaranteed that the data had been transferred to the disk drive. (Thanks to Jan Lehnardt.)</p>
<p>Own Id: OTP-7471
* 
Termination of a process that takes a long time can now be preempted, i.e., the terminating process will be rescheduled for later continuation of termination so that other processes can execute. Termination of a process that owns many and/or large ets tables typically takes a long time.</p>
<p>Own Id: OTP-7477
* 
A new trace option <em>exiting</em> has been added. The <em>exiting</em> trace is similar to the <em>running</em> trace, but for exiting processes. For more information see the erlang(3) documentation.</p>
<p>The <em>erlang:trace/3</em> bif now doesn't block other scheduler threads if only one tracee is specified in the call to <em>erlang:trace/3</em> .</p>
<p>Own Id: OTP-7481
* 
The re module is extended with repetitive matches (global option) and replacement function.</p>
<p>Own Id: OTP-7494 Aux Id: OTP-7181
* 
In the section about binary construction, the reference manual now mentions what happens when an integer value does not fit into an integer segment of size N (namely, that the N least significant bits will be put into into the binary and that the most significant bits will be silently discarded). (Thanks to Edwin Fine.)</p>
<p>Own Id: OTP-7506
* 
Setting the <em>{active,once}</em> for a socket (using inets:setopts/2) is now specially optimized (because the <em>{active,once}</em> option is typically used much more frequently than other options).</p>
<p>Own Id: OTP-7520</p>
<h2 id="known-bugs-and-problems_7">Known Bugs and Problems</h2>
<ul>
<li>Floating point arithmetics in drivers can cause a runtime system crash and/or unexpected results on runtime systems with floating point exceptions enabled. Floating point exceptions are disabled unless explicitly enabled or if hipe is enabled.</li>
</ul>
<p>Own Id: OTP-7237</p>
<h2 id="erts-5633">Erts 5.6.3.3</h2>
<h2 id="fixed-bugs-and-malfunctions_137">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Binary construction with an integer field of size 0 at the end of the constructed binary (and the size given in a variable), would cause a write of one byte outside the memory reserved for the binary, which in turn could cause an emulator crash.</li>
</ul>
<p>Own Id: OTP-7422
* 
A race condition in the dynamic driver implementation could cause an emulator crash. (Thanks to Paul Fisher)</p>
<p>Own Id: OTP-7464
* 
Calls to <em>erlang:system_info(allocated_areas)</em> could cause the runtime system with SMP support to crash.</p>
<p>Own Id: OTP-7474
* 
The <em>env</em> option to <em>open_port()</em> could cause the runtime system with SMP support to crash.</p>
<p>Own Id: OTP-7475</p>
<h2 id="improvements-and-new-features_57">Improvements and New Features</h2>
<ul>
<li>Operations that needed to block other threads in the runtime system with SMP support unnecessarily waited for async threads to block. Most important the <em>erlang:memory/[0,1]</em> bif, code loading, and the <em>erlang:trace/3</em> bif.</li>
</ul>
<p>Own Id: OTP-7480</p>
<h2 id="erts-5632">Erts 5.6.3.2</h2>
<h2 id="fixed-bugs-and-malfunctions_138">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Calls to <em>erlang:memory/[0,1]</em> could cause the runtime system with SMP support to crash.</li>
</ul>
<p>Own Id: OTP-7415</p>
<h2 id="erts-5631">Erts 5.6.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_139">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Doing local call trace on bit syntax matching code that has been optimized with delayed sub-binary creation could crash the emulator.</li>
</ul>
<p>Own Id: OTP-7399 Aux Id: seq10978</p>
<h2 id="erts-563">Erts 5.6.3</h2>
<h2 id="fixed-bugs-and-malfunctions_140">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Only one to_erl process at a time is allowed to connect to the same run_erl pipe. Prevents buggy behaviour when IO from several to_erl's get interleaved.</li>
</ul>
<p>Own Id: OTP-5107
* 
IPv6 name resolving has now been fixed to use getaddrinfo() patch (thoroughly reworked) courtesy of Love Hörnquist-Åstrand submitted by Fredrik Thulin. It also can use gethostname2() patch (also reworked) courtesy of Mikael Magnusson for debian submitted by Sergei Golovan.</p>
<p>Own Id: OTP-5382
* 
Improved error handling in run_erl</p>
<p>Own Id: OTP-7252
* 
A permanent fix for the deadlock issue temporarily fixed by OTP-7260.
 <dl></p>
<dt> OTP-7260 </dt>

<dd>
The runtime system with SMP support could under rare circumstances deadlock when a distribution channel was taken down while multiple simultaneous operations were performed on it.
</dd>

<p></dl> 
Own Id: OTP-7267 Aux Id: OTP-7260
* 
./configure has been improved to find 64-bit OpenSSL libraries.</p>
<p>Own Id: OTP-7270
* 
A terminating process could under very rare circumstances trigger a bug which could crash the runtime system with SMP support.</p>
<p>Own Id: OTP-7272
* 
SCTP_ADDR_CONFIRMED events are now handled by gen_sctp.</p>
<p>Own Id: OTP-7276
* 
binary_to_term/1 would crash the emulator if the binary data contained an external fun with non-atom module and/or function. Corrected to generate a badarg exception.</p>
<p>Own Id: OTP-7281
* 
On Mac OS 10.5 (Leopard), sending to socket which the other end closes could cause the emulator to consume 100% CPU time. (Thanks to Matthias Radestock.)</p>
<p>Own Id: OTP-7289
* 
The vanilla driver used on Windows could crash the emulator and sometimes produced corrupt files. The vanilla driver is the driver that is used when one only pass a filename as first argument to <em>open_port/2</em> . <strong>NOTE</strong> : This use of <em>open_port/2</em> is <strong>obsolete</strong> , and the documentation of this use has previously been removed. The functionality is only present for backward compatibility reasons and <strong>will</strong> eventually be removed.</p>
<p>Own Id: OTP-7301
* 
Faulty matching in binaries larger than 512Mb on 64bit machines fixed.(On 32bit, the size limit for binaries is still 512Mb). Thanks to Edwin Fine and Per Gustafsson for finding fault and fix.</p>
<p>Own Id: OTP-7309
* 
crypto:start() on Windows caused emulator to hang on error popup window if openssl DLL was not found. Windows error popups now suppressed.</p>
<p>Own Id: OTP-7325
* 
Configuration option <em>without-termcap</em> can be used to disable the use of termcap libraries for terminal cursor control in the shell.</p>
<p>Own Id: OTP-7338
* 
to_erl reports its terminal window size to run_erl in order to get output formatted accordingly</p>
<p>Own Id: OTP-7342
* 
On Solaris, the <em>compressed</em> option for file operations did not work if the file descriptor happened to be greater than 255 (a problem with fopen() and friends in Solaris itself).</p>
<p>Own Id: OTP-7343 Aux Id: seq10949
* 
A race condition in the runtime system with SMP support causing an erroneous removal of a newly created ets table has been fixed.</p>
<p>The race occurred when a process removed a table during termination simultaneously as another process removed the same table via <em>ets:delete/1</em> and a third process created a table that accidentally got the same internal table index as the table being removed.</p>
<p>Own Id: OTP-7349
* 
<em>zlib:inflate</em> failed when the size of the inflated data was an exact multiple of the internal buffer size (4000 bytes by default).</p>
<p>Own Id: OTP-7359
* 
If the total number of allowed atoms is exceeded, there will now be a controlled termination of the emulator with a crash dump file. The emulator used to simply crash. (Thanks Howard Yeh and Thomas Lindgren.)</p>
<p>Own Id: OTP-7372
* 
The break handler in werl on Windows could cause the emulator to hang or crash, that is now corrected.</p>
<p>Own Id: OTP-7394 Aux Id: seq10969
* 
The configure script now tests for an serious optimization bug in gcc-4.3.0. If the bug is present, the configure script will abort (if this happens, the only way to build Erlang/OTP is to change to another version of gcc). (Thanks to Mikael Pettersson.)</p>
<p>Own Id: OTP-7397</p>
<h2 id="improvements-and-new-features_58">Improvements and New Features</h2>
<ul>
<li>On Unix, the emulator now notices when the width of the terminal has changed. (Thanks to Matthew Dempsky and Patrick Mahoney.)</li>
</ul>
<p>Own Id: OTP-7290
* 
There is a new function <em>init:stop/1</em> which can be used to shutdown the system cleanly AND generate a non-zero exit status or crash dump. (Thanks to Magnus Froberg.)</p>
<p>Own Id: OTP-7308
* 
process_info(Pid, garbage_collection) now returns more information</p>
<p>Own Id: OTP-7311
* 
The <em>hide</em> option for <em>open_port/2</em> is now documented. (Thanks to Richard Carlsson.)</p>
<p>Own Id: OTP-7358</p>
<h2 id="known-bugs-and-problems_8">Known Bugs and Problems</h2>
<ul>
<li>Floating point arithmetics in drivers can cause a runtime system crash on runtime systems with floating point exceptions enabled. Floating point exceptions are disabled unless explicitly enabled or if hipe is enabled.</li>
</ul>
<p>Own Id: OTP-7237</p>
<h2 id="erts-562">Erts 5.6.2</h2>
<h2 id="fixed-bugs-and-malfunctions_141">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The maximum length of an atom of 255 characters is now strictly enforced. <em>binary_to_term/1</em> will now fail with a badarg if an encoded term contains an atom longer than 255 characters. Atoms created by drivers will now be truncated to 255 characters if necessary. (Thanks to Matthew Dempsky.)</li>
</ul>
<p>Own Id: OTP-7147
* 
A bug in "bignum handling" on some 64bit architectures could cause rem and div operations on large numbers to hang indefinitely. Rem operations involving the smallest negative number representable in 28 bits or 60 bits could also cause access violation and emulator crash. Both errors are corrected.</p>
<p>Own Id: OTP-7177
* 
When doing the initial garbage collection after waking a hibernated process, a fullsweep garbage collection was unnecessarily triggered.</p>
<p>Own Id: OTP-7212
* 
The beta testing module <em>gen_sctp</em> now supports active mode as stated in the documentation. Active mode is still rather untested, and there are some issues about what should be the right semantics for <em>gen_sctp:connect/5</em> . In particular: should it be blocking or non-blocking or choosable. There is a high probability it will change semantics in a (near) future patch.</p>
<p>Try it, give comments and send in bug reports!</p>
<p>Own Id: OTP-7225
* 
Invalid arguments to <em>ets:update_counter/3</em> were not handled correctly. A tuple position ( <em>Pos</em> ) less than 1 caused the element directly following the key to be updated (as if no position at all had been specified). All invalid values for <em>Pos</em> will now fail with <em>badarg</em> .</p>
<p>Own Id: OTP-7226
* 
The runtime system with SMP support could under rare circumstances deadlock when a distribution channel was taken down while multiple simultaneous operations were performed on it.</p>
<p>Own Id: OTP-7260</p>
<h2 id="improvements-and-new-features_59">Improvements and New Features</h2>
<ul>
<li>More checksum/hash algorithms from the zlib library are now available as built in functions (like md5 hashes has been for a long time).</li>
</ul>
<p>Own Id: OTP-7128
* 
Minor improvements in the garbage collector.</p>
<p>Own Id: OTP-7139 Aux Id: OTP-7132
* 
The switch "-detached" to the windows werl program now can create an erlang virtual machine without any main window and without a temporary console showing.</p>
<p>Own Id: OTP-7142
* 
<em>erlang:system_info/1</em> now accepts the <em>logical_processors</em> , and <em>debug_compiled</em> arguments. For more info see the, <em>erlang(3)</em> documentation.</p>
<p>The scale factor returned by <em>test_server:timetrap_scale_factor/0</em> is now also effected if the emulator uses a larger amount of scheduler threads than the amount of logical processors on the system.</p>
<p>Own Id: OTP-7175
* 
A new BIF ets:update_element/3. To update individual elements within an ets-tuple, without having to read, update and write back the entire tuple.</p>
<p>Own Id: OTP-7200
* 
A process executing the <em>processes/0</em> BIF can now be preempted by other processes during its execution. This in order to disturb the rest of the system as little as possible. The returned result is, of course, still a consistent snapshot of existing processes at a time during the call to <em>processes/0</em> .</p>
<p>The documentation of the <em>processes/0</em> BIF and the <em>is_process_alive/1</em> BIF have been updated in order to clarify the difference between an existing process and a process that is alive.</p>
<p>Own Id: OTP-7213</p>
<h2 id="erts-5611">Erts 5.6.1.1</h2>
<h2 id="fixed-bugs-and-malfunctions_142">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Not enough parameters were passed when sending an error report in erl_check_io.c (Thanks to Matthew Dempsky).</li>
</ul>
<p>Own Id: OTP-7176
* 
In rare circumstances, complex binary matching code could cause the emulator to crash or not match when it should. (Thanks to Rory Byrne.)</p>
<p>Own Id: OTP-7198</p>
<h2 id="improvements-and-new-features_60">Improvements and New Features</h2>
<ul>
<li>The <em>{allocator_sizes, Alloc}</em> and <em>alloc_util_allocators</em> arguments are now accepted by <em>erlang:system_info/1</em> . For more information see the <em>erlang(3)</em> documentation.</li>
</ul>
<p>Own Id: OTP-7167
* 
The finishing reallocation of the heap block when hibernating a process is now always moving the heap block since it drastically reduces memory fragmentation when hibernating large amounts of processes.</p>
<p>Own Id: OTP-7187</p>
<h2 id="erts-561">Erts 5.6.1</h2>
<h2 id="fixed-bugs-and-malfunctions_143">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The SMP emulator on sparc64 erroneously used the sparc32 atomic and the sparc32 spinlock implementations which caused it to crash.</li>
</ul>
<p>Own Id: OTP-7006
* 
Call tracing the new guard BIFs <em>byte_size</em> , <em>bit_size</em> , or <em>tuple_size</em> and the loading a module that uses one of those functions, could cause the emulator to terminate.</p>
<p>Own Id: OTP-7008
* 
configuring --enable-darwin-universal or --enable-darwin-64bit on MacOSX could result in a non optimized emulator. Top level configure script now corrected.</p>
<p>Own Id: OTP-7014
* 
configuring --with-gd did not produce correct include flags for percept.</p>
<p>Own Id: OTP-7015
* 
Environment variables weren't handled in thread safe manner in the runtime system with SMP support on Windows.</p>
<p><em>erl_drv_putenv()</em> , and <em>erl_drv_getenv()</em> has been introduced for use in drivers. Do <strong>not</strong> use putenv(), or getenv() directly in drivers. For more information see the <em>erl_driver</em> documentation.</p>
<p>Own Id: OTP-7035
* 
HIPE: Corrected the choice of interface to the send/3 and setnode/3 BIFs for native-compiled code. Using the incorrect interface could, in unusual circumstances, lead to random runtime errors.</p>
<p>Own Id: OTP-7067
* 
Garbage collections could become extremely slow when there were many keys in the process dictionary. (Thanks to Fredrik Svahn.)</p>
<p>Own Id: OTP-7068
* 
The duplicate documentation directory in the windows installation is removed.</p>
<p>Own Id: OTP-7070
* 
Documentation bugfixes and clarifications.
 (Thanks to Joern (opendev@gmail.com), Matthias Lang, and Richard Carlsson.) 
Own Id: OTP-7079
* 
The runtime system with SMP support <strong>not</strong> using the native atomic integer implementation part of OTP could deadlock when run on a system with more than one logical processor. That is, only the runtime system with SMP support on <strong>other</strong> hardware platforms than x86, x86_64, sparc32, and powerpc32 were effected by this bug.</p>
<p>Own Id: OTP-7080
* 
The break handling code (run when Ctrl-C is hit) could could potentially deadlock the runtime system with SMP support.</p>
<p>Own Id: OTP-7104
* 
The sctp driver has been updated to work against newer lksctp packages e.g 1.0.7 that uses the API spelling change adaption -&gt; adaptation. Older lksctp (1.0.6) still work. The erlang API in gen_sctp.erl and inet_sctp.hrl now spells 'adaptation' regardless of the underlying C API.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7120
* 
A bug in <em>erlang:phash2/1</em> on 64-bit platforms has been fixed. (Thanks to Scott Lystig Fritchie.)</p>
<p>Own Id: OTP-7127
* 
The emulator could under rare circumstances crash while garbage collecting.</p>
<p>Own Id: OTP-7132</p>
<h2 id="improvements-and-new-features_61">Improvements and New Features</h2>
<ul>
<li>The documentation has been updated so as to reflect the last updates of the Erlang shell as well as the minor modifications of the control sequence <em>p</em> of the <em>io_lib</em> module.</li>
</ul>
<p>Superfluous empty lines have been removed from code examples and from Erlang shell examples.</p>
<p>Own Id: OTP-6944 Aux Id: OTP-6554, OTP-6911
* 
Bit syntax construction with a small integer in a non-byte aligned field wider than the CPU's word size could cause garbage bits in the beginning of the field.</p>
<p>Own Id: OTP-7085
* 
All Windows versions older than Windows 2000 are now <strong>not supported</strong> by the Erlang runtime system. This since there was a need for usage of features introduced in Windows 2000.</p>
<p>Own Id: OTP-7086
* 
Memory management improvements especially for the runtime system with SMP support:</p>
<ul>
<li>The runtime system with SMP support can now use multiple, thread specific instances of most memory allocators. This improves performance since it reduces lock contention in the memory allocators. It may however increase memory usage for some applications. The runtime system with SMP support will by default enable this feature on most allocators. The amount of instances used can be configured.</li>
<li><em>driver_alloc()</em> , <em>driver_realloc()</em> , and <em>driver_free()</em> now use their own erts specific memory allocator instead of the default <em>malloc()</em> implementation on the system.</li>
<li>The default configuration of some allocators have been changed to fit applications that use much memory better.</li>
<li>Some new <em>erts_alloc</em> configuration parameters have been added.</li>
<li><em>erts_alloc_config</em> has been modified to be able to create configurations suitable for multiple instances of allocators.</li>
<li>The returned value from <em>erlang:system_info({allocator, Alloc})</em> has been changed. This since an allocator may now run in multiple instances.</li>
</ul>
<p>If you for some reason want the memory allocators to be configured as before, you can pass the <em>+Mea r11b</em> command-line argument to <em>erl</em> .</p>
<p>For more information see the <em>erts_alloc(3)</em> , the <em>erts_alloc_config(3)</em> , and the <em>erlang(3)</em> documentation.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-7100
* 
On Unix, denormalized floating point numbers could not be created using <em>list_to_float/1</em> or <em>binary_to_term/1</em> . (Thanks to Matthew Dempsky.)</p>
<p>Own Id: OTP-7122
* 
Native atomic integers and spin-locks are now also available for the runtime system with SMP support on sparc64.</p>
<p>Own Id: OTP-7130
* 
FP exceptions support for sparc64 userspace on Linux has been added. Note that FP exception support is now turned off by default, so to actually enable it you need to do ' <em>./configure --enable-fp-exceptions</em> '.</p>
<p>Own Id: OTP-7131</p>
<h2 id="erts-56">Erts 5.6</h2>
<h2 id="fixed-bugs-and-malfunctions_144">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug for raw files when reading 0 bytes returning 'eof' instead of empty data has been corrected.</li>
</ul>
<p>Own Id: OTP-6291 Aux Id: OTP-6967
* 
All exported functions in gzio.c have now been renamed to avoid conflict with drivers that are indirectly linked with an external zlib library.</p>
<p>Own Id: OTP-6816 Aux Id: OTP-6591
* 
On the 64-bit Erlang emulator, bit syntax construction with integers containing more than 60 bits ("big numbers") into fields with more than 60 bits could produce incorrect results.</p>
<p>Own Id: OTP-6833
* 
When the runtime system failed to allocate memory for binaries, it could dead lock while writing the <em>erl_crash.dump</em> .</p>
<p>Own Id: OTP-6848
* 
The runtime system with SMP support could deadlock if a process called the <em>erlang:suspend_process(Pid)</em> BIF or the <em>erlang:garbage_collect(Pid)</em> BIF while the process identified by <em>Pid</em> was currently running and the process calling the BIFs was terminated during the call to the BIFs.</p>
<p>Processes suspending each other via the <em>erlang:suspend_process/1</em> BIF or garbage collecting each other via the <em>erlang:garbage_collect/1</em> BIF could deadlock each other when the runtime system with SMP support was used.</p>
<p>Own Id: OTP-6920
* 
<em>dbg</em> could leave traced processes in a suspended state if the tracer process was killed with exit reason <em>kill</em> .</p>
<p><em>erlang:suspend_process/2</em> has been introduced which accepts an option list as second argument. For more information see the <em>erlang(3)</em> documentation.</p>
<p>Processes suspended via <em>erlang:suspend_process/[1,2]</em> will now be automatically resumed if the process that called <em>erlang:suspend_process/[1,2]</em> terminates.</p>
<p>Processes could previously be suspended by one process and resumed by another unless someone was tracing the suspendee. This is <strong>not</strong> possible anymore. The process resuming a process <strong>has</strong> to be the one that suspended it.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6946
* 
file:write_file/3, file:write/2 and file:read/2 could crash (contrary to documentation) for odd enough file system problems, e.g write to full file system. This bug has now been corrected.</p>
<p>In this process the file module has been rewritten to produce better error codes. Posix error codes now originate from the OS file system calls or are generated only for very similar causes (for example 'enomem' is generated if a memory allocation fails, and 'einval' is generated if the file handle in Erlang is a file handle but currently invalid).</p>
<p>More Erlang-ish error codes are now generated. For example <em>{error,badarg}</em> is now returned from <em>file:close/1</em> if the argument is not of a file handle type. See file(3).</p>
<p>The possibility to write a single byte using <em>file:write/2</em> instead of a list or binary of one byte, contradictory to the documentation, has been removed.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6967 Aux Id: OTP-6597 OTP-6291
* 
Monitor messages produced by the system monitor functionality, and garbage collect trace messages could contain erroneous heap and/or stack sizes when the actual heaps and/or stacks were huge.</p>
<p>As of erts version 5.6 the <em>large_heap</em> option to <em>erlang:system_monitor/[1,2]</em> has been modified. The monitor message is sent if the sum of the sizes of all memory blocks allocated for all heap generations is equal to or larger than the specified size. Previously the monitor message was sent if the memory block allocated for the youngest generation was equal to or larger than the specified size.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6974 Aux Id: seq10796
* 
<em>inet:getopts/2</em> returned random values on Windows Vista.</p>
<p>Own Id: OTP-7003</p>
<h2 id="improvements-and-new-features_62">Improvements and New Features</h2>
<ul>
<li>The emulator internal process lock implementation has been rewritten and optimized. A slight risk of starvation existed in the previous implementation. This risk has also been eliminated in the new implementation.</li>
</ul>
<p>Own Id: OTP-6500
* 
Bitstrings (bit-level) binaries and binary comprehensions are now part of the language. See the Reference Manual.</p>
<p>Own Id: OTP-6558
* 
The windows version of erlang now has SMP support. The SMP emulator is run by default on machines which shows more than one virtual or physical processor.</p>
<p>Own Id: OTP-6560 Aux Id: OTP-6925
* 
The details of the compressed term format has been documented in erl_ext_dist.txt. (Thanks to Daniel Goertzen.)</p>
<p>Own Id: OTP-6755
* 
The runtime system with SMP support is now started by default if more than one logical processor are detected. For more information, see the <em>erl(3)</em> documentation.</p>
<p>Own Id: OTP-6756
* 
The external format for Erlang terms and the distribution protocol are now documented in ERTS User's Guide.</p>
<p>Own Id: OTP-6779
* 
New BIF's erlang:system_profile/1 and erlang:system_profile/2. These BIF's controls concurrency profiling options for processes, ports and schedulers.</p>
<p>Own Id: OTP-6783 Aux Id: OTP-6285
* 
The <em>ErlDrvTermData</em> term types used by <em>driver_output_term()</em> and <em>driver_send_term()</em> have been extended with the term types <em>ERL_DRV_BUF2BINARY</em> , <em>ERL_DRV_EXT2TERM</em> , and <em>ERL_DRV_UINT</em> . <em>ERL_DRV_BUF2BINARY</em> is used for passing and creating a binary, <em>ERL_DRV_EXT2TERM</em> is used for passing terms encoded with the external term format, and <em>ERL_DRV_UINT</em> is used for passing unsigned integers.</p>
<p>Also the data types <em>ErlDrvUInt</em> and <em>ErlDrvSInt</em> have been added which makes it more obvious how arguments to term types are interpreted with regards to width and signedness.</p>
<p>The incorrect data types <em>ErlDriverTerm</em> , <em>ErlDriverBinary</em> , and <em>ErlDriverPort</em> in the <em>erl_driver(3)</em> documentation have been replaced with the correct data types <em>ErlDrvTermData</em> , <em>ErlDrvBinary</em> , and <em>ErlDrvPort</em> .</p>
<p>For more information see the <em>erl_driver(3)</em> documentation.</p>
<p>Own Id: OTP-6823
* 
Miscellaneous improvements of the erts internal thread library.</p>
<p>It now support optimized atomic operations and spin-locks on windows.</p>
<p>Fall-backs based on mutexes and/or spin-locks for missing optimized atomic operations, spin-locks, or rwlocks has been implemented. This makes it possible to compile the runtime system with SMP support on a lot more platforms.</p>
<p>Default stack size on OpenBSD has been increased to 256 kilo-words.</p>
<p>Own Id: OTP-6831 Aux Id: OTP-6560
* 
Many bit syntax operations, both construction and matching, are faster. For further information, see the Efficiency Guide.</p>
<p>Own Id: OTP-6838
* 
Literal lists, tuples, and binaries are no longer constructed at run-time as they used to be, but are stored in a per-module constant pool. Literals that are used more than once are stored only once.</p>
<p>This is not a change to the language, only in the details of its implementation. Therefore, the implications of this change is described in the Efficiency Guide.</p>
<p>Example 1: In the expression <em>element(BitNum-1, {1,2,4,8,16,32,64,128})</em> , the tuple used to be constructed every time the expression was executed, which could be detrimental to performance in two ways if the expression was executed in a loop: the time to build the tuple itself and the time spent in garbage collections because the heap filled up with garbage faster.</p>
<p>Example 2: Literal strings, such as <em>"abc"</em> , used to be stored in the compiled code compactly as a byte string and expanded to a list at run-time. Now all strings will be stored expanded to lists (such as <em>[$a,$b,$c]</em> ) in the constant pool. That means that the string will be faster to use at run-time, but that it will require more space even when not used. If space is an issue, you might want to use binary literals (that is, <em>&lt;&lt;"abc"&gt;&gt;</em> ) instead of string literals for infrequently used long strings (such as error messages).</p>
<p>Own Id: OTP-6850
* 
The Erlang driver API has been extended with a portable POSIX thread like API for multi-threading. The Erlang driver thread API provides:</p>
<ul>
<li>Threads</li>
<li>Mutexes</li>
<li>Condition variables</li>
<li>Read/Write locks</li>
<li>Thread specific data</li>
</ul>
<p>For more information see the <em>erl_driver(3)</em> documentation.</p>
<p>Own Id: OTP-6857
* 
Recursive calls now usually consume less stack than in R11B. See the Efficiency Guide.</p>
<p>Own Id: OTP-6862 Aux Id: seq10746
* 
The deprecated BIFs <em>erlang:old_binary_to_term/1</em> and <em>erlang:info/1</em> have been removed.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6876
* 
Calls to driver call-backs triggered by external events are now scheduled and interleaved with execution of Erlang processes also on the runtime system without SMP support.</p>
<p>Own Id: OTP-6878
* 
Faster arithmetic of integers of more than 27 bits signed (or 60 bits signed on an 64-bit CPU), and also faster integer multiplication. (Thanks to Tony Rogvall.)</p>
<p>Own Id: OTP-6891
* 
Significant improvements of the <em>process_info</em> BIFs:</p>
<ul>
<li><em>process_info/2</em> can now be called with a list of items as second argument in order to atomically retrieve information about multiple items.</li>
<li><em>process_info/[1,2]</em> has been optimized in the runtime system with SMP support. The whole scheduler could previously be blocked for a significant period of time in <em>process_info/[1,2]</em> waiting for a lock on the process being inspected. The Erlang process calling <em>process_info/[1,2]</em> can still be blocked for a significant period of time waiting for the lock, but the scheduler will now be able to run other processes while the process calling <em>process_info/[1,2]</em> waits for the lock.</li>
<li><em>process_info/2</em> now accept a few more items than before.</li>
<li>The documentation of <em>process_info/[1,2]</em> has been improved.</li>
</ul>
<p>For more information see the <em>erlang(3)</em> documentation.</p>
<p>Own Id: OTP-6899
* 
<em>open_port({}, [])</em> could crash the emulator. (Thanks to Matthew Dempsky.)</p>
<p>Own Id: OTP-6901
* 
Two new guard BIFs have been introduced as a recommended replacement for <em>size/1</em> . (The <em>size/1</em> BIF will be removed no earlier than in R14B.) The BIFs are <em>tuple_size/1</em> to calculate the size of a tuple and <em>byte_size/1</em> to calculate the number of bytes needed for the contents of the binary or bitstring (rounded up to the nearest number of bytes if necessary).</p>
<p>There is also a new <em>bit_size/1</em> BIF that returns the exact number of bits that a binary or bitstring contains.</p>
<p>Own Id: OTP-6902
* 
The <em>ets:fixtable/2</em> function, which has been deprecated for several releases, has been removed.</p>
<p>The <em>ets:info/1</em> function has been reimplemented as a BIF, which guarantees that information returned is consistent.</p>
<p>The <em>ets:info/2</em> function now fails with reason <em>badarg</em> if the second argument is invalid. (Dialyzer can be used to find buggy code where the second argument is misspelled.)</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6906
* 
As the linux kernel may generate a minor fault when tracing with CPU timestamps, and there exists no patch to the Linux kernel that fixes the problem, cpu timestamps are disabled on Linux for now.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6922
* 
The functions io:columns/0, io:columns/1, io:rows/0 and io:rows/1 are added to allow the user to get information about the terminal geometry. The shell takes some advantage of this when formatting output. For regular files and other io-devices where height and width are not applicable, the functions return {error,enotsup}.</p>
<p>Potential incompatibility: If one has written a custom io-handler, the handler has to either return an error or take care of io-requests regarding terminal height and width. Usually that is no problem as io-handlers, as a rule of thumb, should give an error reply when receiving unknown io-requests, instead of crashing.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6933
* 
<em>driver_caller()</em> can now also be used from the <em>start</em> callback of a driver.</p>
<p>Own Id: OTP-6951
* 
The emulator can now be compiled for 64bit intel, as well as a 32bit universal binary on darwin/MacOSX 10.4 and 10.5.</p>
<p>Own Id: OTP-6961
* 
If <em>open_port</em> fails because all available ports are already in use, it will now throw a <em>system_limit</em> exception instead of an <em>enfile</em> exception. ( <em>enfile</em> might still be thrown if the operating system would return ENFILE.)</p>
<p>Own Id: OTP-6968
* 
The <em>spawn_monitor/1</em> and <em>spawn_monitor/3</em> BIFs are now auto-imported (i.e. they no longer need an <em>erlang:</em> prefix).</p>
<p>Own Id: OTP-6975
* 
On Windows, the werl window now handles resize, so that the whole window can be utilized. Text selection is also updated to be line oriented instead of rectangle oriented as in earlier versions.</p>
<p>Own Id: OTP-6994 Aux Id: OTP-6933
* 
Kqueue support (kernel-poll) has been enabled on FreeBSD. The problem with kqueue not detecting writes on a pipe on FreeBSD was actually not a kqueue issue, but a writev on pipes issue. Neither poll(), nor select() detected the write when the bug hit. NetBSD and DragonFlyBSD probably have or have had the same bug. This bug should have been fixed in FreeBSD 6.3 and FreeBSD 7.0 thanks to Jean-Sebastien Pedron.</p>
<p>Own Id: OTP-7001</p>
<h2 id="erts-5555">Erts 5.5.5.5</h2>
<h2 id="fixed-bugs-and-malfunctions_145">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Hanging writes on temporarily unavailable NFS filesystems could cause the execution of (not file related) erlang code to get blocked even though I/O threads were used. This is now corrected.</li>
</ul>
<p>Own Id: OTP-6907 Aux Id: seq10771</p>
<h2 id="erts-5554">Erts 5.5.5.4</h2>
<h2 id="fixed-bugs-and-malfunctions_146">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Data passed to a driver via <em>erlang:port_call</em> could be corrupted when the runtime system with SMP support was used. (Thanks to YAMASHINA Hio.)</li>
</ul>
<p>Own Id: OTP-6879
* 
In the SMP emulator, if several processes called ets:update_counter/3 (even for different tables) when the counter values exceeded 27 bits, the counter values could be corrupted or the emulator could crash.</p>
<p>Own Id: OTP-6880 Aux Id: seq10760</p>
<h2 id="erts-5553">Erts 5.5.5.3</h2>
<h2 id="fixed-bugs-and-malfunctions_147">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Creating a named table using <em>ets:new/2</em> or renaming a named table using <em>ets:rename/2</em> could in rare circumstances succeed, meaning that there would be two or more tables with the same name. Now such call will fail with a <em>badarg</em> exception as it is supposed to do.</li>
</ul>
<p><em>ets:delete/1</em> used on a named table now removes the name immediately so that a new table with the same name can be created.</p>
<p>Turning on call trace on the internal BIF that implements <em>ets:delete/1</em> would crash the emulator.</p>
<p>SMP emulator only: Using <em>ets:rename/2</em> on a table that <em>ets:safe_fixtable/2</em> has been used on could cause an emulator crash or undefined behaviour because of a missing lock.</p>
<p>Own Id: OTP-6872 Aux Id: seq10756, seq10757</p>
<h2 id="erts-5552">Erts 5.5.5.2</h2>
<h2 id="known-bugs-and-problems_9">Known Bugs and Problems</h2>
<ul>
<li>ets:select/3 on ordered_set and with a chunksize a multiple of 1000 gave all elements instead of just 1000. Also ets:slot/2 on ordered set could give unexpected results on SMP emulator. Both problems are corrected.</li>
</ul>
<p>Own Id: OTP-6842</p>
<h2 id="erts-5551">Erts 5.5.5.1</h2>
<h2 id="fixed-bugs-and-malfunctions_148">Fixed Bugs and Malfunctions</h2>
<ul>
<li>All exported functions in gzio.c have now been renamed to avoid conflict with drivers that are indirectly linked with an external zlib library.</li>
</ul>
<p>Own Id: OTP-6816 Aux Id: OTP-6591
* 
Calling binary_to_term/1 with certain invalid binaries would crash the emulator.</p>
<p>Own Id: OTP-6817</p>
<h2 id="improvements-and-new-features_63">Improvements and New Features</h2>
<ul>
<li>Restored speed of bit-syntax matching of 32 bits integers.</li>
</ul>
<p>Own Id: OTP-6789 Aux Id: seq10688</p>
<h2 id="erts-555">Erts 5.5.5</h2>
<h2 id="fixed-bugs-and-malfunctions_149">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The functions in gzio.c have been renamed to avoid conflict with drivers that indirectly linked with an external zlib library.</li>
</ul>
<p>Own Id: OTP-6591
* 
The emulator without SMP support dumped core if an async-thread finished a job after the emulator had begun writing an <em>erl_crash.dump</em> .</p>
<p>Own Id: OTP-6685
* 
In bit syntax matching, integer fields with greater size than 16Mb would fail to match. (Thanks to Bertil Karlsson and Francesco Pierfederici.)</p>
<p>Matching out a 32-bit integer not aligned on a byte boundary from a binary could cause an heap overflow (and subsequent termination of the emulator).</p>
<p>A module that contained bit syntax construction with a literal field size greater than 16Mb would fail to load.</p>
<p>Several other similar bugs having to do with huge field sizes were eliminated.</p>
<p>Attempting to construct a binary longer than 536870911 bytes will now fail with a <em>system_limit</em> exception (rather than fail in mysterious ways or construct an binary with incorrect contents). Similarily, attempting to match a binary longer than 536870911 bytes will now fail (instead of producing an incorrect result). This limitation has been documented in the Efficiency Guide. (The limit is in the 32-bit emulator; use the 64-bit emulator if you need to handle larger binaries than 536870911.)</p>
<p>Own Id: OTP-6686
* 
Bugs in rem and div of very large numbers are corrected.</p>
<p>Own Id: OTP-6692
* 
<em>erlang:system_info({allocator, Alloc})</em> didn't allocate enough heap when a bignum was part of the result which could cause an emulator crash.</p>
<p>Own Id: OTP-6693
* 
It was previously not possible to pass <em>erts_alloc</em> the same configuration via the command-line, as used by default.</p>
<p>A <em>+M</em><em> command-line argument that configure a size of some sort can now be passed a value that equals the size of the address space. The value used, in this case, will be </em>"the size of the address space" - 1* .</p>
<p>Own Id: OTP-6699
* 
<em>SysIOVec</em> driver_peekq(ErlDrvPort port, int <em>vlen)</em> did not update <strong>vlen<em> if </em>port* was invalid. </strong>vlen<em> is now set to </em>-1<em> if the </em>port* is invalid.</p>
<p>The <em>efile</em> driver expects <em><em>vlen</em> to be updated also when the </em>port* is invalid. This situation occurs seldom, but when the runtime system has async-threads enabled and ports are killed it can. When it occurred the runtime system crashed.</p>
<p>Own Id: OTP-6729</p>
<h2 id="improvements-and-new-features_64">Improvements and New Features</h2>
<ul>
<li>For scripts written using <em>escript</em> , there is a new function <em>escript:script_name/0</em> , which can be used to retrieve the pathame of the script. The documentation has been clarified regarding pre-defined macros such as ?MODULE and the module name.</li>
</ul>
<p>Own Id: OTP-6593
* 
The section Guards in the chapter The Abstract Format of the ERTS User's Guide has been updated.</p>
<p>Own Id: OTP-6600
* 
Corrected protocol layer flue for socket options SO_LINGER, SO_SNDBUF and SO_RCVBUF, for SCTP.</p>
<p>Own Id: OTP-6625 Aux Id: OTP-6336
* 
The behaviour of the inet option {active,once} on peer close is improved and documented.</p>
<p>Own Id: OTP-6681
* 
The inet option send_timeout for connection oriented sockets is added to allow for timeouts in communicating send requests to the underlying TCP stack.</p>
<p>Own Id: OTP-6684 Aux Id: seq10637 OTP-6681
* 
The command line flag <em>-args_file FileName</em> , and the environment variables <em>ERL_AFLAGS</em> , and <em>ERL_ZFLAGS</em> for the <em>erl</em> command have been added. For more information see the <em>erl(1)</em> documentation.</p>
<p>Own Id: OTP-6697
* 
The <em>is_constant/1</em> type test has been deprecated. <em>is_constant/1</em> is improperly named and almost entirely undocumented.</p>
<p>Own Id: OTP-6731</p>
<h2 id="erts-5543">Erts 5.5.4.3</h2>
<h2 id="fixed-bugs-and-malfunctions_150">Fixed Bugs and Malfunctions</h2>
<ul>
<li><em>process_flag(trap_exit, Bad)</em> where <em>Bad</em> was a term not equal to <em>true</em> or <em>false</em> , didn't fail with <em>badarg</em> as it should; instead, the failure was silently ignored. This bug was introduced in <em>erts-5.5.2</em> .</li>
</ul>
<p>Own Id: OTP-6627 Aux Id: OTP-6160
* 
The minimum and default stack size for async-threads has been increased to 16 kilowords. This since the previous minimum and default stack size of 8 kilowords proved to be too small (introduced in <em>erts-5.5.4.2</em> ).</p>
<p>Own Id: OTP-6628 Aux Id: OTP-6580, Seq10633</p>
<h2 id="improvements-and-new-features_65">Improvements and New Features</h2>
<ul>
<li>process_flag/2 accepts the new flag <em>sensitive</em> .</li>
</ul>
<p>Own Id: OTP-6592 Aux Id: seq10555</p>
<h2 id="erts-5542">Erts 5.5.4.2</h2>
<h2 id="fixed-bugs-and-malfunctions_151">Fixed Bugs and Malfunctions</h2>
<ul>
<li>When a port steals control over a file descriptor from another port, the stealing port tests if the other port is alive. This in order to be able to give an accurate error message. In the runtime system with SMP support, this test was done without appropriate locks held. This could in worst case lead to an erroneous error message; therefore, this bug is to be considered harmless.</li>
</ul>
<p>Own Id: OTP-6602</p>
<h2 id="improvements-and-new-features_66">Improvements and New Features</h2>
<ul>
<li>The default stack size for threads in the async-thread pool has been shrunk to 8 kilowords, i.e., 32 KB on 32-bit architectures. This small default size has been chosen since the amount of async-threads might be quite large. The default stack size is enough for drivers delivered with Erlang/OTP, but might not be sufficiently large for other dynamically linked in drivers that use the <em>driver_async()</em> functionality. A suggested stack size for threads in the async-thread pool can be configured via the <em>+a</em> command line argument of <em>erl(1)</em> .</li>
</ul>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6580</p>
<h2 id="erts-5541">Erts 5.5.4.1</h2>
<h2 id="fixed-bugs-and-malfunctions_152">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Setting the time on the system while using heart on a linux machine where the emulator was built with clock_gettime support (default from Linux 2.6/erts-5.5.4 and upwards), could make the heart command fire. This was due to bug in the heart executable which is now corrected.</li>
</ul>
<p>Own Id: OTP-6598 Aux Id: seq10614</p>
<h2 id="erts-554">Erts 5.5.4</h2>
<h2 id="fixed-bugs-and-malfunctions_153">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Corrected misspelling of ' <em>-pz</em> ' in the help text for <em>erlc</em> . (Thanks to Ulf Wiger.)</li>
</ul>
<p>Own Id: OTP-6433
* 
The MD5 calculation of a BEAM file done by <em>code:module_md5/1</em> , <em>beam_lib:md5/1</em> , and by the compiler for the default value of the <em>vsn</em> attribute have all been changed so that its result will be the same on all platforms; modules containing funs could get different MD5s on different platforms.</p>
<p>Own Id: OTP-6459
* 
The emulator could dump core while writing an <em>erl_crash.dump</em> file if there were funs with a large terms in its environment. Since there is no way to inspect a fun's environment in the crashdump_viewer application anyway, a variables in the environment are now set to [] before dumping the fun. (Thanks to Jean-Sebastien Pedron.)</p>
<p>Own Id: OTP-6504
* 
<em>{Port, {exit_status, S}}</em> messages from ports opened with the <em>exit_status</em> option could under rare circumstances be delayed. This bug was present on Erlang runtime systems without SMP support on all unix operating systems other than SunOS.</p>
<p>Own Id: OTP-6528
* 
A bug in linuxthreads could cause the emulator to dump core when dlerror() was called before the first call to dlopen(). As a workaround the emulator always makes a call to dlopen() on initialization when linuxthreads is used as thread library.</p>
<p>Own Id: OTP-6530
* 
file:sync/1 did not do anything on Windows. Now it calls the system function for flushing buffers (FlushFileBuffers()). (Thanks to Matthew Sackman.)</p>
<p>Own Id: OTP-6531
* 
<em>open_port/2</em> could on the runtime system with SMP support fail with the wrong exit reason when a port couldn't be created. When this happened the exit reason was typically <em>eintr</em> , or <em>ebusy</em> instead of <em>eagain</em> .</p>
<p>Own Id: OTP-6536
* 
The file driver (efile_drv) did not flush data written using the option 'delayed_write' after the set timeout time, rather at the next file operation. This bug has now been corrected.</p>
<p>Own Id: OTP-6538</p>
<h2 id="improvements-and-new-features_67">Improvements and New Features</h2>
<ul>
<li>An interface towards the SCTP Socket API Extensions has been implemented.It is an Open Source patch courtesy of Serge Aleynikov and Leonid Timochouk. The Erlang code parts has been adapted by the OTP team, changing the Erlang API somewhat.</li>
</ul>
<p>The Erlang interface consists of the module <em>gen_sctp</em> and an include file <em>-include_lib("kernel/include/inet_sctp.hrl").</em> for option record definitions. The <em>gen_sctp</em> module is documented.</p>
<p>The delivered Open Source patch, before the OTP team rewrites, was written according to http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13 and was claimed to work fine, tested on Linux Fedora Core 5.0 (kernel 2.6.15-2054 or later) and on Solaris 10 and 11. The OTP team rewrites used the same standard document but might have accidentally broken some functionality. If so it will soon be patched to working state. The tricky parts in C and the general design has essentially not changed. During the rewrites the code was hand tested on SuSE Linux Enterprise Server 10, and briefly on Solaris 10. Feedbach on code and docs is very much appreciated.</p>
<p>The SCTP interface is in beta state. It has only been hand tested and has no automatic test suites in OPT meaning everything is most certainly not tested. Socket active mode is broken. IPv6 is not tested. The documentation has been reworked due to the API changes, but has not been proofread after this.</p>
<p>Thank you from the OTP team to Serge Aleynikov and Leonid Timochouk for a valuable contribution. We hope we have not messed it up too much.</p>
<p>Own Id: OTP-6336
* 
A <em>{minor_version,Version}</em> option is now recognized by <em>term_to_binary/2</em> . {minor_version,1} will cause floats to be encoded in an exact and more space-efficient way compared to the previous encoding.</p>
<p>Own Id: OTP-6434
* 
There is a new <em>escript</em> program that can be used for writing scripts in Erlang. Erlang scripts don't need to be compiled and any arguments can be passed to them without risk that they are interpreted by the Erlang system.</p>
<p>Own Id: OTP-6505
* 
Setting and getting socket options in a "raw" fashion is now allowed. Using this feature will inevitably produce non portable code, but will allow setting ang getting arbitrary uncommon options on TCP stacks that do have them.</p>
<p>Own Id: OTP-6519
* 
Miscellaneous signal handling improvements on the Erlang runtime system with SMP support.</p>
<p>The fallback implementation of spin locks and atomic operations are now implemented using pthread spin locks when pthread spin locks are found on the system.</p>
<p>The Erlang runtime system with SMP support can now run on Linux systems that has Linuxthreads instead of NPTL (Native POSIX Thread Library). Note that the SMP support hasn't been as thoroughly tested with Linuxthreads as with NPTL. A runtime system with SMP support will therefore not be built by default on Linux when NPTL isn't found. In order to force a build of the runtime system with SMP support, pass <em>--enable-smp-support</em> to <em>configure</em> when building OTP.</p>
<p>Own Id: OTP-6525</p>
<h2 id="erts-5531">Erts 5.5.3.1</h2>
<h2 id="fixed-bugs-and-malfunctions_154">Fixed Bugs and Malfunctions</h2>
<ul>
<li><em>erlang:system_flag(multi_scheduling, block)</em> could cause the emulator with SMP support to deadlock.</li>
</ul>
<p>Own Id: OTP-6431 Aux Id: OTP-6403
* 
The runtime system with SMP support failed to call the driver timeout callback of ports in state closing. This could cause ports to fail flushing their I/O queues.</p>
<p>Own Id: OTP-6432
* 
The <em>{Port, closed}</em> message from a closed port could arrive at the port owner before <em>Port</em> had been removed from the result of <em>erlang:ports/0</em> in the runtime system with SMP support.</p>
<p>Own Id: OTP-6437
* 
The async id of async jobs created via <em>driver_async</em> wasn't created in a thread safe manner in the runtime system with SMP support. This could in worst case cause <em>driver_async_cancel()</em> to cancel another async job than intended.</p>
<p>Own Id: OTP-6438
* 
Under rare circumstances a terminating connection between two nodes could cause an instantaneous reconnect between the two nodes to fail on the runtime system with SMP support.</p>
<p>Own Id: OTP-6447
* 
In the documentation of the driver entry field <em>extended_marker</em> of erts version 5.5.3 ( <em>driver_entry(3)</em> ), the following is stated: "The following fields are ignored if this field is equal to <em>0</em> ". This is a documentation bug and has been changed to: "If this field is equal to <em>0</em> , all the fields following this field also <strong>have</strong> to be <em>0</em> , or <em>NULL</em> in case it is a pointer field".</p>
<p>The runtime check for detection of old incompatible drivers made when loading drivers has been improved. The emulator can, however, not make sure that a driver that doesn't use the extended driver interface isn't incompatible. Therefore, when loading a driver that doesn't use the extended driver interface, there is a risk that it will be loaded also when the driver is incompatible. When the driver use the extended driver interface, the emulator can verify that it isn't of an incompatible driver version. You are therefore advised to use the extended driver interface.</p>
<p>For more information see the <em>erl_driver(3)</em> and <em>driver_entry(3)</em> documentation.</p>
<p>Own Id: OTP-6452 Aux Id: OTP-6330
* 
When terminating ports on the runtime system with SMP support, removal of links to processes was done without locking the link lock on processes. This could cause an emulator crash.</p>
<p>Own Id: OTP-6475
* 
The emulator with SMP support could crash when a port flushed its I/O queue by calling <em>driver_async()</em> from the timeout driver callback.</p>
<p>Own Id: OTP-6479
* 
Large exit reasons could under rare circumstances cause the runtime system with SMP support to crash.</p>
<p>Own Id: OTP-6521</p>
<h2 id="improvements-and-new-features_68">Improvements and New Features</h2>
<ul>
<li>Faster system calls for keeping the time accurate are used on newer Linux kernels, which can result in a significant speed-up of the emulator on those systems.</li>
</ul>
<p>Own Id: OTP-6430
* 
Added number of async threads and number of scheduler threads to the system information that can be retrieved via <em>driver_system_info()</em> . For more information see the <em>erl_driver(3)</em> documentation.</p>
<p>Own Id: OTP-6440
* 
When <em>SIGUSR1</em> is received by the runtime system with SMP support, the <em>erl_crash.dump</em> is now written by a special thread, instead of as before directly from the signal handler.</p>
<p>Own Id: OTP-6465
* 
term_to_binary/2 with compression is now faster.</p>
<p>term_to_binary/2 now accepts the option ' <em>{compressed,Level}</em> ' for specifying the compression level. <em>Level</em> must be in the range 0 (no compression) through 9 (highest compression level). Default is 6.</p>
<p>Future compatibility bugfix: binary_to_term/1 did not handle the <em>Uniq</em> and <em>Index</em> fields correctly.</p>
<p>Own Id: OTP-6494
* 
Removed unnecessary reallocation when initializing kernel-poll set.</p>
<p>Own Id: OTP-6516</p>
<h2 id="erts-553">Erts 5.5.3</h2>
<h2 id="fixed-bugs-and-malfunctions_155">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Node and fun table entries could under rare circumstances be deallocated multiple times on the emulator with SMP support.</li>
</ul>
<p>Own Id: OTP-6369
* 
epoll_wait() can repeat entries for the same file descriptor in the result array. This could cause the ready_input, ready_output, or event callbacks of a driver to unintentionally be called multiple times. We have only noted repeated entries when an error condition has occurred on the file descriptor. In this case, the repeated entries should normally not be a problem for the driver since it should detect the error and de-select the file descriptor. Therefore this bug should be considered harmless. The emulator now coalesce repeated entries into one.</p>
<p>You are only affected by this bug if you are using erts-5.5.2.* and the kernel-poll feature on linux.</p>
<p>Own Id: OTP-6376 Aux Id: OTP-6222
* 
If a process that was waiting in gen_tcp:accept/1 was killed, calling gen_tcp:accept/1 again on the same listen socket would fail with ' <em>{error,einval}</em> '.</p>
<p>Own Id: OTP-6381 Aux Id: seq10535
* 
The emulator failed to start on Solaris 10 when kernel-poll support was enabled and the maximum number of filedescriptors configured was less than or equal to 256.</p>
<p>Own Id: OTP-6384 Aux Id: OTP-6222
* 
The R10B compiler could generate unsafe <em>bs_save/bs_restore</em> instructions that could cause memory corruption. (The R11B compiler does not have that problem.) The erlang emulator will now refuse to load R10B-compiled modules that contain such unsafe <em>bs_save/bs_restore</em> instructions. In addition, the beam_validator module in the compiler will also reject such instructions (in case it is used to validate R10B code). (Thanks to Matthew Reilly.)</p>
<p>Own Id: OTP-6386
* 
Process and port timers could fail to work properly on the runtime system with SMP support. Many thanks to Dmitriy Kargapolov and Serge Aleynikov who tracked down this bug.</p>
<p>Own Id: OTP-6387
* 
Bit syntax code compiled by an R10B compiler that matched out a floating point number would not properly check that the floating point number was valid; if the float was, for instance, NaN the emulator could crash.</p>
<p>Own Id: OTP-6395
* 
statistics(runtime) on Windows used to return the elapsed system time for the process, instead of the user time. Corrected. (Thanks to Robert Virding.)</p>
<p>Own Id: OTP-6407
* 
A loadable driver (loaded by erl_ddll) which used driver_async() would cause the emulator to crash. (Thanks to Dmitriy Kargapolov.)</p>
<p>Own Id: OTP-6410
* 
Under rare circumstances the emulator on unix platforms could fail to terminate the Erlang port corresponding to a port program opened with the <em>exit_status</em> option.</p>
<p>Own Id: OTP-6411
* 
A link removed via <em>unlink/1</em> could under rare circumstances transfer exit signals for a short period of time after the call to <em>unlink/1</em> had returned when the runtime system with SMP support was used.</p>
<p>Own Id: OTP-6425 Aux Id: OTP-6160</p>
<h2 id="improvements-and-new-features_69">Improvements and New Features</h2>
<ul>
<li>In the runtime system with SMP support, ports are now being scheduled on the scheduler threads interleaved with processes instead of being run in a separate I/O thread.</li>
</ul>
<p>Own Id: OTP-6262
* 
More interfaces are added in erl_ddll, to support different usage scenarios.</p>
<p>Own Id: OTP-6307 Aux Id: OTP-6234
* 
In the runtime system with SMP support, the global I/O lock has been replaced with a more fine grained port locking scheme. Port locking is either done on driver level, i.e., all ports executing the same driver share a lock, or on port level, i.e., each port has its own lock. Currently the inet driver, the efile driver, and the spawn driver use port level locking and all other statically linked in drivers use driver level locking. By default dynamically linked in drivers will use locking on driver level. For more information on how to enable port level locking see the <em>erl_driver(3)</em> and the <em>driver_entry(3)</em> man pages.</p>
<p>As of erts version 5.5.3 the driver interface has been extended. The extended interface introduce version management, the possibility to pass capability flags to the runtime system at driver initialization, and some new driver API functions. For example, the <em>driver_system_info()</em> function which can be used to determine if the driver is run in a runtime system with SMP support or not. The extended interface doesn't have to be used, <strong>but</strong> dynamically linked in driver <strong>have</strong> to be recompiled. For information see the <em>erl_driver(3)</em> and the <em>driver_entry(3)</em> man pages.</p>
<p><strong>NOTE:</strong> Dynamically linked in drivers <strong>have</strong> to be recompiled.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6330 Aux Id: OTP-6262
* 
A test and debug feature which modifies the timing of the runtime system has been added. For more information, see documentation of the <em>+T<Level></em> command line argument of <em>erl(1)</em> .</p>
<p>Own Id: OTP-6382
* 
The version of zlib (http://zlib.net) linked into run-time system has been updated to version 1.2.3.</p>
<p>Own Id: OTP-6394
* 
The <em>erlc</em> program now passes on the <em>-smp</em> and <em>-hybrid</em> options to the Erlang emulator it starts. This is mainly useful for compiling native code, because native code must be compiled with same type of run-time system as in which it will be run.</p>
<p>If the <em>-s</em> option is given, <em>erlc</em> now prints a warning that it is deprecated and that it will be removed in R12B.</p>
<p>Own Id: OTP-6398
* 
The <em>schedulers</em> option of <em>erlang:system_flag/2</em> has been removed, i.e., the number of scheduler threads cannot be changed after emulator boot time any more.</p>
<p>A <em>multi_scheduling</em> option has been added to <em>erlang:system_flag/2</em> . This option can be used for blocking and unblocking multi-scheduling. For more information see the <em>erlang(3)</em> documentation.</p>
<p>Own Id: OTP-6403
* 
A port program that had been started with the <em>exit_status</em> option and closed one of the pipes used for communication with the emulator caused the emulator to continuously poll for termination of the port program. This only became a problem when the emulator didn't have other things to do and the port program closed a pipe much earlier than it terminated. When the emulator had other things to do, such as running Erlang processes, the emulator polled for termination in between scheduling of processes.</p>
<p>Now the emulator doesn't poll for termination of the port program at all; instead, it waits for the child signal from the terminated port program to arrive and then schedules the Erlang port for termination.</p>
<p>The termination of any port programs have also been optimized. Previously the termination of any port program did always cause a scan of a table of the size equal to maximum number of file descriptors. If the maximum number of file descriptors was large, this scan could be quite expensive. Now the search have been reduced to the set of ports started with the <em>exit_status</em> option.</p>
<p>Note, all of the above only applies to Erlang emulators on Unix platforms.</p>
<p>Own Id: OTP-6412 Aux Id: seq10194
* 
* BEAM: added support for floating-point exceptions on FreeBSD (32-bit x86)</p>
<p>* SMP: made locking procedures work even when native lock operations aren't implemented</p>
<p>* SMP: improved timing accuracy in the timer thread (if enabled)</p>
<p>Own Id: OTP-6424</p>
<h2 id="erts-5522">Erts 5.5.2.2</h2>
<h2 id="fixed-bugs-and-malfunctions_156">Fixed Bugs and Malfunctions</h2>
<ul>
<li>A bug in the kernel poll implementation could cause the emulator to omit polling for events on file descriptors. The bug was only present when using the kernel poll implementation based on epoll or kqueue. This bug was introduced in erts-5.5.2.</li>
</ul>
<p>Own Id: OTP-6344 Aux Id: OTP-6222</p>
<h2 id="erts-5521">Erts 5.5.2.1</h2>
<h2 id="fixed-bugs-and-malfunctions_157">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The run_erl program now acquires its pseudo-ttys using openpty(3), so that it will work on newer Linux distributions that don't have the traditional pseudo-tty devices in the file system. On platforms that don't have openpty(3), run_erl will still search for pseudo-tty devices in the file system.</li>
</ul>
<p>The run_erl program will now wait using waitpid(3) to prevent the program it spawned to become defunct. run_erl will also terminate after a delay of 5 seconds (to allow any pending output to be written to the log file) if the spawned program terminates even if some child of it still holds stdin and/or stdout open.</p>
<p>Own Id: OTP-6225 Aux Id: seq10500
* 
A bug in ordered_set ETS datatyp caused ets:select (and match) to return faulty results when the table contained process id's from another node.</p>
<p>Own Id: OTP-6338</p>
<h2 id="erts-552">Erts 5.5.2</h2>
<h2 id="fixed-bugs-and-malfunctions_158">Fixed Bugs and Malfunctions</h2>
<ul>
<li>erlc: A typo in the help text for '-pa path' was corrected.</li>
</ul>
<p>Own Id: OTP-6218
* 
Failure in port command/control driver callbacks could crash the non-SMP emulator. This bug was introduced in the 5.5 version of erts.</p>
<p>Own Id: OTP-6224
* 
Erroneous " <em>Input driver gone away without deselecting!</em> " error reports could sometimes occur when a driver instance terminated in the ready_output() callback of the driver. This bug was only present in emulators that used poll(). Note, that this bug was harmless, the only effect it had was the erroneous error report.</p>
<p>Own Id: OTP-6229 Aux Id: OTP-3993, Seq5266, Seq7247, OTP-4307
* 
The emulator could cause a type assertion failure while writing an erl_crash.dump, causing the erl_crash.dump to be terminated and a core dump generated.</p>
<p>Own Id: OTP-6235 Aux Id: seq10444
* 
The registered name of a process is now the last observable resource removed before links and monitors are triggered when a process terminates.</p>
<p>Previously ets tables were removed after the registered name. This could cause problems on the runtime system with SMP support for code that expected that ets tables owned by a specific process had been removed if the name of the process had been removed.</p>
<p>Own Id: OTP-6237
* 
Failure to fork() a new (os) process could cause the emulator to deadlock. This bug affect all emulators with SMP support, and emulators with async thread support on SunOS.</p>
<p>Own Id: OTP-6241 Aux Id: OTP-3906
* 
Fprof traces could become truncated for the SMP emulator. This bug has now been corrected.</p>
<p>Own Id: OTP-6246
* 
The undocumented functions inet:getiflist/0,1 inet:ifget/2,3 and inet:getif/1 were completely broken on Windows. That has been fixed.</p>
<p>Own Id: OTP-6255
* 
Behavior in case of disappeared nodes when using the dist_auto_connect once got changed in R11B-1. The timeouts regarding normal distributed operations is now reverted to the old (pre R11B-1).</p>
<p>Own Id: OTP-6258 Aux Id: OTP-6200, seq10449
* 
The bsl and bsr operators could cause the emulator to crash if given invalid arguments. (Thanks to datacompboy and Per Gustafsson.)</p>
<p>Own Id: OTP-6259
* 
driver_cancel_timer() could under certain circumstances fail to cancel the timer on the runtime system with SMP support.</p>
<p>Own Id: OTP-6261
* 
A call to erlang:system_info(info) could deadlock the runtime system with SMP support.</p>
<p>Own Id: OTP-6268</p>
<h2 id="improvements-and-new-features_70">Improvements and New Features</h2>
<ul>
<li>Exit signals are now truly asynchronous in the runtime system with SMP support. This simplifies locking in bifs a lot, and makes process termination cheaper.</li>
</ul>
<p>Own Id: OTP-6160
* 
When tracing on the runtime system with SMP support it can be difficult to know when a trace has been delivered to the tracer. A new built in function <em>erlang:trace_delivered/1</em> has been introduced in order to make it easier to know when the trace has been delivered. See the erlang(3) man page for more information.</p>
<p>Own Id: OTP-6205 Aux Id: OTP-6269
* 
Kernel poll support can now be combined with SMP support. Currently the following kernel poll versions exist: <em>/dev/poll</em> , <em>epoll</em> , and <em>kqueue</em> . Linux <em>kpoll</em> has been replaced with <em>epoll</em> . Some time in the future there will also be a kernel poll version using Solaris event ports.</p>
<p>The "check io" implementation for unix has been completely rewritten. The current kernel poll implementation reduce the amount of system calls needed compared to the old kernel poll implementation.</p>
<p>When <em>epoll</em> or <em>kqueue</em> is used either <em>poll</em> or <em>select</em> is used as fallback. Previously only <em>poll</em> could be used as fallback. Since <em>select</em> now can be used as fallback, kernel poll support is now also available on newer MacOSX. Note however, when <em>select</em> is used as fallback, the maximum number of file descriptors is limited to <em>FD_SETSIZE</em> .</p>
<p>Kernel poll support is now enabled by default if <em>/dev/poll</em> , <em>epoll</em> , or <em>kqueue</em> is found when building OTP, i.e. you do not have to pass the <em>--enable-kernel-poll</em> argument to <em>configure</em> . As before, kernel poll is disabled by default in the runtime system. In order to enable it, pass the <em>+Ktrue</em> command line argument to <em>erl</em> .</p>
<p>Note: <em>configure</em> will refuse to enable kernel poll support on FreeBSD since <em>kqueue</em> have problems with (at least) pipes on all version of FreeBSD that we have tested.</p>
<p>Own Id: OTP-6222 Aux Id: seq10380
* 
The <em>erl_ddll</em> module and the code in the emulator have been completely rewritten; several bugs were fixed.</p>
<p>Own Id: OTP-6234
* 
The SMP emulator now avoids locking for the following operations (thus making them as fast as in the UP emulator): <em>atom_to_list/1</em> , atom comparison, atom hashing, <em>erlang:apply/3</em> .</p>
<p>Own Id: OTP-6252
* 
There are new BIFs <em>erlang:spawn_monitor/1,3</em> , and the new option <em>monitor</em> for <em>spawn_opt/2,3,4,5</em> .</p>
<p>The <em>observer_backend</em> module has been updated to handle the new BIFs.</p>
<p>Own Id: OTP-6281</p>
<h2 id="erts-5511">Erts 5.5.1.1</h2>
<h2 id="improvements-and-new-features_71">Improvements and New Features</h2>
<ul>
<li>There is now an option read_packets for UDP sockets that sets the maximum number of UDP packets that will be read for each invocation of the socket driver.</li>
</ul>
<p>Own Id: OTP-6249 Aux Id: seq10452</p>
<h2 id="erts-551">Erts 5.5.1</h2>
<h2 id="fixed-bugs-and-malfunctions_159">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Complex pattern matching of strings would fail in the 64 bits emulator because of a bug in the loader. (Thanks to Igor Goryachev.)</li>
</ul>
<p>Own Id: OTP-6142
* 
<em>-134217728 div 134217728</em> and <em>-134217728 rem 134217728</em> would be calculated incorrectly. <em>abs(-2147483648)</em> could in unlucky circumstances cause a heap overflow, as could size(Binary) when size of the binary was larger than 128Mb.</p>
<p>Own Id: OTP-6154
* 
erlang:display/1 displayed erroneous values for negative integers.</p>
<p>Big integers (both positive and negative) were previously displayed in hexadecimal form while small integers were displayed in decimal form. All integers are now displayed in decimal form.</p>
<p>NOTE: erlang:display/1 should only be used for debugging.</p>
<p>Own Id: OTP-6156
* 
A call to erlang:trace/3 with erroneous flags caused the SMP emulator to deadlock instead of exiting the calling process with badarg.</p>
<p>Own Id: OTP-6175
* 
A bug causing the emulator to hang when exiting a process that is exception traced has been fixed.</p>
<p>Own Id: OTP-6180
* 
ets:rename/1 could deadlock, or crash the SMP emulator when the table wasn't a named table.</p>
<p>ets:next/2, and ets:prev/2 could return erroneous results on the SMP emulator.</p>
<p>Own Id: OTP-6198 Aux Id: seq10392, seq10415
* 
A memory allocation bug could cause the SMP emulator to crash when a process had executed a <em>receive after</em> with a larger timeout than 10 minutes.</p>
<p>Own Id: OTP-6199
* 
The runtime system with SMP support did not slowly adjust its view of time when the system time suddenly changed.</p>
<p>Timeouts could sometimes timeout too early on the runtime system with SMP support.</p>
<p>Own Id: OTP-6202</p>
<h2 id="improvements-and-new-features_72">Improvements and New Features</h2>
<ul>
<li>The smp runtime system now automatically detects the number of logical processors on MacOSX (darwin) and OpenBSD.</li>
</ul>
<p>The smp runtime system is now built by default on MacOSX (darwin) on x86.</p>
<p>Own Id: OTP-6119
* 
The <em>-smp</em> command line argument now take the following options: <em>enable</em> , <em>auto</em> , or <em>disable</em> .</p>
<p>Especially the <em>-smpauto</em> argument is useful since it starts the Erlang runtime system with SMP support if it is available and more than one logical processor are detected; otherwise, it starts the Erlang runtime system without SMP support. For more information see the <em>erl(1)</em> man page.</p>
<p>Own Id: OTP-6126
* 
Increased the reduction cost for sending messages in the SMP emulator so it behaves more like the non-SMP emulator.</p>
<p>Own Id: OTP-6196
* 
A port running a dynamically linked-in driver that exits due to the driver being unloaded now exits with exit reason <em>driver_unloaded</em> . Previously the port exited with exit reason <em>-1</em> .</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6204
* 
Changed name of the <em>erlang:system_info/1</em> argument <em>scheduler</em> to <em>scheduler_id</em> . This since the <em>scheduler</em> argument so easily could be mixed up with the <em>schedulers</em> argument (both returning integers).</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6208
* 
The changes below were made by Mikael Pettersson, HiPE.</p>
<p>HiPE runtime system:</p>
<p>Reduce overheads in the HiPE runtime system's BIF glue code.</p>
<p>Fix bug when exceptions are thrown from BEAM to HiPE.</p>
<p>Support SPARC on Linux.</p>
<p>Support x86 on FreeBSD.</p>
<p>Floating-point exceptions:</p>
<p>Reduce overheads in checking results of floating-point operations.</p>
<p>Minor bug fix in SSE2 floating-point exception handling.</p>
<p>Support SSE2 floating-point exceptions on 32-bit x86 machines.</p>
<p>Make FP exceptions work in the SMP runtime system on FreeBSD/x86.</p>
<p>Support floating-point exceptions on SPARCs running Linux.</p>
<p>Runtime system:</p>
<p>Minor scheduler optimisation in the non-SMP runtime system.</p>
<p>Substantial reduction of I/O thread overheads in the SMP runtime system if the separate timer thread is used. (In R11B-1, the separate timer thread is not used.)</p>
<p>Own Id: OTP-6211</p>
<h2 id="erts-55">ERTS 5.5</h2>
<h2 id="fixed-bugs-and-malfunctions_160">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Previously <em>unlink/1</em> and <em>erlang:demonitor/2</em> behaved completely asynchronous. This had one undesirable effect, though. You could never know when you were guaranteed <strong>not</strong> to be affected by a link that you had unlinked or a monitor that you had demonitored.</li>
</ul>
<p>The new behavior of <em>unlink/1</em> and <em>erlang:demonitor/2</em> can be viewed as two operations performed atomically. Asynchronously send an unlink signal or a demonitor signal, and ignore any future results of the link or monitor.</p>
<p><strong>NOTE</strong> : This change can cause some obscure code to fail which previously did not. For example, the following code might hang:</p>
<pre><code>
            Mon = erlang:monitor(process, Pid),
            %% ...
            exit(Pid, bang),
            erlang:demonitor(Mon),
            receive
                {'DOWN', Mon , process, Pid, _} -&gt; ok
            %% We were previously guaranteed to get a down message
            %% (since we exited the process ourself), so we could
            %% in this case leave out:
            %% after 0 -&gt; ok
            end,

</code></pre>

<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-5772
* 
Two bugs fixed: If the environment variable <em>ERL_FLAGS</em> was set, its contents would be appended to the end of the command line even if the command line had an <em>-extra</em> options. Changed to place the options from <em>ERL_FLAGS</em> just before <em>-extra</em> . Also, the <em>-smp</em> and <em>-hybrid</em> flags no longer have any effect if placed after <em>-extra</em> .</p>
<p>Own Id: OTP-6054</p>
<h2 id="improvements-and-new-features_73">Improvements and New Features</h2>
<ul>
<li>The documentation for writing drivers in the ERTS User's Guide has been expanded and updated.</li>
</ul>
<p>Own Id: OTP-5192
* 
The <em>andalso</em> and <em>orelse</em> operators are now allowed to be used in guards. That also applies to match specifications.</p>
<p>Own Id: OTP-5894 Aux Id: OTP-5149
* 
There is a new trace match spec function <em>{exception_trace}</em> and a corresponding trace message <em>exception_from</em> that can be used to trace on any exit from a function, both normal function return and exception return. See the documentation for details.</p>
<p>The <em>return_to</em> trace message is now also generated when the execution returns to a function due to catching an exception.</p>
<p>Own Id: OTP-5956
* 
Erlang runtime system with SMP (symmetric multi processing) support.</p>
<p>The runtime system with SMP support is in this release focused on stability and there are a number of steps with optimizations to follow before it will take full advantage of multi processor systems. The released system is however truly multi threaded and you will notice increased performance for many applications already. We recommend that you evaluate your application on the SMP version of the runtime system and wait for some more optimizations before you use it in a real product. You will then discover if there are any problems in your application that needs to be fixed in order for it to work properly in a multi threaded environment. More optimized versions of the runtime system with SMP support will be included in the R11B maintenance releases.</p>
<p>The SMP enabled runtime system will be started if the <em>-smp</em> command line argument is passed to the <em>erl</em> command. In order to make use of more than one processor core, multiple scheduler threads are used. By default, the number of scheduler threads will equal the number of processor cores. The number of scheduler threads can be set with the <em>+S</em> command line argument. For more information see the <em>erl(1)</em> man page.</p>
<p>A runtime system with SMP support is by default built on the following platforms if posix threads, and a gcc compiler of at least version 2.95 is found:</p>
<ul>
<li>Linux with at least kernel version 2.6 and the Native POSIX Thread Library on x86, x86_64, and 32-bits PowerPC.</li>
<li>Solaris of at least version 8 on 32-bits SPARC-V9.</li>
<li>MacOSX of at least version 10.4 (Darwin 8.0) on 32-bits PowerPC.</li>
</ul>
<p>The runtime system with SMP support is known <strong>not</strong> to build on:</p>
<ul>
<li>Windows.</li>
<li>Linux with kernel versions less than 2.4, or without the Native POSIX Thread Library.</li>
<li>Other hardware platforms than x86, x86_64, 32-bits SPARC-V9 and 32-bits PowerPC.</li>
</ul>
<p>Windows will be supported in a future release.</p>
<p>The runtime system with SMP support might build on other operating systems in combination with supported hardware. In order to force a build of a runtime system with SMP support, pass the <em>--enable-smp-support</em> command line argument to configure. Note, however, that it is not enough that it builds. The underlying thread library and operating system has to provide SMP support as well. If the thread library does not distribute scheduler threads over multiple processor cores then the runtime system will only seemingly provide SMP support. If the runtime system is not built by default on a specific platform, we have <strong>not</strong> tested it on that platform.</p>
<p><strong>NOTE</strong> : The design of SMP support for drivers is ongoing. There will probably be incompatible driver changes (only affecting drivers run on the runtime system with SMP support) released as patches for R11B.</p>
<p><strong>Potential incompatibility</strong> : Previously, specific driver call-backs were always called from the same thread. This is <strong>not</strong> true in the runtime system with SMP support. Calls to call-backs will be made from different threads, e.g., two consecutive calls to exactly the same call-back can be made from two different threads. This will in <strong>most</strong> cases not be a problem. All calls to call-backs are synchronized, i.e., only one call-back will be called at a time.</p>
<p>In the future the default behavior will <strong>probably</strong> be the following: Calls to call-backs will, as now, be made from different threads. Calls to call-backs in the same driver <strong>instance</strong> will be synchronized. It will probably be possible to configure so that all calls to call-backs in all driver instances of a specific driver type will be synchronized. It may be possible to configure so that all calls to call-backs of a driver instance or a of a specific driver type will be made from the same thread.</p>
<p>Parallelism in the Erlang code executed is a necessity for the Erlang runtime system to be able to take advantage of multi-core or multi-processor hardware. There need to be at least as many Erlang processes runnable as processor cores for the Erlang runtime system to be able to take advantage of all processor cores.</p>
<p>An Erlang runtime system with SMP support with only one Erlang process runnable all the time will almost always be slower than the same Erlang runtime system without SMP support. This is due to thread synchronization overhead.</p>
<p>Known major bottleneck in the Erlang runtime system:</p>
<ul>
<li>Currently the I/O system uses one "big lock", i.e. only one thread can do I/O at a time (with the exception of async threads and threads created by users own linked-in drivers). This is high on the list of things to optimize. Note, code that does not do I/O can be executed at the same time as one thread does I/O.</li>
</ul>
<p>Some pitfalls which might cause Erlang programs that work on the non-SMP runtime system to fail on the SMP runtime system:</p>
<ul>
<li>A newly spawned process will often begin executing immediately. Code that expects that the parent process will be able to execute for a while before the child process begins executing is likely to fail.</li>
<li>High priority processes could previously provide mutual exclusion (bad programming style) by preventing normal and low priority processes from being run. High priority processes cannot be used this way to provide mutual exclusion.</li>
<li><em>erlang:yield()</em> could be used to provide some kind of temporary mutual exclusion (also bad programming style). <em>erlang:yield()</em> cannot be used to provide any kind of mutual exclusion.</li>
<li>Obscure pitfall, only if a process being traced also sends normal messages to the tracer:     The order between trace messages and normal messages is undefined. I.e. the order between normal messages sent from a tracee to a tracer and the trace messages generated from the same tracee to the same tracer is undefined. The internal order of normal messages and the internal order of trace messages will, of course, be preserved as before.</li>
</ul>
<p>The kernel poll feature is currently not supported by the runtime system with SMP support. It will probably be supported in a future release.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6006 Aux Id: OTP-6095
* 
Linked-in driver modifications.</p>
<ul>
<li>Linked-in drivers must be recompiled.</li>
<li>The <em>refc</em> field in the <em>ErlDrvBinary</em> type has been removed. The reference count can be accessed via API functions. For more information see the <em>erl_driver(1)</em> man page.</li>
</ul>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-6095 Aux Id: OTP-6006</p>
<h2 id="erts-5413">ERTS 5.4.13</h2>
<h2 id="fixed-bugs-and-malfunctions_161">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Large files (more than 2 GBytes) are now handled on Solaris 8.</li>
</ul>
<p>Own Id: OTP-5849 Aux Id: seq10157
* 
A failing bit syntax construction could fail with the PREVIOUS exception reason that had occurred in the process (instead of with <em>badarg</em> ).</p>
<p>Own Id: OTP-5911
* 
When building OTP, the Kernel application was built in both the primary and secondary bootstrap steps, which would cause problems if OTP including its bootstrap is checked into a version control system (such as CVS). (Thanks to Sebastian Strollo.)</p>
<p>Own Id: OTP-5921
* 
<em>binary_to_term(&lt;&lt;131,109,255,255,255,255)</em> and similar expressions used to crash the emulator instead of causing a <em>badarg</em> exception. (Thanks to Matthias Lang.)</p>
<p>Own Id: OTP-5933
* 
<em>erlang:hibernate/3</em> could sometimes crash the emulator when no heap was needed.</p>
<p>Own Id: OTP-5940
* 
Execution of match specs could under rare circumstances cause the emulator to dump core.</p>
<p>Execution of match specs could cause memory leaks in the hybrid emulator.</p>
<p>Own Id: OTP-5955
* 
A bug in <em>erlang:trace_info/2</em> when getting info for a function in a deleted module resulting in an emulator crash, has been corrected.</p>
<p>Own Id: OTP-5957
* 
Different (and old) <em>config.guess</em> files in the ERTS and Erl_Interface applications would cause build problems on the new Intel-based iMacs. (Thanks to Sebastion Strollo.)</p>
<p>Own Id: OTP-5967
* 
pthread header and library mismatch on Linux systems (at least some SuSE and Debian) with both NPTL and Linuxthreads libraries installed.</p>
<p>Own Id: OTP-5981</p>
<h2 id="improvements-and-new-features_74">Improvements and New Features</h2>
<ul>
<li>The driver_set_timer did not change the previous timeout if called a second time. Now it works as specified, changing the timeout.</li>
</ul>
<p>Own Id: OTP-5942
* 
The undocumented <em>{packet,http}</em> option (for the <em>gen_tcp</em> module) did not not work correctly when there were multiple continuation lines. (Thanks to Per Hedeland.)</p>
<p>Own Id: OTP-5945
* 
The setuid_socket_wrap program was corrected to work for C compilers that treat the <em>char</em> type as unsigned. (Thanks to Magnus Henoch.)</p>
<p>Own Id: OTP-5946</p>
<h2 id="erts-5412">ERTS 5.4.12</h2>
<h2 id="fixed-bugs-and-malfunctions_162">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Fixed a minor build problem on Windows.</li>
</ul>
<p>Own Id: OTP-5819 Aux Id: OTP-5382 OTP-5540 OTP-5577
* 
The <em>delay_send</em> option for <em>gen_tcp</em> was broken on Windows.</p>
<p>Own Id: OTP-5822
* 
If there were user-defined variables in the boot script, and their values were not provided using the <em>-boot_var</em> option, the emulator would refuse to start with a confusing error message. Corrected to show a clear, understandable message.</p>
<p>The <em>prim_file</em> module was modified to not depend on the <em>lists</em> module, to make it possible to start the emulator using a user-defined loader. (Thanks to Martin Bjorklund.)</p>
<p>Own Id: OTP-5828 Aux Id: seq10151</p>
<h2 id="improvements-and-new-features_75">Improvements and New Features</h2>
<ul>
<li>The HiPE compiler identifies more leaf functions, giving slightly faster code.</li>
</ul>
<p>Corrected problems in HiPE's coalescing register allocating that would cause it to fail when compiling very large functions (e.g. some of parse modules in the Megaco application).</p>
<p>Own Id: OTP-5853</p>
<h2 id="erts-5411">ERTS 5.4.11</h2>
<h2 id="fixed-bugs-and-malfunctions_163">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Timers could sometimes timeout too early. This bug has now been fixed.</li>
</ul>
<p>Automatic cancellation of timers created by <em>erlang:send_after(Time,pid(),Msg)</em> and <em>erlang:start_timer(Time,pid(),Msg)</em> has been introduced. Timers created with the receiver specified by a pid, will automatically be cancelled when the receiver exits. For more information see the <em>erlang(3)</em> man page.</p>
<p>In order to be able to maintain a larger amount of timers without increasing the maintenance cost, the internal timer wheel and bif timer table have been enlarged.</p>
<p>Also a number of minor bif timer optimizations have been implemented.</p>
<p>Own Id: OTP-5795 Aux Id: OTP-5090, seq8913, seq10139, OTP-5782
* 
<em>erlang:monitor(process,Pid)</em> hanged if <em>Pid</em> referred to a process on a non-existing node with the same nodename as the nodename of node on which the call was made. This bug has now been fixed.</p>
<p>Own Id: OTP-5827</p>
<h2 id="improvements-and-new-features_76">Improvements and New Features</h2>
<ul>
<li>By setting Unix environment variables, the priority for the emulator can be lowered when it is writing crash dumps and the time allowed for finishing writing a crash dump can be set to a certain number of seconds. See the documentation for <em>erl</em> in the ERTS application. (Also, a few other previously undocumented environment variables are now documented.)</li>
</ul>
<p>Own Id: OTP-5818
* 
Documentation improvements:</p>
<ul>
<li>
<p>documentation for <em>erlang:link/1</em> corrected</p>
</li>
<li>
<p>command line flag <em>-code_path_cache</em> added</p>
</li>
<li>
<p><em>erl</em> command line flags clarifications</p>
</li>
<li>
<p><em>net_kernel(3)</em> clarifications</p>
</li>
</ul>
<p>Own Id: OTP-5847</p>
<h2 id="erts-5410">ERTS 5.4.10</h2>
<h2 id="fixed-bugs-and-malfunctions_164">Fixed Bugs and Malfunctions</h2>
<ul>
<li>-D_GNU_SOURCE is now always passed on the compile command line on linux. This in order to ensure that all included system headers see _GNU_SOURCE defined.</li>
</ul>
<p>_GNU_SOURCE is now also defined on linux in configure when looking for features.</p>
<p>Some minor (harmless) configure bugs were also fixed.</p>
<p>Own Id: OTP-5749
* 
Some compiler warnings and Dialyzer warnings were eliminated in the Tools application.</p>
<p>When tracing to a port (which <em>fprof</em> does), there could be fake schedule out/schedule in messages sent for a process that had exited.</p>
<p>Own Id: OTP-5757</p>
<h2 id="improvements-and-new-features_77">Improvements and New Features</h2>
<ul>
<li>The BIFs <em>iolist_size/1</em> and <em>iolist_to_binary/1</em> has been added.</li>
</ul>
<p>The BIF <em>list_to_existing_atom/1</em> has been added.</p>
<p>Minor bug fix: The exception reason could be changed to <em>error</em> inside nested try/catch constructs if the <em>erlang:raise/3</em> BIF was called with an empty stacktrace. (Calling <em>erlang:raise/3</em> with an empty stacktrace is NOT recommended.)</p>
<p>Minor bugfix: On Windows, <em>file:open/2</em> will now return the documented error reason <em>{error,eisdir}</em> if the filename refers to a directory (it used to return <em>{error,eacces}</em> ).</p>
<p>The message in the documentation for <em>erlang:system_monitor/2</em> , description of <em>busy_dist_port</em> , was corrected.</p>
<p>Own Id: OTP-5709 Aux Id: seq10100
* 
The previously undocumented and UNSUPPORTED <em>zlib</em> module has been updated in an incompatible way and many bugs have been corrected. It is now also documented.</p>
<p>*** POTENTIAL INCOMPATIBILITY ***</p>
<p>Own Id: OTP-5715
* 
New socket options <em>priority</em> and <em>tos</em> for platforms that support them (currently only Linux).</p>
<p>Own Id: OTP-5756
* 
Only the emulator is now linked with termcap library in order to decrease library dependencies for other otp programs.</p>
<p>Own Id: OTP-5758</p>
<h2 id="erts-5492">ERTS 5.4.9.2</h2>
<h2 id="fixed-bugs-and-malfunctions_165">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The native resolver has gotten an control API for extended debugging and soft restart. It is: <em>inet_gethost_native:control(Control)</em>  <em>Control = {debug_level,Level} | soft_restart</em>  <em>Level = integer() in the range 0-4</em> .</li>
</ul>
<p>Own Id: OTP-5751 Aux Id: EABln25013</p>
<h2 id="erts-5491">ERTS 5.4.9.1</h2>
<h2 id="improvements-and-new-features_78">Improvements and New Features</h2>
<ul>
<li>On VxWorks, epmd did not handle file descriptors with higher numbers than 63. Also, if epmd should get a file descriptor with a number &gt;= FD_SETSIZE, it will close a the file descriptor and write a message to the log (instead of mysteriously fail); the Erlang node that tried to register will fail with a duplicate_name error (unfortunately, epmd has no way to indicate to the Erlang node why the register attempt failed).</li>
</ul>
<p>Own Id: OTP-5716 Aux Id: seq10070</p>
<h2 id="erts-549">ERTS 5.4.9</h2>
<h2 id="fixed-bugs-and-malfunctions_166">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Timezone data is now initialized better. (was a problem at least on NetBSD 2.0.2) Thanks to Rich Neswold.</li>
</ul>
<p>Own Id: OTP-5621
* 
The hybrid-heap emulator ('erl -hybrid') is much more stable. We have corrected all known bugs that caused it to dump core while running our test suites.</p>
<p>Own Id: OTP-5634
* 
Fixed rare memory leaks in <em>erlang:demonitor/1</em> when distributed monitors were removed.</p>
<p>Own Id: OTP-5692
* 
Processes were sometimes unnecessarily garbage collected when terminating. These unnecessary garbage collections have now been eliminated.</p>
<p>Own Id: OTP-5693</p>
<h2 id="improvements-and-new-features_79">Improvements and New Features</h2>
<ul>
<li>The <em>c:i/0</em> function will now run in a paged mode if there are more than 100 processes in the system. (Thanks to Ulf Wiger.)</li>
</ul>
<p><em>erlang:system_info(process_count)</em> has been optimized and does now return exactly the same value as <em>length(processes())</em> . Previously <em>erlang:system_info(process_count)</em> did not include exiting processes which are included in <em>length(processes())</em> .</p>
<p>The <em>+P</em> flag for <em>erl</em> , which sets the maximum number of processes allowed to exist at the same, no longer accepts values higher than 134217727. (You will still probably run out of memory before you'll be able to reach that limit.)</p>
<p>Own Id: OTP-5645 Aux Id: seq9984
* 
The term-building driver functions <em>driver_output_term()</em> and <em>driver_send_term()</em> have been updated:</p>
<p>The ERL_DRV_FLOAT type has been added.</p>
<p>For the ERL_DRV_BINARY type, the length and offset are now validated against the length of the driver binary.</p>
<p>The ERL_DRV_PID type is now implemented (it was documented, but not implemented).</p>
<p>Own Id: OTP-5674</p>
<h2 id="erts-548">ERTS 5.4.8</h2>
<h2 id="fixed-bugs-and-malfunctions_167">Fixed Bugs and Malfunctions</h2>
<ul>
<li><em>ets:delete/1</em> now allows other Erlang process to run when a large table is being deleted.</li>
</ul>
<p>Own Id: OTP-5572
* 
A bug regarding tcp sockets which results in hanging <em>gen_tcp:send/2</em> has been corrected. To encounter this bug you needed one process that read from a socket, one that wrote more date than the reader read out so the sender got suspended, and then the reader closed the socket. (Reported and diagnosed by Alexey Shchepin.)</p>
<p>Corrected a bug in the (undocumented and unsupported) option <em>{packet,http}</em> for <em>gen_tcp.</em> (Thanks to Claes Wikstrom and Luke Gorrie.)</p>
<p>Updated the documentation regarding the second argument to <em>gen_tcp:recv/2</em> , the <em>Length</em> to receive.</p>
<p>Own Id: OTP-5582 Aux Id: seq9839
* 
Erlang/OTP will now build on Mac OS X 10.4 "Tiger" (the problem was that 10.4 has a partially implemented poll() function that can't handle devices). Also, on Mac OS X 10.3 "Panther", Erlang/OTP will now use select() instead of poll() (because poll() on Mac OS X 10.3 is implemented using select()).</p>
<p>Own Id: OTP-5595
* 
A bug in the file driver when opening a file in compressed mode, and the returned allocated pointer from the compressing library was in very high memory (&gt;= 2GB), causing e.g. <em>file:read/2</em> to return <em>{error,ebadf}</em> , has been corrected.</p>
<p>Own Id: OTP-5618</p>
<h2 id="improvements-and-new-features_80">Improvements and New Features</h2>
<ul>
<li>The new fun <em>M:F/A</em> construct creates a fun that refers to the latest version of <em>M:F/A.</em> This syntax is meant to replace tuple funs <em>{M,F}</em> which have many problems.</li>
</ul>
<p>The new type test <em>is_function(Fun,A)</em> (which may be used in guards) test whether <em>Fun</em> is a fun that can be applied with <em>A</em> arguments. (Currently, <em>Fun</em> can also be a tuple fun.)</p>
<p>Own Id: OTP-5584
* 
In the HiPE application, there's a new experimental register allocator (optimistic coalescing), and the linear scan register allocator is now also available on ppc. Plus lots of cleanups.</p>
<p>Minor hybrid heap corrections.</p>
<p>The maximum size of a heap used to be artificially limited so that the size of a heap would fit in 28 bits; that limitation could cause the emulator to terminate in a garbage collection even if there still was available memory. Now the largest heap size for a 32 bit CPU is 1,699,221,830 bytes. (Thanks to Jesper Wilhelmsson.)</p>
<p>Also removed the undocumented <em>+H</em> emulator option.</p>
<p>Own Id: OTP-5596</p>
<h2 id="erts-547">ERTS 5.4.7</h2>
<h2 id="fixed-bugs-and-malfunctions_168">Fixed Bugs and Malfunctions</h2>
<ul>
<li><em>to_erl</em> could close unexpectedly on Linux systems. Also, output from the emulator could be lost. Corrected.</li>
</ul>
<p>Own Id: OTP-5561</p>
<h2 id="improvements-and-new-features_81">Improvements and New Features</h2>
<ul>
<li>The <em>cpu_timestamp</em> option for <em>erlang:trace/3</em> is now also supported on Linux.</li>
</ul>
<p>Own Id: OTP-5532 Aux Id: seq9813
* 
The last known <em>werl</em> window size/position is now saved correctly when <em>werl</em> is stopped with the window minimized. A problem with the placement not being saved if the emulator is halted or stopped from the JCL menu has also been fixed.</p>
<p>Own Id: OTP-5544 Aux Id: OTP-5522</p>
<h2 id="erts-546">ERTS 5.4.6</h2>
<h2 id="fixed-bugs-and-malfunctions_169">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Some math libraries do not always throw floating-point exceptions on errors. In order to be able to use these libraries, floating-point errors are now more thoroughly checked.</li>
</ul>
<p>Misc floating-point fixes for Linux and MacOSX.</p>
<p>Own Id: OTP-5467
* 
An internal buffer was sometimes not cleared which caused garbage to appear in error messages sent to the error logger.</p>
<p><em>errno</em> was sometimes clobbered which caused erroneous error reports about <em>poll()</em> errors.</p>
<p>Only emulators on unix platforms were affected by these bugs.</p>
<p>Own Id: OTP-5492
* 
The ethread library now works on OpenBSD.</p>
<p>Own Id: OTP-5515
* 
Corrected a bug in the (undocumented and unsupported) option <em>{packet,http}</em> for <em>gen_tcp</em> . (Thanks to Claes Wikstrom and Luke Gorrie.)</p>
<p>Own Id: OTP-5519</p>
<h2 id="improvements-and-new-features_82">Improvements and New Features</h2>
<ul>
<li><em>binary_to_term/1</em> could cause the emulator to crash when given invalid pids or funs.</li>
</ul>
<p>Own Id: OTP-5484 Aux Id: seq9801
* 
Some more stability problems were fixed in the hybrid-heap emulator.</p>
<p>Own Id: OTP-5489
* 
After <em>werl</em> was closed with the window minimized, it was not possible to restart <em>werl</em> with an open window. A temporary solution has so far been implemented that restores the initial window settings every time <em>werl</em> is started.</p>
<p>Own Id: OTP-5522</p>
<h2 id="erts-545">ERTS 5.4.5</h2>
<h2 id="fixed-bugs-and-malfunctions_170">Fixed Bugs and Malfunctions</h2>
<ul>
<li>If a process had node links (created by <em>monitor_node/2</em> ), executing <em>process_info(Pid,memory)</em> for that process would crash the emulator.</li>
</ul>
<p>Own Id: OTP-5420
* 
Minor corrections to the help text printed by <em>erlc -help</em> . The documentation for <em>erlc</em> was also slightly updated.</p>
<p>Own Id: OTP-5428
* 
32-bit words were used for offsets in the garbage collector. This caused the emulator to crash on 64-bit machines when heaps were moved more than 4 GB during garbage collection.</p>
<p>Own Id: OTP-5430
* 
<em>is_boolean(42.5)</em> failed to load if optimization was explicitly turned off.</p>
<p>Own Id: OTP-5448
* 
If there was a call to <em>Module:foo/X</em> from any loaded module, the returned by <em>M:module_info(exports)</em> would always include <em>{foo,X}</em> (even though <em>Module:foo/X</em> if was not defined).</p>
<p>Own Id: OTP-5450 Aux Id: seq9722</p>
<h2 id="improvements-and-new-features_83">Improvements and New Features</h2>
<ul>
<li>The <em>c</em> option for the <em>+B</em> flag has been introduced which makes it possible to use Ctrl-C (Ctrl-Break on Windows) to interrupt the shell process rather than to invoke the emulator break handler. All new <em>+B</em> options are also supported on Windows ( <em>werl</em> ) as of now. Furthermore, Ctrl-C on Windows has now been reserved for copying text (what Ctrl-Ins was used for previously). Ctrl-Break should be used for break handling. Lastly, the documentation of the system flags has been updated.</li>
</ul>
<p>Own Id: OTP-5388</p>
<h2 id="erts-544">ERTS 5.4.4</h2>
<h2 id="fixed-bugs-and-malfunctions_171">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The function <em>erlang:float/1</em> can now be used in match specifications and is recognized by <em>dbg:fun2ms/1</em> and <em>ets:fun2ms/1</em> . This addition is part of the work to "harmonize" match specification guards with Erlang guards.</li>
</ul>
<p>Own Id: OTP-5297 Aux Id: OTP-4927
* 
The <em>register/2</em> BIF would return <em>true</em> even if the second argument was not a pid for living process. Corrected to cause an exception.</p>
<p>Own Id: OTP-5324 Aux Id: seq9698
* 
In the 'bag' type of ets tables, elements having the same key were supposed to be order in insertion order. The would be wrong if a rehash occurred.</p>
<p>Own Id: OTP-5340 Aux Id: seq9704
* 
Linked in drivers in the Crypto and Asn1 applications are now compiled with the <em>-D_THREAD_SAFE</em> and <em>-D_REENTRANT</em> switches on unix when the emulator has thread support enabled.</p>
<p>Linked in drivers on MacOSX are not compiled with the undocumented <em>-lbundle1.o</em> switch anymore. Thanks to Sean Hinde who sent us a patch.</p>
<p>Linked in driver in Crypto, and port programs in SSL, now compiles on OSF1.</p>
<p>Minor makefile improvements in Runtime_Tools.</p>
<p>Own Id: OTP-5346
* 
Fixed a bug in the hybrid heap in distributed send operations.</p>
<p>Own Id: OTP-5361
* 
A BIF <em>erlang:raise/3</em> has been added. See the manual for details. It is intended for internal system programming only, advanced error handling.</p>
<p>Own Id: OTP-5376 Aux Id: OTP-5257
* 
Mikael Pettersson (HiPE) corrected a few bugs in the emulator that caused problems when compiled with the experimental gcc-4.0.0.</p>
<p>Own Id: OTP-5386</p>
<h2 id="improvements-and-new-features_84">Improvements and New Features</h2>
<ul>
<li>Minor update of the internal documentation of the <em>epmd</em> protocol.</li>
</ul>
<p>The listen port of <em>epmd</em> has now been registered at IANA: <a href="http://www.iana.org/assignments/port-numbers">http://www.iana.org/assignments/port-numbers</a> .</p>
<p>Own Id: OTP-5234
* 
<em>run_erl.c</em> now works on Mac OS X and FreeBSD.</p>
<p>Own Id: OTP-5384
* 
A few bugs were corrected in the HiPE application.</p>
<p>Own Id: OTP-5385</p>
<h2 id="erts-543">ERTS 5.4.3</h2>
<h2 id="fixed-bugs-and-malfunctions_172">Fixed Bugs and Malfunctions</h2>
<ul>
<li>Font and color preferences for <em>werl.exe</em> now can be saved even after the first time you run <em>werl.exe</em> . The window position and size is also saved. Patch from James Hague who did all the hard work.</li>
</ul>
<p>Own Id: OTP-5250
* 
OTP archive libraries, e.g. the <em>erl_interface</em> library, on MacOSX could not be used without first rerunning <em>ranlib</em> on them. This bug has now been fixed.</p>
<p>Own Id: OTP-5274
* 
Bugs in <em>erlang:hash/2</em> and <em>erlang:phash/2</em> on 64-bit platforms have been fixed.</p>
<p>Own Id: OTP-5292</p>
<h2 id="improvements-and-new-features_85">Improvements and New Features</h2>
<ul>
<li>Corrected a crash in the 64-bits emulator.</li>
</ul>
<p>Corrected a problem in the hybrid heap emulator.</p>
<p>In the chapter about the abstract format in the ERTS User's Guide, updated the last section about how the abstract format is stored in BEAM files.</p>
<p>Own Id: OTP-5262
* 
The maximum number of concurrent threads in the internal ethread thread package has been limited to 2048.</p>
<p>Own Id: OTP-5280</p>
<h2 id="erts-5421">ERTS 5.4.2.1</h2>
<h2 id="improvements-and-new-features_86">Improvements and New Features</h2>
<ul>
<li>If Erlang/OTP was installed in a short directory name, such as <em>C:\Program\erl5.4.2</em> , the emulator would not start.</li>
</ul>
<p>Own Id: OTP-5254</p>
<h2 id="erts-542">ERTS 5.4.2</h2>
<h2 id="fixed-bugs-and-malfunctions_173">Fixed Bugs and Malfunctions</h2>
<ul>
<li>If one used <em>select/3</em> and <em>select/1</em> on a non-fixed ETS table and deleted objects simultaneously, the emulator could crash. Note that the result of such simultaneous operations on tables that are not in a fixed state is still undefined, but the emulator crash is, needless to say, fixed.</li>
</ul>
<p>Own Id: OTP-5209 Aux Id: seq9198
* 
Arithmetic with big numbers could crash the emulator.</p>
<p>The HiPE native code compiler and run-time code in the emulator has been updated. (Note: Native code is still not supported.)</p>
<p>Eliminated a few bugs that could crash the hybrid emulator (which is not supported).</p>
<p>Own Id: OTP-5233 Aux Id: seq9587</p>
<h2 id="erts-541">ERTS 5.4.1</h2>
<h2 id="fixed-bugs-and-malfunctions_174">Fixed Bugs and Malfunctions</h2>
<ul>
<li>The ethread library was unnecessarily rebuilt multiple times during the build process, also a debug version of the library was build during the install phase. These unnecessary builds have now been removed. Note, the content of the installed Erlang/OTP system is not effected at all by this change.</li>
</ul>
<p>Own Id: OTP-5203
* 
The emulator could fail to clear the memory segment cache. This could potentially cause memory allocation to unnecessarily fail when memory usage was close to its maximum. This bug has now been fixed.</p>
<p>Own Id: OTP-5211
* 
std_alloc (std short for standard) was sometimes called def_alloc (def short for default). std_alloc is now everywhere referred to as std_alloc.</p>
<p>Own Id: OTP-5216
* 
A documentation bug has been corrected in the <em>erts_alloc(3)</em> documentation. It was stated that some of the memory allocators present were by default disabled. This is true for Erlang/OTP R9C, but is not true for Erlang/OTP R10B. In R10B all memory allocators present are enabled by default.</p>
<p>Own Id: OTP-5217</p>
<h2 id="improvements-and-new-features_87">Improvements and New Features</h2>
<ul>
<li>The emulator now close all open files and sockets immediately after receiving an USR1 signal. This causes the emulator to unregister at <em>epmd</em> as early as possible.</li>
</ul>
<p>Own Id: OTP-5221 Aux Id: OTP-4985, seq9514
* 
Try/catch support in the emulator slightly updated.</p>
<p>Own Id: OTP-5229</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../persistent_term/" class="btn btn-neutral float-right" title="persistent_term">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../net/" class="btn btn-neutral" title="net"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../net/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../persistent_term/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
