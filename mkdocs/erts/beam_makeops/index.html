<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>The beam_makeops script - Erlang OTP</title>
  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "The beam_makeops script";
    var mkdocs_page_input_path = "erts/beam_makeops.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Erlang OTP</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Erlang/OTP</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Asn1</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../asn1/asn1_getting_started/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1_introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1_overview/">ASN.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1_spec/">Specialized Decodes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/asn1ct/">asn1ct</a>
                </li>
                <li class="">
                    
    <a class="" href="../../asn1/notes/">asn1 Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Common test</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../common_test/basics_chapter/">Common Test Basics</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/common_test_app/">Common Test</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/config_file_chapter/">External Configuration Data</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/cover_chapter/">Code Coverage Analysis</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct/">ct</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_cover/">ct_cover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_ftp/">ct_ftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_hooks/">Common Test Hooks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_hooks_chapter/">Common Test Hooks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_master/">ct_master</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_master_chapter/">Using Common Test for Large-Scale Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_netconfc/">ct_netconfc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_property_test/">ct_property_test</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_rpc/">ct_rpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_run/">The ct_run program</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_slave/">ct_slave</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_snmp/">ct_snmp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_ssh/">ct_ssh</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_telnet/">ct_telnet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/ct_testspec/">ct_testspec</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/dependencies_chapter/">Dependencies between Test Cases and Suites</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/event_handler_chapter/">Event Handling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/example_chapter/">Examples and Templates</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/getting_started_chapter/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/install_chapter/">Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/notes/">Common Test Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/run_test_chapter/">Running Tests and Analyzing Results</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/test_structure_chapter/">Test Structure</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/unix_telnet/">unix_telnet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/why_test_chapter/">Some Thoughts about Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common_test/write_test_chapter/">Writing Test Suites</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Compiler</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../compiler/cerl/">cerl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/cerl_clauses/">cerl_clauses</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/cerl_trees/">cerl_trees</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/compile/">compile</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/internal/">Internal</a>
                </li>
                <li class="">
                    
    <a class="" href="../../compiler/notes/">Compiler Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Crypto</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../crypto/algorithm_details/">Algorithm Details</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/crypto/">crypto</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/crypto_app/">crypto</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/engine_keys/">Engine Stored Keys</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/engine_load/">Engine Load</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/fips/">FIPS mode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/licenses/">Licenses</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/new_api/">New and Old API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/notes/">Crypto Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../crypto/usersguide/">Crypto User's Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Debugger</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../debugger/debugger/">debugger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/debugger_chapter/">Debugger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/i/">i</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/int/">int</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../debugger/notes/">Debugger Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Dialyzer</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../dialyzer/dialyzer/">dialyzer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dialyzer/dialyzer_chapter/">Dialyzer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dialyzer/notes/">Dialyzer Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dialyzer/typer/">typer</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Diameter</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../diameter/diameter_examples/">Examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../diameter/diameter_using/">Usage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../diameter/user_man/">Diameter Users Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Edoc</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../edoc/edoc/">edoc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_doclet/">edoc_doclet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_extract/">edoc_extract</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_layout/">edoc_layout</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_lib/">edoc_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/edoc_run/">edoc_run</a>
                </li>
                <li class="">
                    
    <a class="" href="../../edoc/notes/">EDoc Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Eldap</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../eldap/eldap/">eldap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eldap/notes/">Eldap Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eldap/usersguide/">Eldap User's Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Erl docgen</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../erl_docgen/block_tags/">Block Tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/character_entities/">Character Entities</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/doc-build/">How to Build OTP like documentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/erl_docgen_app/">erl_docgen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/header_tags/">Header Tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/inline_tags/">Inline Tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/notes/">Erl_Docgen Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/overview/">Overview OTP DTDs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/refman_dtds/">Reference Manual DTDs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_docgen/user_guide_dtds/">User's Guide DTDs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Erl interface</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../erl_interface/ei/">ei</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/ei_connect/">ei_connect</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/ei_users_guide/">Erl_Interface User's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_call/">erl_call</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_connect/">erl_connect</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_error/">erl_error</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_eterm/">erl_eterm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_format/">erl_format</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_global/">erl_global</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_malloc/">erl_malloc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/erl_marshal/">erl_marshal</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/notes/">Erl_interface Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../erl_interface/registry/">registry</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Erts</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../CarrierMigration/">Carrier Migration</a>
                </li>
                <li class="">
                    
    <a class="" href="../CodeLoading/">Non-Blocking Code Loading</a>
                </li>
                <li class="">
                    
    <a class="" href="../CountingInstructions/">Counting Instructions</a>
                </li>
                <li class="">
                    
    <a class="" href="../DelayedDealloc/">Delayed Dealloc</a>
                </li>
                <li class="">
                    
    <a class="" href="../GarbageCollection/">Erlang Garbage Collector</a>
                </li>
                <li class="">
                    
    <a class="" href="../PTables/">Process and Port Tables</a>
                </li>
                <li class="">
                    
    <a class="" href="../PortSignals/">Port Signals</a>
                </li>
                <li class="">
                    
    <a class="" href="../ProcessManagementOptimizations/">Process Management Optimizations</a>
                </li>
                <li class="">
                    
    <a class="" href="../SuperCarrier/">Super Carrier</a>
                </li>
                <li class="">
                    
    <a class="" href="../ThreadProgress/">Thread Progress</a>
                </li>
                <li class="">
                    
    <a class="" href="../Tracing/">Non-blocking trace setting</a>
                </li>
                <li class="">
                    
    <a class="" href="../absform/">The Abstract Format</a>
                </li>
                <li class="">
                    
    <a class="" href="../alt_disco/">How to Implement an Alternative Service Discovery for Erlang Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../alt_dist/">How to Implement an Alternative Carrier for the Erlang Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../atomics/">atomics</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">The beam_makeops script</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#the-beam_makeops-script">The beam_makeops script</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#introduction">Introduction</a></li>
        
            <li><a class="toctree-l4" href="#an-example-the-move-instruction">An example: the move instruction</a></li>
        
            <li><a class="toctree-l4" href="#transformation-rules">Transformation rules</a></li>
        
            <li><a class="toctree-l4" href="#short-overview-of-instruction-loading">Short overview of instruction loading</a></li>
        
            <li><a class="toctree-l4" href="#running-beam_makeops">Running beam_makeops</a></li>
        
            <li><a class="toctree-l4" href="#the-outdir-option">The -outdir option</a></li>
        
            <li><a class="toctree-l4" href="#running-beam_makeops-for-the-compiler">Running beam_makeops for the compiler</a></li>
        
            <li><a class="toctree-l4" href="#running-beam_makeops-for-the-emulator">Running beam_makeops for the emulator</a></li>
        
            <li><a class="toctree-l4" href="#syntax-of-tab-files">Syntax of .tab files</a></li>
        
            <li><a class="toctree-l4" href="#comments">Comments</a></li>
        
            <li><a class="toctree-l4" href="#variable-definitions">Variable definitions</a></li>
        
            <li><a class="toctree-l4" href="#beam_format_number">BEAM_FORMAT_NUMBER</a></li>
        
            <li><a class="toctree-l4" href="#gc_regexp">GC_REGEXP</a></li>
        
            <li><a class="toctree-l4" href="#directives">Directives</a></li>
        
            <li><a class="toctree-l4" href="#conditional-compilation-directives">Conditional compilation directives</a></li>
        
            <li><a class="toctree-l4" href="#symbols-that-are-defined-in-directives">Symbols that are defined in directives</a></li>
        
            <li><a class="toctree-l4" href="#defining-external-generic-instructions">Defining external generic instructions</a></li>
        
            <li><a class="toctree-l4" href="#defining-internal-generic-instructions">Defining internal generic instructions</a></li>
        
            <li><a class="toctree-l4" href="#about-generic-instructions-in-general">About generic instructions in general</a></li>
        
            <li><a class="toctree-l4" href="#defining-specific-instructions">Defining specific instructions</a></li>
        
            <li><a class="toctree-l4" href="#syntactic-sugar-for-specific-instructions">Syntactic sugar for specific instructions</a></li>
        
            <li><a class="toctree-l4" href="#the-type-modifier">The '?' type modifier</a></li>
        
            <li><a class="toctree-l4" href="#defining-transformation-rules">Defining transformation rules</a></li>
        
            <li><a class="toctree-l4" href="#defining-instruction-patterns">Defining instruction patterns</a></li>
        
            <li><a class="toctree-l4" href="#further-constraining-patterns">Further constraining patterns</a></li>
        
            <li><a class="toctree-l4" href="#type-constraints-allowed-in-patterns">Type constraints allowed in patterns</a></li>
        
            <li><a class="toctree-l4" href="#guard-constraints">Guard constraints</a></li>
        
            <li><a class="toctree-l4" href="#handling-instruction-with-variable-number-of-operands">Handling instruction with variable number of operands</a></li>
        
            <li><a class="toctree-l4" href="#constructing-new-instructions-on-the-right-side">Constructing new instructions on the right side</a></li>
        
            <li><a class="toctree-l4" href="#type-letters-on-the-right-side">Type letters on the right side</a></li>
        
            <li><a class="toctree-l4" href="#function-call-on-the-right-side">Function call on the right side</a></li>
        
            <li><a class="toctree-l4" href="#defining-the-implementation">Defining the implementation</a></li>
        
            <li><a class="toctree-l4" href="#code-generation-directives">Code generation directives</a></li>
        
            <li><a class="toctree-l4" href="#the-no_prefetch-directive">The -no_prefetch directive</a></li>
        
            <li><a class="toctree-l4" href="#the-no_next-directive">The -no_next directive</a></li>
        
            <li><a class="toctree-l4" href="#macros-in-the-macrostab-file">Macros in the macros.tab file</a></li>
        
            <li><a class="toctree-l4" href="#the-gc_regexp-definition">The GC_REGEXP definition</a></li>
        
            <li><a class="toctree-l4" href="#failfail">FAIL(Fail)</a></li>
        
            <li><a class="toctree-l4" href="#jumpfail">JUMP(Fail)</a></li>
        
            <li><a class="toctree-l4" href="#gc_testneedstack-needheap-live">GC_TEST(NeedStack, NeedHeap, Live)</a></li>
        
            <li><a class="toctree-l4" href="#ahneedstack-needheap-live">AH(NeedStack, NeedHeap, Live)</a></li>
        
            <li><a class="toctree-l4" href="#pre-defined-macros-and-variables">Pre-defined macros and variables</a></li>
        
            <li><a class="toctree-l4" href="#the-next_instruction-pre-bound-variable">The NEXT_INSTRUCTION pre-bound variable</a></li>
        
            <li><a class="toctree-l4" href="#the-ip_adjustment-pre-bound-variable">The IP_ADJUSTMENT pre-bound variable</a></li>
        
            <li><a class="toctree-l4" href="#pre-defined-macro-functions">Pre-defined macro functions</a></li>
        
            <li><a class="toctree-l4" href="#the-if-macro">The IF() macro</a></li>
        
            <li><a class="toctree-l4" href="#the-operand_position-macro">The OPERAND_POSITION() macro</a></li>
        
            <li><a class="toctree-l4" href="#the-refresh_gen_dest-macro">The $REFRESH_GEN_DEST() macro</a></li>
        
            <li><a class="toctree-l4" href="#combined-instructions">Combined instructions</a></li>
        
            <li><a class="toctree-l4" href="#some-notes-about-combined-instructions">Some notes about combined instructions</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../communication/">Communication in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../counters/">counters</a>
                </li>
                <li class="">
                    
    <a class="" href="../crash_dump/">How to Interpret the Erlang Crash Dumps</a>
                </li>
                <li class="">
                    
    <a class="" href="../driver/">How to Implement a Driver</a>
                </li>
                <li class="">
                    
    <a class="" href="../driver_entry/">driver_entry</a>
                </li>
                <li class="">
                    
    <a class="" href="../epmd/">epmd</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl/">erl</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_dist_protocol/">Distribution Protocol</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_driver/">erl_driver</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_ext_dist/">External Term Format</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_nif/">erl_nif</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_prim_loader/">erl_prim_loader</a>
                </li>
                <li class="">
                    
    <a class="" href="../erl_tracer/">erl_tracer</a>
                </li>
                <li class="">
                    
    <a class="" href="../erlang/">erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../erlc/">erlc</a>
                </li>
                <li class="">
                    
    <a class="" href="../erlsrv/">erlsrv</a>
                </li>
                <li class="">
                    
    <a class="" href="../erts_alloc/">erts_alloc</a>
                </li>
                <li class="">
                    
    <a class="" href="../escript/">escript</a>
                </li>
                <li class="">
                    
    <a class="" href="../inet_cfg/">Inet Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../init/">init</a>
                </li>
                <li class="">
                    
    <a class="" href="../internal/">Internal</a>
                </li>
                <li class="">
                    
    <a class="" href="../introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../match_spec/">Match Specifications in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../net/">net</a>
                </li>
                <li class="">
                    
    <a class="" href="../notes/">ERTS Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../persistent_term/">persistent_term</a>
                </li>
                <li class="">
                    
    <a class="" href="../run_erl/">run_erl</a>
                </li>
                <li class="">
                    
    <a class="" href="../socket/">socket</a>
                </li>
                <li class="">
                    
    <a class="" href="../socket_usage/">Socket Usage</a>
                </li>
                <li class="">
                    
    <a class="" href="../start/">start</a>
                </li>
                <li class="">
                    
    <a class="" href="../start_erl/">start_erl</a>
                </li>
                <li class="">
                    
    <a class="" href="../time_correction/">Time and Time Correction in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../tty/">tty - A Command-Line Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../werl/">werl</a>
                </li>
                <li class="">
                    
    <a class="" href="../zlib/">zlib</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Et</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../et/et/">et</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_collector/">et_collector</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_desc/">Description</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_examples/">Advanced examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_selector/">et_selector</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_tutorial/">Tutorial</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/et_viewer/">et_viewer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../et/notes/">Event Tracer (ET) Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Eunit</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../eunit/eunit/">eunit</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eunit/eunit_surefire/">eunit_surefire</a>
                </li>
                <li class="">
                    
    <a class="" href="../../eunit/notes/">EUnit Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Ftp</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../ftp/ftp/">ftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ftp/ftp_client/">FTP Client</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ftp/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ftp/notes/">FTP Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Hipe</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../hipe/hipe_app/">HiPE</a>
                </li>
                <li class="">
                    
    <a class="" href="../../hipe/notes/">HiPE Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Inets</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../inets/http_client/">HTTP Client</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/http_server/">HTTP server</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/http_uri/">http_uri</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpc/">httpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd/">httpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd_custom_api/">httpd_custom_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd_socket/">httpd_socket</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/httpd_util/">httpd_util</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/inets/">inets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/inets_services/">Inets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_alias/">mod_alias</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_auth/">mod_auth</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_esi/">mod_esi</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/mod_security/">mod_security</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inets/notes/">Inets Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Jinterface</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../jinterface/jinterface/">jinterface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../jinterface/jinterface_users_guide/">The Jinterface Package</a>
                </li>
                <li class="">
                    
    <a class="" href="../../jinterface/notes/">Jinterface Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Kernel</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../kernel/app/">app</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/application/">application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/auth/">auth</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/code/">code</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/config/">config</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/disk_log/">disk_log</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_boot_server/">erl_boot_server</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_ddll/">erl_ddll</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_epmd/">erl_epmd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erl_prim_loader_stub/">erl_prim_loader</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/erlang_stub/">erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/error_handler/">error_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/error_logger/">error_logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/file/">file</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/gen_sctp/">gen_sctp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/gen_tcp/">gen_tcp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/gen_udp/">gen_udp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/global/">global</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/global_group/">global_group</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/heart/">heart</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/inet/">inet</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/inet_res/">inet_res</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/init_stub/">init</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/introduction_chapter/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/kernel_app/">kernel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger/">logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_chapter/">Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_disk_log_h/">logger_disk_log_h</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_filters/">logger_filters</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_formatter/">logger_formatter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/logger_std_h/">logger_std_h</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/net_adm/">net_adm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/net_kernel/">net_kernel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/notes/">Kernel Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/os/">os</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/pg2/">pg2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/rpc/">rpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/seq_trace/">seq_trace</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/user/">user</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/wrap_log_reader/">wrap_log_reader</a>
                </li>
                <li class="">
                    
    <a class="" href="../../kernel/zlib_stub/">zlib</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Megaco</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../megaco/megaco/">megaco</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_meas/">megaco_codec_meas</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_mstone1/">megaco_codec_mstone1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_mstone2/">megaco_codec_mstone2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_codec_transform/">megaco_codec_transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_debug/">Testing and tools</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_edist_compress/">megaco_encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_encode/">Internal form and its encodings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_encoder/">megaco_encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_examples/">Implementation examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_flex_scanner/">megaco_flex_scanner</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_mib/">Megaco mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_performance/">Performance comparison</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_run/">Running the stack</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_tcp/">megaco_tcp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_transport/">megaco_transport</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_transport_mechanisms/">Transport mechanisms</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_udp/">megaco_udp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/megaco_user/">megaco_user</a>
                </li>
                <li class="">
                    
    <a class="" href="../../megaco/notes/">Megaco Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Mnesia</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_App_A/">Appendix A: Backup Callback Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_App_B/">Appendix B: Activity Access Callback Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_App_C/">Appendix C: Fragmented Table Hashing Callback Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap1/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap2/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap3/">Build a Mnesia Database</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap4/">Transactions and Other Access Contexts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap5/">Miscellaneous Mnesia Features</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap7/">Mnesia System Information</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_chap8/">Combine Mnesia with SNMP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/Mnesia_overview/">Mnesia</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/mnesia/">mnesia</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/mnesia_frag_hash/">mnesia_frag_hash</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/mnesia_registry/">mnesia_registry</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mnesia/notes/">Mnesia Release Notes</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Observer</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../observer/cdv/">The cdv program</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/crashdump/">crashdump_viewer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/crashdump_ug/">Crashdump Viewer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/etop/">etop</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/etop_ug/">Erlang Top</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/introduction_ug/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/notes/">Observer Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/observer/">Observer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/observer_app/">Observer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/observer_ug/">Observer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/ttb/">ttb</a>
                </li>
                <li class="">
                    
    <a class="" href="../../observer/ttb_ug/">Trace Tool Builder</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Os mon</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../os_mon/cpu_sup/">cpu_sup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/disksup/">disksup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/memsup/">memsup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/notes/">OS_Mon Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/nteventlog/">nteventlog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/os_mon_app/">os_mon</a>
                </li>
                <li class="">
                    
    <a class="" href="../../os_mon/os_sup/">os_sup</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Parsetools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../parsetools/leex/">leex</a>
                </li>
                <li class="">
                    
    <a class="" href="../../parsetools/notes/">Parsetools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../parsetools/yecc/">yecc</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Public key</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../public_key/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/notes/">public_key Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/public_key/">public_key</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/public_key_app/">public_key</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/public_key_records/">Public-Key Records</a>
                </li>
                <li class="">
                    
    <a class="" href="../../public_key/using_public_key/">Getting Started</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Reltool</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../reltool/notes/">Reltool Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool/">reltool</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool_examples/">Examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reltool/reltool_usage/">Usage</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Runtime tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../runtime_tools/DTRACE/">DTrace and Erlang/OTP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/LTTng/">LTTng and Erlang/OTP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/SYSTEMTAP/">SystemTap and Erlang/OTP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/dbg/">dbg</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/dyntrace/">dyntrace</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/erts_alloc_config/">erts_alloc_config</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/msacc/">Microstate Accounting</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/notes/">Runtime_Tools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/runtime_tools_app/">runtime_tools</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/scheduler/">Scheduler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../runtime_tools/system_information/">System information</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Sasl</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../sasl/alarm_handler/">alarm_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/appup/">appup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/error_logging/">SASL Error Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/notes/">SASL Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/rb/">rb</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/rel/">rel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/release_handler/">release_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/relup/">relup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/sasl_app/">sasl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/sasl_intro/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/script/">script</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sasl/systools/">systools</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Snmp</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../snmp/notes/">SNMP Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp/">snmp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_advanced_agent/">Advanced Agent Topics</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_agent_config_files/">Definition of Agent Configuration Files</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_agent_funct_descr/">Agent Functional Description</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_agent_netif/">Definition of Agent Net if</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_app/">snmp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_app_a/">SNMP Appendix A</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_app_b/">SNMP Appendix B</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_audit_trail_log/">Audit Trail Log</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_community_mib/">snmp_community_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_config/">Running the application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_def_instr_functions/">Definition of Instrumentation Functions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_framework_mib/">snmp_framework_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_generic/">snmp_generic</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_impl_example_agent/">Agent Implementation Example</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_impl_example_manager/">Manager Implementation Example</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_index/">snmp_index</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_instr_functions/">Instrumentation Functions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_intro/">SNMP Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_manager_config_files/">Definition of Manager Configuration Files</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_manager_funct_descr/">Manager Functional Description</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_manager_netif/">Definition of Manager Net if</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_mib_compiler/">The MIB Compiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_notification_mib/">snmp_notification_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_pdus/">snmp_pdus</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_standard_mib/">snmp_standard_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_target_mib/">snmp_target_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_user_based_sm_mib/">snmp_user_based_sm_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmp_view_based_acm_mib/">snmp_view_based_acm_mib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa/">snmpa</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_conf/">snmpa_conf</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_discovery_handler/">snmpa_discovery_handler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error/">snmpa_error</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error_io/">snmpa_error_io</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error_logger/">snmpa_error_logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_error_report/">snmpa_error_report</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_local_db/">snmpa_local_db</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_mib_data/">snmpa_mib_data</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_mib_storage/">snmpa_mib_storage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_mpd/">snmpa_mpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_network_interface/">snmpa_network_interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_network_interface_filter/">snmpa_network_interface_filter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_notification_delivery_info_receiver/">snmpa_notification_delivery_info_receiver</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_notification_filter/">snmpa_notification_filter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpa_supervisor/">snmpa_supervisor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpc/">snmpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpc_cmd/">snmpc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm/">snmpm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_conf/">snmpm_conf</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_mpd/">snmpm_mpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_network_interface/">snmpm_network_interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_network_interface_filter/">snmpm_network_interface_filter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../snmp/snmpm_user/">snmpm_user</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Ssh</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../ssh/configure_algos/">Configuring algorithms in SSH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/notes/">SSH Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh/">ssh</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_app/">SSH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_client_channel/">ssh_client_channel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_client_key_api/">ssh_client_key_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_connection/">ssh_connection</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_file/">ssh_file</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_server_channel/">ssh_server_channel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_server_key_api/">ssh_server_key_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_sftp/">ssh_sftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/ssh_sftpd/">ssh_sftpd</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/terminology/">Terminology</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/usersguide/">SSH User's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssh/using_ssh/">Getting Started</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Ssl</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../ssl/notes/">SSL Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/refman/">SSL Reference Manual</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl/">ssl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_app/">ssl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_crl_cache/">ssl_crl_cache</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_crl_cache_api/">ssl_crl_cache_api</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_distribution/">Using TLS for Erlang Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_protocol/">TLS/DTLS and TLS Predecessor, SSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/ssl_session_cache_api/">ssl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/standards_compliance/">Standards Compliance</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/usersguide/">SSL User's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../ssl/using_ssl/">Using SSL application API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Stdlib</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../stdlib/array/">array</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/assert_hrl/">assert.hrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/base64/">base64</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/beam_lib/">beam_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/binary/">binary</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/c/">c</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/calendar/">calendar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/dets/">dets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/dict/">dict</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/digraph/">digraph</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/digraph_utils/">digraph_utils</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/epp/">epp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_anno/">erl_anno</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_eval/">erl_eval</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_expand_records/">erl_expand_records</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_id_trans/">erl_id_trans</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_internal/">erl_internal</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_lint/">erl_lint</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_parse/">erl_parse</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_pp/">erl_pp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_scan/">erl_scan</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/erl_tar/">erl_tar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/ets/">ets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/file_sorter/">file_sorter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/filelib/">filelib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/filename/">filename</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gb_sets/">gb_sets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gb_trees/">gb_trees</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_event/">gen_event</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_fsm/">gen_fsm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_server/">gen_server</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/gen_statem/">gen_statem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/io/">io</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/io_lib/">io_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/io_protocol/">The Erlang I/O Protocol</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/lists/">lists</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/log_mf_h/">log_mf_h</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/maps/">maps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/math/">math</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/ms_transform/">ms_transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/notes/">STDLIB Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/orddict/">orddict</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/ordsets/">ordsets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/pool/">pool</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/proc_lib/">proc_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/proplists/">proplists</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/qlc/">qlc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/queue/">queue</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/rand/">rand</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/random/">random</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/re/">re</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/sets/">sets</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/shell/">shell</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/shell_default/">shell_default</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/slave/">slave</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/sofs/">sofs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/stdlib_app/">STDLIB</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/string/">string</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/supervisor/">supervisor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/supervisor_bridge/">supervisor_bridge</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/sys/">sys</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/timer/">timer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/unicode/">unicode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/unicode_usage/">Using Unicode in Erlang</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/uri_string/">uri_string</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/win32reg/">win32reg</a>
                </li>
                <li class="">
                    
    <a class="" href="../../stdlib/zip/">zip</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Syntax tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../syntax_tools/epp_dodger/">epp_dodger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_comment_scan/">erl_comment_scan</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_prettypr/">erl_prettypr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_recomment/">erl_recomment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_syntax/">erl_syntax</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_syntax_lib/">erl_syntax_lib</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/erl_tidy/">erl_tidy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/igor/">igor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/merl/">merl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/merl_transform/">merl_transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/notes/">Syntax_Tools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../syntax_tools/prettypr/">prettypr</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">System</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">Design principles</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/applications/">Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/appup_cookbook/">Appup Cookbook</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/book/">OTP Design Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/des_princ/">Overview</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/distributed_applications/">Distributed Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/events/">gen_event Behaviour</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/gen_server_concepts/">gen_server Behaviour</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/included_applications/">Included Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/part/">OTP Design Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/release_handling/">Release Handling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/release_structure/">Releases</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/spec_proc/">sys and proc_lib</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/statem/">gen_statem Behavior</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/design_principles/sup_princ/">Supervisor Behaviour</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Efficiency guide</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/advanced/">Advanced</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/binaryhandling/">Constructing and Matching Binaries</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/book/">Efficiency Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/commoncaveats/">Common Caveats</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/drivers/">Drivers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/functions/">Functions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/introduction/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/listhandling/">List Handling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/myths/">The Seven Myths of Erlang Performance</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/part/">Efficiency Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/processes/">Processes</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/profiling/">Profiling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/retired_myths/">Retired Myths</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/efficiency_guide/tablesDatabases/">Tables and Databases</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Embedded</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/book/">Embedded Systems</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/embedded_nt/">Windows NT</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/embedded_solaris/">Embedded Solaris</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/embedded/part/">Embedded Systems User's Guide</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">General info</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/book/">General Information</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/deprecations/">Deprecations</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/part/">General Information</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/general_info/scheduled_for_removal/">Scheduled for Removal</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Getting started</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/book/">Getting Started with Erlang</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/conc_prog/">Concurrent Programming</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/intro/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/part/">Getting Started With Erlang</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/records_macros/">Records and Macros</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/robustness/">Robustness</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/getting_started/seq_prog/">Sequential Programming</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation guide</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/INSTALL-CROSS/">Cross Compiling Erlang/OTP</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/INSTALL-WIN32/">How to Build Erlang/OTP on Windows</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/INSTALL/">Building and Installing Erlang/OTP</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/OTP-PATCH-APPLY/">Patching OTP Applications</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/book/">Installation Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/install-binary/">Installing the Binary Release</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/installation_guide/part/">Installation Guide</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Oam</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/oam/book/">OAM Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/oam/oam_intro/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/oam/part/">OAM Principles</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Programming examples</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/bit_syntax/">Bit Syntax</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/book/">Programming Examples</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/funs/">Funs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/list_comprehensions/">List Comprehensions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/part/">Programming Examples</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/programming_examples/records/">Records</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Reference manual</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/book/">Erlang Reference Manual</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/character_set/">Character Set and Source File Encoding</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/code_loading/">Compilation and Code Loading</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/data_types/">Data Types</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/distributed/">Distributed Erlang</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/errors/">Errors and Error Handling</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/expressions/">Expressions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/functions/">Functions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/introduction/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/macros/">Preprocessor</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/modules/">Modules</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/part/">Erlang Reference Manual</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/patterns/">Pattern Matching</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/ports/">Ports and Port Drivers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/processes/">Processes</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/records/">Records</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/reference_manual/typespec/">Types and Function Specifications</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">System architecture intro</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_architecture_intro/book/">System Architecture</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_architecture_intro/part/">Introduction to the System Architecture</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_architecture_intro/sys_arch_intro/">Introduction</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">System principles</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/book/">System Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/create_target/">Creating and Upgrading a Target System</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/error_logging/">Error Logging</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/misc/">Support, Compatibility, Deprecations, and Removal</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/part/">System Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/system_principles/">System Principles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/upgrade/">Upgrade when Erlang/OTP has Changed</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/system_principles/versions/">Versions</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Tutorial</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/book/">Interoperability Tutorial</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/c_port/">Ports</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/c_portdriver/">Port Drivers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/cnode/">C Nodes</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/erl_interface/">Erl_Interface</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/example/">Problem Example</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/introduction/">Introduction</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/nif/">NIFs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/overview/">Overview</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../system/tutorial/part/">Interoperability Tutorial</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tftp</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tftp/getting_started/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/notes/">TFTP Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/tftp/">tftp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tftp/usersguide/">TFTP User's Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tools/cover/">cover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/cover_chapter/">cover</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/cprof/">cprof</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/cprof_chapter/">cprof - The Call Count Profiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/eprof/">eprof</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/erlang_mode/">Erlang mode for Emacs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/erlang_mode_chapter/">The Erlang mode for Emacs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/fprof/">fprof</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/fprof_chapter/">fprof - The File Trace Profiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/instrument/">instrument</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/lcnt/">lcnt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/lcnt_chapter/">lcnt - The Lock Profiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/make/">make</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/notes/">Tools Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/tags/">tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/xref/">xref</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/xref_chapter/">Xref - The Cross Reference Tool</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Wx</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../wx/glu/">glu</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/notes/">wxErlang Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wx/">wx</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAcceleratorEntry/">wxAcceleratorEntry</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAcceleratorTable/">wxAcceleratorTable</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxActivateEvent/">wxActivateEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxArtProvider/">wxArtProvider</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiDockArt/">wxAuiDockArt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiManager/">wxAuiManager</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiManagerEvent/">wxAuiManagerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiNotebook/">wxAuiNotebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiNotebookEvent/">wxAuiNotebookEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiPaneInfo/">wxAuiPaneInfo</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiSimpleTabArt/">wxAuiSimpleTabArt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxAuiTabArt/">wxAuiTabArt</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBitmap/">wxBitmap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBitmapButton/">wxBitmapButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBitmapDataObject/">wxBitmapDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBoxSizer/">wxBoxSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBrush/">wxBrush</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBufferedDC/">wxBufferedDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxBufferedPaintDC/">wxBufferedPaintDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxButton/">wxButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCalendarCtrl/">wxCalendarCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCalendarDateAttr/">wxCalendarDateAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCalendarEvent/">wxCalendarEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCaret/">wxCaret</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCheckBox/">wxCheckBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCheckListBox/">wxCheckListBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxChildFocusEvent/">wxChildFocusEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxChoice/">wxChoice</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxChoicebook/">wxChoicebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxClientDC/">wxClientDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxClipboard/">wxClipboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxClipboardTextEvent/">wxClipboardTextEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCloseEvent/">wxCloseEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourData/">wxColourData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourDialog/">wxColourDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourPickerCtrl/">wxColourPickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxColourPickerEvent/">wxColourPickerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxComboBox/">wxComboBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCommandEvent/">wxCommandEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxContextMenuEvent/">wxContextMenuEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxControl/">wxControl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxControlWithItems/">wxControlWithItems</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxCursor/">wxCursor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDC/">wxDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDCOverlay/">wxDCOverlay</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDataObject/">wxDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDateEvent/">wxDateEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDatePickerCtrl/">wxDatePickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDialog/">wxDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDirDialog/">wxDirDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDirPickerCtrl/">wxDirPickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDisplay/">wxDisplay</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDisplayChangedEvent/">wxDisplayChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxDropFilesEvent/">wxDropFilesEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxEraseEvent/">wxEraseEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxEvent/">wxEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxEvtHandler/">wxEvtHandler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFileDataObject/">wxFileDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFileDialog/">wxFileDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFileDirPickerEvent/">wxFileDirPickerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFilePickerCtrl/">wxFilePickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFindReplaceData/">wxFindReplaceData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFindReplaceDialog/">wxFindReplaceDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFlexGridSizer/">wxFlexGridSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFocusEvent/">wxFocusEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFont/">wxFont</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontData/">wxFontData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontDialog/">wxFontDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontPickerCtrl/">wxFontPickerCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFontPickerEvent/">wxFontPickerEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxFrame/">wxFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGBSizerItem/">wxGBSizerItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGCDC/">wxGCDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGLCanvas/">wxGLCanvas</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGauge/">wxGauge</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGenericDirCtrl/">wxGenericDirCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsBrush/">wxGraphicsBrush</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsContext/">wxGraphicsContext</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsFont/">wxGraphicsFont</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsMatrix/">wxGraphicsMatrix</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsObject/">wxGraphicsObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsPath/">wxGraphicsPath</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsPen/">wxGraphicsPen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGraphicsRenderer/">wxGraphicsRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGrid/">wxGrid</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridBagSizer/">wxGridBagSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellAttr/">wxGridCellAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellBoolEditor/">wxGridCellBoolEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellBoolRenderer/">wxGridCellBoolRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellChoiceEditor/">wxGridCellChoiceEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellEditor/">wxGridCellEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellFloatEditor/">wxGridCellFloatEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellFloatRenderer/">wxGridCellFloatRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellNumberEditor/">wxGridCellNumberEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellNumberRenderer/">wxGridCellNumberRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellRenderer/">wxGridCellRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellStringRenderer/">wxGridCellStringRenderer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridCellTextEditor/">wxGridCellTextEditor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridEvent/">wxGridEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxGridSizer/">wxGridSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHelpEvent/">wxHelpEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHtmlEasyPrinting/">wxHtmlEasyPrinting</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHtmlLinkEvent/">wxHtmlLinkEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxHtmlWindow/">wxHtmlWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIcon/">wxIcon</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIconBundle/">wxIconBundle</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIconizeEvent/">wxIconizeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxIdleEvent/">wxIdleEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxImage/">wxImage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxImageList/">wxImageList</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxInitDialogEvent/">wxInitDialogEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxJoystickEvent/">wxJoystickEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxKeyEvent/">wxKeyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxLayoutAlgorithm/">wxLayoutAlgorithm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListBox/">wxListBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListCtrl/">wxListCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListEvent/">wxListEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListItem/">wxListItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListItemAttr/">wxListItemAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListView/">wxListView</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxListbook/">wxListbook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxLocale/">wxLocale</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxLogNull/">wxLogNull</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMDIChildFrame/">wxMDIChildFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMDIClientWindow/">wxMDIClientWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMDIParentFrame/">wxMDIParentFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMask/">wxMask</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMaximizeEvent/">wxMaximizeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMemoryDC/">wxMemoryDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenu/">wxMenu</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenuBar/">wxMenuBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenuEvent/">wxMenuEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMenuItem/">wxMenuItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMessageDialog/">wxMessageDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMiniFrame/">wxMiniFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMirrorDC/">wxMirrorDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMouseCaptureChangedEvent/">wxMouseCaptureChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMouseCaptureLostEvent/">wxMouseCaptureLostEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMouseEvent/">wxMouseEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMoveEvent/">wxMoveEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxMultiChoiceDialog/">wxMultiChoiceDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNavigationKeyEvent/">wxNavigationKeyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNotebook/">wxNotebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNotebookEvent/">wxNotebookEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxNotifyEvent/">wxNotifyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxOverlay/">wxOverlay</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPageSetupDialog/">wxPageSetupDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPageSetupDialogData/">wxPageSetupDialogData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPaintDC/">wxPaintDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPaintEvent/">wxPaintEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPalette/">wxPalette</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPaletteChangedEvent/">wxPaletteChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPanel/">wxPanel</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPasswordEntryDialog/">wxPasswordEntryDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPen/">wxPen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPickerBase/">wxPickerBase</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPopupTransientWindow/">wxPopupTransientWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPopupWindow/">wxPopupWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPostScriptDC/">wxPostScriptDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPreviewCanvas/">wxPreviewCanvas</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPreviewControlBar/">wxPreviewControlBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPreviewFrame/">wxPreviewFrame</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintData/">wxPrintData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintDialog/">wxPrintDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintDialogData/">wxPrintDialogData</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintPreview/">wxPrintPreview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrinter/">wxPrinter</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxPrintout/">wxPrintout</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxProgressDialog/">wxProgressDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxQueryNewPaletteEvent/">wxQueryNewPaletteEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxRadioBox/">wxRadioBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxRadioButton/">wxRadioButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxRegion/">wxRegion</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSashEvent/">wxSashEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSashLayoutWindow/">wxSashLayoutWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSashWindow/">wxSashWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScreenDC/">wxScreenDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrollBar/">wxScrollBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrollEvent/">wxScrollEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrollWinEvent/">wxScrollWinEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxScrolledWindow/">wxScrolledWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSetCursorEvent/">wxSetCursorEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxShowEvent/">wxShowEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSingleChoiceDialog/">wxSingleChoiceDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizeEvent/">wxSizeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizer/">wxSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizerFlags/">wxSizerFlags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSizerItem/">wxSizerItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSlider/">wxSlider</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSpinButton/">wxSpinButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSpinCtrl/">wxSpinCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSpinEvent/">wxSpinEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSplashScreen/">wxSplashScreen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSplitterEvent/">wxSplitterEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSplitterWindow/">wxSplitterWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticBitmap/">wxStaticBitmap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticBox/">wxStaticBox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticBoxSizer/">wxStaticBoxSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticLine/">wxStaticLine</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStaticText/">wxStaticText</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStatusBar/">wxStatusBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStdDialogButtonSizer/">wxStdDialogButtonSizer</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStyledTextCtrl/">wxStyledTextCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxStyledTextEvent/">wxStyledTextEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSysColourChangedEvent/">wxSysColourChangedEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSystemOptions/">wxSystemOptions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxSystemSettings/">wxSystemSettings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTaskBarIcon/">wxTaskBarIcon</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTaskBarIconEvent/">wxTaskBarIconEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextAttr/">wxTextAttr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextCtrl/">wxTextCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextDataObject/">wxTextDataObject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTextEntryDialog/">wxTextEntryDialog</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToggleButton/">wxToggleButton</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToolBar/">wxToolBar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToolTip/">wxToolTip</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxToolbook/">wxToolbook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTopLevelWindow/">wxTopLevelWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTreeCtrl/">wxTreeCtrl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTreeEvent/">wxTreeEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxTreebook/">wxTreebook</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxUpdateUIEvent/">wxUpdateUIEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindow/">wxWindow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindowCreateEvent/">wxWindowCreateEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindowDC/">wxWindowDC</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxWindowDestroyEvent/">wxWindowDestroyEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wxXmlResource/">wxXmlResource</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wx_misc/">wx_misc</a>
                </li>
                <li class="">
                    
    <a class="" href="../../wx/wx_object/">wx_object</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Xmerl</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../xmerl/notes/">Xmerl Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl/">xmerl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_eventp/">xmerl_eventp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_sax_parser/">xmerl_sax_parser</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_scan/">xmerl_scan</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_ug/">xmerl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_xpath/">xmerl_xpath</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_xs/">xmerl_xs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../xmerl/xmerl_xsd/">xmerl_xsd</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Erlang OTP</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Erts &raquo;</li>
        
      
    
    <li>The beam_makeops script</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="the-beam_makeops-script">The beam_makeops script</h1>
<p>This document describes the beam_makeops script.
<a name="Introduction">Introduction</a></p>
<h2 id="introduction">Introduction</h2>
<p>The
beam_makeops
Perl script is used at build-time by both the compiler and runtime system. Given a number of input files (all with the extension
<em>.tab</em>
), it will generate source files used by the Erlang compiler and by the runtime system to load and execute BEAM instructions.</p>
<p>Essentially those <em>.tab</em> files define:
*
External generic BEAM instructions. They are the instructions that are known to both the compiler and the runtime system. Generic instructions are stable between releases. New generic instructions with high numbers than previous instructions can be added in major releases. The OTP 20 release has 159 external generic instructions.
*
Internal generic instructions. They are known only to the runtime system and can be changed at any time without compatibility issues. They are created by transformation rules (described next).
*
Rules for transforming one or more generic instructions to other generic instructions. The transformation rules allow combining, splitting, and removal of instructions, as well as shuffling operands. Because of the transformation rules, the runtime can have many internal generic instructions that are only known to runtime system.
*
Specific BEAM instructions. The specific instructions are the instructions that are actually executed by the runtime system. They can be changed at any time without causing compatibility issues. The loader translates generic instructions to specific instructions. In general, for each generic instruction, there exists a family of specific instructions. The OTP 20 release has 389 specific instructions.
* The implementation of specific instructions.</p>
<p>Generic instructions have typed operands. Here are a few examples of operands for
<em>move/2</em>
:</p>
<pre><code>
{move,{atom,id},{x,5}}.
{move,{x,3},{x,0}}.
{move,{x,2},{y,1}}.

</code></pre>

<p>When those instructions are loaded, the loader rewrites them to specific instructions:</p>
<pre><code>
move_cx id 5
move_xx 3 0
move_xy 2 1

</code></pre>

<p>Corresponding to each generic instruction, there is a family of specific instructions. The types that an instance of a specific instruction can handle are encoded in the instruction names. For example,
<em>move_xy</em>
takes an X register number as the first operand and a Y register number as the second operand.
<em>move_cx</em>
takes a tagged Erlang term as the first operand and an X register number as the second operand.
<a name="An-example-the-move-instruction">An-example-the-move-instruction</a></p>
<h2 id="an-example-the-move-instruction">An example: the move instruction</h2>
<p>Using the
<em>move</em>
instruction as an example, we will give a quick tour to show the main features of
beam_makeops
.</p>
<p>In the
<em>compiler</em>
application, in the file
<em>genop.tab</em>
, there is the following line:</p>
<pre><code>
64: move/2

</code></pre>

<p>This is a definition of an external generic BEAM instruction. Most importantly it specifices that the opcode is 64. It also defines that it has two operands. The BEAM assembler will use the opcode when creating
<em>.beam</em>
files. The compiler does not really need the arity, but it will use it as an internal sanity check when assembling the BEAM code.</p>
<p>Let's have a look at
<em>ops.tab</em>
in
<em>erts/emulator/beam</em>
, where the specific
<em>move</em>
instructions are defined. Here are a few of them:</p>
<pre><code>
move x x
move x y
move c x

</code></pre>

<p>Each specific instructions is defined by following the name of the instruction with the types for each operand. An operand type is a single letter. For example,
<em>x</em>
means an X register,
<em>y</em>
means a Y register, and
<em>c</em>
is a "constant" (a tagged term such as an integer, an atom, or a literal).</p>
<p>Now let's look at the implementation of the
<em>move</em>
instruction. There are multiple files containing implementations of instructions in the
<em>erts/emulator/beam</em>
directory. The
<em>move</em>
instruction is defined in
<em>instrs.tab</em>
. It looks like this:</p>
<pre><code>
move(Src, Dst) {
    $Dst = $Src;
}

</code></pre>

<p>The implementation for an instruction largely follows the C syntax, except that the variables in the function head don't have any types. The
<em>$</em>
before an identifier denotes a macro expansion. Thus,
<em>$Src</em>
will expand to the code to pick up the source operand for the instruction and
<em>$Dst</em>
to the code for the destination register.</p>
<p>We will look at the code for each specific instruction in turn. To make the code easier to understand, let's first look at the memory layout for the instruction
<em>{move,{atom,id},{x,5}}</em>
:</p>
<pre><code>
     +--------------------+--------------------+
I -&gt; |                 40 |       &amp;&amp;lb_move_cx |
     +--------------------+--------------------+
     |                        Tagged atom 'id' |
     +--------------------+--------------------+

</code></pre>

<p>This example and all other examples in the document assumes a 64-bit archictecture, and furthermore that pointers to C code fit in 32 bits.</p>
<p><em>I</em>
in the BEAM virtual machine is the instruction pointer. When BEAM executes an instruction,
<em>I</em>
points to the first word of the instruction.</p>
<p><em>&amp;&amp;lb_move_cx</em>
is the address to C code that implements
<em>move_cx</em>
. It is stored in the lower 32 bits of the word. In the upper 32 bits is the byte offset to the X register; the register number 5 has been multiplied by the word size size 8.</p>
<p>In the next word the tagged atom <em>id</em> is stored.</p>
<p>With that background, we can look at the generated code for
<em>move_cx</em>
in
<em>beam_hot.h</em>
:</p>
<pre><code>
OpCase(move_cx):
{
  BeamInstr next_pf = BeamCodeAddr(I[2]);
  xb(BeamExtraData(I[0])) = I[1];
  I += 2;
  ASSERT(VALID_INSTR(next_pf));
  GotoPF(next_pf);
}

</code></pre>

<p>We will go through each line in turn.
*
<em>OpCase(move_cx):</em>
defines a label for the instruction. The
<em>OpCase()</em>
macro is defined in
<em>beam_emu.c</em>
. It will expand this line to
<em>lb_move_cx:</em>
.
*
<em>BeamInstr next_pf = BeamCodeAddr(I[2]);</em>
fetches the pointer to code for the next instruction to be executed. The
<em>BeamCodeAddr()</em>
macro extracts the pointer from the lower 32 bits of the instruction word.
*
<em>xb(BeamExtraData(I[0])) = I[1];</em>
is the expansion of
<em>$Dst = $Src</em>
.
<em>BeamExtraData()</em>
is a macro that will extract the upper 32 bits from the instruction word. In this example, it will return 40 which is the byte offset for X register 5. The
<em>xb()</em>
macro will cast a byte pointer to an
<em>Eterm</em>
pointer and dereference it. The
<em>I[1]</em>
on the right side of the
<em>=</em>
fetches an Erlang term (the atom
<em>id</em>
in this case).
*
<em>I += 2</em>
advances the instruction pointer to the next instruction.
*
In a debug-compiled emulator,
<em>ASSERT(VALID_INSTR(next_pf));</em>
makes sure that
<em>next_pf</em>
is a valid instruction (that is, that it points within the
<em>process_main()</em>
function in
<em>beam_emu.c</em>
).
* <em>GotoPF(next_pf);</em> transfers control to the next instruction.</p>
<p>Now let's look at the implementation of <em>move_xx</em> :</p>
<pre><code>
OpCase(move_xx):
{
  Eterm tmp_packed1 = BeamExtraData(I[0]);
  BeamInstr next_pf = BeamCodeAddr(I[1]);
  xb((tmp_packed1&gt;&gt;BEAM_TIGHT_SHIFT)) = xb(tmp_packed1&amp;BEAM_TIGHT_MASK);
  I += 1;
  ASSERT(VALID_INSTR(next_pf));
  GotoPF(next_pf);
}

</code></pre>

<p>We will go through the lines that are new or have changed compared to
<em>move_cx</em>
.
*
<em>Eterm tmp_packed1 = BeamExtraData(I[0]);</em>
picks up both X register numbers packed into the upper 32 bits of the instruction word.
*
<em>BeamInstr next_pf = BeamCodeAddr(I[1]);</em>
pre-fetches the address of the next instruction. Note that because both X registers operands fits into the instruction word, the next instruction is in the very next word.
*
<em>xb((tmp_packed1&gt;&gt;BEAM_TIGHT_SHIFT)) = xb(tmp_packed1&amp;BEAM_TIGHT_MASK);</em>
copies the source to the destination. (For a 64-bit architecture,
<em>BEAM_TIGHT_SHIFT</em>
is 16 and
<em>BEAM_TIGHT_MASK</em>
is
<em>0xFFFF</em>
.)
*
<em>I += 1;</em>
advances the instruction pointer to the next instruction.</p>
<p><em>move_xy</em>
is almost identical to
<em>move_xx</em>
. The only difference is the use of the
<em>yb()</em>
macro instead of
<em>xb()</em>
to reference the destination register:</p>
<pre><code>
OpCase(move_xy):
{
  Eterm tmp_packed1 = BeamExtraData(I[0]);
  BeamInstr next_pf = BeamCodeAddr(I[1]);
  yb((tmp_packed1&gt;&gt;BEAM_TIGHT_SHIFT)) = xb(tmp_packed1&amp;BEAM_TIGHT_MASK);
  I += 1;
  ASSERT(VALID_INSTR(next_pf));
  GotoPF(next_pf);
}

</code></pre>

<p><a name="An-example-the-move-instruction_Transformation-rules">An-example-the-move-instruction_Transformation-rules</a></p>
<h2 id="transformation-rules">Transformation rules</h2>
<p>Next let's look at how we can do some optimizations using transformation rules. For simple instructions such as
<em>move/2</em>
, the instruction dispatch overhead can be substantial. A simple optimization is to combine common instructions sequences to a single instruction. One such common sequence is multiple
<em>move</em>
instructions moving X registers to Y registers.</p>
<p>Using the following rule we can combine two
<em>move</em>
instructions to a
<em>move2</em>
instruction:</p>
<pre><code>
move X1=x Y1=y | move X2=x Y2=y =&gt; move2 X1 Y1 X2 Y2

</code></pre>

<p>The left side of the arrow (
<em>=&gt;</em>
) is a pattern. If the pattern matches, the matching instructions will be replaced by the instructions on the right side. Variables in a pattern must start with an uppercase letter just as in Erlang. A pattern variable may be followed
<em>=</em>
and one or more type letters to constrain the match to one of those types. The variables that are bound on the left side can be used on the right side.</p>
<p>We will also need to define a specific instruction and an implementation:</p>
<pre><code>
# In ops.tab
move2 x y x y

// In instrs.tab
move2(S1, D1, S2, D2) {
    Eterm V1, V2;
    V1 = $S1;
    V2 = $S2;
    $D1 = V1;
    $D2 = V2;
}

</code></pre>

<p>When the loader has found a match and replaced the matched instructions, it will match the new instructions against the transformation rules. Because of that, we can define the rule for a
<em>move3/6</em>
instruction as follows:</p>
<pre><code>
move2 X1=x Y1=y X2=x Y2=y | move X3=x Y3=y =&gt; \
      move3 X1 Y1 X2 Y2 X3 Y3

</code></pre>

<p>(A
**
before a newline can be used to break a long line for readability.)</p>
<p>It would also be possible to define it like this:</p>
<pre><code>
move X1=x Y1=y | move X2=x Y2=y | move X3=x Y3=y =&gt; \
     move3 X1 Y1 X2 Y2 X3 Y3

</code></pre>

<p>but in that case it must be defined before the rule for
<em>move2/4</em>
because the first matching rule will be applied.</p>
<p>One must be careful not to create infinite loops. For example, if we for some reason would want to reverse the operand order for the
<em>move</em>
instruction, we must not do like this:</p>
<pre><code>
move Src Dst =&gt; move Dst Src

</code></pre>

<p>The loader would swap the operands forever. To avoid the loop, we must rename the instruction. For example:</p>
<pre><code>
move Src Dst =&gt; assign Dst Src

</code></pre>

<p>This concludes the quick tour of the features of beam_makeops .
<a name="Short-overview-of-instruction-loading">Short-overview-of-instruction-loading</a></p>
<h2 id="short-overview-of-instruction-loading">Short overview of instruction loading</h2>
<p>To give some background to the rest of this document, here follows a quick overview of how instructions are loaded.
*
The loader reads and decodes one instruction at a time from the BEAM code and creates a generic instruction. Many transformation rules must look at multiple instructions, so the loader will keep multiple generic instructions in a linked list.
*
The loader tries to apply transformation rules against the generic instructions in the linked list. If a rule matches, the matched instructions will be removed and replaced with new generic instructions constructed from the right side of the transformation.
*
If a transformation rule matched, the loader applies the transformation rules again.
*
If no transformation rule match, the loader will begin rewriting the first of generic instructions to a specific instruction.
*
First the loader will search for a specific operation where the types for all operands match the type for the generic instruction. The first matching instruction will be selected.
beam_makeops
has ordered the specific instructions so that instructions with more specific operands comes before instructions with less specific operands. For example,
<em>move_nx</em>
is more specific than
<em>move_cx</em>
. If the first operand is
<em>[]</em>
(NIL),
<em>move_nx</em>
will be selected.
*
Given the opcode for the selected specific instruction, the loader looks up the pointer to the C code for the instruction and stores in the code area for the module being loaded.
*
The loader translates each operand to a machine word and stores it in the code area. The operand type for the selected specific instruction guides the translation. For example, if the type is
<em>e</em>
, the value of the operand is an index into an arry of external functions and will be translated to a pointer to the export entry for the function to call. If the type is
<em>x</em>
, the number of the X register will be multiplied by the word size to produce a byte offset.
*
The loader runs the packing engine to pack multiple operands into a single word. The packing engine is controlled by a small program, which is a string where each character is an instruction. For example, the code to pack the operands for
<em>move_xy</em>
is
<em>"22#"</em>
(on a 64-bit machine). That program will pack the byte offsets for both registers into the same word as the pointer to C code.
<a name="Running-beammakeops">Running-beammakeops</a></p>
<h2 id="running-beam_makeops">Running beam_makeops</h2>
<p>beam_makeops
is found in
<em>$ERL_TOP/erts/emulator/utils</em>
. Options start with a hyphen (
<em>-</em>
). The options are followed by the name of the input files. By convention, all input files have the extension
<em>.tab</em>
, but is not enforced by
beam_makeops
.
<a name="Running-beammakeops_The-outdir-option">Running-beammakeops_The-outdir-option</a></p>
<h2 id="the-outdir-option">The -outdir option</h2>
<p>The option
<em>-outdir Directory</em>
specifies the output directory for the generated files. Default is the current working directory.
<a name="Running-beammakeops_Running-beammakeops-for-the-compiler">Running-beammakeops_Running-beammakeops-for-the-compiler</a></p>
<h2 id="running-beam_makeops-for-the-compiler">Running beam_makeops for the compiler</h2>
<p>Give the option
<em>-compiler</em>
to produce output files for the compiler. The following files will be written to the output directory:
*
<em>beam_opcodes.erl</em>
- Used primarily by
<em>beam_asm</em>
and
<em>beam_diasm</em>
.
*
<em>beam_opcode.hrl</em>
- Used by
<em>beam_asm</em>
. It contains tag definitions used for encoding instruction operands.</p>
<p>The input file should only contain the definition of BEAM
<strong>FORMAT</strong>
NUMBER and external generic instructions. (Everything else would be ignored.)
<a name="Running-beammakeops_Running-beammakeops-for-the-emulator">Running-beammakeops_Running-beammakeops-for-the-emulator</a></p>
<h2 id="running-beam_makeops-for-the-emulator">Running beam_makeops for the emulator</h2>
<p>Give the option
<em>-emulator</em>
to produce output files for the emulator. The following output files will be generated in the output directory.
*
<em>beam_hot.h</em>
,
<em>beam_warm.h</em>
,
<em>beam_cold.</em>
h - Implementation of instructions. Included inside the
<em>process_main()</em>
function in
<em>beam_emu.c</em>
.
*
<em>beam_opcodes.c</em>
- Defines static data used by the loader (
<em>beam_load.c</em>
). Data about generic instructions, specific instructions (including how to pack their operands), and transformation rules are all part of this file.
*
<em>beam_opcodes.h</em>
- Miscellanous preprocessor definitions, mainly used by
<em>beam_load.c</em>
but also by
<em>beam_{hot,warm,cold}.h</em>
.
*
<em>beam_pred_funcs.h</em>
- Included by
<em>beam_load.c</em>
. Contains defines needed to call guard constraints in transformation rules.
*
<em>beam_tr_funcs.h</em>
- Included by
<em>beam_load.c</em>
. Contains defines needed to call a C function to the right of a transformation rule.</p>
<p>The following options can be given:
* <em>wordsize 32|64</em> - Defines the word size. Default is 32.
*
<em>code-model Model</em>
- The code model as given to
<em>-mcmodel</em>
option for GCC. Default is
<em>unknown</em>
. If the code model is
<em>small</em>
(and the word size is 64 bits),
beam_makeops
will pack operands into the upper 32 bits of the instruction word.
*
<em>DSymbol=0|1</em>
- Defines the value for a symbol. The symbol can be used in
<em>%if</em>
and
<em>%unless</em>
directives.
<a name="Syntax-of-tab-files">Syntax-of-tab-files</a></p>
<h2 id="syntax-of-tab-files">Syntax of .tab files</h2>
<p><a name="Syntax-of-tab-files_Comments">Syntax-of-tab-files_Comments</a></p>
<h2 id="comments">Comments</h2>
<p>Any line starting with <em>#</em> is a comment and is ignored.</p>
<p>A line with
<em>//</em>
is also a comment. It is recommended to only use this style of comments in files that define implementations of instructions.</p>
<p>A long line can be broken into shorter lines by a placing a
**
before the newline.
<a name="Syntax-of-tab-files_Variable-definitions">Syntax-of-tab-files_Variable-definitions</a></p>
<h2 id="variable-definitions">Variable definitions</h2>
<p>A variable definition binds a variable to a Perl variable. It is only meaningful to add a new definition if
beam_makeops
is updated at the same time to use the variable. A variable definition looks this:</p>
<p><strong>name</strong> = <strong>value</strong> [;]</p>
<p>where
<strong>name</strong>
is the name of a Perl variable in
beam_makeops
, and
<strong>value</strong>
is the value to be given to the variable. The line can optionally end with a
<em>;</em>
(to avoid messing up the C indentation mode in Emacs).</p>
<p>Here follows a description of the variables that are defined.
<a name="Syntax-of-tab-files_Variable-definitions_BEAMFORMATNUMBER">Syntax-of-tab-files_Variable-definitions_BEAMFORMATNUMBER</a></p>
<h2 id="beam_format_number">BEAM_FORMAT_NUMBER</h2>
<p><em>genop.tab</em> has the following definition:</p>
<pre><code>
BEAM_FORMAT_NUMBER=0

</code></pre>

<p>It defines the version of the instruction set (which will be included in the code header in the BEAM code). Theoretically, the version could be bumped, and all instructions changed. In practice, we would have two support two instruction sets in the runtime system for at least two releases, so it will probably never happen in practice.
<a name="Syntax-of-tab-files_Variable-definitions_GCREGEXP">Syntax-of-tab-files_Variable-definitions_GCREGEXP</a></p>
<h2 id="gc_regexp">GC_REGEXP</h2>
<p>In
<em>macros.tab</em>
, there is a definition of
<em>GC_REGEXP</em>
. It will be described in
<a href="#Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_The-GCREGEXP-definition">a later section</a>
.
<a name="Syntax-of-tab-files_Directives">Syntax-of-tab-files_Directives</a></p>
<h2 id="directives">Directives</h2>
<p>There are directives to classify specific instructions depending on how frequently used they are:
*
<em>%hot</em>
- Implementation will be placed in
<em>beam_hot.h</em>
. Frequently executed instructions.
*
<em>%warm</em>
- Implementation will be placed in
<em>beam_warm.h</em>
. Binary syntax instructions.
*
<em>%cold</em>
- Implementation will be placed in
<em>beam_cold.h</em>
. Trace instructions and infrequently used instructions.</p>
<p>Default is
<em>%hot</em>
. The directives will be applied to declarations of the specific instruction that follow. Here is an example:</p>
<pre><code>
%cold
is_number f? xy
%hot

</code></pre>

<p><a name="Syntax-of-tab-files_Directives_Conditional-compilation-directives">Syntax-of-tab-files_Directives_Conditional-compilation-directives</a></p>
<h2 id="conditional-compilation-directives">Conditional compilation directives</h2>
<p>The
<em>%if</em>
directive includes a range of lines if a condition is true. For example:</p>
<pre><code>
%if ARCH_64
i_bs_get_integer_32 x f? x
%endif

</code></pre>

<p>The specific instruction
<em>i_bs_get_integer_32</em>
will only be defined on a 64-bit machine.</p>
<p>The condition can be inverted by using
<em>%unless</em>
instead of
<em>%if</em>
:</p>
<pre><code>
%unless NO_FPE_SIGNALS
fcheckerror p =&gt; i_fcheckerror
i_fcheckerror
fclearerror
%endif

</code></pre>

<p>It is also possible to add an <em>%else</em> clause:</p>
<pre><code>
%if ARCH_64
BS_SAFE_MUL(A, B, Fail, Dst) {
    Uint64 res = ($A) * ($B);
    if (res / $B != $A) {
        $Fail;
    }
    $Dst = res;
}
%else
BS_SAFE_MUL(A, B, Fail, Dst) {
    Uint64 res = (Uint64)($A) * (Uint64)($B);
    if ((res &gt;&gt; (8*sizeof(Uint))) != 0) {
        $Fail;
    }
    $Dst = res;
}
%endif

</code></pre>

<p><a name="Syntax-of-tab-files_Directives_Symbols-that-are-defined-in-directives">Syntax-of-tab-files_Directives_Symbols-that-are-defined-in-directives</a></p>
<h2 id="symbols-that-are-defined-in-directives">Symbols that are defined in directives</h2>
<p>The following symbols are always defined.
* <em>ARCH_64</em> - is 1 for a 64-bit machine, and 0 otherwise.
* <em>ARCH_32</em> - is 1 for 32-bit machine, and 1 otherwise.</p>
<p>The
<em>Makefile</em>
for building the emulator currently defines the following symbols by using the
<em>-D</em>
option on the command line for
beam_makeops
.
*
<em>NO_FPE_SIGNALS</em>
- 1 if FPE signals are not enable in runtime system, 0 otherwise.
*
<em>USE_VM_PROBES</em>
- 1 if the runtime system is compiled to use VM probes (support for dtrace or systemtap), 0 otherwise.
<a name="Syntax-of-tab-files_Defining-external-generic-instructions">Syntax-of-tab-files_Defining-external-generic-instructions</a></p>
<h2 id="defining-external-generic-instructions">Defining external generic instructions</h2>
<p>External generic BEAM instructions are known to both the compiler and the runtime system. They remain stable between releases. A new major release may add more external generic instructions, but must not change the semantics for a previously defined instruction.</p>
<p>The syntax for an external generic instruction is as follows:</p>
<p><strong>opcode</strong> : [-] <strong>name</strong> / <strong>arity</strong></p>
<p><strong>opcode</strong> is an integer greater than or equal to 1.</p>
<p><strong>name</strong>
is an identifier starting with a lowercase letter.
<strong>arity</strong>
is an integer denoting the number of operands.</p>
<p><strong>name</strong>
can optionally be preceded by
<em>-</em>
to indicate that it has been obsoleted. The compiler is not allowed to generate BEAM files that use obsolete instructions and the loader will refuse to load BEAM files that use obsolete instructions.</p>
<p>It only makes sense to define external generic instructions in the file
<em>genop.tab</em>
in
<em>lib/compiler/src</em>
, because the compiler must know about them in order to use them.</p>
<p>New instructions must be added at the end of the file, with higher numbers than the previous instructions.
<a name="Syntax-of-tab-files_Defining-internal-generic-instructions">Syntax-of-tab-files_Defining-internal-generic-instructions</a></p>
<h2 id="defining-internal-generic-instructions">Defining internal generic instructions</h2>
<p>Internal generic instructions are known only to the runtime system and can be changed at any time without compatibility issues.</p>
<p>There are two ways to define internal generic instructions:
*
Implicitly when a specific instruction is defined. This is by far the most common way. Whenever a specific instruction is created,
beam_makeops
automatically creates an internal generic instruction if it does not previously exist.
*
Explicitly. This is necessary only when a generic instruction does not have any corresponding specific instruction.</p>
<p>The syntax for an internal generic instruction is as follows:</p>
<p><strong>name</strong> / <strong>arity</strong></p>
<p><strong>name</strong>
is an identifier starting with a lowercase letter.
<strong>arity</strong>
is an integer denoting the number of operands.
<a name="Syntax-of-tab-files_About-generic-instructions-in-general">Syntax-of-tab-files_About-generic-instructions-in-general</a></p>
<h2 id="about-generic-instructions-in-general">About generic instructions in general</h2>
<p>Each generic instruction has an opcode. The opcode is an integer, greater than or equal to 1. For an external generic instruction, it must be explicitly given
<em>genop.tab</em>
, while internal generic instructions are automatically numbered by
beam_makeops
.</p>
<p>The identity of a generic instruction is its name combined with its arity. That means that it is allowed to define two distinct generic instructions having the same name but with different arities. For example:</p>
<pre><code>
move_window/5
move_window/6

</code></pre>

<p>Each operand of a generic instruction is tagged with its type. A generic instruction can have one of the following types:
* <em>x</em> - X register.
* <em>y</em> - Y register.
* <em>l</em> - Floating point register number.
* <em>i</em> - Tagged literal integer.
* <em>a</em> - Tagged literal atom.
* <em>n</em> - NIL ( <em>[]</em> , the empty list).
*
<em>q</em>
- Literal that don't fit in a word, that is an object stored on the heap such as a list or tuple. Any heap object type is supported, even types that don't have real literals such as external references.
* <em>f</em> - Non-zero failure label.
* <em>p</em> - Zero failure label.
*
<em>u</em>
- Untagged integer that fits in a machine word. It is used for many different purposes, such as the number of live registers in
<em>test_heap/2</em>
, as a reference to the export for
<em>call_ext/2</em>
, and as the flags operand for binary syntax instructions. When the generic instruction is translated to a specific instruction, the type for the operand in the specific operation will tell the loader how to treat the operand.
*
<em>o</em>
- Overflow. If the value for an
<em>u</em>
operand does not fit in a machine word, the type of the operand will be changed to
<em>o</em>
(with no associated value). Currently only used internally in the loader in the guard constraint function
<em>binary_too_big()</em>
.
* <em>v</em> - Arity value. Only used internally in the loader.
<a name="Syntax-of-tab-files_Defining-specific-instructions">Syntax-of-tab-files_Defining-specific-instructions</a></p>
<h2 id="defining-specific-instructions">Defining specific instructions</h2>
<p>The specific instructions are known only to the runtime system and are the instructions that are actually executed. They can be changed at any time without causing compatibility issues.</p>
<p>A specific instruction can have at most 6 operands.</p>
<p>A specific instruction is defined by first giving its name followed by the types for each operand. For example:</p>
<pre><code>
 move x y

</code></pre>

<p>Internally, for example in the generated code and in the output from the BEAM disassembler, the instruction
<em>move x y</em>
will be called
<em>move_xy</em>
.</p>
<p>The name for a specific instruction is an identifier starting with a lowercase letter. A type is an lowercase or uppercase letter.</p>
<p>All specific instructions with a given name must have the same number of operands. That is, the following is
not
allowed:</p>
<pre><code>
 move x x
 move x y x y

</code></pre>

<p>Here follows the type letters that more or less directly corresponds to the types for generic instructions.
*
<em>x</em>
- X register. Will be loaded as a byte offset to the X register relative to the base of X register array. (Can be packed with other operands.)
*
<em>y</em>
- Y register. Will be loaded as a byte offset to the Y register relative to the stack frame. (Can be packed with other operands.)
*
<em>r</em>
- X register 0. An implicit operand that will not be stored in the loaded code.
*
<em>l</em>
- Floating point register number. (Can be packed with other operands.)
*
<em>i</em> - Tagged literal integer (a SMALL that will fit in one word).
* <em>a</em> - Tagged atom.
*
<em>n</em>
- NIL or the empty list. (Will not be stored in the loaded code.)
*
<em>q</em>
- Tagged CONS or BOXED pointer. That is, a term such as a list or tuple. Any heap object type is supported, even types that don't have real literals such as external references.
*
<em>f</em>
- Failure label (non-zero). The target for a branch or call instruction.
*
<em>p</em>
- The 0 failure label, meaning that an exception should be raised if the instruction fails. (Will not be stored in the loaded code.)
*
<em>c</em>
- Any literal term; that is, immediate literals such as SMALL, and CONS or BOXED pointers to literals. (Can be used where the operand in the generic instruction has one of the types
<em>i</em>
,
<em>a</em>
,
<em>n</em>
, or
<em>q</em>
.)</p>
<p>The types that follow do a type test of the operand at runtime; thus, they are generally more expensive in terms of runtime than the types described earlier. However, those operand types are needed to avoid a combinatorial explosion in the number of specific instructions and overall code size of
<em>process_main()</em>
.
*
<em>s</em>
- Tagged source: X register, Y register, or a literal term. The tag will be tested at runtime to retrieve the value from an X register, a Y register, or simply use the value as a tagged Erlang term. (Implementation note: An X register is tagged as a pid, and a Y register as a port. Therefore the literal term must not contain a port or pid.)
*
<em>S</em>
- Tagged source register (X or Y). The tag will be tested at runtime to retrieve the value from an X register or a Y register. Slighly cheaper than
<em>s</em>
.
*
<em>d</em>
- Tagged destination register (X or Y). The tag will be tested at runtime to set up a pointer to the destination register. If the instrution performs a garbarge collection, it must use the
<em>$REFRESH_GEN_DEST()</em>
macro to refresh the pointer before storing to it (there are more details about that in a later section).
*
<em>j</em>
- A failure label (combination of
<em>f</em>
and
<em>p</em>
). If the branch target 0, an exception will be raised if instruction fails, otherwise control will be transfered to the target address.</p>
<p>The types that follows are all applied to an operand that has the
<em>u</em>
type.
*
<em>t</em>
- An untagged integer that will fit in 12 bits (0-4096). It can be packed with other operands in a word. Most often used as the number of live registers in instructions such as
<em>test_heap</em>
.
*
<em>I</em>
- An untagged integer that will fit in 32 bits. It can be packed with other operands in a word on a 64-bit system.
*
<em>W</em>
- Untagged integer or pointer. Not possible to pack with other operands.
*
<em>e</em>
- Pointer to an export entry. Use by call instructions that call other modules, such as
<em>call_ext</em>
.
* <em>L</em> - A label. Only used by the <em>label/1</em> instruction.
*
<em>b</em>
- Pointer to BIF. Used by instructions that BIFs, such as
<em>call_bif</em>
.
*
<em>A</em>
- A tagged arityvalue. Used in instructions that test the arity of a tuple.
* <em>P</em> - A byte offset into a tuple.
*
<em>Q</em>
- A byte offset into the stack. Used for updating the frame pointer register. Can be packed with other operands.</p>
<p>When the loader translates a generic instruction a specific instruction, it will choose the most specific instruction that will fit the types. Consider the following two instructions:</p>
<pre><code>
move c x
move n x

</code></pre>

<p>The
<em>c</em>
operand can encode any literal value, including NIL. The
<em>n</em>
operand only works for NIL. If we have the generic instruction
<em>{move,nil,{x,1}}</em>
, the loader will translate it to
<em>move_nx 1</em>
because
<em>move n x</em>
is more specific.
<em>move_nx</em>
could be slightly faster or smaller (depending on the architecture), because the
<em>[]</em>
is not stored explicitly as an operand.
<a name="Syntax-of-tab-files_Defining-specific-instructions_Syntactic-sugar-for-specific-instructions">Syntax-of-tab-files_Defining-specific-instructions_Syntactic-sugar-for-specific-instructions</a></p>
<h2 id="syntactic-sugar-for-specific-instructions">Syntactic sugar for specific instructions</h2>
<p>It is possible to specify more than one type letter for each operand. Here is an example:</p>
<pre><code>
move cxy xy

</code></pre>

<p>This is syntactic sugar for:</p>
<pre><code>
move c x
move c y
move x x
move x y
move y x
move y y

</code></pre>

<p>Note the difference between
<em>move c xy</em>
and
<em>move c d</em>
. Note that
<em>move c xy</em>
is equivalent to the following two definitions:</p>
<pre><code>
move c x
move c y

</code></pre>

<p>On the other hand,
<em>move c d</em>
is a single instruction. At runtime, the
<em>d</em>
operand will be tested to see whether it refers to an X register or a Y register, and a pointer to the register will be set up.
<a name="Syntax-of-tab-files_Defining-specific-instructions_The--type-modifier">Syntax-of-tab-files_Defining-specific-instructions_The--type-modifier</a></p>
<h2 id="the-type-modifier">The '?' type modifier</h2>
<p>The character
<em>?</em>
can be added to the end of an operand to indicate that the operand will not be used every time the instruction is executed. For example:</p>
<pre><code>
allocate_heap t I t?
is_eq_exact f? x xy

</code></pre>

<p>In
<em>allocate_heap</em>
, the last operand is the number of live registers. It will only be used if there is not enough heap space and a garbage collection must be performed.</p>
<p>In
<em>is_eq_exact</em>
, the failure address (the first operand) will only be used if the two register operands are not equal.</p>
<p>Knowing that an operand is not always used can improve how packing is done for some instructions.</p>
<p>For the
<em>allocate_heap</em>
instruction, without the
<em>?</em>
the packing would be done like this:</p>
<pre><code>
     +--------------------+--------------------+
I -&gt; |       Stack needed | &amp;&amp;lb_allocate_heap +
     +--------------------+--------------------+
     |        Heap needed | Live registers     +
     +--------------------+--------------------+

</code></pre>

<p>"Stack needed" and "Heap needed" are always used, but they are in different words. Thus, at runtime the
<em>allocate_heap</em>
instruction must read both words from memory even though it will not always use "Live registers".</p>
<p>With the <em>?</em> , the operands will be packed like this:</p>
<pre><code>
     +--------------------+--------------------+
I -&gt; |     Live registers | &amp;&amp;lb_allocate_heap +
     +--------------------+--------------------+
     |        Heap needed |       Stack needed +
     +--------------------+--------------------+

</code></pre>

<p>Now "Stack needed" and "Heap needed" are in the same word.
<a name="Syntax-of-tab-files_Defining-transformation-rules">Syntax-of-tab-files_Defining-transformation-rules</a></p>
<h2 id="defining-transformation-rules">Defining transformation rules</h2>
<p>Transformation rules are used to rewrite generic instructions to other generic instructions. The transformations rules are applied repeatedly until no rule match. At that point, the first instruction in the resulting instruction sequence will be converted to a specific instruction and added to the code for the module being loaded. Then the transformation rules for the remaining instructions are run in the same way.</p>
<p>A rule is recognized by its right-pointer arrow:
<em>=&gt;</em>
. To the left of the arrow is one or more instruction patterns, separated by
<em>|</em>
. To the right of the arrow is zero or more instructions, separated by
<em>|</em>
. If the instructions from the BEAM code matches the instruction patterns on the left side, they will be replaced with instructions on the right side (or removed if there are no instructions on the right).
<a name="Syntax-of-tab-files_Defining-transformation-rules_Defining-instruction-patterns">Syntax-of-tab-files_Defining-transformation-rules_Defining-instruction-patterns</a></p>
<h2 id="defining-instruction-patterns">Defining instruction patterns</h2>
<p>We will start looking at the patterns on the left side of the arrow.</p>
<p>A pattern for an instruction consists of its name, followed by a pattern for each of its operands. The operand patterns are separated by spaces.</p>
<p>The simplest possible pattern is a variable. Just like in Erlang, a variable must begin with an uppercase letter. If the same variable is used in multiple operands, the pattern will only match if the operands are equal. For example:</p>
<pre><code>
move Same Same =&gt;

</code></pre>

<p>This pattern will match if the operands for
<em>move</em>
are the same. If the pattern match, the instruction will be removed. (That used to be an actual rule a long time ago when the compiler would occasionally produce instructions such as
<em>{move,{x,2},{x,2}}</em>
.)</p>
<p>Variables that have been bound on the left side can be used on the right side. For example, this rule will rewrite all
<em>move</em>
instructions to
<em>assign</em>
instructions with the operands swapped:</p>
<pre><code>
move Src Dst =&gt; assign Dst Src

</code></pre>

<p>If we only want to match operands of a certain type, we can use a type constraint. A type constraint consists of one or more lowercase letters, each specifying a type. For example:</p>
<pre><code>
is_integer Fail an =&gt; jump Fail

</code></pre>

<p>The second operand pattern,
<em>an</em>
, will match if the second operand is either an atom or NIL (the empty list). In case of a match, the
<em>is_integer/2</em>
instruction will be replaced with a
<em>jump/1</em>
instruction.</p>
<p>An operand pattern can bind a variable and constrain the type at the same time by following the variable with a
<em>=</em>
and the constraint. For example:</p>
<pre><code>
is_eq_exact Fail=f R=xy C=q =&gt; i_is_eq_exact_literal Fail R C

</code></pre>

<p>Here the
<em>is_eq_exact</em>
instruction is replaced with a specialized instruction that only compares literals, but only if the first operand is a register and the second operand is a literal.
<a name="Syntax-of-tab-files_Defining-transformation-rules_Further-constraining-patterns">Syntax-of-tab-files_Defining-transformation-rules_Further-constraining-patterns</a></p>
<h2 id="further-constraining-patterns">Further constraining patterns</h2>
<p>In addition to specifying a type letter, the actual value for the type can be specified. For example:</p>
<pre><code>
move C=c x==1 =&gt; move_x1 C

</code></pre>

<p>Here the second operand of
<em>move</em>
is constrained to be X register 1.</p>
<p>When specifying an atom constraint, the atom is written as it would be in the C source code. That is, it needs an
<em>am_</em>
prefix, and it must be listed in
<em>atom.names</em>
. For example:</p>
<pre><code>
is_boolean Fail=f a==am_true =&gt;
is_boolean Fail=f a==am_false =&gt;

</code></pre>

<p>There are several constraints available for testing whether a call is to a BIF or a function.</p>
<p>The constraint
<em>u$is_bif</em>
will test whether the given operand refers to a BIF. For example:</p>
<pre><code>
call_ext u Bif=u$is_bif =&gt; call_bif Bif
call_ext u Func         =&gt; i_call_ext Func

</code></pre>

<p>The
<em>call_ext</em>
instruction can be used to call functions written in Erlang as well as BIFs (or more properly called SNIFs). The
<em>u$is_bif</em>
constraint will match if the operand refers to a BIF (that is, if it is listed in the file
<em>bif.tab</em>
). Note that
<em>u$is_bif</em>
should only be applied to operands that are known to contain an index to the import table chunk in the BEAM file (such operands have the type
<em>b</em>
or
<em>e</em>
in the corresponding specific instruction). If applied to other
<em>u</em>
operands, it will at best return a nonsense result.</p>
<p>The
<em>u$is_not_bif</em>
constraint matches if the operand does not refer to a BIF (not listed in
<em>bif.tab</em>
). For example:</p>
<pre><code>
move S X0=x==0 | line Loc | call_ext_last Ar Func=u$is_not_bif D =&gt; \
     move S X0 | call_ext_last Ar Func D

</code></pre>

<p>The
<em>u$bif:Module:Name/Arity</em>
constraint tests whether the given operand refers to a specific BIF. Note that
<em>Module:Name/Arity</em>
must
be an existing BIF defined in
<em>bif.tab</em>
, or there will be a compilation error. It is useful when a call to a specific BIF should be replaced with an instruction as in this example:</p>
<pre><code>
gc_bif2 Fail Live u$bif:erlang:splus/2 S1 S2 Dst =&gt; \
     gen_plus Fail Live S1 S2 Dst

</code></pre>

<p>Here the call to the GC BIF
<em>'+'/2</em>
will be replaced with the instruction
<em>gen_plus/5</em>
. Note that the same name as used in the C source code must be used for the BIF, which in this case is
<em>splus</em>
. It is defined like this in
<em>bit.tab</em>
:</p>
<pre><code>
ubif erlang:'+'/2 splus_2

</code></pre>

<p>The
<em>u$func:Module:Name/Arity</em>
will test whether the given operand is a a specific function. Here is an example:</p>
<pre><code>
bif1 Fail u$func:erlang:is_constant/1 Src Dst =&gt; too_old_compiler

</code></pre>

<p><em>is_constant/1</em>
used to be a BIF a long time ago. The transformation replaces the call with the
<em>too_old_compiler</em>
instruction which will produce a nicer error message than the default error would be for a missing guard BIF.
<a name="Syntax-of-tab-files_Defining-transformation-rules_Type-constraints-allowed-in-patterns">Syntax-of-tab-files_Defining-transformation-rules_Type-constraints-allowed-in-patterns</a></p>
<h2 id="type-constraints-allowed-in-patterns">Type constraints allowed in patterns</h2>
<p>Here are all type letters that are allowed on the left side of a transformation rule.
* <em>u</em> - An untagged integer that fits in a machine word.
* <em>x</em> - X register.
* <em>y</em> - Y register.
* <em>l</em> - Floating point register number.
* <em>i</em> - Tagged literal integer.
* <em>a</em> - Tagged literal atom.
* <em>n</em> - NIL ( <em>[]</em> , the empty list).
*
<em>q</em> - Literals that don't fit in a word, such as list or tuples.
* <em>f</em> - Non-zero failure label.
* <em>p</em> - The zero failure label.
* <em>j</em> - Any label. Equivalent to <em>fp</em> .
* <em>c</em> - Any literal term. Equivalent to <em>ainq</em> .
*
<em>s</em>
- X register, Y register, or any literal term. Equivalent to
<em>xyc</em>
.
*
<em>d</em>
- X or Y register. Equivalent to
<em>xy</em>
. (In a pattern
<em>d</em>
will match both source and destination registers. As an operand in a specific instruction, it must only be used for a destination register.)
*
<em>o</em>
- Overflow. An untagged integer that does not fit in a machine word.
<a name="Syntax-of-tab-files_Defining-transformation-rules_Guard-constraints">Syntax-of-tab-files_Defining-transformation-rules_Guard-constraints</a></p>
<h2 id="guard-constraints">Guard constraints</h2>
<p>If the constraints described so far is not enough, additional constraints can be written in C in
<em>beam_load.c</em>
and be called as a guard function on the left side of the transformation. If the guard function returns a non-zero value, the matching of the rule will continue, otherwise the match will fail. For example:</p>
<pre><code>
ensure_map Lit=q | literal_is_map(Lit) =&gt;

</code></pre>

<p>The guard test
<em>literal_is_map/1</em>
tests whether the given literal is a map. If the literal is a map, the instruction is unnecessary and can be removed.</p>
<p>It is outside the scope for this document to describe in detail how such guard functions are written, but for the curious here is the implementation of
<em>literal_is_map()</em>
:</p>
<pre><code>
static int
literal_is_map(LoaderState* stp, GenOpArg Lit)
{
    Eterm term;

    ASSERT(Lit.type == TAG_q);
    term = stp-&gt;literals[Lit.val].term;
    return is_map(term);
}

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-transformation-rules_Handling-instruction-with-variable-number-of-operands">Syntax-of-tab-files_Defining-transformation-rules_Handling-instruction-with-variable-number-of-operands</a></p>
<h2 id="handling-instruction-with-variable-number-of-operands">Handling instruction with variable number of operands</h2>
<p>Some instructions, such as
<em>select_val/3</em>
, essentially has a variable number of operands. Such instructions have a
<em>{list,[...]}</em>
operand as their last operand in the BEAM assembly code. For example:</p>
<pre><code>
{select_val,{x,0},
            {f,1},
            {list,[{atom,b},{f,4},{atom,a},{f,5}]}}.

</code></pre>

<p>The loader will convert a
<em>{list,[...]}</em>
operand to an
<em>u</em>
operand whose value is the number of elements in the list, followed by each element in the list. The instruction above would be translated to the following generic instruction:</p>
<pre><code>
{select_val,{x,0},{f,1},{u,4},{atom,b},{f,4},{atom,a},{f,5}}

</code></pre>

<p>To match a variable number of arguments we need to use the special operand type</p>
<hr />
<p>like this:</p>
<pre><code>
select_val Src=aiq Fail=f Size=u List=* =&gt; \
    i_const_select_val Src Fail Size List

</code></pre>

<p>This transformation renames a
<em>select_val/3</em>
instruction with a constant source operand to
<em>i_const_select_val/3</em>
.
<a name="Syntax-of-tab-files_Defining-transformation-rules_Constructing-new-instructions-on-the-right-side">Syntax-of-tab-files_Defining-transformation-rules_Constructing-new-instructions-on-the-right-side</a></p>
<h2 id="constructing-new-instructions-on-the-right-side">Constructing new instructions on the right side</h2>
<p>The most common operand on the right side is a variable that was bound while matching the left side. For example:</p>
<pre><code>
trim N Remaining =&gt; i_trim N

</code></pre>

<p>An operand can also be a type letter to construct an operand of that type. Each type has a default value. For example, the type
<em>x</em>
has the default value 1023, which is the highest X register. That makes
<em>x</em>
on the right side a convenient shortcut for a temporary X register. For example:</p>
<pre><code>
is_number Fail Literal=q =&gt; move Literal x | is_number Fail x

</code></pre>

<p>If the second operand for
<em>is_number/2</em>
is a literal, it will be moved to X register 1023. Then
<em>is_number/2</em>
will test whether the value stored in X register 1023 is a number.</p>
<p>This kind of transformation is useful when it is rare that an operand can be anything else but a register. In the case of
<em>is_number/2</em>
, the second operand is always a register unless the compiler optimizations have been disabled.</p>
<p>If the default value is not suitable, the type letter can be followed by
<em>=</em>
and a value. Most types take an integer value. The value for an atom is written the same way as in the C source code. For example, the atom
<em>false</em>
is written as
<em>am_false</em>
. The atom must be listed in
<em>atom.names</em>
.</p>
<p>Here is an example showing how values can be specified:</p>
<pre><code>
bs_put_utf32 Fail=j Flags=u Src=s =&gt; \
    i_bs_validate_unicode Fail Src | \
    bs_put_integer Fail i=32 u=1 Flags Src

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-transformation-rules_Type-letters-on-the-right-side">Syntax-of-tab-files_Defining-transformation-rules_Type-letters-on-the-right-side</a></p>
<h2 id="type-letters-on-the-right-side">Type letters on the right side</h2>
<p>Here follows all types that are allowed to be used in operands for instructions being constructed on the right side of a transformation rule.
* <em>u</em> - Construct an untagged integer. The default value is 0.
*
<em>x</em>
- X register. The default value is 1023. That makes
<em>x</em>
convenient to use as a temporary X register.
* <em>y</em> - Y register. The default value is 0.
* <em>l</em> - Foating point register number. The default value is 0.
* <em>i</em> - Tagged literal integer. The default value is 0.
*
<em>a</em>
- Tagged atom. The default value is the empty atom (
<em>am_Empty</em>
).
* <em>n</em> - NIL ( <em>[]</em> , the empty list).
<a name="Syntax-of-tab-files_Defining-transformation-rules_Function-call-on-the-right-side">Syntax-of-tab-files_Defining-transformation-rules_Function-call-on-the-right-side</a></p>
<h2 id="function-call-on-the-right-side">Function call on the right side</h2>
<p>Transformations that are not possible to describe with the rule language as described here can be written as a C function in
<em>beam_load.c</em>
and called from the right side of a transformation. The left side of the transformation will perform the match and bind operands to variables. The variables can then be passed to a generator function on the right side. For example:</p>
<pre><code>
bif2 Fail=j u$bif:erlang:element/2 Index=s Tuple=xy Dst=d =&gt; \
    gen_element(Jump, Index, Tuple, Dst)

</code></pre>

<p>This transformation rule matches a call to the BIF
<em>element/2</em>
. The operands will be captured and the function
<em>gen_element()</em>
will be called.</p>
<p><em>gen_element()</em>
will produce one of two instructions depending on
<em>Index</em>
. If
<em>Index</em>
is an integer in the range from 1 up to the maximum tuple size, the instruction
<em>i_fast_element/2</em>
will be produced, otherwise the instruction
<em>i_element/4</em>
will be produced. The corresponding specific instructions are:</p>
<pre><code>
i_fast_element xy j? I d
i_element xy j? s d

</code></pre>

<p>The
<em>i_fast_element/2</em>
instruction is faster because the tuple is already an untagged integer. It also knows that the index is at least 1, so it does not have to test for that. The
<em>i_element/4</em>
instruction will have to fetch the index from a register, test that it is an integer, and untag the integer.</p>
<p>It is outside the scope of this document to describe in detail how generator functions are written, but for the curious, here is the implementation of
<em>gen_element()</em>
:</p>
<pre><code>
static GenOp*
gen_element(LoaderState* stp, GenOpArg Fail,
   GenOpArg Index, GenOpArg Tuple, GenOpArg Dst)
{
    GenOp* op;

    NEW_GENOP(stp, op);
    op-&gt;arity = 4;
    op-&gt;next = NULL;

    if (Index.type == TAG_i &amp;&amp; Index.val &gt; 0 &amp;&amp;
       Index.val &lt;= ERTS_MAX_TUPLE_SIZE &amp;&amp;
       (Tuple.type == TAG_x || Tuple.type == TAG_y)) {
        op-&gt;op = genop_i_fast_element_4;
        op-&gt;a[0] = Tuple;
        op-&gt;a[1] = Fail;
        op-&gt;a[2].type = TAG_u;
        op-&gt;a[2].val = Index.val;
        op-&gt;a[3] = Dst;
    } else {
        op-&gt;op = genop_i_element_4;
        op-&gt;a[0] = Tuple;
        op-&gt;a[1] = Fail;
        op-&gt;a[2] = Index;
        op-&gt;a[3] = Dst;
    }

    return op;
}

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation">Syntax-of-tab-files_Defining-the-implementation</a></p>
<h2 id="defining-the-implementation">Defining the implementation</h2>
<p>The actual implementation of instructions are also defined in
<em>.tab</em>
files processed by
beam_makeops
. For practical reasons, instruction definitions are stored in several files, at the time of writing in the following files:</p>
<pre><code>
bif_instrs.tab
arith_instrs.tab
bs_instrs.tab
float_instrs.tab
instrs.tab
map_instrs.tab
msg_instrs.tab
select_instrs.tab
trace_instrs.tab

</code></pre>

<p>There is also a file that only contains macro definitions:</p>
<pre><code>
macros.tab

</code></pre>

<p>The syntax of each file is similar to C code. In fact, most of the contents
<strong>is</strong>
C code, interspersed with macro invocations.</p>
<p>To allow Emacs to auto-indent the code, each file starts with the following line:</p>
<pre><code>
// -*- c -*-

</code></pre>

<p>To avoid messing up the indentation, all comments are written as C++ style comments (
<em>//</em>
) instead of
<em>#</em>
. Note that a comment must start at the beginning of a line.</p>
<p>The meat of an instruction definition file are macro definitions. We have seen this macro definition before:</p>
<pre><code>
move(Src, Dst) {
    $Dst = $Src;
}

</code></pre>

<p>A macro definitions must start at the beginning of the line (no spaces allowed), the opening curly bracket must be on the same line, and the finishing curly bracket must be at the beginning of a line. It is recommended that the macro body is properly indented.</p>
<p>As a convention, the macro arguments in the head all start with an uppercase letter. In the body, the macro arguments can be expanded by preceding them with
<em>$</em>
.</p>
<p>A macro definition whose name and arity matches a family of specific instructions is assumed to be the implementation of that instruction.</p>
<p>A macro can also be invoked from within another macro. For example,
<em>move_deallocate_return/2</em>
avoids repeating code by invoking
<em>$deallocate_return()</em>
as a macro:</p>
<pre><code>
move_deallocate_return(Src, Deallocate) {
    x(0) = $Src;
    $deallocate_return($Deallocate);
}

</code></pre>

<p>Here is the definition of <em>deallocate_return/1</em> :</p>
<pre><code>
deallocate_return(Deallocate) {
    //| -no_next
    int words_to_pop = $Deallocate;
    SET_I((BeamInstr *) cp_val(*E));
    E = ADD_BYTE_OFFSET(E, words_to_pop);
    CHECK_TERM(x(0));
    DispatchReturn;
}

</code></pre>

<p>The expanded code for <em>move_deallocate_return</em> will look this:</p>
<pre><code>
OpCase(move_deallocate_return_cQ):
{
  x(0) = I[1];
  do {
    int words_to_pop = Qb(BeamExtraData(I[0]));
    SET_I((BeamInstr *) cp_val(*E));
    E = ADD_BYTE_OFFSET(E, words_to_pop);
    CHECK_TERM(x(0));
    DispatchReturn;
  } while (0);
}

</code></pre>

<p>When expanding macros,
beam_makeops
wraps the expansion in a
<em>do</em>
/
<em>while</em>
wrapper unless
beam_makeops
can clearly see that no wrapper is needed. In this case, the wrapper is needed.</p>
<p>Note that arguments for macros cannot be complex expressions, because the arguments are split on
<em>,</em>
. For example, the following would not work because
beam_makeops
would split the expression into two arguments:</p>
<pre><code>
$deallocate_return(get_deallocation(y, $Deallocate));

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_Code-generation-directives">Syntax-of-tab-files_Defining-the-implementation_Code-generation-directives</a></p>
<h2 id="code-generation-directives">Code generation directives</h2>
<p>Within macro definitions,
<em>//</em>
comments are in general not treated specially. They will be copied to the file with the generated code along with the rest of code in the body.</p>
<p>However, there is an exception. Within a macro definition, a line that starts with whitespace followed by
<em>//|</em>
is treated specially. The rest of the line is assumed to contain directives to control code generation.</p>
<p>Currently, two code generation directives are recognized:
* <em>-no_prefetch</em>
* <em>-no_next</em>
<a name="Syntax-of-tab-files_Defining-the-implementation_Code-generation-directives_The-noprefetch-directive">Syntax-of-tab-files_Defining-the-implementation_Code-generation-directives_The-noprefetch-directive</a></p>
<h2 id="the-no_prefetch-directive">The -no_prefetch directive</h2>
<p>To see what
<em>-no_prefetch</em>
does, let's first look at the default code generation. Here is the code generated for
<em>move_cx</em>
:</p>
<pre><code>
OpCase(move_cx):
{
  BeamInstr next_pf = BeamCodeAddr(I[2]);
  xb(BeamExtraData(I[0])) = I[1];
  I += 2;
  ASSERT(VALID_INSTR(next_pf));
  GotoPF(next_pf);
}

</code></pre>

<p>Note that the very first thing done is to fetch the address to the next instruction. The reason is that it usually improves performance.</p>
<p>Just as a demonstration, we can add a
<em>-no_prefetch</em>
directive to the
<em>move/2</em>
instruction:</p>
<pre><code>
move(Src, Dst) {
    //| -no_prefetch
    $Dst = $Src;
}

</code></pre>

<p>We can see that the prefetch is no longer done:</p>
<pre><code>
OpCase(move_cx):
{
  xb(BeamExtraData(I[0])) = I[1];
  I += 2;
  ASSERT(VALID_INSTR(*I));
  Goto(*I);
}

</code></pre>

<p>When would we want to turn off the prefetch in practice?</p>
<p>In instructions that will not always execute the next instruction. For example:</p>
<pre><code>
is_atom(Fail, Src) {
    if (is_not_atom($Src)) {
        $FAIL($Fail);
    }
}

// From macros.tab
FAIL(Fail) {
    //| -no_prefetch
    $SET_I_REL($Fail);
    Goto(*I);
}

</code></pre>

<p><em>is_atom/2</em>
may either execute the next instruction (if the second operand is an atom) or branch to the failure label.</p>
<p>The generated code looks like this:</p>
<pre><code>
OpCase(is_atom_fx):
{
  if (is_not_atom(xb(I[1]))) {
    ASSERT(VALID_INSTR(*(I + (fb(BeamExtraData(I[0]))) + 0)));
    I += fb(BeamExtraData(I[0])) + 0;;
    Goto(*I);;
  }
  I += 2;
  ASSERT(VALID_INSTR(*I));
  Goto(*I);
}

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_Code-generation-directives_The-nonext-directive">Syntax-of-tab-files_Defining-the-implementation_Code-generation-directives_The-nonext-directive</a></p>
<h2 id="the-no_next-directive">The -no_next directive</h2>
<p>Next we will look at when the
<em>-no_next</em>
directive can be used. Here is the
<em>jump/1</em>
instruction:</p>
<pre><code>
jump(Fail) {
    $JUMP($Fail);
}

// From macros.tab
JUMP(Fail) {
    //| -no_next
    $SET_I_REL($Fail);
    Goto(*I);
}

</code></pre>

<p>The generated code looks like this:</p>
<pre><code>
OpCase(jump_f):
{
  ASSERT(VALID_INSTR(*(I + (fb(BeamExtraData(I[0]))) + 0)));
  I += fb(BeamExtraData(I[0])) + 0;;
  Goto(*I);;
}

</code></pre>

<p>If we remove the
<em>-no_next</em>
directive, the code would look like this:</p>
<pre><code>
OpCase(jump_f):
{
  BeamInstr next_pf = BeamCodeAddr(I[1]);
  ASSERT(VALID_INSTR(*(I + (fb(BeamExtraData(I[0]))) + 0)));
  I += fb(BeamExtraData(I[0])) + 0;;
  Goto(*I);;
  I += 1;
  ASSERT(VALID_INSTR(next_pf));
  GotoPF(next_pf);
}

</code></pre>

<p>In the end, the C compiler will probably optimize this code to the same native code as the first version, but the first version is certainly much easier to read for human readers.
<a name="Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file">Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file</a></p>
<h2 id="macros-in-the-macrostab-file">Macros in the macros.tab file</h2>
<p>The file
<em>macros.tab</em>
contains many useful macros. When implementing new instructions it is good practice to look through
<em>macros.tab</em>
to see if any of existing macros can be used rather than re-inventing the wheel.</p>
<p>We will describe a few of the most useful macros here.
<a name="Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_The-GCREGEXP-definition">Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_The-GCREGEXP-definition</a></p>
<h2 id="the-gc_regexp-definition">The GC_REGEXP definition</h2>
<p>The following line defines a regular expression that will recognize a call to a function that does a garbage collection:</p>
<pre><code>
 GC_REGEXP=erts_garbage_collect|erts_gc|GcBifFunction;

</code></pre>

<p>The purpose is that
beam_makeops
can verify that an instruction that does a garbage collection and has an
<em>d</em>
operand uses the
<em>$REFRESH_GEN_DEST()</em>
macro.</p>
<p>If you need to define a new function that does garbage collection, you should give it the prefix
<em>erts_gc_</em>
. If that is not possible you should update the regular expression so that it will match your new function.
<a name="Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_FAILFail">Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_FAILFail</a></p>
<h2 id="failfail">FAIL(Fail)</h2>
<p>Branch to
<em>$Fail</em>
. Will suppress prefetch (
<em>-no_prefetch</em>
). Typical use:</p>
<pre><code>
is_nonempty_list(Fail, Src) {
    if (is_not_list($Src)) {
        $FAIL($Fail);
    }
}

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_JUMPFail">Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_JUMPFail</a></p>
<h2 id="jumpfail">JUMP(Fail)</h2>
<p>Branch to
<em>$Fail</em>
. Suppresses generation of dispatch of the next instruction (
<em>-no_next</em>
). Typical use:</p>
<pre><code>
jump(Fail) {
    $JUMP($Fail);
}

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_GCTESTNeedStack-NeedHeap-Live">Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_GCTESTNeedStack-NeedHeap-Live</a></p>
<h2 id="gc_testneedstack-needheap-live">GC_TEST(NeedStack, NeedHeap, Live)</h2>
<p><em>$GC_TEST(NeedStack, NeedHeap, Live)</em>
tests that given amount of stack space and heap space is available. If not it will do a garbage collection. Typical use:</p>
<pre><code>
test_heap(Nh, Live) {
    $GC_TEST(0, $Nh, $Live);
}

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_AHNeedStack-NeedHeap-Live">Syntax-of-tab-files_Defining-the-implementation_Macros-in-the-macrostab-file_AHNeedStack-NeedHeap-Live</a></p>
<h2 id="ahneedstack-needheap-live">AH(NeedStack, NeedHeap, Live)</h2>
<p><em>AH(NeedStack, NeedHeap, Live)</em>
allocates a stack frame and optionally additional heap space.
<a name="Syntax-of-tab-files_Defining-the-implementation_Predefined-macros-and-variables">Syntax-of-tab-files_Defining-the-implementation_Predefined-macros-and-variables</a></p>
<h2 id="pre-defined-macros-and-variables">Pre-defined macros and variables</h2>
<p>beam_makeops
defines several built-in macros and pre-bound variables.
<a name="Syntax-of-tab-files_Defining-the-implementation_Predefined-macros-and-variables_The-NEXTINSTRUCTION-prebound-variable">Syntax-of-tab-files_Defining-the-implementation_Predefined-macros-and-variables_The-NEXTINSTRUCTION-prebound-variable</a></p>
<h2 id="the-next_instruction-pre-bound-variable">The NEXT_INSTRUCTION pre-bound variable</h2>
<p>The NEXT_INSTRUCTION is a pre-bound variable that is available in all instructions. It expands to the address of the next instruction.</p>
<p>Here is an example:</p>
<pre><code>
i_call(CallDest) {
    SET_CP(c_p, $NEXT_INSTRUCTION);
    $DISPATCH_REL($CallDest);
}

</code></pre>

<p>When calling a function, the return address is first stored in
<em>c_p-&gt;cp</em>
(using the
<em>SET_CP()</em>
macro defined in
<em>beam_emu.c</em>
), and then control is transferred to the callee. Here is the generated code:</p>
<pre><code>
OpCase(i_call_f):
{
  SET_CP(c_p, I+1);
  ASSERT(VALID_INSTR(*(I + (fb(BeamExtraData(I[0]))) + 0)));
  I += fb(BeamExtraData(I[0])) + 0;;
  DTRACE_LOCAL_CALL(c_p, erts_code_to_codemfa(I));
  Dispatch();;
}

</code></pre>

<p>We can see that that
<em>$NEXT_INSTRUCTION</em>
has been expanded to
<em>I+1</em>
. That makes sense since the size of the
<em>i_call_f/1</em>
instruction is one word.
<a name="Syntax-of-tab-files_Defining-the-implementation_Predefined-macros-and-variables_The-IPADJUSTMENT-prebound-variable">Syntax-of-tab-files_Defining-the-implementation_Predefined-macros-and-variables_The-IPADJUSTMENT-prebound-variable</a></p>
<h2 id="the-ip_adjustment-pre-bound-variable">The IP_ADJUSTMENT pre-bound variable</h2>
<p><em>$IP_ADJUSTMENT</em>
is usually 0. In a few combined instructions (described below) it can be non-zero. It is used like this in
<em>macros.tab</em>
:</p>
<pre><code>
SET_I_REL(Offset) {
    ASSERT(VALID_INSTR(*(I + ($Offset) + $IP_ADJUSTMENT)));
    I += $Offset + $IP_ADJUSTMENT;
}

</code></pre>

<p>Avoid using
<em>IP_ADJUSTMENT</em>
directly. Use
<em>SET_I_REL()</em>
or one of the macros that invoke such as
<em>FAIL()</em>
or
<em>JUMP()</em>
defined in
<em>macros.tab</em>
.
<a name="Syntax-of-tab-files_Defining-the-implementation_Predefined-macro-functions">Syntax-of-tab-files_Defining-the-implementation_Predefined-macro-functions</a></p>
<h2 id="pre-defined-macro-functions">Pre-defined macro functions</h2>
<p><a name="Syntax-of-tab-files_Defining-the-implementation_Predefined-macro-functions_The-IF-macro">Syntax-of-tab-files_Defining-the-implementation_Predefined-macro-functions_The-IF-macro</a></p>
<h2 id="the-if-macro">The IF() macro</h2>
<p><em>$IF(Expr, IfTrue, IfFalse)</em>
evaluates
<em>Expr</em>
, which must be a valid Perl expression (which for simple numeric expressions have the same syntax as C). If
<em>Expr</em>
evaluates to 0, the entire
<em>IF()</em>
expression will be replaced with
<em>IfFalse</em>
, otherwise it will be replaced with
<em>IfTrue</em>
.</p>
<p>See the description of <em>OPERAND_POSITION()</em> for an example.
<a name="Syntax-of-tab-files_Defining-the-implementation_Predefined-macro-functions_The-OPERANDPOSITION-macro">Syntax-of-tab-files_Defining-the-implementation_Predefined-macro-functions_The-OPERANDPOSITION-macro</a></p>
<h2 id="the-operand_position-macro">The OPERAND_POSITION() macro</h2>
<p><em>$OPERAND_POSITION(Expr)</em>
returns the position for
<em>Expr</em>
, if
<em>Expr</em>
is an operand that is not packed. The first operand is at position 1.</p>
<p>Returns 0 otherwise.</p>
<p>This macro could be used like this in order to share code:</p>
<pre><code>
FAIL(Fail) {
    //| -no_prefetch
    $IF($OPERAND_POSITION($Fail) == 1 &amp;&amp; $IP_ADJUSTMENT == 0,
        goto common_jump,
        $DO_JUMP($Fail));
}

DO_JUMP(Fail) {
    $SET_I_REL($Fail);
    Goto(*I));
}

// In beam_emu.c:
common_jump:
   I += I[1];
   Goto(*I));

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_The-REFRESHGENDEST-macro">Syntax-of-tab-files_Defining-the-implementation_The-REFRESHGENDEST-macro</a></p>
<h2 id="the-refresh_gen_dest-macro">The $REFRESH_GEN_DEST() macro</h2>
<p>When a specific instruction has a
<em>d</em>
operand, early during execution of the instruction, a pointer will be initialized to point to the X or Y register in question.</p>
<p>If there is a garbage collection before the result is stored, the stack will move and if the
<em>d</em>
operand refered to a Y register, the pointer will no longer be valid. (Y registers are stored on the stack.)</p>
<p>In those circumstances,
<em>$REFRESH_GEN_DEST()</em>
must be invoked to set up the pointer again.
beam_makeops
will notice if there is a call to a function that does a garbage collection and
<em>$REFRESH_GEN_DEST()</em>
is not called.</p>
<p>Here is a complete example. The
<em>new_map</em>
instruction is defined like this:</p>
<pre><code>
new_map d t I

</code></pre>

<p>It is implemented like this:</p>
<pre><code>
new_map(Dst, Live, N) {
    Eterm res;

    HEAVY_SWAPOUT;
    res = erts_gc_new_map(c_p, reg, $Live, $N, $NEXT_INSTRUCTION);
    HEAVY_SWAPIN;
    $REFRESH_GEN_DEST();
    $Dst = res;
    $NEXT($NEXT_INSTRUCTION+$N);
}

</code></pre>

<p>If we have forgotten the
<em>$REFRESH_GEN_DEST()</em>
there would be a message similar to this:</p>
<pre><code>
pointer to destination register is invalid after GC -- use $REFRESH_GEN_DEST()
... from the body of new_map at beam/map_instrs.tab(30)

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_Combined-instructions">Syntax-of-tab-files_Defining-the-implementation_Combined-instructions</a></p>
<h2 id="combined-instructions">Combined instructions</h2>
<p>Problem
: For frequently executed instructions we want to use "fast" operands types such as
<em>x</em>
and
<em>y</em>
, as opposed to
<em>s</em>
or
<em>S</em>
. To avoid an explosion in code size, we want to share most of the implementation between the instructions. Here are the specific instructions for
<em>i_increment/5</em>
:</p>
<pre><code>
i_increment r W t d
i_increment x W t d
i_increment y W t d

</code></pre>

<p>The <em>i_increment</em> instruction is implemented like this:</p>
<pre><code>
i_increment(Source, IncrementVal, Live, Dst) {
    Eterm increment_reg_source = $Source;
    Eterm increment_val = $IncrementVal;
    Uint live;
    Eterm result;

    if (ERTS_LIKELY(is_small(increment_reg_val))) {
        Sint i = signed_val(increment_reg_val) + increment_val;
        if (ERTS_LIKELY(IS_SSMALL(i))) {
            $Dst = make_small(i);
            $NEXT0();
        }
    }
    live = $Live;
    HEAVY_SWAPOUT;
    reg[live] = increment_reg_val;
    reg[live+1] = make_small(increment_val);
    result = erts_gc_mixed_plus(c_p, reg, live);
    HEAVY_SWAPIN;
    ERTS_HOLE_CHECK(c_p);
    if (ERTS_LIKELY(is_value(result))) {
        $REFRESH_GEN_DEST();
        $Dst = result;
        $NEXT0();
    }
    ASSERT(c_p-&gt;freason != BADMATCH || is_value(c_p-&gt;fvalue));
    goto find_func_info;
}

</code></pre>

<p>There will be three almost identical copies of the code. Given the size of the code, that could be too high cost to pay.</p>
<p>To avoid the three copies of the code, we could use only one specific instruction:</p>
<pre><code>
i_increment S W t d

</code></pre>

<p>(The same implementation as above will work.)</p>
<p>That reduces the code size, but is slower because
<em>S</em>
means that there will be extra code to test whether the operand refers to an X register or a Y register.</p>
<p>Solution
: We can use "combined instructions". Combined instructions are combined from instruction fragments. The bulk of the code can be shared.</p>
<p>Here we will show how
<em>i_increment</em>
can be implemented as a combined instruction. We will show each individual fragment first, and then show how to connect them together. First we will need a variable that we can store the value fetched from the register in:</p>
<pre><code>
increment.head() {
    Eterm increment_reg_val;
}

</code></pre>

<p>The name
<em>increment</em>
is the name of the group that the fragment belongs to. Note that it does not need to have the same name as the instruction. The group name is followed by
<em>.</em>
and the name of the fragment. The name
<em>head</em>
is pre-defined. The code in it will be placed at the beginning of a block, so that all fragments in the group can access it.</p>
<p>Next we define the fragment that will pick up the value from the register from the first operand:</p>
<pre><code>
increment.fetch(Src) {
    increment_reg_val = $Src;
}

</code></pre>

<p>We call this fragment
<em>fetch</em>
. This fragment will be duplicated three times, one for each value of the first operand (
<em>r</em>
,
<em>x</em>
, and
<em>y</em>
).</p>
<p>Next we define the main part of the code that do the actual incrementing.</p>
<pre><code>
increment.execute(IncrementVal, Live, Dst) {
    Eterm increment_val = $IncrementVal;
    Uint live;
    Eterm result;

    if (ERTS_LIKELY(is_small(increment_reg_val))) {
        Sint i = signed_val(increment_reg_val) + increment_val;
        if (ERTS_LIKELY(IS_SSMALL(i))) {
            $Dst = make_small(i);
            $NEXT0();
        }
    }
    live = $Live;
    HEAVY_SWAPOUT;
    reg[live] = increment_reg_val;
    reg[live+1] = make_small(increment_val);
    result = erts_gc_mixed_plus(c_p, reg, live);
    HEAVY_SWAPIN;
    ERTS_HOLE_CHECK(c_p);
    if (ERTS_LIKELY(is_value(result))) {
        $REFRESH_GEN_DEST();
        $Dst = result;
        $NEXT0();
    }
    ASSERT(c_p-&gt;freason != BADMATCH || is_value(c_p-&gt;fvalue));
    goto find_func_info;
}

</code></pre>

<p>We call this fragment
<em>execute</em>
. It will handle the three remaining operands (
<em>W t d</em>
). There will only be one copy of this fragment.</p>
<p>Now that we have defined the fragments, we need to inform
beam_makeops
how they should be connected:</p>
<pre><code>
i_increment := increment.fetch.execute;

</code></pre>

<p>To the left of the
<em>:=</em>
is the name of the specific instruction that should be implemented by the fragments, in this case
<em>i_increment</em>
. To the right of
<em>:=</em>
is the name of the group with the fragments, followed by a
<em>.</em>
. Then the name of the fragments in the group are listed in the order they should be executed. Note that the
<em>head</em>
fragment is not listed.</p>
<p>The line ends in
<em>;</em>
(to avoid messing up the indentation in Emacs).</p>
<p>(Note that in practice the
<em>:=</em>
line is usually placed before the fragments.)</p>
<p>The generated code looks like this:</p>
<pre><code>
{
  Eterm increment_reg_val;
  OpCase(i_increment_rWtd):
  {
    increment_reg_val = r(0);
  }
  goto increment__execute;

  OpCase(i_increment_xWtd):
  {
    increment_reg_val = xb(BeamExtraData(I[0]));
  }
  goto increment__execute;

  OpCase(i_increment_yWtd):
  {
    increment_reg_val = yb(BeamExtraData(I[0]));
  }
  goto increment__execute;

  increment__execute:
  {
    // Here follows the code from increment.execute()
    .
    .
    .
}

</code></pre>

<p><a name="Syntax-of-tab-files_Defining-the-implementation_Combined-instructions_Some-notes-about-combined-instructions">Syntax-of-tab-files_Defining-the-implementation_Combined-instructions_Some-notes-about-combined-instructions</a></p>
<h2 id="some-notes-about-combined-instructions">Some notes about combined instructions</h2>
<p>The operands that are different must be at the beginning of the instruction. All operands in the last fragment must have the same operands in all variants of the specific instruction.</p>
<p>As an example, the following specific instructions cannot be implemented as a combined instruction:</p>
<pre><code>
i_times j? t x x d
i_times j? t x y d
i_times j? t s s d

</code></pre>

<p>We would have to change the order of the operands so that the two operands that are different are placed first:</p>
<pre><code>
i_times x x j? t d
i_times x y j? t d
i_times s s j? t d

</code></pre>

<p>We can then define:</p>
<pre><code>
i_times := times.fetch.execute;

times.head {
    Eterm op1, op2;
}

times.fetch(Src1, Src2) {
    op1 = $Src1;
    op2 = $Src2;
}

times.execute(Fail, Live, Dst) {
    // Multiply op1 and op2.
    .
    .
    .
}

</code></pre>

<p>Several instructions can share a group. As an example, the following instructions have different names, but in the end they all create a binary. The last two operands are common for all of them:</p>
<pre><code>
i_bs_init_fail       xy j? t? x
i_bs_init_fail_heap s I j? t? x
i_bs_init                W t? x
i_bs_init_heap         W I t? x

</code></pre>

<p>The instructions are defined like this (formatted with extra spaces for clarity):</p>
<pre><code>
i_bs_init_fail_heap := bs_init . fail_heap . verify . execute;
i_bs_init_fail      := bs_init . fail      . verify . execute;
i_bs_init           := bs_init .           .  plain . execute;
i_bs_init_heap      := bs_init .               heap . execute;

</code></pre>

<p>Note that the first two instruction have three fragments, while the other two only have two fragments. Here are the fragments:</p>
<pre><code>
bs_init_bits.head() {
    Eterm num_bits_term;
    Uint num_bits;
    Uint alloc;
}

bs_init_bits.plain(NumBits) {
    num_bits = $NumBits;
    alloc = 0;
}

bs_init_bits.heap(NumBits, Alloc) {
    num_bits = $NumBits;
    alloc = $Alloc;
}

bs_init_bits.fail(NumBitsTerm) {
    num_bits_term = $NumBitsTerm;
    alloc = 0;
}

bs_init_bits.fail_heap(NumBitsTerm, Alloc) {
    num_bits_term = $NumBitsTerm;
    alloc = $Alloc;
}

bs_init_bits.verify(Fail) {
    // Verify the num_bits_term, fail using $FAIL
    // if there is a problem.
.
.
.
}

bs_init_bits.execute(Live, Dst) {
   // Long complicated code to a create a binary.
   .
   .
   .
}

</code></pre>

<p>The full definitions of those instructions can be found in
<em>bs_instrs.tab</em>
. The generated code can be found in
<em>beam_warm.h</em>
.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../communication/" class="btn btn-neutral float-right" title="Communication in Erlang">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../atomics/" class="btn btn-neutral" title="atomics"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../atomics/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../communication/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
